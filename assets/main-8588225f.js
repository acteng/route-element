import{S as Fi,i as ki,s as Gi,L as Cp,b as Bi,a as _s,c as At,m as Dt,d as vs,t as K,e as ot,f as Mt,g as Op,h as Ua,u as za,j as Va,k as ja,l as si,n as Pp,o as Wa,p as Rp,q as Tp,r as Tc,v as rt,w as bs,x as Es,y as it,z as Ap,A as Dp,B as Do,C as Ac,D as ci,E as Mp,F as Fp,G as yt,H as Au,I as kp,M as Gp,J as Tt,K as cr,N as Dc,O as to,P as $a,Q as Mc,R as Bp,T as vt,U as Je,V as qp,W as Up,X as qs,Y as U,Z as fr,_ as Fc,$ as zp,a0 as Us}from"./Layout-d596de5b.js";let ut;const kc=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&kc.decode();let eo=null;function Bo(){return(eo===null||eo.byteLength===0)&&(eo=new Uint8Array(ut.memory.buffer)),eo}function $n(e,t){return e=e>>>0,kc.decode(Bo().subarray(e,e+t))}function Vp(e){const t=ut.__externref_table_alloc();return ut.__wbindgen_export_2.set(t,e),t}function _e(e,t){try{return e.apply(this,t)}catch(n){const r=Vp(n);ut.__wbindgen_exn_store(r)}}let Mr=0;const qo=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},jp=typeof qo.encodeInto=="function"?function(e,t){return qo.encodeInto(e,t)}:function(e,t){const n=qo.encode(e);return t.set(n),{read:e.length,written:n.length}};function no(e,t,n){if(n===void 0){const a=qo.encode(e),u=t(a.length,1)>>>0;return Bo().subarray(u,u+a.length).set(a),Mr=a.length,u}let r=e.length,i=t(r,1)>>>0;const o=Bo();let s=0;for(;s<r;s++){const a=e.charCodeAt(s);if(a>127)break;o[i+s]=a}if(s!==r){s!==0&&(e=e.slice(s)),i=n(i,r,r=s+e.length*3,1)>>>0;const a=Bo().subarray(i+s,i+r),u=jp(e,a);s+=u.written,i=n(i,r,s,1)>>>0}return Mr=s,i}let Dr=null;function Ye(){return(Dr===null||Dr.buffer.detached===!0||Dr.buffer.detached===void 0&&Dr.buffer!==ut.memory.buffer)&&(Dr=new DataView(ut.memory.buffer)),Dr}function Yi(e){return e==null}const Du=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>{ut.__wbindgen_export_6.get(e.dtor)(e.a,e.b)});function Wp(e,t,n,r){const i={a:e,b:t,cnt:1,dtor:n},o=(...s)=>{i.cnt++;const a=i.a;i.a=0;try{return r(a,i.b,...s)}finally{--i.cnt===0?(ut.__wbindgen_export_6.get(i.dtor)(a,i.b),Du.unregister(i)):i.a=a}};return o.original=i,Du.register(o,i,i),o}function fa(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){const i=e.length;let o="[";i>0&&(o+=fa(e[0]));for(let s=1;s<i;s++)o+=", "+fa(e[s]);return o+="]",o}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(n&&n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function $p(e,t){const n=no(t,ut.__wbindgen_malloc,ut.__wbindgen_realloc),r=Mr;return ut.evalRoute(e,n,r)}function Xp(e,t,n){ut.closure287_externref_shim(e,t,n)}function Yp(e,t,n,r){ut.closure308_externref_shim(e,t,n,r)}const Hp=["omit","same-origin","include"],Jp=["same-origin","no-cors","cors","navigate"];async function Kp(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function Qp(){const e={};return e.wbg={},e.wbg.__wbg_abort_19de2f828ee0874a=function(t){t.abort()},e.wbg.__wbg_append_daea8d1dbe91d314=function(){return _e(function(t,n,r,i,o){t.append($n(n,r),$n(i,o))},arguments)},e.wbg.__wbg_arrayBuffer_d004045654bdb712=function(){return _e(function(t){return t.arrayBuffer()},arguments)},e.wbg.__wbg_buffer_6e1d53ff183194fc=function(t){return t.buffer},e.wbg.__wbg_call_0411c0c3c424db9a=function(){return _e(function(t,n,r){return t.call(n,r)},arguments)},e.wbg.__wbg_call_3114932863209ca6=function(){return _e(function(t,n){return t.call(n)},arguments)},e.wbg.__wbg_debug_347b3d1f33e1c28e=function(t){console.debug(t)},e.wbg.__wbg_done_adfd3f40364def50=function(t){return t.done},e.wbg.__wbg_entries_ce82e236f8300a53=function(t){return Object.entries(t)},e.wbg.__wbg_error_2a6b93fdada7ff11=function(t){console.error(t)},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let r,i;try{r=t,i=n,console.error($n(t,n))}finally{ut.__wbindgen_free(r,i,1)}},e.wbg.__wbg_fetch_2367a4a7762e7c4a=function(t,n){return t.fetch(n)},e.wbg.__wbg_fetch_b335d17f45a8b5a1=function(t){return fetch(t)},e.wbg.__wbg_get_68aa371864aa301a=function(t,n){return t[n>>>0]},e.wbg.__wbg_get_92a4780a3beb5fe9=function(){return _e(function(t,n){return Reflect.get(t,n)},arguments)},e.wbg.__wbg_globalThis_1e2ac1d6eee845b3=function(){return _e(function(){return globalThis.globalThis},arguments)},e.wbg.__wbg_global_f25a574ae080367c=function(){return _e(function(){return global.global},arguments)},e.wbg.__wbg_has_38b228962f492b9b=function(){return _e(function(t,n){return Reflect.has(t,n)},arguments)},e.wbg.__wbg_headers_a5edfea2425875b2=function(t){return t.headers},e.wbg.__wbg_info_b6bd3cb6471c2b4c=function(t){console.info(t)},e.wbg.__wbg_instanceof_ArrayBuffer_435fcead703e2827=function(t){let n;try{n=t instanceof ArrayBuffer}catch{n=!1}return n},e.wbg.__wbg_instanceof_Map_77fd223783fe0068=function(t){let n;try{n=t instanceof Map}catch{n=!1}return n},e.wbg.__wbg_instanceof_Response_0ec26bd2f8a75ca2=function(t){let n;try{n=t instanceof Response}catch{n=!1}return n},e.wbg.__wbg_instanceof_Uint8Array_9b67296cab48238f=function(t){let n;try{n=t instanceof Uint8Array}catch{n=!1}return n},e.wbg.__wbg_isArray_fcd559a3bcfde1e9=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_4de146aa53f6e470=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_7a20c20ce22add0f=function(){return Symbol.iterator},e.wbg.__wbg_length_2e63ba34c4121df5=function(t){return t.length},e.wbg.__wbg_length_e74df4881604f1d9=function(t){return t.length},e.wbg.__wbg_log_d818ca3cab23fc77=function(t){console.log(t)},e.wbg.__wbg_new_076cac58bb698dd4=function(){return new Object},e.wbg.__wbg_new_1e8ca58d170d6ad0=function(t,n){try{var r={a:t,b:n},i=(s,a)=>{const u=r.a;r.a=0;try{return Yp(u,r.b,s,a)}finally{r.a=u}};return new Promise(i)}finally{r.a=r.b=0}},e.wbg.__wbg_new_23362fa370a0a372=function(t){return new Uint8Array(t)},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_new_93cf40e4f48fe902=function(){return _e(function(){return new AbortController},arguments)},e.wbg.__wbg_new_e2ec18a02bb844cb=function(){return _e(function(){return new Headers},arguments)},e.wbg.__wbg_newnoargs_19a249f4eceaaac3=function(t,n){return new Function($n(t,n))},e.wbg.__wbg_newwithbyteoffsetandlength_ee8def7000b7b2be=function(t,n,r){return new Uint8Array(t,n>>>0,r>>>0)},e.wbg.__wbg_newwithstrandinit_ee1418802d8d481c=function(){return _e(function(t,n,r){return new Request($n(t,n),r)},arguments)},e.wbg.__wbg_next_c591766a7286b02a=function(){return _e(function(t){return t.next()},arguments)},e.wbg.__wbg_next_f387ecc56a94ba00=function(t){return t.next},e.wbg.__wbg_queueMicrotask_3d422e1ba49c2500=function(t){return t.queueMicrotask},e.wbg.__wbg_queueMicrotask_f301663ccadbb7d0=function(t){queueMicrotask(t)},e.wbg.__wbg_resolve_6a311e8bb26423ab=function(t){return Promise.resolve(t)},e.wbg.__wbg_self_ac4343e4047b83cc=function(){return _e(function(){return self.self},arguments)},e.wbg.__wbg_set_7b70226104a82921=function(t,n,r){t.set(n,r>>>0)},e.wbg.__wbg_setbody_a548052400c35526=function(t,n){t.body=n},e.wbg.__wbg_setcredentials_6ae5f65d7ad22ffc=function(t,n){t.credentials=Hp[n]},e.wbg.__wbg_setheaders_1f2d4c08004f4227=function(t,n){t.headers=n},e.wbg.__wbg_setmethod_c704d56d480d8580=function(t,n,r){t.method=$n(n,r)},e.wbg.__wbg_setmode_26f3e7a9f55ddb2d=function(t,n){t.mode=Jp[n]},e.wbg.__wbg_setsignal_de26efe32c2e413d=function(t,n){t.signal=n},e.wbg.__wbg_signal_fd2d6d0644f16ad8=function(t){return t.signal},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){const r=n.stack,i=no(r,ut.__wbindgen_malloc,ut.__wbindgen_realloc),o=Mr;Ye().setInt32(t+4*1,o,!0),Ye().setInt32(t+4*0,i,!0)},e.wbg.__wbg_status_5f9868b7ed8dd175=function(t){return t.status},e.wbg.__wbg_stringify_f5476f15b5654a07=function(){return _e(function(t){return JSON.stringify(t)},arguments)},e.wbg.__wbg_then_5c6469c1e1da9e59=function(t,n){return t.then(n)},e.wbg.__wbg_then_faeb8aed8c1629b7=function(t,n,r){return t.then(n,r)},e.wbg.__wbg_url_ba6c16bbafb59895=function(t,n){const r=n.url,i=no(r,ut.__wbindgen_malloc,ut.__wbindgen_realloc),o=Mr;Ye().setInt32(t+4*1,o,!0),Ye().setInt32(t+4*0,i,!0)},e.wbg.__wbg_value_30db1d77772f3236=function(t){return t.value},e.wbg.__wbg_warn_a6963915e4da61f6=function(t){console.warn(t)},e.wbg.__wbg_window_1a23defd102c72f4=function(){return _e(function(){return window.window},arguments)},e.wbg.__wbindgen_bigint_from_i64=function(t){return t},e.wbg.__wbindgen_bigint_from_u64=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_bigint_get_as_i64=function(t,n){const r=n,i=typeof r=="bigint"?r:void 0;Ye().setBigInt64(t+8*1,Yi(i)?BigInt(0):i,!0),Ye().setInt32(t+4*0,!Yi(i),!0)},e.wbg.__wbindgen_boolean_get=function(t){const n=t;return typeof n=="boolean"?n?1:0:2},e.wbg.__wbindgen_cb_drop=function(t){const n=t.original;return n.cnt--==1?(n.a=0,!0):!1},e.wbg.__wbindgen_closure_wrapper817=function(t,n,r){return Wp(t,n,288,Xp)},e.wbg.__wbindgen_debug_string=function(t,n){const r=fa(n),i=no(r,ut.__wbindgen_malloc,ut.__wbindgen_realloc),o=Mr;Ye().setInt32(t+4*1,o,!0),Ye().setInt32(t+4*0,i,!0)},e.wbg.__wbindgen_error_new=function(t,n){return new Error($n(t,n))},e.wbg.__wbindgen_in=function(t,n){return t in n},e.wbg.__wbindgen_init_externref_table=function(){const t=ut.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_is_bigint=function(t){return typeof t=="bigint"},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_is_object=function(t){const n=t;return typeof n=="object"&&n!==null},e.wbg.__wbindgen_is_undefined=function(t){return t===void 0},e.wbg.__wbindgen_jsval_eq=function(t,n){return t===n},e.wbg.__wbindgen_jsval_loose_eq=function(t,n){return t==n},e.wbg.__wbindgen_memory=function(){return ut.memory},e.wbg.__wbindgen_number_get=function(t,n){const r=n,i=typeof r=="number"?r:void 0;Ye().setFloat64(t+8*1,Yi(i)?0:i,!0),Ye().setInt32(t+4*0,!Yi(i),!0)},e.wbg.__wbindgen_string_get=function(t,n){const r=n,i=typeof r=="string"?r:void 0;var o=Yi(i)?0:no(i,ut.__wbindgen_malloc,ut.__wbindgen_realloc),s=Mr;Ye().setInt32(t+4*1,s,!0),Ye().setInt32(t+4*0,o,!0)},e.wbg.__wbindgen_string_new=function(t,n){return $n(t,n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error($n(t,n))},e}function Zp(e,t){return ut=e.exports,Gc.__wbindgen_wasm_module=t,Dr=null,eo=null,ut.__wbindgen_start(),ut}async function Gc(e){if(ut!==void 0)return ut;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("backend_bg.wasm",self.location));const t=Qp();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await Kp(await e,t);return Zp(n,r)}function th(e){let t;const n=e[15].default,r=Ua(n,e,e[23],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&8388608)&&za(r,n,i,i[23],t?ja(n,i[23],o,null):Va(i[23]),null)},i(i){t||(K(r,i),t=!0)},o(i){ot(r,i),t=!1},d(i){r&&r.d(i)}}}function eh(e){let t,n,r;function i(s){e[16](s)}let o={id:e[1],type:"fill",source:e[2],sourceLayer:e[3],beforeId:e[4],beforeLayerType:e[5],paint:e[6],layout:e[7],filter:e[8],minzoom:e[9],maxzoom:e[10],hoverCursor:e[11],manageHoverState:e[12],eventsIfTopMost:e[13],interactive:e[14],$$slots:{default:[th]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.hovered=e[0]),t=new Cp({props:o}),Bi.push(()=>_s(t,"hovered",i)),t.$on("click",e[17]),t.$on("dblclick",e[18]),t.$on("contextmenu",e[19]),t.$on("mouseenter",e[20]),t.$on("mousemove",e[21]),t.$on("mouseleave",e[22]),{c(){At(t.$$.fragment)},m(s,a){Dt(t,s,a),r=!0},p(s,[a]){const u={};a&2&&(u.id=s[1]),a&4&&(u.source=s[2]),a&8&&(u.sourceLayer=s[3]),a&16&&(u.beforeId=s[4]),a&32&&(u.beforeLayerType=s[5]),a&64&&(u.paint=s[6]),a&128&&(u.layout=s[7]),a&256&&(u.filter=s[8]),a&512&&(u.minzoom=s[9]),a&1024&&(u.maxzoom=s[10]),a&2048&&(u.hoverCursor=s[11]),a&4096&&(u.manageHoverState=s[12]),a&8192&&(u.eventsIfTopMost=s[13]),a&16384&&(u.interactive=s[14]),a&8388608&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.hovered=s[0],vs(()=>n=!1)),t.$set(u)},i(s){r||(K(t.$$.fragment,s),r=!0)},o(s){ot(t.$$.fragment,s),r=!1},d(s){Mt(t,s)}}}function nh(e,t,n){let{$$slots:r={},$$scope:i}=t,{id:o=Op("fill")}=t,{source:s=void 0}=t,{sourceLayer:a=void 0}=t,{beforeId:u=void 0}=t,{beforeLayerType:l=void 0}=t,{paint:c}=t,{layout:f=void 0}=t,{filter:p=void 0}=t,{minzoom:h=void 0}=t,{maxzoom:d=void 0}=t,{hoverCursor:_=void 0}=t,{manageHoverState:v=!1}=t,{hovered:E=null}=t,{eventsIfTopMost:S=!1}=t,{interactive:x=!0}=t;function C(N){E=N,n(0,E)}function T(N){si.call(this,e,N)}function W(N){si.call(this,e,N)}function q(N){si.call(this,e,N)}function G(N){si.call(this,e,N)}function O(N){si.call(this,e,N)}function $(N){si.call(this,e,N)}return e.$$set=N=>{"id"in N&&n(1,o=N.id),"source"in N&&n(2,s=N.source),"sourceLayer"in N&&n(3,a=N.sourceLayer),"beforeId"in N&&n(4,u=N.beforeId),"beforeLayerType"in N&&n(5,l=N.beforeLayerType),"paint"in N&&n(6,c=N.paint),"layout"in N&&n(7,f=N.layout),"filter"in N&&n(8,p=N.filter),"minzoom"in N&&n(9,h=N.minzoom),"maxzoom"in N&&n(10,d=N.maxzoom),"hoverCursor"in N&&n(11,_=N.hoverCursor),"manageHoverState"in N&&n(12,v=N.manageHoverState),"hovered"in N&&n(0,E=N.hovered),"eventsIfTopMost"in N&&n(13,S=N.eventsIfTopMost),"interactive"in N&&n(14,x=N.interactive),"$$scope"in N&&n(23,i=N.$$scope)},[E,o,s,a,u,l,c,f,p,h,d,_,v,S,x,r,C,T,W,q,G,O,$,i]}class Bc extends Fi{constructor(t){super(),ki(this,t,nh,eh,Gi,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}var Mu=Object.prototype.toString,qc=function(t){var n=Mu.call(t),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Mu.call(t.callee)==="[object Function]"),r},zs,Fu;function rh(){if(Fu)return zs;Fu=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=qc,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(p){var h=p.constructor;return h&&h.prototype===p},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var p in window)try{if(!l["$"+p]&&t.call(window,p)&&window[p]!==null&&typeof window[p]=="object")try{u(window[p])}catch{return!0}}catch{return!0}return!1}(),f=function(p){if(typeof window>"u"||!c)return u(p);try{return u(p)}catch{return!1}};e=function(h){var d=h!==null&&typeof h=="object",_=n.call(h)==="[object Function]",v=r(h),E=d&&n.call(h)==="[object String]",S=[];if(!d&&!_&&!v)throw new TypeError("Object.keys called on a non-object");var x=s&&_;if(E&&h.length>0&&!t.call(h,0))for(var C=0;C<h.length;++C)S.push(String(C));if(v&&h.length>0)for(var T=0;T<h.length;++T)S.push(String(T));else for(var W in h)!(x&&W==="prototype")&&t.call(h,W)&&S.push(String(W));if(o)for(var q=f(h),G=0;G<a.length;++G)!(q&&a[G]==="constructor")&&t.call(h,a[G])&&S.push(a[G]);return S}}return zs=e,zs}var ih=Array.prototype.slice,oh=qc,ku=Object.keys,Uo=ku?function(t){return ku(t)}:rh(),Gu=Object.keys;Uo.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(r){return oh(r)?Gu(ih.call(r)):Gu(r)})}else Object.keys=Uo;return Object.keys||Uo};var Xa=Uo,sh=Error,ah=EvalError,uh=RangeError,lh=ReferenceError,Uc=SyntaxError,Cr=TypeError,ch=URIError,Is=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0},Bu=typeof Symbol<"u"&&Symbol,fh=Is,Ya=function(){return typeof Bu!="function"||typeof Symbol!="function"||typeof Bu("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:fh()},Vs={__proto__:null,foo:{}},ph=Object,hh=function(){return{__proto__:Vs}.foo===Vs.foo&&!(Vs instanceof ph)},gh="Function.prototype.bind called on incompatible ",dh=Object.prototype.toString,yh=Math.max,mh="[object Function]",qu=function(t,n){for(var r=[],i=0;i<t.length;i+=1)r[i]=t[i];for(var o=0;o<n.length;o+=1)r[o+t.length]=n[o];return r},_h=function(t,n){for(var r=[],i=n||0,o=0;i<t.length;i+=1,o+=1)r[o]=t[i];return r},vh=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n},bh=function(t){var n=this;if(typeof n!="function"||dh.apply(n)!==mh)throw new TypeError(gh+n);for(var r=_h(arguments,1),i,o=function(){if(this instanceof i){var c=n.apply(this,qu(r,arguments));return Object(c)===c?c:this}return n.apply(t,qu(r,arguments))},s=yh(0,n.length-r.length),a=[],u=0;u<s;u++)a[u]="$"+u;if(i=Function("binder","return function ("+vh(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var l=function(){};l.prototype=n.prototype,i.prototype=new l,l.prototype=null}return i},Eh=bh,Ha=Function.prototype.bind||Eh,Ih=Function.prototype.call,Sh=Object.prototype.hasOwnProperty,xh=Ha,zc=xh.call(Ih,Sh),J,wh=sh,Nh=ah,Lh=uh,Ch=lh,di=Uc,gi=Cr,Oh=ch,Vc=Function,js=function(e){try{return Vc('"use strict"; return ('+e+").constructor;")()}catch{}},kr=Object.getOwnPropertyDescriptor;if(kr)try{kr({},"")}catch{kr=null}var Ws=function(){throw new gi},Ph=kr?function(){try{return arguments.callee,Ws}catch{try{return kr(arguments,"callee").get}catch{return Ws}}}():Ws,ai=Ya(),Rh=hh(),Jt=Object.getPrototypeOf||(Rh?function(e){return e.__proto__}:null),li={},Th=typeof Uint8Array>"u"||!Jt?J:Jt(Uint8Array),Gr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?J:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?J:ArrayBuffer,"%ArrayIteratorPrototype%":ai&&Jt?Jt([][Symbol.iterator]()):J,"%AsyncFromSyncIteratorPrototype%":J,"%AsyncFunction%":li,"%AsyncGenerator%":li,"%AsyncGeneratorFunction%":li,"%AsyncIteratorPrototype%":li,"%Atomics%":typeof Atomics>"u"?J:Atomics,"%BigInt%":typeof BigInt>"u"?J:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?J:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?J:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?J:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":wh,"%eval%":eval,"%EvalError%":Nh,"%Float32Array%":typeof Float32Array>"u"?J:Float32Array,"%Float64Array%":typeof Float64Array>"u"?J:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?J:FinalizationRegistry,"%Function%":Vc,"%GeneratorFunction%":li,"%Int8Array%":typeof Int8Array>"u"?J:Int8Array,"%Int16Array%":typeof Int16Array>"u"?J:Int16Array,"%Int32Array%":typeof Int32Array>"u"?J:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ai&&Jt?Jt(Jt([][Symbol.iterator]())):J,"%JSON%":typeof JSON=="object"?JSON:J,"%Map%":typeof Map>"u"?J:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ai||!Jt?J:Jt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?J:Promise,"%Proxy%":typeof Proxy>"u"?J:Proxy,"%RangeError%":Lh,"%ReferenceError%":Ch,"%Reflect%":typeof Reflect>"u"?J:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?J:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ai||!Jt?J:Jt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?J:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ai&&Jt?Jt(""[Symbol.iterator]()):J,"%Symbol%":ai?Symbol:J,"%SyntaxError%":di,"%ThrowTypeError%":Ph,"%TypedArray%":Th,"%TypeError%":gi,"%Uint8Array%":typeof Uint8Array>"u"?J:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?J:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?J:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?J:Uint32Array,"%URIError%":Oh,"%WeakMap%":typeof WeakMap>"u"?J:WeakMap,"%WeakRef%":typeof WeakRef>"u"?J:WeakRef,"%WeakSet%":typeof WeakSet>"u"?J:WeakSet};if(Jt)try{null.error}catch(e){var Ah=Jt(Jt(e));Gr["%Error.prototype%"]=Ah}var Dh=function e(t){var n;if(t==="%AsyncFunction%")n=js("async function () {}");else if(t==="%GeneratorFunction%")n=js("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=js("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Jt&&(n=Jt(i.prototype))}return Gr[t]=n,n},Uu={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xo=Ha,Ho=zc,Mh=xo.call(Function.call,Array.prototype.concat),Fh=xo.call(Function.apply,Array.prototype.splice),zu=xo.call(Function.call,String.prototype.replace),Jo=xo.call(Function.call,String.prototype.slice),kh=xo.call(Function.call,RegExp.prototype.exec),Gh=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Bh=/\\(\\)?/g,qh=function(t){var n=Jo(t,0,1),r=Jo(t,-1);if(n==="%"&&r!=="%")throw new di("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new di("invalid intrinsic syntax, expected opening `%`");var i=[];return zu(t,Gh,function(o,s,a,u){i[i.length]=a?zu(u,Bh,"$1"):s||o}),i},Uh=function(t,n){var r=t,i;if(Ho(Uu,r)&&(i=Uu[r],r="%"+i[0]+"%"),Ho(Gr,r)){var o=Gr[r];if(o===li&&(o=Dh(r)),typeof o>"u"&&!n)throw new gi("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new di("intrinsic "+t+" does not exist!")},zn=function(t,n){if(typeof t!="string"||t.length===0)throw new gi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new gi('"allowMissing" argument must be a boolean');if(kh(/^%?[^%]*%?$/,t)===null)throw new di("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=qh(t),i=r.length>0?r[0]:"",o=Uh("%"+i+"%",n),s=o.name,a=o.value,u=!1,l=o.alias;l&&(i=l[0],Fh(r,Mh([0,1],l)));for(var c=1,f=!0;c<r.length;c+=1){var p=r[c],h=Jo(p,0,1),d=Jo(p,-1);if((h==='"'||h==="'"||h==="`"||d==='"'||d==="'"||d==="`")&&h!==d)throw new di("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(u=!0),i+="."+p,s="%"+i+"%",Ho(Gr,s))a=Gr[s];else if(a!=null){if(!(p in a)){if(!n)throw new gi("base intrinsic for "+t+" exists, but the property is not available.");return}if(kr&&c+1>=r.length){var _=kr(a,p);f=!!_,f&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[p]}else f=Ho(a,p),a=a[p];f&&!u&&(Gr[s]=a)}}return a},$s,Vu;function Ja(){if(Vu)return $s;Vu=1;var e=zn,t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return $s=t,$s}var zh=zn,zo=zh("%Object.getOwnPropertyDescriptor%",!0);if(zo)try{zo([],"length")}catch{zo=null}var Ka=zo,ju=Ja(),Vh=Uc,ui=Cr,Wu=Ka,Qa=function(t,n,r){if(!t||typeof t!="object"&&typeof t!="function")throw new ui("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new ui("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ui("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ui("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ui("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ui("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!Wu&&Wu(t,n);if(ju)ju(t,n,{configurable:s===null&&u?u.configurable:!s,enumerable:i===null&&u?u.enumerable:!i,value:r,writable:o===null&&u?u.writable:!o});else if(a||!i&&!o&&!s)t[n]=r;else throw new Vh("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},pa=Ja(),jc=function(){return!!pa};jc.hasArrayLengthDefineBug=function(){if(!pa)return null;try{return pa([],"length",{value:1}).length!==1}catch{return!0}};var Za=jc,jh=Xa,Wh=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",$h=Object.prototype.toString,Xh=Array.prototype.concat,$u=Qa,Yh=function(e){return typeof e=="function"&&$h.call(e)==="[object Function]"},Wc=Za(),Hh=function(e,t,n,r){if(t in e){if(r===!0){if(e[t]===n)return}else if(!Yh(r)||!r())return}Wc?$u(e,t,n,!0):$u(e,t,n)},$c=function(e,t){var n=arguments.length>2?arguments[2]:{},r=jh(t);Wh&&(r=Xh.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)Hh(e,r[i],t[r[i]],n[r[i]])};$c.supportsDescriptors=!!Wc;var Kr=$c,Xc={exports:{}},Jh=zn,Xu=Qa,Kh=Za(),Yu=Ka,Hu=Cr,Qh=Jh("%Math.floor%"),Zh=function(t,n){if(typeof t!="function")throw new Hu("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||Qh(n)!==n)throw new Hu("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&Yu){var s=Yu(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!r)&&(Kh?Xu(t,"length",n,!0,!0):Xu(t,"length",n)),t};(function(e){var t=Ha,n=zn,r=Zh,i=Cr,o=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(s,o),u=Ja(),l=n("%Math.max%");e.exports=function(p){if(typeof p!="function")throw new i("a function is required");var h=a(t,s,arguments);return r(h,1+l(0,p.length-(arguments.length-1)),!0)};var c=function(){return a(t,o,arguments)};u?u(e.exports,"apply",{value:c}):e.exports.apply=c})(Xc);var qi=Xc.exports,Yc=zn,Hc=qi,tg=Hc(Yc("String.prototype.indexOf")),fn=function(t,n){var r=Yc(t,!!n);return typeof r=="function"&&tg(t,".prototype.")>-1?Hc(r):r},eg=Xa,Jc=Is(),Kc=fn,Ju=Object,ng=Kc("Array.prototype.push"),Ku=Kc("Object.prototype.propertyIsEnumerable"),rg=Jc?Object.getOwnPropertySymbols:null,Qc=function(t,n){if(t==null)throw new TypeError("target must be an object");var r=Ju(t);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var o=Ju(arguments[i]),s=eg(o),a=Jc&&(Object.getOwnPropertySymbols||rg);if(a)for(var u=a(o),l=0;l<u.length;++l){var c=u[l];Ku(o,c)&&ng(s,c)}for(var f=0;f<s.length;++f){var p=s[f];if(Ku(o,p)){var h=o[p];r[p]=h}}}return r},Xs=Qc,ig=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return e!==o},og=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},Zc=function(){return!Object.assign||ig()||og()?Xs:Object.assign},sg=Kr,ag=Zc,ug=function(){var t=ag();return sg(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},lg=Kr,cg=qi,fg=Qc,tf=Zc,pg=ug,hg=cg.apply(tf()),ef=function(t,n){return hg(Object,arguments)};lg(ef,{getPolyfill:tf,implementation:fg,shim:pg});var gg=ef,uo=function(){return typeof(function(){}).name=="string"},io=Object.getOwnPropertyDescriptor;if(io)try{io([],"length")}catch{io=null}uo.functionsHaveConfigurableNames=function(){if(!uo()||!io)return!1;var t=io(function(){},"name");return!!t&&!!t.configurable};var dg=Function.prototype.bind;uo.boundFunctionsHaveNames=function(){return uo()&&typeof dg=="function"&&(function(){}).bind().name!==""};var yg=uo,Qu=Qa,mg=Za(),_g=yg.functionsHaveConfigurableNames(),vg=Cr,bg=function(t,n){if(typeof t!="function")throw new vg("`fn` is not a function");var r=arguments.length>2&&!!arguments[2];return(!r||_g)&&(mg?Qu(t,"name",n,!0,!0):Qu(t,"name",n)),t},Eg=bg,Ig=Cr,Sg=Object,nf=Eg(function(){if(this==null||this!==Sg(this))throw new Ig("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),xg=nf,wg=Kr.supportsDescriptors,Ng=Object.getOwnPropertyDescriptor,rf=function(){if(wg&&/a/mig.flags==="gim"){var t=Ng(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(r,"sticky",{get:function(){n+="y"}}),n==="dy")return t.get}}return xg},Lg=Kr.supportsDescriptors,Cg=rf,Og=Object.getOwnPropertyDescriptor,Pg=Object.defineProperty,Rg=TypeError,Zu=Object.getPrototypeOf,Tg=/a/,Ag=function(){if(!Lg||!Zu)throw new Rg("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=Cg(),n=Zu(Tg),r=Og(n,"flags");return(!r||r.get!==t)&&Pg(n,"flags",{configurable:!0,enumerable:!1,get:t}),t},Dg=Kr,Mg=qi,Fg=nf,of=rf,kg=Ag,sf=Mg(of());Dg(sf,{getPolyfill:of,implementation:Fg,shim:kg});var Gg=sf,Vo={exports:{}},Bg=Is,Qr=function(){return Bg()&&!!Symbol.toStringTag},qg=Qr(),Ug=fn,ha=Ug("Object.prototype.toString"),Ss=function(t){return qg&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:ha(t)==="[object Arguments]"},af=function(t){return Ss(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&ha(t)!=="[object Array]"&&ha(t.callee)==="[object Function]"},zg=function(){return Ss(arguments)}();Ss.isLegacyArguments=af;var uf=zg?Ss:af;const Vg={},jg=Object.freeze(Object.defineProperty({__proto__:null,default:Vg},Symbol.toStringTag,{value:"Module"})),Wg=Pp(jg);var tu=typeof Map=="function"&&Map.prototype,Ys=Object.getOwnPropertyDescriptor&&tu?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ko=tu&&Ys&&typeof Ys.get=="function"?Ys.get:null,tl=tu&&Map.prototype.forEach,eu=typeof Set=="function"&&Set.prototype,Hs=Object.getOwnPropertyDescriptor&&eu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Qo=eu&&Hs&&typeof Hs.get=="function"?Hs.get:null,el=eu&&Set.prototype.forEach,$g=typeof WeakMap=="function"&&WeakMap.prototype,oo=$g?WeakMap.prototype.has:null,Xg=typeof WeakSet=="function"&&WeakSet.prototype,so=Xg?WeakSet.prototype.has:null,Yg=typeof WeakRef=="function"&&WeakRef.prototype,nl=Yg?WeakRef.prototype.deref:null,Hg=Boolean.prototype.valueOf,Jg=Object.prototype.toString,Kg=Function.prototype.toString,Qg=String.prototype.match,nu=String.prototype.slice,gr=String.prototype.replace,Zg=String.prototype.toUpperCase,rl=String.prototype.toLowerCase,lf=RegExp.prototype.test,il=Array.prototype.concat,Dn=Array.prototype.join,td=Array.prototype.slice,ol=Math.floor,ga=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Js=Object.getOwnPropertySymbols,da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,yi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",he=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===yi||"symbol")?Symbol.toStringTag:null,cf=Object.prototype.propertyIsEnumerable,sl=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function al(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||lf.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-ol(-e):ol(e);if(r!==e){var i=String(r),o=nu.call(t,i.length+1);return gr.call(i,n,"$&_")+"."+gr.call(gr.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return gr.call(t,n,"$&_")}var ya=Wg,ul=ya.custom,ll=pf(ul)?ul:null,ed=function e(t,n,r,i){var o=n||{};if(pr(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pr(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=pr(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pr(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pr(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return gf(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return a?al(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return a?al(t,l):l}var c=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=c&&c>0&&typeof t=="object")return ma(t)?"[Array]":"[Object]";var f=vd(o,r);if(typeof i>"u")i=[];else if(hf(i,t)>=0)return"[Circular]";function p(nt,Le,ii){if(Le&&(i=td.call(i),i.push(Le)),ii){var ur={depth:o.depth};return pr(o,"quoteStyle")&&(ur.quoteStyle=o.quoteStyle),e(nt,ur,r+1,i)}return e(nt,o,r+1,i)}if(typeof t=="function"&&!cl(t)){var h=cd(t),d=Mo(t,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(d.length>0?" { "+Dn.call(d,", ")+" }":"")}if(pf(t)){var _=yi?gr.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):da.call(t);return typeof t=="object"&&!yi?Hi(_):_}if(yd(t)){for(var v="<"+rl.call(String(t.nodeName)),E=t.attributes||[],S=0;S<E.length;S++)v+=" "+E[S].name+"="+ff(nd(E[S].value),"double",o);return v+=">",t.childNodes&&t.childNodes.length&&(v+="..."),v+="</"+rl.call(String(t.nodeName))+">",v}if(ma(t)){if(t.length===0)return"[]";var x=Mo(t,p);return f&&!_d(x)?"["+_a(x,f)+"]":"[ "+Dn.call(x,", ")+" ]"}if(id(t)){var C=Mo(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!cf.call(t,"cause")?"{ ["+String(t)+"] "+Dn.call(il.call("[cause]: "+p(t.cause),C),", ")+" }":C.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Dn.call(C,", ")+" }"}if(typeof t=="object"&&s){if(ll&&typeof t[ll]=="function"&&ya)return ya(t,{depth:c-r});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(fd(t)){var T=[];return tl&&tl.call(t,function(nt,Le){T.push(p(Le,t,!0)+" => "+p(nt,t))}),fl("Map",Ko.call(t),T,f)}if(gd(t)){var W=[];return el&&el.call(t,function(nt){W.push(p(nt,t))}),fl("Set",Qo.call(t),W,f)}if(pd(t))return Ks("WeakMap");if(dd(t))return Ks("WeakSet");if(hd(t))return Ks("WeakRef");if(sd(t))return Hi(p(Number(t)));if(ud(t))return Hi(p(ga.call(t)));if(ad(t))return Hi(Hg.call(t));if(od(t))return Hi(p(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Wa)return"{ [object globalThis] }";if(!rd(t)&&!cl(t)){var q=Mo(t,p),G=sl?sl(t)===Object.prototype:t instanceof Object||t.constructor===Object,O=t instanceof Object?"":"null prototype",$=!G&&he&&Object(t)===t&&he in t?nu.call(Or(t),8,-1):O?"Object":"",N=G||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ft=N+($||O?"["+Dn.call(il.call([],$||[],O||[]),": ")+"] ":"");return q.length===0?ft+"{}":f?ft+"{"+_a(q,f)+"}":ft+"{ "+Dn.call(q,", ")+" }"}return String(t)};function ff(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function nd(e){return gr.call(String(e),/"/g,"&quot;")}function ma(e){return Or(e)==="[object Array]"&&(!he||!(typeof e=="object"&&he in e))}function rd(e){return Or(e)==="[object Date]"&&(!he||!(typeof e=="object"&&he in e))}function cl(e){return Or(e)==="[object RegExp]"&&(!he||!(typeof e=="object"&&he in e))}function id(e){return Or(e)==="[object Error]"&&(!he||!(typeof e=="object"&&he in e))}function od(e){return Or(e)==="[object String]"&&(!he||!(typeof e=="object"&&he in e))}function sd(e){return Or(e)==="[object Number]"&&(!he||!(typeof e=="object"&&he in e))}function ad(e){return Or(e)==="[object Boolean]"&&(!he||!(typeof e=="object"&&he in e))}function pf(e){if(yi)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!da)return!1;try{return da.call(e),!0}catch{}return!1}function ud(e){if(!e||typeof e!="object"||!ga)return!1;try{return ga.call(e),!0}catch{}return!1}var ld=Object.prototype.hasOwnProperty||function(e){return e in this};function pr(e,t){return ld.call(e,t)}function Or(e){return Jg.call(e)}function cd(e){if(e.name)return e.name;var t=Qg.call(Kg.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function hf(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function fd(e){if(!Ko||!e||typeof e!="object")return!1;try{Ko.call(e);try{Qo.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function pd(e){if(!oo||!e||typeof e!="object")return!1;try{oo.call(e,oo);try{so.call(e,so)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function hd(e){if(!nl||!e||typeof e!="object")return!1;try{return nl.call(e),!0}catch{}return!1}function gd(e){if(!Qo||!e||typeof e!="object")return!1;try{Qo.call(e);try{Ko.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function dd(e){if(!so||!e||typeof e!="object")return!1;try{so.call(e,so);try{oo.call(e,oo)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function yd(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function gf(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return gf(nu.call(e,0,t.maxStringLength),t)+r}var i=gr.call(gr.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,md);return ff(i,"single",t)}function md(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+Zg.call(t.toString(16))}function Hi(e){return"Object("+e+")"}function Ks(e){return e+" { ? }"}function fl(e,t,n,r){var i=r?_a(n,r):Dn.call(n,", ");return e+" ("+t+") {"+i+"}"}function _d(e){for(var t=0;t<e.length;t++)if(hf(e[t],`
`)>=0)return!1;return!0}function vd(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=Dn.call(Array(e.indent+1)," ");else return null;return{base:n,prev:Dn.call(Array(t+1),n)}}function _a(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+Dn.call(e,","+n)+`
`+t.prev}function Mo(e,t){var n=ma(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=pr(e,i)?t(e[i],e):""}var o=typeof Js=="function"?Js(e):[],s;if(yi){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var u in e)pr(e,u)&&(n&&String(Number(u))===u&&u<e.length||yi&&s["$"+u]instanceof Symbol||(lf.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if(typeof Js=="function")for(var l=0;l<o.length;l++)cf.call(e,o[l])&&r.push("["+t(o[l])+"]: "+t(e[o[l]],e));return r}var df=zn,Ui=fn,bd=ed,Ed=Cr,Fo=df("%WeakMap%",!0),ko=df("%Map%",!0),Id=Ui("WeakMap.prototype.get",!0),Sd=Ui("WeakMap.prototype.set",!0),xd=Ui("WeakMap.prototype.has",!0),wd=Ui("Map.prototype.get",!0),Nd=Ui("Map.prototype.set",!0),Ld=Ui("Map.prototype.has",!0),ru=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},Cd=function(e,t){var n=ru(e,t);return n&&n.value},Od=function(e,t,n){var r=ru(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},Pd=function(e,t){return!!ru(e,t)},yf=function(){var t,n,r,i={assert:function(o){if(!i.has(o))throw new Ed("Side channel does not contain "+bd(o))},get:function(o){if(Fo&&o&&(typeof o=="object"||typeof o=="function")){if(t)return Id(t,o)}else if(ko){if(n)return wd(n,o)}else if(r)return Cd(r,o)},has:function(o){if(Fo&&o&&(typeof o=="object"||typeof o=="function")){if(t)return xd(t,o)}else if(ko){if(n)return Ld(n,o)}else if(r)return Pd(r,o);return!1},set:function(o,s){Fo&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Fo),Sd(t,o,s)):ko?(n||(n=new ko),Nd(n,o,s)):(r||(r={key:{},next:null}),Od(r,o,s))}};return i},Rd=zc,Ji=yf(),Xn=Cr,iu={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Xn("`O` is not an object");if(typeof t!="string")throw new Xn("`slot` must be a string");if(Ji.assert(e),!iu.has(e,t))throw new Xn("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Xn("`O` is not an object");if(typeof t!="string")throw new Xn("`slot` must be a string");var n=Ji.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Xn("`O` is not an object");if(typeof t!="string")throw new Xn("`slot` must be a string");var n=Ji.get(e);return!!n&&Rd(n,"$"+t)},set:function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Xn("`O` is not an object");if(typeof t!="string")throw new Xn("`slot` must be a string");var r=Ji.get(e);r||(r={},Ji.set(e,r)),r["$"+t]=n}};Object.freeze&&Object.freeze(iu);var Td=iu,Ki=Td,Ad=SyntaxError,pl=typeof StopIteration=="object"?StopIteration:null,Dd=function(t){if(!pl)throw new Ad("this environment lacks StopIteration");Ki.set(t,"[[Done]]",!1);var n={next:function(){var i=Ki.get(this,"[[Iterator]]"),o=Ki.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(s){if(Ki.set(i,"[[Done]]",!0),s!==pl)throw s;return{done:!0,value:void 0}}}};return Ki.set(n,"[[Iterator]]",t),n},Md={}.toString,mf=Array.isArray||function(e){return Md.call(e)=="[object Array]"},Fd=String.prototype.valueOf,kd=function(t){try{return Fd.call(t),!0}catch{return!1}},Gd=Object.prototype.toString,Bd="[object String]",qd=Qr(),_f=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:qd?kd(t):Gd.call(t)===Bd},ou=typeof Map=="function"&&Map.prototype?Map:null,Ud=typeof Set=="function"&&Set.prototype?Set:null,Zo;ou||(Zo=function(t){return!1});var vf=ou?Map.prototype.has:null,hl=Ud?Set.prototype.has:null;!Zo&&!vf&&(Zo=function(t){return!1});var bf=Zo||function(t){if(!t||typeof t!="object")return!1;try{if(vf.call(t),hl)try{hl.call(t)}catch{return!0}return t instanceof ou}catch{}return!1},zd=typeof Map=="function"&&Map.prototype?Map:null,su=typeof Set=="function"&&Set.prototype?Set:null,ts;su||(ts=function(t){return!1});var gl=zd?Map.prototype.has:null,Ef=su?Set.prototype.has:null;!ts&&!Ef&&(ts=function(t){return!1});var If=ts||function(t){if(!t||typeof t!="object")return!1;try{if(Ef.call(t),gl)try{gl.call(t)}catch{return!0}return t instanceof su}catch{}return!1},dl=uf,yl=Dd;if(Ya()||Is()){var Qs=Symbol.iterator;Vo.exports=function(t){if(t!=null&&typeof t[Qs]<"u")return t[Qs]();if(dl(t))return Array.prototype[Qs].call(t)}}else{var Vd=mf,jd=_f,ml=zn,Wd=ml("%Map%",!0),$d=ml("%Set%",!0),dn=fn,_l=dn("Array.prototype.push"),vl=dn("String.prototype.charCodeAt"),Xd=dn("String.prototype.slice"),Yd=function(t,n){var r=t.length;if(n+1>=r)return n+1;var i=vl(t,n);if(i<55296||i>56319)return n+1;var o=vl(t,n+1);return o<56320||o>57343?n+1:n+2},Zs=function(t){var n=0;return{next:function(){var i=n>=t.length,o;return i||(o=t[n],n+=1),{done:i,value:o}}}},bl=function(t,n){if(Vd(t)||dl(t))return Zs(t);if(jd(t)){var r=0;return{next:function(){var o=Yd(t,r),s=Xd(t,r,o);return r=o,{done:o>t.length,value:s}}}}if(n&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!Wd&&!$d)Vo.exports=function(t){if(t!=null)return bl(t,!0)};else{var Hd=bf,Jd=If,El=dn("Map.prototype.forEach",!0),Il=dn("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var Sl=dn("Map.prototype.iterator",!0),xl=dn("Set.prototype.iterator",!0);var wl=dn("Map.prototype.@@iterator",!0)||dn("Map.prototype._es6-shim iterator_",!0),Nl=dn("Set.prototype.@@iterator",!0)||dn("Set.prototype._es6-shim iterator_",!0),Kd=function(t){if(Hd(t)){if(Sl)return yl(Sl(t));if(wl)return wl(t);if(El){var n=[];return El(t,function(i,o){_l(n,[o,i])}),Zs(n)}}if(Jd(t)){if(xl)return yl(xl(t));if(Nl)return Nl(t);if(Il){var r=[];return Il(t,function(i){_l(r,i)}),Zs(r)}}};Vo.exports=function(t){return Kd(t)||bl(t)}}}var Qd=Vo.exports,Ll=function(e){return e!==e},Sf=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||Ll(t)&&Ll(n))},Zd=Sf,xf=function(){return typeof Object.is=="function"?Object.is:Zd},ty=xf,ey=Kr,ny=function(){var t=ty();return ey(Object,{is:t},{is:function(){return Object.is!==t}}),t},ry=Kr,iy=qi,oy=Sf,wf=xf,sy=ny,Nf=iy(wf(),Object);ry(Nf,{getPolyfill:wf,implementation:oy,shim:sy});var ay=Nf,uy=qi,Lf=fn,ly=zn,va=ly("%ArrayBuffer%",!0),jo=Lf("ArrayBuffer.prototype.byteLength",!0),cy=Lf("Object.prototype.toString"),Cl=!!va&&!jo&&new va(0).slice,Ol=!!Cl&&uy(Cl),Cf=jo||Ol?function(t){if(!t||typeof t!="object")return!1;try{return jo?jo(t):Ol(t,0),!0}catch{return!1}}:va?function(t){return cy(t)==="[object ArrayBuffer]"}:function(t){return!1},fy=Date.prototype.getDay,py=function(t){try{return fy.call(t),!0}catch{return!1}},hy=Object.prototype.toString,gy="[object Date]",dy=Qr(),yy=function(t){return typeof t!="object"||t===null?!1:dy?py(t):hy.call(t)===gy},ba=fn,Of=Qr(),Pf,Rf,Ea,Ia;if(Of){Pf=ba("Object.prototype.hasOwnProperty"),Rf=ba("RegExp.prototype.exec"),Ea={};var ta=function(){throw Ea};Ia={toString:ta,valueOf:ta},typeof Symbol.toPrimitive=="symbol"&&(Ia[Symbol.toPrimitive]=ta)}var my=ba("Object.prototype.toString"),_y=Object.getOwnPropertyDescriptor,vy="[object RegExp]",by=Of?function(t){if(!t||typeof t!="object")return!1;var n=_y(t,"lastIndex"),r=n&&Pf(n,"value");if(!r)return!1;try{Rf(t,Ia)}catch(i){return i===Ea}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:my(t)===vy},Ey=fn,Pl=Ey("SharedArrayBuffer.prototype.byteLength",!0),Iy=Pl?function(t){if(!t||typeof t!="object")return!1;try{return Pl(t),!0}catch{return!1}}:function(t){return!1},Sy=Number.prototype.toString,xy=function(t){try{return Sy.call(t),!0}catch{return!1}},wy=Object.prototype.toString,Ny="[object Number]",Ly=Qr(),Cy=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:Ly?xy(t):wy.call(t)===Ny},Tf=fn,Oy=Tf("Boolean.prototype.toString"),Py=Tf("Object.prototype.toString"),Ry=function(t){try{return Oy(t),!0}catch{return!1}},Ty="[object Boolean]",Ay=Qr(),Dy=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:Ay&&Symbol.toStringTag in t?Ry(t):Py(t)===Ty},Sa={exports:{}},My=Object.prototype.toString,Fy=Ya();if(Fy){var ky=Symbol.prototype.toString,Gy=/^Symbol\(.*\)$/,By=function(t){return typeof t.valueOf()!="symbol"?!1:Gy.test(ky.call(t))};Sa.exports=function(t){if(typeof t=="symbol")return!0;if(My.call(t)!=="[object Symbol]")return!1;try{return By(t)}catch{return!1}}}else Sa.exports=function(t){return!1};var qy=Sa.exports,xa={exports:{}},Rl=typeof BigInt<"u"&&BigInt,Uy=function(){return typeof Rl=="function"&&typeof BigInt=="function"&&typeof Rl(42)=="bigint"&&typeof BigInt(42)=="bigint"},zy=Uy();if(zy){var Vy=BigInt.prototype.valueOf,jy=function(t){try{return Vy.call(t),!0}catch{}return!1};xa.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:jy(t)}}else xa.exports=function(t){return!1};var Wy=xa.exports,$y=_f,Xy=Cy,Yy=Dy,Hy=qy,Jy=Wy,Ky=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if($y(t))return"String";if(Xy(t))return"Number";if(Yy(t))return"Boolean";if(Hy(t))return"Symbol";if(Jy(t))return"BigInt"},es=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,Tl=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,ns;es||(ns=function(t){return!1});var wa=es?es.prototype.has:null,ea=Tl?Tl.prototype.has:null;!ns&&!wa&&(ns=function(t){return!1});var Qy=ns||function(t){if(!t||typeof t!="object")return!1;try{if(wa.call(t,wa),ea)try{ea.call(t,ea)}catch{return!0}return t instanceof es}catch{}return!1},Na={exports:{}},Zy=zn,Af=fn,tm=Zy("%WeakSet%",!0),na=Af("WeakSet.prototype.has",!0);if(na){var ra=Af("WeakMap.prototype.has",!0);Na.exports=function(t){if(!t||typeof t!="object")return!1;try{if(na(t,na),ra)try{ra(t,ra)}catch{return!0}return t instanceof tm}catch{}return!1}}else Na.exports=function(t){return!1};var em=Na.exports,nm=bf,rm=If,im=Qy,om=em,sm=function(t){if(t&&typeof t=="object"){if(nm(t))return"Map";if(rm(t))return"Set";if(im(t))return"WeakMap";if(om(t))return"WeakSet"}return!1},Df=Function.prototype.toString,fi=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,La,Wo;if(typeof fi=="function"&&typeof Object.defineProperty=="function")try{La=Object.defineProperty({},"length",{get:function(){throw Wo}}),Wo={},fi(function(){throw 42},null,La)}catch(e){e!==Wo&&(fi=null)}else fi=null;var am=/^\s*class\b/,Ca=function(t){try{var n=Df.call(t);return am.test(n)}catch{return!1}},ia=function(t){try{return Ca(t)?!1:(Df.call(t),!0)}catch{return!1}},$o=Object.prototype.toString,um="[object Object]",lm="[object Function]",cm="[object GeneratorFunction]",fm="[object HTMLAllCollection]",pm="[object HTML document.all class]",hm="[object HTMLCollection]",gm=typeof Symbol=="function"&&!!Symbol.toStringTag,dm=!(0 in[,]),Oa=function(){return!1};if(typeof document=="object"){var ym=document.all;$o.call(ym)===$o.call(document.all)&&(Oa=function(t){if((dm||!t)&&(typeof t>"u"||typeof t=="object"))try{var n=$o.call(t);return(n===fm||n===pm||n===hm||n===um)&&t("")==null}catch{}return!1})}var mm=fi?function(t){if(Oa(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{fi(t,null,La)}catch(n){if(n!==Wo)return!1}return!Ca(t)&&ia(t)}:function(t){if(Oa(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(gm)return ia(t);if(Ca(t))return!1;var n=$o.call(t);return n!==lm&&n!==cm&&!/^\[object HTML/.test(n)?!1:ia(t)},_m=mm,vm=Object.prototype.toString,Mf=Object.prototype.hasOwnProperty,bm=function(t,n,r){for(var i=0,o=t.length;i<o;i++)Mf.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},Em=function(t,n,r){for(var i=0,o=t.length;i<o;i++)r==null?n(t.charAt(i),i,t):n.call(r,t.charAt(i),i,t)},Im=function(t,n,r){for(var i in t)Mf.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},Sm=function(t,n,r){if(!_m(n))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),vm.call(t)==="[object Array]"?bm(t,n,i):typeof t=="string"?Em(t,n,i):Im(t,n,i)},xm=Sm,wm=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],oa=wm,Nm=typeof globalThis>"u"?Wa:globalThis,Lm=function(){for(var t=[],n=0;n<oa.length;n++)typeof Nm[oa[n]]=="function"&&(t[t.length]=oa[n]);return t},rs=xm,Cm=Lm,Al=qi,au=fn,Xo=Ka,Om=au("Object.prototype.toString"),Ff=Qr(),Dl=typeof globalThis>"u"?Wa:globalThis,Pa=Cm(),uu=au("String.prototype.slice"),sa=Object.getPrototypeOf,Pm=au("Array.prototype.indexOf",!0)||function(t,n){for(var r=0;r<t.length;r+=1)if(t[r]===n)return r;return-1},is={__proto__:null};Ff&&Xo&&sa?rs(Pa,function(e){var t=new Dl[e];if(Symbol.toStringTag in t){var n=sa(t),r=Xo(n,Symbol.toStringTag);if(!r){var i=sa(n);r=Xo(i,Symbol.toStringTag)}is["$"+e]=Al(r.get)}}):rs(Pa,function(e){var t=new Dl[e],n=t.slice||t.set;n&&(is["$"+e]=Al(n))});var Rm=function(t){var n=!1;return rs(is,function(r,i){if(!n)try{"$"+r(t)===i&&(n=uu(i,1))}catch{}}),n},Tm=function(t){var n=!1;return rs(is,function(r,i){if(!n)try{r(t),n=uu(i,1)}catch{}}),n},Am=function(t){if(!t||typeof t!="object")return!1;if(!Ff){var n=uu(Om(t),8,-1);return Pm(Pa,n)>-1?n:n!=="Object"?!1:Tm(t)}return Xo?Rm(t):null},Dm=fn,Ml=Dm("ArrayBuffer.prototype.byteLength",!0),Mm=Cf,Fm=function(t){return Mm(t)?Ml?Ml(t):t.byteLength:NaN},kf=gg,Vn=fn,Fl=Gg,km=zn,mi=Qd,Gm=yf,kl=ay,Gl=uf,Bl=mf,ql=Cf,Ul=yy,zl=by,Vl=Iy,jl=Xa,Wl=Ky,$l=sm,Xl=Am,Yl=Fm,Hl=Vn("SharedArrayBuffer.prototype.byteLength",!0),Jl=Vn("Date.prototype.getTime"),aa=Object.getPrototypeOf,Kl=Vn("Object.prototype.toString"),os=km("%Set%",!0),Ra=Vn("Map.prototype.has",!0),ss=Vn("Map.prototype.get",!0),Ql=Vn("Map.prototype.size",!0),as=Vn("Set.prototype.add",!0),Gf=Vn("Set.prototype.delete",!0),us=Vn("Set.prototype.has",!0),Yo=Vn("Set.prototype.size",!0);function Zl(e,t,n,r){for(var i=mi(e),o;(o=i.next())&&!o.done;)if(mn(t,o.value,n,r))return Gf(e,o.value),!0;return!1}function Bf(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function Bm(e,t,n,r,i,o){var s=Bf(n);if(s!=null)return s;var a=ss(t,s),u=kf({},i,{strict:!1});return typeof a>"u"&&!Ra(t,s)||!mn(r,a,u,o)?!1:!Ra(e,s)&&mn(r,a,u,o)}function qm(e,t,n){var r=Bf(n);return r??(us(t,r)&&!us(e,r))}function tc(e,t,n,r,i,o){for(var s=mi(e),a,u;(a=s.next())&&!a.done;)if(u=a.value,mn(n,u,i,o)&&mn(r,ss(t,u),i,o))return Gf(e,u),!0;return!1}function mn(e,t,n,r){var i=n||{};if(i.strict?kl(e,t):e===t)return!0;var o=Wl(e),s=Wl(t);if(o!==s)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?kl(e,t):e==t;var a=r.has(e),u=r.has(t),l;if(a&&u){if(r.get(e)===r.get(t))return!0}else l={};return a||r.set(e,l),u||r.set(t,l),Vm(e,t,i,r)}function ec(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Um(e,t,n,r){if(Yo(e)!==Yo(t))return!1;for(var i=mi(e),o=mi(t),s,a,u;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")u||(u=new os),as(u,s.value);else if(!us(t,s.value)){if(n.strict||!qm(e,t,s.value))return!1;u||(u=new os),as(u,s.value)}if(u){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!Zl(u,a.value,n.strict,r))return!1}else if(!n.strict&&!us(e,a.value)&&!Zl(u,a.value,n.strict,r))return!1;return Yo(u)===0}return!0}function zm(e,t,n,r){if(Ql(e)!==Ql(t))return!1;for(var i=mi(e),o=mi(t),s,a,u,l,c,f;(s=i.next())&&!s.done;)if(l=s.value[0],c=s.value[1],l&&typeof l=="object")u||(u=new os),as(u,l);else if(f=ss(t,l),typeof f>"u"&&!Ra(t,l)||!mn(c,f,n,r)){if(n.strict||!Bm(e,t,l,c,n,r))return!1;u||(u=new os),as(u,l)}if(u){for(;(a=o.next())&&!a.done;)if(l=a.value[0],f=a.value[1],l&&typeof l=="object"){if(!tc(u,e,l,f,n,r))return!1}else if(!n.strict&&(!e.has(l)||!mn(ss(e,l),f,n,r))&&!tc(u,e,l,f,kf({},n,{strict:!1}),r))return!1;return Yo(u)===0}return!0}function Vm(e,t,n,r){var i,o;if(typeof e!=typeof t||e==null||t==null||Kl(e)!==Kl(t)||Gl(e)!==Gl(t))return!1;var s=Bl(e),a=Bl(t);if(s!==a)return!1;var u=e instanceof Error,l=t instanceof Error;if(u!==l||(u||l)&&(e.name!==t.name||e.message!==t.message))return!1;var c=zl(e),f=zl(t);if(c!==f||(c||f)&&(e.source!==t.source||Fl(e)!==Fl(t)))return!1;var p=Ul(e),h=Ul(t);if(p!==h||(p||h)&&Jl(e)!==Jl(t)||n.strict&&aa&&aa(e)!==aa(t))return!1;var d=Xl(e),_=Xl(t);if(d!==_)return!1;if(d||_){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var v=ec(e),E=ec(t);if(v!==E)return!1;if(v||E){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var S=ql(e),x=ql(t);if(S!==x)return!1;if(S||x)return Yl(e)!==Yl(t)?!1:typeof Uint8Array=="function"&&mn(new Uint8Array(e),new Uint8Array(t),n,r);var C=Vl(e),T=Vl(t);if(C!==T)return!1;if(C||T)return Hl(e)!==Hl(t)?!1:typeof Uint8Array=="function"&&mn(new Uint8Array(e),new Uint8Array(t),n,r);if(typeof e!=typeof t)return!1;var W=jl(e),q=jl(t);if(W.length!==q.length)return!1;for(W.sort(),q.sort(),i=W.length-1;i>=0;i--)if(W[i]!=q[i])return!1;for(i=W.length-1;i>=0;i--)if(o=W[i],!mn(e[o],t[o],n,r))return!1;var G=$l(e),O=$l(t);return G!==O?!1:G==="Set"||O==="Set"?Um(e,t,n,r):G==="Map"?zm(e,t,n,r):!0}var jm=function(t,n,r){return mn(t,n,r,Gm())};const Wm=Rp(jm);var $m=Object.defineProperty,ct=(e,t)=>$m(e,"name",{value:t,configurable:!0}),Xm=class{constructor(t){this.direction=!1,this.compareProperties=!0;var n,r,i;this.precision=10**-((n=t==null?void 0:t.precision)!=null?n:17),this.direction=(r=t==null?void 0:t.direction)!=null?r:!1,this.compareProperties=(i=t==null?void 0:t.compareProperties)!=null?i:!0}compare(t,n){if(t.type!==n.type||!ro(t,n))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,n.coordinates);case"LineString":return this.compareLine(t.coordinates,n.coordinates);case"Polygon":return this.comparePolygon(t,n);case"GeometryCollection":return this.compareGeometryCollection(t,n);case"Feature":return this.compareFeature(t,n);case"FeatureCollection":return this.compareFeatureCollection(t,n);default:if(t.type.startsWith("Multi")){const r=Ta(t),i=Ta(n);return r.every(o=>i.some(s=>this.compare(o,s)))}}return!1}compareCoord(t,n){return t.length===n.length&&t.every((r,i)=>Math.abs(r-n[i])<this.precision)}compareLine(t,n,r=0,i=!1){if(!ro(t,n))return!1;const o=t;let s=n;if(i&&!this.compareCoord(o[0],s[0])){const u=this.fixStartIndex(s,o);if(u)s=u;else return!1}const a=this.compareCoord(o[r],s[r]);return this.direction||a?this.comparePath(o,s):this.compareCoord(o[r],s[s.length-(1+r)])?this.comparePath(o.slice().reverse(),s):!1}fixStartIndex(t,n){let r,i=-1;for(let o=0;o<t.length;o++)if(this.compareCoord(t[o],n[0])){i=o;break}return i>=0&&(r=[].concat(t.slice(i,t.length),t.slice(1,i+1))),r}comparePath(t,n){return t.every((r,i)=>this.compareCoord(r,n[i]))}comparePolygon(t,n){if(this.compareLine(t.coordinates[0],n.coordinates[0],1,!0)){const r=t.coordinates.slice(1,t.coordinates.length),i=n.coordinates.slice(1,n.coordinates.length);return r.every(o=>i.some(s=>this.compareLine(o,s,1,!0)))}return!1}compareGeometryCollection(t,n){return ro(t.geometries,n.geometries)&&this.compareBBox(t,n)&&t.geometries.every((r,i)=>this.compare(r,n.geometries[i]))}compareFeature(t,n){return t.id===n.id&&(this.compareProperties?Wm(t.properties,n.properties):!0)&&this.compareBBox(t,n)&&this.compare(t.geometry,n.geometry)}compareFeatureCollection(t,n){return ro(t.features,n.features)&&this.compareBBox(t,n)&&t.features.every((r,i)=>this.compare(r,n.features[i]))}compareBBox(t,n){return!t.bbox&&!n.bbox||(t.bbox&&n.bbox?this.compareCoord(t.bbox,n.bbox):!1)}};ct(Xm,"GeojsonEquality");function ro(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}ct(ro,"sameLength");function Ta(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}ct(Ta,"explode");var Fe=63710088e-1,qf={centimeters:Fe*100,centimetres:Fe*100,degrees:360/(2*Math.PI),feet:Fe*3.28084,inches:Fe*39.37,kilometers:Fe/1e3,kilometres:Fe/1e3,meters:Fe,metres:Fe,miles:Fe/1609.344,millimeters:Fe*1e3,millimetres:Fe*1e3,nauticalmiles:Fe/1852,radians:1,yards:Fe*1.0936},nc={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Fn(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}ct(Fn,"feature");function Ym(e,t,n={}){switch(e){case"Point":return Yn(t).geometry;case"LineString":return Hn(t).geometry;case"Polygon":return lu(t).geometry;case"MultiPoint":return zf(t).geometry;case"MultiLineString":return Uf(t).geometry;case"MultiPolygon":return Vf(t).geometry;default:throw new Error(e+" is invalid")}}ct(Ym,"geometry");function Yn(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ls(e[0])||!ls(e[1]))throw new Error("coordinates must contain numbers");return Fn({type:"Point",coordinates:e},t,n)}ct(Yn,"point");function Hm(e,t,n={}){return xs(e.map(r=>Yn(r,t)),n)}ct(Hm,"points");function lu(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return Fn({type:"Polygon",coordinates:e},t,n)}ct(lu,"polygon");function Jm(e,t,n={}){return xs(e.map(r=>lu(r,t)),n)}ct(Jm,"polygons");function Hn(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Fn({type:"LineString",coordinates:e},t,n)}ct(Hn,"lineString");function Km(e,t,n={}){return xs(e.map(r=>Hn(r,t)),n)}ct(Km,"lineStrings");function xs(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}ct(xs,"featureCollection");function Uf(e,t,n={}){return Fn({type:"MultiLineString",coordinates:e},t,n)}ct(Uf,"multiLineString");function zf(e,t,n={}){return Fn({type:"MultiPoint",coordinates:e},t,n)}ct(zf,"multiPoint");function Vf(e,t,n={}){return Fn({type:"MultiPolygon",coordinates:e},t,n)}ct(Vf,"multiPolygon");function Qm(e,t,n={}){return Fn({type:"GeometryCollection",geometries:e},t,n)}ct(Qm,"geometryCollection");function Zm(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}ct(Zm,"round");function jf(e,t="kilometers"){const n=qf[t];if(!n)throw new Error(t+" units is invalid");return e*n}ct(jf,"radiansToLength");function cu(e,t="kilometers"){const n=qf[t];if(!n)throw new Error(t+" units is invalid");return e/n}ct(cu,"lengthToRadians");function t_(e,t){return Wf(cu(e,t))}ct(t_,"lengthToDegrees");function e_(e){let t=e%360;return t<0&&(t+=360),t}ct(e_,"bearingToAzimuth");function Wf(e){return e%(2*Math.PI)*180/Math.PI}ct(Wf,"radiansToDegrees");function n_(e){return e%360*Math.PI/180}ct(n_,"degreesToRadians");function r_(e,t="kilometers",n="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return jf(cu(e,t),n)}ct(r_,"convertLength");function i_(e,t="meters",n="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const r=nc[t];if(!r)throw new Error("invalid original units");const i=nc[n];if(!i)throw new Error("invalid final units");return e/r*i}ct(i_,"convertArea");function ls(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}ct(ls,"isNumber");function fu(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}ct(fu,"isObject");function o_(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!ls(t))throw new Error("bbox must only contain numbers")})}ct(o_,"validateBBox");function s_(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}ct(s_,"validateId");var a_=Object.defineProperty,fe=(e,t)=>a_(e,"name",{value:t,configurable:!0});function zi(e,t,n){if(e!==null)for(var r,i,o,s,a,u,l,c=0,f=0,p,h=e.type,d=h==="FeatureCollection",_=h==="Feature",v=d?e.features.length:1,E=0;E<v;E++){l=d?e.features[E].geometry:_?e.geometry:e,p=l?l.type==="GeometryCollection":!1,a=p?l.geometries.length:1;for(var S=0;S<a;S++){var x=0,C=0;if(s=p?l.geometries[S]:l,s!==null){u=s.coordinates;var T=s.type;switch(c=n&&(T==="Polygon"||T==="MultiPolygon")?1:0,T){case null:break;case"Point":if(t(u,f,E,x,C)===!1)return!1;f++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(t(u[r],f,E,x,C)===!1)return!1;f++,T==="MultiPoint"&&x++}T==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(t(u[r][i],f,E,x,C)===!1)return!1;f++}T==="MultiLineString"&&x++,T==="Polygon"&&C++}T==="Polygon"&&x++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(C=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(t(u[r][i][o],f,E,x,C)===!1)return!1;f++}C++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(zi(s.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}fe(zi,"coordEach");function u_(e,t,n,r){var i=n;return zi(e,function(o,s,a,u,l){s===0&&n===void 0?i=o:i=t(i,o,s,a,u,l)},r),i}fe(u_,"coordReduce");function $f(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}fe($f,"propEach");function l_(e,t,n){var r=n;return $f(e,function(i,o){o===0&&n===void 0?r=i:r=t(r,i,o)}),r}fe(l_,"propReduce");function Xf(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}fe(Xf,"featureEach");function c_(e,t,n){var r=n;return Xf(e,function(i,o){o===0&&n===void 0?r=i:r=t(r,i,o)}),r}fe(c_,"featureReduce");function f_(e){var t=[];return zi(e,function(n){t.push(n)}),t}fe(f_,"coordAll");function pu(e,t){var n,r,i,o,s,a,u,l,c,f,p=0,h=e.type==="FeatureCollection",d=e.type==="Feature",_=h?e.features.length:1;for(n=0;n<_;n++){for(a=h?e.features[n].geometry:d?e.geometry:e,l=h?e.features[n].properties:d?e.properties:{},c=h?e.features[n].bbox:d?e.bbox:void 0,f=h?e.features[n].id:d?e.id:void 0,u=a?a.type==="GeometryCollection":!1,s=u?a.geometries.length:1,i=0;i<s;i++){if(o=u?a.geometries[i]:a,o===null){if(t(null,p,l,c,f)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,p,l,c,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],p,l,c,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}fe(pu,"geomEach");function p_(e,t,n){var r=n;return pu(e,function(i,o,s,a,u){o===0&&n===void 0?r=i:r=t(r,i,o,s,a,u)}),r}fe(p_,"geomReduce");function ws(e,t){pu(e,function(n,r,i,o,s){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Fn(n,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var u;switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var l=0;l<n.coordinates.length;l++){var c=n.coordinates[l],f={type:u,coordinates:c};if(t(Fn(f,i),r,l)===!1)return!1}})}fe(ws,"flattenEach");function h_(e,t,n){var r=n;return ws(e,function(i,o,s){o===0&&s===0&&n===void 0?r=i:r=t(r,i,o,s)}),r}fe(h_,"flattenReduce");function Yf(e,t){ws(e,function(n,r,i){var o=0;if(n.geometry){var s=n.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,u=0,l=0,c=0;if(zi(n,function(f,p,h,d,_){if(a===void 0||r>u||d>l||_>c){a=f,u=r,l=d,c=_,o=0;return}var v=Hn([a,f],n.properties);if(t(v,r,i,_,o)===!1)return!1;o++,a=f})===!1)return!1}}})}fe(Yf,"segmentEach");function g_(e,t,n){var r=n,i=!1;return Yf(e,function(o,s,a,u,l){i===!1&&n===void 0?r=o:r=t(r,o,s,a,u,l),i=!0}),r}fe(g_,"segmentReduce");function Hf(e,t){if(!e)throw new Error("geojson is required");ws(e,function(n,r,i){if(n.geometry!==null){var o=n.geometry.type,s=n.geometry.coordinates;switch(o){case"LineString":if(t(n,r,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(t(Hn(s[a],n.properties),r,i,a)===!1)return!1;break}}})}fe(Hf,"lineEach");function d_(e,t,n){var r=n;return Hf(e,function(i,o,s,a){o===0&&n===void 0?r=i:r=t(r,i,o,s,a)}),r}fe(d_,"lineReduce");function y_(e,t){if(t=t||{},!fu(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,a=e.features[n].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),Hn([u[o],u[o+1]],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),Hn([u[i][o],u[i][o+1]],s,t);case"MultiLineString":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o-1),Hn([u[r][o],u[r][o+1]],s,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),o<0&&(o=u[r][i].length-o-1),Hn([u[r][i][o],u[r][i][o+1]],s,t)}throw new Error("geojson is invalid")}fe(y_,"findSegment");function m_(e,t){if(t=t||{},!fu(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,a=e.features[n].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":return Yn(u,s,t);case"MultiPoint":return r<0&&(r=u.length+r),Yn(u[r],s,t);case"LineString":return o<0&&(o=u.length+o),Yn(u[o],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),Yn(u[i][o],s,t);case"MultiLineString":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),Yn(u[r][o],s,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),o<0&&(o=u[r][i].length-o),Yn(u[r][i][o],s,t)}throw new Error("geojson is invalid")}fe(m_,"findPoint");var __=Object.defineProperty,v_=(e,t)=>__(e,"name",{value:t,configurable:!0});function Jf(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return zi(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}v_(Jf,"bbox");var b_=Jf;const E_="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(E_);const I_=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],S_={decimalLatitude:40.123,decimalLongitude:-74.123},x_=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],w_=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function N_(){const e=[];return I_.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...S_})}),[...e,...x_,...w_]}const L_=N_();L_.map(e=>e.verbatimCoordinates);/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function C_(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var _r=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function O_(e,t){return e>t?1:e<t?-1:0}function hr(e,t,n){for(var r=new _r(null,null),i=r,o=r;;){var s=n(e,t.key);if(s<0){if(t.left===null)break;if(n(e,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(s>0){if(t.right===null)break;if(n(e,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function ua(e,t,n,r){var i=new _r(e,t);if(n===null)return i.left=i.right=null,i;n=hr(e,n,r);var o=r(e,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function rc(e,t,n){var r=null,i=null;if(t){t=hr(e,t,n);var o=n(t.key,e);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function P_(e,t,n){return t===null?e:(e===null||(t=hr(e.key,t,n),t.left=e),t)}function Aa(e,t,n,r,i){if(e){r(""+t+(n?" ":" ")+i(e)+`
`);var o=t+(n?"    ":"   ");e.left&&Aa(e.left,o,!1,r,i),e.right&&Aa(e.right,o,!0,r,i)}}var hu=function(){function e(t){t===void 0&&(t=O_),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=ua(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new _r(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=hr(t,this._root,i),s=i(t,o.key);return s===0?this._root=o:(s<0?(r.left=o.left,r.right=o,o.left=null):s>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=hr(t,n,r);var o=r(t,n.key);return o===0?(n.left===null?i=n.right:(i=hr(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=hr(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=hr(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):o=!0;return this},e.prototype.range=function(t,n,r,i){for(var o=[],s=this._comparator,a=this._root,u;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),u=s(a.key,n),u>0)break;if(s(a.key,t)>=0&&r.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return T_(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&Fa(t,n,0,i-1,o),this._root===null)this._root=Da(t,n,0,i),this._size=i;else{var s=A_(this.toList(),R_(t,n),o);i=this._size+i,this._root=Ma({head:s},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return Aa(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,o=rc(t,this._root,i),s=o.left,a=o.right;i(t,n)<0?a=ua(n,r,a,i):s=ua(n,r,s,i),this._root=P_(s,a,i)},e.prototype.split=function(t){return rc(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return C_(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function Da(e,t,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=e[o],a=t[o],u=new _r(s,a);return u.left=Da(e,t,n,o),u.right=Da(e,t,o+1,r),u}return null}function R_(e,t){for(var n=new _r(null,null),r=n,i=0;i<e.length;i++)r=r.next=new _r(e[i],t[i]);return r.next=null,n.next}function T_(e){for(var t=e,n=[],r=!1,i=new _r(null,null),o=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=o=o.next=n.pop(),t=t.right):r=!0;return o.next=null,i.next}function Ma(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=Ma(e,t,i),s=e.head;return s.left=o,e.head=e.head.next,s.right=Ma(e,i+1,n),s}return null}function A_(e,t,n){for(var r=new _r(null,null),i=r,o=e,s=t;o!==null&&s!==null;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return o!==null?i.next=o:s!==null&&(i.next=s),r.next}function Fa(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],s=n-1,a=r+1;;){do s++;while(i(e[s],o)<0);do a--;while(i(e[a],o)>0);if(s>=a)break;var u=e[s];e[s]=e[a],e[a]=u,u=t[s],t[s]=t[a],t[a]=u}Fa(e,t,n,a,i),Fa(e,t,a+1,r,i)}}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return t&&ic(e.prototype,t),n&&ic(e,n),e}var Qi=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},ka=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},dr=Number.EPSILON;dr===void 0&&(dr=Math.pow(2,-52));var D_=dr*dr,Ga=function(e,t){if(-dr<e&&e<dr&&-dr<t&&t<dr)return 0;var n=e-t;return n*n<D_*e*t?0:e<t?-1:1},M_=function(){function e(){pn(this,e),this.reset()}return Ee(e,[{key:"reset",value:function(){this.xRounder=new oc,this.yRounder=new oc}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),oc=function(){function e(){pn(this,e),this.tree=new hu,this.round(0)}return Ee(e,[{key:"round",value:function(t){var n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&Ga(n.key,r.key)===0)return this.tree.remove(t),r.key;var i=this.tree.next(n);return i!==null&&Ga(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}]),e}(),lo=new M_,ao=function(e,t){return e.x*t.y-e.y*t.x},Kf=function(e,t){return e.x*t.x+e.y*t.y},sc=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=ao(r,i);return Ga(o,0)},cs=function(e){return Math.sqrt(Kf(e,e))},F_=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return ao(i,r)/cs(i)/cs(r)},k_=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return Kf(i,r)/cs(i)/cs(r)},ac=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},uc=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},G_=function(e,t,n,r){if(t.x===0)return uc(n,r,e.x);if(r.x===0)return uc(e,t,n.x);if(t.y===0)return ac(n,r,e.y);if(r.y===0)return ac(e,t,n.y);var i=ao(t,r);if(i==0)return null;var o={x:n.x-e.x,y:n.y-e.y},s=ao(o,t)/i,a=ao(o,r)/i,u=e.x+a*t.x,l=n.x+s*r.x,c=e.y+a*t.y,f=n.y+s*r.y,p=(u+l)/2,h=(c+f)/2;return{x:p,y:h}},Tn=function(){Ee(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:fs.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){pn(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return Ee(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<t;i++){var o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,r=new Map,i=function(o){var s=o.otherSE;r.set(o,{sine:F_(n.point,t.point,s.point),cosine:k_(n.point,t.point,s.point)})};return function(o,s){r.has(o)||i(o),r.has(s)||i(s);var a=r.get(o),u=a.sine,l=a.cosine,c=r.get(s),f=c.sine,p=c.cosine;return u>=0&&f>=0?l<p?1:l>p?-1:0:u<0&&f<0?l<p?-1:l>p?1:0:f<u?-1:f>u?1:0}}}]),e}(),B_=0,fs=function(){Ee(e,null,[{key:"compare",value:function(t,n){var r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,s=n.rightSE.point.x;if(s<r)return 1;if(o<i)return-1;var a=t.leftSE.point.y,u=n.leftSE.point.y,l=t.rightSE.point.y,c=n.rightSE.point.y;if(r<i){if(u<a&&u<l)return 1;if(u>a&&u>l)return-1;var f=t.comparePoint(n.leftSE.point);if(f<0)return 1;if(f>0)return-1;var p=n.comparePoint(t.rightSE.point);return p!==0?p:-1}if(r>i){if(a<u&&a<c)return-1;if(a>u&&a>c)return 1;var h=n.comparePoint(t.leftSE.point);if(h!==0)return h;var d=t.comparePoint(n.rightSE.point);return d<0?1:d>0?-1:1}if(a<u)return-1;if(a>u)return 1;if(o<s){var _=n.comparePoint(t.rightSE.point);if(_!==0)return _}if(o>s){var v=t.comparePoint(n.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(o!==s){var E=l-a,S=o-r,x=c-u,C=s-i;if(E>S&&x<C)return 1;if(E<S&&x>C)return-1}return o>s?1:o<s||l<c?-1:l>c?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,r,i){pn(this,e),this.id=++B_,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}return Ee(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;var o=(t.y-n.y)/i.y,s=n.x+o*i.x;if(t.x===s)return 0;var a=(t.x-n.x)/i.x,u=n.y+a*i.y;return t.y===u?0:t.y<u?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),r=t.bbox(),i=ka(n,r);if(i===null)return null;var o=this.leftSE.point,s=this.rightSE.point,a=t.leftSE.point,u=t.rightSE.point,l=Qi(n,a)&&this.comparePoint(a)===0,c=Qi(r,o)&&t.comparePoint(o)===0,f=Qi(n,u)&&this.comparePoint(u)===0,p=Qi(r,s)&&t.comparePoint(s)===0;if(c&&l)return p&&!f?s:!p&&f?u:null;if(c)return f&&o.x===u.x&&o.y===u.y?null:o;if(l)return p&&s.x===a.x&&s.y===a.y?null:a;if(p&&f)return null;if(p)return s;if(f)return u;var h=G_(o,this.vector(),a,t.vector());return h===null||!Qi(i,h)?null:lo.round(h.x,h.y)}},{key:"split",value:function(t){var n=[],r=t.events!==void 0,i=new Tn(t,!0),o=new Tn(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,s,this.rings.slice(),this.windings.slice());return Tn.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Tn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(i!==0){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],c=r.windings[a],f=n.rings.indexOf(l);f===-1?(n.rings.push(l),n.windings.push(c)):n.windings[f]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,s=this.rings.length;o<s;o++){var a=this.rings[o],u=this.windings[o],l=n.indexOf(a);l===-1?(n.push(a),r.push(u)):r[l]+=u}for(var c=[],f=[],p=0,h=n.length;p<h;p++)if(r[p]!==0){var d=n[p],_=d.poly;if(f.indexOf(_)===-1)if(d.isExterior)c.push(_);else{f.indexOf(_)===-1&&f.push(_);var v=c.indexOf(d.poly);v!==-1&&c.splice(v,1)}}for(var E=0,S=c.length;E<S;E++){var x=c[E].multiPoly;i.indexOf(x)===-1&&i.push(x)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Fr.type){case"union":{var r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var o,s;t.length<n.length?(o=t.length,s=n.length):(o=n.length,s=t.length),this._isInResult=s===Fr.numMultiPolys&&o<s;break}case"xor":{var a=Math.abs(t.length-n.length);this._isInResult=a%2===1;break}case"difference":{var u=function(l){return l.length===1&&l[0].isSubject};this._isInResult=u(t)!==u(n);break}default:throw new Error("Unrecognized operation type found ".concat(Fr.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,a=Tn.comparePoints(t,n);if(a<0)i=t,o=n,s=1;else if(a>0)i=n,o=t,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var u=new Tn(i,!0),l=new Tn(o,!1);return new e(u,l,[r],[s])}}]),e}(),lc=function(){function e(t,n,r){if(pn(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=lo.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=t.length;s<a;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=lo.round(t[s][0],t[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(fs.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(fs.fromRing(o,i,this))}return Ee(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),q_=function(){function e(t,n){if(pn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new lc(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new lc(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Ee(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,s=i.length;o<s;o++)t.push(i[o]);return t}}]),e}(),cc=function(){function e(t,n){if(pn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var o=new q_(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Ee(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,s=i.length;o<s;o++)t.push(i[o]);return t}}]),e}(),U_=function(){Ee(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!(!o.isInResult()||o.ringOut)){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,f=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var p=a.getAvailableLinkedEvents();if(p.length===0){var h=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(p.length===1){u=p[0].otherSE;break}for(var _=null,v=0,E=f.length;v<E;v++)if(f[v].point===a.point){_=v;break}if(_!==null){var S=f.splice(_)[0],x=l.splice(S.index);x.unshift(x[0].otherSE),n.push(new e(x.reverse()));continue}f.push({index:l.length,point:a.point});var C=a.getLeftmostComparator(s);u=p.sort(C)[0].otherSE;break}n.push(new e(l))}}return n}}]);function e(t){pn(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return Ee(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point,s=this.events[r+1].point;sc(o,t,s)!==0&&(n.push(o),t=o)}if(n.length===1)return null;var a=n[0],u=n[1];sc(a,t,u)===0&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:n.length-1,f=this.isExteriorRing()?n.length:-1,p=[],h=c;h!=f;h+=l)p.push([n[h].x,n[h].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];Tn.compare(t,i)>0&&(t=i)}for(var o=t.segment.prevInResult(),s=o?o.prevInResult():null;;){if(!o)return null;if(!s)return o.ringOut;if(s.ringOut!==o.ringOut)return s.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=s.prevInResult(),s=o?o.prevInResult():null}}}]),e}(),fc=function(){function e(t){pn(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Ee(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}]),e}(),z_=function(){function e(t){pn(this,e),this.rings=t,this.polys=this._composePolys(t)}return Ee(e,[{key:"getGeom",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!o.poly)if(o.isExteriorRing())n.push(new fc(o));else{var s=o.enclosingRing();s.poly||n.push(new fc(s)),s.poly.addInterior(o)}}return n}}]),e}(),V_=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fs.compare;pn(this,e),this.queue=t,this.tree=new hu(n),this.segments=[]}return Ee(e,[{key:"process",value:function(t){var n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;var i=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,s=i,a=void 0,u=void 0;a===void 0;)o=this.tree.prev(o),o===null?a=null:o.key.consumedBy===void 0&&(a=o.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var f=this._splitSafely(a,c),p=0,h=f.length;p<h;p++)r.push(f[p])}var d=null;if(u){var _=u.getIntersection(n);if(_!==null&&(n.isAnEndpoint(_)||(d=_),!u.isAnEndpoint(_)))for(var v=this._splitSafely(u,_),E=0,S=v.length;E<S;E++)r.push(v[E])}if(l!==null||d!==null){var x=null;if(l===null)x=d;else if(d===null)x=l;else{var C=Tn.comparePoints(l,d);x=C<=0?l:d}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var T=n.split(x),W=0,q=T.length;W<q;W++)r.push(T[W])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=a)}else{if(a&&u){var G=a.getIntersection(u);if(G!==null){if(!a.isAnEndpoint(G))for(var O=this._splitSafely(a,G),$=0,N=O.length;$<N;$++)r.push(O[$]);if(!u.isAnEndpoint(G))for(var ft=this._splitSafely(u,G),nt=0,Le=ft.length;nt<Le;nt++)r.push(ft[nt])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.insert(t),i}}]),e}(),pc=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,j_=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,W_=function(){function e(){pn(this,e)}return Ee(e,[{key:"run",value:function(t,n,r){Fr.type=t,lo.reset();for(var i=[new cc(n,!0)],o=0,s=r.length;o<s;o++)i.push(new cc(r[o],!1));if(Fr.numMultiPolys=i.length,Fr.type==="difference")for(var a=i[0],u=1;u<i.length;)ka(i[u].bbox,a.bbox)!==null?u++:i.splice(u,1);if(Fr.type==="intersection"){for(var l=0,c=i.length;l<c;l++)for(var f=i[l],p=l+1,h=i.length;p<h;p++)if(ka(f.bbox,i[p].bbox)===null)return[]}for(var d=new hu(Tn.compare),_=0,v=i.length;_<v;_++)for(var E=i[_].getSweepEvents(),S=0,x=E.length;S<x;S++)if(d.insert(E[S]),d.size>pc)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var C=new V_(d),T=d.size,W=d.pop();W;){var q=W.key;if(d.size===T){var G=q.segment;throw new Error("Unable to pop() ".concat(q.isLeft?"left":"right"," SweepEvent ")+"[".concat(q.point.x,", ").concat(q.point.y,"] from segment #").concat(G.id," ")+"[".concat(G.leftSE.point.x,", ").concat(G.leftSE.point.y,"] -> ")+"[".concat(G.rightSE.point.x,", ").concat(G.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>pc)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(C.segments.length>j_)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var O=C.process(q),$=0,N=O.length;$<N;$++){var ft=O[$];ft.consumedBy===void 0&&d.insert(ft)}T=d.size,W=d.pop()}lo.reset();var nt=U_.factory(C.segments),Le=new z_(nt);return Le.getGeom()}}]),e}(),Fr=new W_;function Qf(e,t,n){if(e!==null)for(var r,i,o,s,a,u,l,c=0,f=0,p,h=e.type,d=h==="FeatureCollection",_=h==="Feature",v=d?e.features.length:1,E=0;E<v;E++){l=d?e.features[E].geometry:_?e.geometry:e,p=l?l.type==="GeometryCollection":!1,a=p?l.geometries.length:1;for(var S=0;S<a;S++){var x=0,C=0;if(s=p?l.geometries[S]:l,s!==null){u=s.coordinates;var T=s.type;switch(c=n&&(T==="Polygon"||T==="MultiPolygon")?1:0,T){case null:break;case"Point":if(t(u,f,E,x,C)===!1)return!1;f++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(t(u[r],f,E,x,C)===!1)return!1;f++,T==="MultiPoint"&&x++}T==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(t(u[r][i],f,E,x,C)===!1)return!1;f++}T==="MultiLineString"&&x++,T==="Polygon"&&C++}T==="Polygon"&&x++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(C=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(t(u[r][i][o],f,E,x,C)===!1)return!1;f++}C++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(Qf(s.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function hc(e){var t=[1/0,1/0,-1/0,-1/0];return Qf(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}hc.default=hc;"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var Br=function(){};Br.prototype.interfaces_=function(){return[]};Br.prototype.getClass=function(){return Br};Br.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var pt=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),M=function(){},Zf={MAX_VALUE:{configurable:!0}};M.isNaN=function(e){return Number.isNaN(e)};M.doubleToLongBits=function(e){return e};M.longBitsToDouble=function(e){return e};M.isInfinite=function(e){return!Number.isFinite(e)};Zf.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(M,Zf);var De=function(){},Ns=function(){},_i=function(){};function Me(){}var g=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Zr={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};g.prototype.setOrdinate=function(e,t){switch(e){case g.X:this.x=t;break;case g.Y:this.y=t;break;case g.Z:this.z=t;break;default:throw new pt("Invalid ordinate index: "+e)}};g.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!Br.equalsWithTolerance(this.x,t.x,n)||!Br.equalsWithTolerance(this.y,t.y,n))}};g.prototype.getOrdinate=function(e){switch(e){case g.X:return this.x;case g.Y:return this.y;case g.Z:return this.z}throw new pt("Invalid ordinate index: "+e)};g.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||M.isNaN(this.z))&&M.isNaN(e.z)};g.prototype.equals=function(e){return e instanceof g?this.equals2D(e):!1};g.prototype.equalInZ=function(e,t){return Br.equalsWithTolerance(this.z,e.z,t)};g.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};g.prototype.clone=function(){};g.prototype.copy=function(){return new g(this)};g.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};g.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)};g.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};g.prototype.hashCode=function(){var e=17;return e=37*e+g.hashCode(this.x),e=37*e+g.hashCode(this.y),e};g.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};g.prototype.interfaces_=function(){return[De,Ns,Me]};g.prototype.getClass=function(){return g};g.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=M.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};Zr.DimensionalComparator.get=function(){return Jn};Zr.serialVersionUID.get=function(){return 6683108902428367e3};Zr.NULL_ORDINATE.get=function(){return M.NaN};Zr.X.get=function(){return 0};Zr.Y.get=function(){return 1};Zr.Z.get=function(){return 2};Object.defineProperties(g,Zr);var Jn=function(e){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new pt("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};Jn.prototype.compare=function(e,t){var n=e,r=t,i=Jn.compare(n.x,r.x);if(i!==0)return i;var o=Jn.compare(n.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var s=Jn.compare(n.z,r.z);return s};Jn.prototype.interfaces_=function(){return[_i]};Jn.prototype.getClass=function(){return Jn};Jn.compare=function(e,t){return e<t?-1:e>t?1:M.isNaN(e)?M.isNaN(t)?0:-1:M.isNaN(t)?1:0};var vi=function(){};vi.prototype.create=function(){};vi.prototype.interfaces_=function(){return[]};vi.prototype.getClass=function(){return vi};var y=function(){},wo={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};y.prototype.interfaces_=function(){return[]};y.prototype.getClass=function(){return y};y.toLocationSymbol=function(e){switch(e){case y.EXTERIOR:return"e";case y.BOUNDARY:return"b";case y.INTERIOR:return"i";case y.NONE:return"-"}throw new pt("Unknown location value: "+e)};wo.INTERIOR.get=function(){return 0};wo.BOUNDARY.get=function(){return 1};wo.EXTERIOR.get=function(){return 2};wo.NONE.get=function(){return-1};Object.defineProperties(y,wo);var D=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Ie=function(){},tp={LOG_10:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]};Ie.prototype.getClass=function(){return Ie};Ie.log10=function(e){var t=Math.log(e);return M.isInfinite(t)||M.isNaN(t)?t:t/Ie.LOG_10};Ie.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i};Ie.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}};Ie.wrap=function(e,t){return e<0?t- -e%t:e%t};Ie.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return t>r&&(r=t),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}};Ie.average=function(e,t){return(e+t)/2};tp.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Ie,tp);var hn=function(e){this.str=e};hn.prototype.append=function(e){this.str+=e};hn.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};hn.prototype.toString=function(e){return this.str};var tn=function(e){this.value=e};tn.prototype.intValue=function(){return this.value};tn.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};tn.isNaN=function(e){return Number.isNaN(e)};var co=function(){};co.isWhitespace=function(e){return e<=32&&e>=0||e===127};co.toUpperCase=function(e){return e.toUpperCase()};var m=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},$e={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};m.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};m.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=m.magnitude(n._hi),i=m.TEN.pow(r);n=n.divide(i),n.gt(m.TEN)?(n=n.divide(m.TEN),r+=1):n.lt(m.ONE)&&(n=n.multiply(m.TEN),r-=1);for(var o=r+1,s=new hn,a=m.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){e&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,f=0;l>9?(c=!0,f="9"):f="0"+l,s.append(f),n=n.subtract(m.valueOf(l)).multiply(m.TEN),c&&n.selfAdd(m.TEN);var p=!0,h=m.magnitude(n._hi);if(h<0&&Math.abs(h)>=a-u&&(p=!1),!p)break}return t[0]=r,s.toString()};m.prototype.sqr=function(){return this.multiply(this)};m.prototype.doubleValue=function(){return this._hi+this._lo};m.prototype.subtract=function(){if(arguments[0]instanceof m){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};m.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};m.prototype.isZero=function(){return this._hi===0&&this._lo===0};m.prototype.selfSubtract=function(){if(arguments[0]instanceof m){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};m.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};m.prototype.min=function(e){return this.le(e)?this:e};m.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof m){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,f=null;return u=this._hi/n,l=m.SPLIT*u,i=l-u,f=m.SPLIT*n,i=l-i,o=u-i,s=f-n,c=u*n,s=f-s,a=n-s,f=i*s-c+i*a+o*s+o*a,l=(this._hi-c-f+this._lo-u*r)/n,f=u+l,this._hi=f,this._lo=u-f+l,this}};m.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};m.prototype.divide=function(){if(arguments[0]instanceof m){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;o=this._hi/e._hi,s=m.SPLIT*o,t=s-o,u=m.SPLIT*e._hi,t=s-t,n=o-t,r=u-e._hi,a=o*e._hi,r=u-r,i=e._hi-r,u=t*r-a+t*i+n*r+n*i,s=(this._hi-a-u+this._lo-o*e._lo)/e._hi,u=o+s;var l=u,c=o-u+s;return new m(l,c)}else if(typeof arguments[0]=="number"){var f=arguments[0];return M.isNaN(f)?m.createNaN():m.copy(this).selfDivide(f,0)}};m.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};m.prototype.pow=function(e){if(e===0)return m.valueOf(1);var t=new m(this),n=m.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(t),r/=2,r>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};m.prototype.ceil=function(){if(this.isNaN())return m.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new m(e,t)};m.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};m.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};m.prototype.setValue=function(){if(arguments[0]instanceof m){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};m.prototype.max=function(e){return this.ge(e)?this:e};m.prototype.sqrt=function(){if(this.isZero())return m.valueOf(0);if(this.isNegative())return m.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=m.valueOf(t),r=this.subtract(n.sqr()),i=r._hi*(e*.5);return n.add(i)};m.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof m){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+t,s=i-this._hi,o=i-s,o=t-s+(this._hi-o),a=o+this._lo,n=i+a,r=a+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var u=arguments[0],l=arguments[1],c=null,f=null,p=null,h=null,d=null,_=null,v=null,E=null;d=this._hi+u,p=this._lo+l,v=d-this._hi,E=p-this._lo,_=d-v,h=p-E,_=u-v+(this._hi-_),h=l-E+(this._lo-h),v=_+p,c=d+v,f=v+(d-c),v=h+f;var S=c+v,x=v+(c-S);return this._hi=S,this._lo=x,this}};m.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof m){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;u=m.SPLIT*this._hi,i=u-this._hi,l=m.SPLIT*n,i=u-i,o=this._hi-i,s=l-n,u=this._hi*n,s=l-s,a=n-s,l=i*s-u+i*a+o*s+o*a+(this._hi*r+this._lo*n);var c=u+l;i=u-c;var f=l+i;return this._hi=c,this._lo=f,this}};m.prototype.selfSqr=function(){return this.selfMultiply(this)};m.prototype.floor=function(){if(this.isNaN())return m.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new m(e,t)};m.prototype.negate=function(){return this.isNaN()?this:new m(-this._hi,-this._lo)};m.prototype.clone=function(){};m.prototype.multiply=function(){if(arguments[0]instanceof m){var e=arguments[0];return e.isNaN()?m.createNaN():m.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return M.isNaN(t)?m.createNaN():m.copy(this).selfMultiply(t,0)}};m.prototype.isNaN=function(){return M.isNaN(this._hi)};m.prototype.intValue=function(){return Math.trunc(this._hi)};m.prototype.toString=function(){var e=m.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};m.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+m.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,s=m.stringOfChar("0",o);i=n+s+".0"}return this.isNegative()?"-"+i:i};m.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,o=null,s=null,a=null;i=1/this._hi,o=m.SPLIT*i,e=o-i,a=m.SPLIT*this._hi,e=o-e,t=i-e,n=a-this._hi,s=i*this._hi,n=a-n,r=this._hi-n,a=e*n-s+e*r+t*n+t*r,o=(1-s-a-i*this._lo)/this._hi;var u=i+o,l=i-u+o;return new m(u,l)};m.prototype.toSciNotation=function(){if(this.isZero())return m.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=m.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r};m.prototype.abs=function(){return this.isNaN()?m.NaN:this.isNegative()?this.negate():new m(this)};m.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};m.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};m.prototype.add=function(){if(arguments[0]instanceof m){var e=arguments[0];return m.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return m.copy(this).selfAdd(t)}};m.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof m){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};m.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};m.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};m.prototype.trunc=function(){return this.isNaN()?m.NaN:this.isPositive()?this.floor():this.ceil()};m.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};m.prototype.interfaces_=function(){return[Me,De,Ns]};m.prototype.getClass=function(){return m};m.sqr=function(e){return m.valueOf(e).selfMultiply(e)};m.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return m.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new m(t)}};m.sqrt=function(e){return m.valueOf(e).sqrt()};m.parse=function(e){for(var t=0,n=e.length;co.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);(i==="-"||i==="+")&&(t++,i==="-"&&(r=!0))}for(var o=new m,s=0,a=0,u=0;!(t>=n);){var l=e.charAt(t);if(t++,co.isDigit(l)){var c=l-"0";o.selfMultiply(m.TEN),o.selfAdd(c),s++;continue}if(l==="."){a=s;continue}if(l==="e"||l==="E"){var f=e.substring(t);try{u=tn.parseInt(f)}catch(v){throw v instanceof Error?new Error("Invalid exponent "+f+" in string "+e):v}finally{}break}throw new Error("Unexpected character '"+l+"' at position "+t+" in string "+e)}var p=o,h=s-a-u;if(h===0)p=o;else if(h>0){var d=m.TEN.pow(h);p=o.divide(d)}else if(h<0){var _=m.TEN.pow(-h);p=o.multiply(_)}return r?p.negate():p};m.createNaN=function(){return new m(M.NaN,M.NaN)};m.copy=function(e){return new m(e)};m.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=t&&(r+=1),r};m.stringOfChar=function(e,t){for(var n=new hn,r=0;r<t;r++)n.append(e);return n.toString()};$e.PI.get=function(){return new m(3.141592653589793,12246467991473532e-32)};$e.TWO_PI.get=function(){return new m(6.283185307179586,24492935982947064e-32)};$e.PI_2.get=function(){return new m(1.5707963267948966,6123233995736766e-32)};$e.E.get=function(){return new m(2.718281828459045,14456468917292502e-32)};$e.NaN.get=function(){return new m(M.NaN,M.NaN)};$e.EPS.get=function(){return 123259516440783e-46};$e.SPLIT.get=function(){return 134217729};$e.MAX_PRINT_DIGITS.get=function(){return 32};$e.TEN.get=function(){return m.valueOf(10)};$e.ONE.get=function(){return m.valueOf(1)};$e.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};$e.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(m,$e);var ae=function(){},ep={DP_SAFE_EPSILON:{configurable:!0}};ae.prototype.interfaces_=function(){return[]};ae.prototype.getClass=function(){return ae};ae.orientationIndex=function(e,t,n){var r=ae.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=m.valueOf(t.x).selfAdd(-e.x),o=m.valueOf(t.y).selfAdd(-e.y),s=m.valueOf(n.x).selfAdd(-t.x),a=m.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()};ae.signOfDet2x2=function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()};ae.intersection=function(e,t,n,r){var i=m.valueOf(r.y).selfSubtract(n.y).selfMultiply(m.valueOf(t.x).selfSubtract(e.x)),o=m.valueOf(r.x).selfSubtract(n.x).selfMultiply(m.valueOf(t.y).selfSubtract(e.y)),s=i.subtract(o),a=m.valueOf(r.x).selfSubtract(n.x).selfMultiply(m.valueOf(e.y).selfSubtract(n.y)),u=m.valueOf(r.y).selfSubtract(n.y).selfMultiply(m.valueOf(e.x).selfSubtract(n.x)),l=a.subtract(u),c=l.selfDivide(s).doubleValue(),f=m.valueOf(e.x).selfAdd(m.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),p=m.valueOf(t.x).selfSubtract(e.x).selfMultiply(m.valueOf(e.y).selfSubtract(n.y)),h=m.valueOf(t.y).selfSubtract(e.y).selfMultiply(m.valueOf(e.x).selfSubtract(n.x)),d=p.subtract(h),_=d.selfDivide(s).doubleValue(),v=m.valueOf(n.y).selfAdd(m.valueOf(r.y).selfSubtract(n.y).selfMultiply(_)).doubleValue();return new g(f,v)};ae.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),s=i-o;if(i>0){if(o<=0)return ae.signum(s);r=i+o}else if(i<0){if(o>=0)return ae.signum(s);r=-i-o}else return ae.signum(s);var a=ae.DP_SAFE_EPSILON*r;return s>=a||-s>=a?ae.signum(s):2};ae.signum=function(e){return e>0?1:e<0?-1:0};ep.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(ae,ep);var j=function(){},No={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};No.X.get=function(){return 0};No.Y.get=function(){return 1};No.Z.get=function(){return 2};No.M.get=function(){return 3};j.prototype.setOrdinate=function(e,t,n){};j.prototype.size=function(){};j.prototype.getOrdinate=function(e,t){};j.prototype.getCoordinate=function(){};j.prototype.getCoordinateCopy=function(e){};j.prototype.getDimension=function(){};j.prototype.getX=function(e){};j.prototype.clone=function(){};j.prototype.expandEnvelope=function(e){};j.prototype.copy=function(){};j.prototype.getY=function(e){};j.prototype.toCoordinateArray=function(){};j.prototype.interfaces_=function(){return[Ns]};j.prototype.getClass=function(){return j};Object.defineProperties(j,No);var np=function(){},Vi=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(np),Ut=function(){};Ut.arraycopy=function(e,t,n,r,i){for(var o=0,s=t;s<t+i;s++)n[r+o]=e[s],o++};Ut.getProperty=function(e){return{"line.separator":`
`}[e]};var ke=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof g&&arguments[1]instanceof g){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(arguments.length===3){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(arguments.length===4){var f=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3],_=f.y-p.y,v=p.x-f.x,E=f.x*p.y-p.x*f.y,S=h.y-d.y,x=d.x-h.x,C=h.x*d.y-d.x*h.y;this.x=v*C-x*E,this.y=S*E-_*C,this.w=_*x-S*v}};ke.prototype.getY=function(){var e=this.y/this.w;if(M.isNaN(e)||M.isInfinite(e))throw new Vi;return e};ke.prototype.getX=function(){var e=this.x/this.w;if(M.isNaN(e)||M.isInfinite(e))throw new Vi;return e};ke.prototype.getCoordinate=function(){var e=new g;return e.x=this.getX(),e.y=this.getY(),e};ke.prototype.interfaces_=function(){return[]};ke.prototype.getClass=function(){return ke};ke.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,s=e.x*t.y-t.x*e.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=o*l-u*s,f=a*s-i*l,p=i*u-a*o,h=c/p,d=f/p;if(M.isNaN(h)||M.isInfinite(h)||M.isNaN(d)||M.isInfinite(d))throw new Vi;return new g(h,d)};var P=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof g){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},rp={serialVersionUID:{configurable:!0}};P.prototype.getArea=function(){return this.getWidth()*this.getHeight()};P.prototype.equals=function(e){if(!(e instanceof P))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};P.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new P;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new P(t,r,n,i)};P.prototype.isNull=function(){return this._maxx<this._minx};P.prototype.getMaxX=function(){return this._maxx};P.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof g){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof P){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};P.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof P){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof g){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};P.prototype.getMinY=function(){return this._miny};P.prototype.getMinX=function(){return this._minx};P.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof g){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof P){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};P.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};P.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};P.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};P.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};P.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};P.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};P.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};P.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};P.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};P.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof P){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof g){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};P.prototype.centre=function(){return this.isNull()?null:new g((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};P.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof g){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof P){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}};P.prototype.getMaxY=function(){return this._maxy};P.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};P.prototype.hashCode=function(){var e=17;return e=37*e+g.hashCode(this._minx),e=37*e+g.hashCode(this._maxx),e=37*e+g.hashCode(this._miny),e=37*e+g.hashCode(this._maxy),e};P.prototype.interfaces_=function(){return[De,Me]};P.prototype.getClass=function(){return P};P.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u)||c<a)}};rp.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(P,rp);var He={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ls=function(e){this.geometryFactory=e||new z};Ls.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=He.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=He.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],pi[n]&&(t=pi[n].apply(this,[r]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};Ls.prototype.write=function(e){return this.extractGeometry(e)};Ls.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Rn[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+Rn[t].apply(this,[e])+")",r};var Rn={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Rn.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Rn.point.apply(t,[e._geometries[r]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Rn.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Rn.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Rn.linestring.apply(t,[e._geometries[r]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+Rn.linestring.apply(this,[e._shell])+")");for(var r=0,i=e._holes.length;r<i;++r)n.push("("+Rn.linestring.apply(t,[e._holes[r]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Rn.polygon.apply(t,[e._geometries[r]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push(t.extractGeometry(e._geometries[r]));return n.join(",")}},pi={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(He.spaces);return this.geometryFactory.createPoint(new g(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=e.trim().split(","),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(He.trimParens,"$1"),i.push(pi.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(He.spaces),n.push(new g(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(He.spaces),n.push(new g(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=e.trim().split(He.parenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(He.trimParens,"$1"),i.push(pi.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,o=e.trim().split(He.parenComma),s,a=[],u=0,l=o.length;u<l;++u)n=o[u].replace(He.trimParens,"$1"),r=pi.linestring.apply(t,[n]),i=t.geometryFactory.createLinearRing(r._points),u===0?s=i:a.push(i);return this.geometryFactory.createPolygon(s,a)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=e.trim().split(He.doubleParenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(He.trimParens,"$1"),i.push(pi.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(t.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},Be=function(e){this.parser=new Ls(e)};Be.prototype.write=function(e){return this.parser.write(e)};Be.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var kn=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ps=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(kn),k=function(){};k.prototype.interfaces_=function(){return[]};k.prototype.getClass=function(){return k};k.shouldNeverReachHere=function(){if(arguments.length===0)k.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new ps("Should never reach here"+(e!==null?": "+e:""))}};k.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],k.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new ps:new ps(t)};k.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],k.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new ps("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var ht=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new g,this._intPt[1]=new g,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ti={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ht.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};ht.prototype.getTopologySummary=function(){var e=new hn;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};ht.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)};ht.prototype.getIntersectionNum=function(){return this._result};ht.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};ht.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};ht.prototype.setPrecisionModel=function(e){this._precisionModel=e};ht.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};ht.prototype.getIntersection=function(e){return this._intPt[e]};ht.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};ht.prototype.hasIntersection=function(){return this._result!==ht.NO_INTERSECTION};ht.prototype.getEdgeDistance=function(e,t){var n=ht.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};ht.prototype.isCollinear=function(){return this._result===ht.COLLINEAR_INTERSECTION};ht.prototype.toString=function(){return Be.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Be.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};ht.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};ht.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};ht.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};ht.prototype.interfaces_=function(){return[]};ht.prototype.getClass=function(){return ht};ht.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))r>i?o=r:o=i;else{var s=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);r>i?o=s:o=a,o===0&&!e.equals(t)&&(o=Math.max(s,a))}return k.isTrue(!(o===0&&!e.equals(t)),"Bad distance calculation"),o};ht.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return k.isTrue(!(o===0&&!e.equals(t)),"Invalid distance calculation"),o};ti.DONT_INTERSECT.get=function(){return 0};ti.DO_INTERSECT.get=function(){return 1};ti.COLLINEAR.get=function(){return 2};ti.NO_INTERSECTION.get=function(){return 0};ti.POINT_INTERSECTION.get=function(){return 1};ti.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(ht,ti);var Pr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var r=new P(this._inputLines[0][0],this._inputLines[0][1]),i=new P(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,P.intersects(r,i,n)&&w.orientationIndex(r,i,n)===0&&w.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,r,i,o,s){s.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),s.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},t.prototype.safeHCoordinateIntersection=function(n,r,i,o){var s=null;try{s=ke.intersection(n,r,i,o)}catch(a){if(a instanceof Vi)s=t.nearestEndpoint(n,r,i,o);else throw a}finally{}return s},t.prototype.intersection=function(n,r,i,o){var s=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(s)||(s=new g(t.nearestEndpoint(n,r,i,o))),this._precisionModel!==null&&this._precisionModel.makePrecise(s),s},t.prototype.smallestInAbsValue=function(n,r,i,o){var s=n,a=Math.abs(s);return Math.abs(r)<a&&(s=r,a=Math.abs(r)),Math.abs(i)<a&&(s=i,a=Math.abs(i)),Math.abs(o)<a&&(s=o),s},t.prototype.checkDD=function(n,r,i,o,s){var a=ae.intersection(n,r,i,o),u=this.isInSegmentEnvelopes(a);Ut.out.println("DD in env = "+u+"  --------------------- "+a),s.distance(a)>1e-4&&Ut.out.println("Distance = "+s.distance(a))},t.prototype.intersectionWithNormalization=function(n,r,i,o){var s=new g(n),a=new g(r),u=new g(i),l=new g(o),c=new g;this.normalizeToEnvCentre(s,a,u,l,c);var f=this.safeHCoordinateIntersection(s,a,u,l);return f.x+=c.x,f.y+=c.y,f},t.prototype.computeCollinearIntersection=function(n,r,i,o){var s=P.intersects(n,r,i),a=P.intersects(n,r,o),u=P.intersects(i,o,n),l=P.intersects(i,o,r);return s&&a?(this._intPt[0]=i,this._intPt[1]=o,e.COLLINEAR_INTERSECTION):u&&l?(this._intPt[0]=n,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!a&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!a&&!u?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!s&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!s&&!u?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,r,i,o,s){var a=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,c=n.y>r.y?n.y:r.y,f=i.x<o.x?i.x:o.x,p=i.y<o.y?i.y:o.y,h=i.x>o.x?i.x:o.x,d=i.y>o.y?i.y:o.y,_=a>f?a:f,v=l<h?l:h,E=u>p?u:p,S=c<d?c:d,x=(_+v)/2,C=(E+S)/2;s.x=x,s.y=C,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},t.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!P.intersects(n,r,i,o))return e.NO_INTERSECTION;var s=w.orientationIndex(n,r,i),a=w.orientationIndex(n,r,o);if(s>0&&a>0||s<0&&a<0)return e.NO_INTERSECTION;var u=w.orientationIndex(i,o,n),l=w.orientationIndex(i,o,r);if(u>0&&l>0||u<0&&l<0)return e.NO_INTERSECTION;var c=s===0&&a===0&&u===0&&l===0;return c?this.computeCollinearIntersection(n,r,i,o):(s===0||a===0||u===0||l===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:s===0?this._intPt[0]=new g(i):a===0?this._intPt[0]=new g(o):u===0?this._intPt[0]=new g(n):l===0&&(this._intPt[0]=new g(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,r,i,o){var s=n,a=w.distancePointLine(n,i,o),u=w.distancePointLine(r,i,o);return u<a&&(a=u,s=r),u=w.distancePointLine(i,n,r),u<a&&(a=u,s=i),u=w.distancePointLine(o,n,r),u<a&&(a=u,s=o),s},t}(ht),qr=function(){};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};qr.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,s=n.y-t.y;return qr.signOfDet2x2(r,i,o,s)};qr.signOfDet2x2=function(e,t,n,r){var i=null,o=null,s=null;if(i=1,e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):t<=-r?(i=-i,n=-n,r=-r):(o=e,e=-n,n=o,o=t,t=-r,r=o):r>0?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,r=o),e>0)if(n>0){if(!(e<=n))return i}else return i;else{if(n>0)return-i;if(e>=n)i=-i,e=-e,n=-n;else return-i}for(;;){if(s=Math.floor(n/e),n=n-s*e,r=r-s*t,r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(s=Math.floor(e/n),e=e-s*n,t=t-s*r,t<0))return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}};var Qe=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};Qe.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,s=t.x-this._p.x,a=t.y-this._p.y,u=qr.signOfDet2x2(i,o,s,a);if(u===0)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}};Qe.prototype.isPointInPolygon=function(){return this.getLocation()!==y.EXTERIOR};Qe.prototype.getLocation=function(){return this._isPointOnSegment?y.BOUNDARY:this._crossingCount%2===1?y.INTERIOR:y.EXTERIOR};Qe.prototype.isOnSegment=function(){return this._isPointOnSegment};Qe.prototype.interfaces_=function(){return[]};Qe.prototype.getClass=function(){return Qe};Qe.locatePointInRing=function(){if(arguments[0]instanceof g&&D(arguments[1],j)){for(var e=arguments[0],t=arguments[1],n=new Qe(e),r=new g,i=new g,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof g&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Qe(s),l=1;l<a.length;l++){var c=a[l],f=a[l-1];if(u.countSegment(c,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var w=function(){},ei={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};w.prototype.interfaces_=function(){return[]};w.prototype.getClass=function(){return w};w.orientationIndex=function(e,t,n){return ae.orientationIndex(e,t,n)};w.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y,s=e[r-1].y;t+=i*(s-o)}return t/2}else if(D(arguments[0],j)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new g,c=new g,f=new g;a.getCoordinate(0,c),a.getCoordinate(1,f);var p=c.x;f.x-=p;for(var h=0,d=1;d<u-1;d++)l.y=c.y,c.x=f.x,c.y=f.y,a.getCoordinate(d+1,f),f.x-=p,h+=c.x*(l.y-f.y);return h/2}};w.distanceLineLine=function(e,t,n,r){if(e.equals(t))return w.distancePointLine(e,n,r);if(n.equals(r))return w.distancePointLine(r,e,t);var i=!1;if(!P.intersects(e,t,n,r))i=!0;else{var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)i=!0;else{var s=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),a=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),u=a/o,l=s/o;(l<0||l>1||u<0||u>1)&&(i=!0)}}return i?Ie.min(w.distancePointLine(e,n,r),w.distancePointLine(t,n,r),w.distancePointLine(n,e,t),w.distancePointLine(r,e,t)):0};w.isPointInRing=function(e,t){return w.locatePointInRing(e,t)!==y.EXTERIOR};w.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new g;e.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<t;s++){e.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n};w.isCCW=function(e){var t=e.length-1;if(t<3)throw new pt("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var s=r;do s=s-1,s<0&&(s=t);while(e[s].equals2D(n)&&s!==r);var a=r;do a=(a+1)%t;while(e[a].equals2D(n)&&a!==r);var u=e[s],l=e[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=w.computeOrientation(u,n,l),f=!1;return c===0?f=u.x>l.x:f=c>0,f};w.locatePointInRing=function(e,t){return Qe.locatePointInRing(e,t)};w.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)};w.computeOrientation=function(e,t,n){return w.orientationIndex(e,t,n)};w.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new pt("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=w.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}};w.isOnLine=function(e,t){for(var n=new Pr,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1};ei.CLOCKWISE.get=function(){return-1};ei.RIGHT.get=function(){return w.CLOCKWISE};ei.COUNTERCLOCKWISE.get=function(){return 1};ei.LEFT.get=function(){return w.COUNTERCLOCKWISE};ei.COLLINEAR.get=function(){return 0};ei.STRAIGHT.get=function(){return w.COLLINEAR};Object.defineProperties(w,ei);var Gn=function(){};Gn.prototype.filter=function(e){};Gn.prototype.interfaces_=function(){return[]};Gn.prototype.getClass=function(){return Gn};var A=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},On={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};A.prototype.isGeometryCollection=function(){return this.getSortIndex()===A.SORTINDEX_GEOMETRYCOLLECTION};A.prototype.getFactory=function(){return this._factory};A.prototype.getGeometryN=function(e){return this};A.prototype.getArea=function(){return 0};A.prototype.isRectangle=function(){return!1};A.prototype.equals=function(){if(arguments[0]instanceof A){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof A))return!1;var n=t;return this.equalsExact(n)}};A.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};A.prototype.geometryChanged=function(){this.apply(A.geometryChangedFilter)};A.prototype.geometryChangedAction=function(){this._envelope=null};A.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};A.prototype.getLength=function(){return 0};A.prototype.getNumGeometries=function(){return 1};A.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};A.prototype.getUserData=function(){return this._userData};A.prototype.getSRID=function(){return this._SRID};A.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};A.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===A.SORTINDEX_GEOMETRYCOLLECTION)throw new pt("This method does not support GeometryCollection arguments")};A.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};A.prototype.norm=function(){var e=this.copy();return e.normalize(),e};A.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};A.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new P(this._envelope)};A.prototype.setSRID=function(e){this._SRID=e};A.prototype.setUserData=function(e){this._userData=e};A.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(s!==0)return s}return n.hasNext()?1:r.hasNext()?-1:0};A.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};A.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===A.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===A.SORTINDEX_MULTIPOINT||this.getSortIndex()===A.SORTINDEX_MULTILINESTRING||this.getSortIndex()===A.SORTINDEX_MULTIPOLYGON};A.prototype.interfaces_=function(){return[Ns,De,Me]};A.prototype.getClass=function(){return A};A.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};A.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};On.serialVersionUID.get=function(){return 8763622679187377e3};On.SORTINDEX_POINT.get=function(){return 0};On.SORTINDEX_MULTIPOINT.get=function(){return 1};On.SORTINDEX_LINESTRING.get=function(){return 2};On.SORTINDEX_LINEARRING.get=function(){return 3};On.SORTINDEX_MULTILINESTRING.get=function(){return 4};On.SORTINDEX_POLYGON.get=function(){return 5};On.SORTINDEX_MULTIPOLYGON.get=function(){return 6};On.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};On.geometryChangedFilter.get=function(){return gu};Object.defineProperties(A,On);var gu=function(){};gu.interfaces_=function(){return[Gn]};gu.filter=function(e){e.geometryChangedAction()};var bn=function(){};bn.prototype.filter=function(e){};bn.prototype.interfaces_=function(){return[]};bn.prototype.getClass=function(){return bn};var Re=function(){},jn={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Re.prototype.isInBoundary=function(e){};Re.prototype.interfaces_=function(){return[]};Re.prototype.getClass=function(){return Re};jn.Mod2BoundaryNodeRule.get=function(){return bi};jn.EndPointBoundaryNodeRule.get=function(){return Ei};jn.MultiValentEndPointBoundaryNodeRule.get=function(){return Ii};jn.MonoValentEndPointBoundaryNodeRule.get=function(){return Si};jn.MOD2_BOUNDARY_RULE.get=function(){return new bi};jn.ENDPOINT_BOUNDARY_RULE.get=function(){return new Ei};jn.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ii};jn.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Si};jn.OGC_SFS_BOUNDARY_RULE.get=function(){return Re.MOD2_BOUNDARY_RULE};Object.defineProperties(Re,jn);var bi=function(){};bi.prototype.isInBoundary=function(e){return e%2===1};bi.prototype.interfaces_=function(){return[Re]};bi.prototype.getClass=function(){return bi};var Ei=function(){};Ei.prototype.isInBoundary=function(e){return e>0};Ei.prototype.interfaces_=function(){return[Re]};Ei.prototype.getClass=function(){return Ei};var Ii=function(){};Ii.prototype.isInBoundary=function(e){return e>1};Ii.prototype.interfaces_=function(){return[Re]};Ii.prototype.getClass=function(){return Ii};var Si=function(){};Si.prototype.isInBoundary=function(e){return e===1};Si.prototype.interfaces_=function(){return[Re]};Si.prototype.getClass=function(){return Si};var Ct=function(){};Ct.prototype.add=function(){};Ct.prototype.addAll=function(){};Ct.prototype.isEmpty=function(){};Ct.prototype.iterator=function(){};Ct.prototype.size=function(){};Ct.prototype.toArray=function(){};Ct.prototype.remove=function(){};function du(e){this.message=e||""}du.prototype=new Error;du.prototype.name="IndexOutOfBoundsException";var ji=function(){};ji.prototype.hasNext=function(){};ji.prototype.next=function(){};ji.prototype.remove=function(){};var Ge=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(Ct);function Wi(e){this.message=e||""}Wi.prototype=new Error;Wi.prototype.name="NoSuchElementException";var I=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Ct&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,Ct]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},t.prototype.iterator=function(){return new $_(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new du;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.remove=function(n){for(var r=this,i=!1,o=0,s=this.array_.length;o<s;o++)if(r.array_[o]===n){r.array_.splice(o,1),i=!0;break}return i},t}(Ge),$_=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Wi;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(ji),Lo=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(r){return this.get(r)},t.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=!1,a=i.iterator();a.hasNext();)r.add(a.next(),o),s=!0;return s}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=e.prototype.clone.call(this),o=0;o<this.size();o++)i.add(o,r.get(o).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];e.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1];return this.add(o,s,!0),!0}else if(arguments[0]instanceof g&&typeof arguments[1]=="boolean"){var a=arguments[0],u=arguments[1];if(!u&&this.size()>=1){var l=this.get(this.size()-1);if(l.equals2D(a))return null}e.prototype.add.call(this,a)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],f=arguments[1];return this.add(c,f),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var p=arguments[0],h=arguments[1],d=arguments[2];if(d)for(var _=0;_<p.length;_++)r.add(p[_],h);else for(var v=p.length-1;v>=0;v--)r.add(p[v],h);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof g){var E=arguments[0],S=arguments[1],x=arguments[2];if(!x){var C=this.size();if(C>0){if(E>0){var T=this.get(E-1);if(T.equals2D(S))return null}if(E<C){var W=this.get(E);if(W.equals2D(S))return null}}}e.prototype.add.call(this,E,S)}}else if(arguments.length===4){var q=arguments[0],G=arguments[1],O=arguments[2],$=arguments[3],N=1;O>$&&(N=-1);for(var ft=O;ft!==$;ft+=N)r.add(q[ft],G);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new g(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(I),B=function(){},Cs={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Cs.ForwardComparator.get=function(){return fo};Cs.BidirectionalComparator.get=function(){return xi};Cs.coordArrayType.get=function(){return new Array(0).fill(null)};B.prototype.interfaces_=function(){return[]};B.prototype.getClass=function(){return B};B.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};B.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(B.indexOf(r,t)<0)return r}return null};B.scroll=function(e,t){var n=B.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);Ut.arraycopy(e,n,r,0,e.length-n),Ut.arraycopy(e,0,r,e.length-n,n),Ut.arraycopy(r,0,e,0,e.length)};B.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(o.compare(r[s],i[s])!==0)return!1;return!0}};B.intersection=function(e,t){for(var n=new Lo,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()};B.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};B.removeRepeatedPoints=function(e){if(!B.hasRepeatedPoints(e))return e;var t=new Lo(e,!1);return t.toCoordinateArray()};B.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}};B.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var i=0,o=0;o<e.length;o++)e[o]!==null&&(r[i++]=e[o]);return r};B.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new g(e[n]);return t}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new g(r[i+u])};B.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};B.envelope=function(e){for(var t=new P,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};B.toCoordinateArray=function(e){return e.toArray(B.coordArrayType)};B.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};B.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};B.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1};B.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0};B.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};B.extract=function(e,t,n){t=Ie.clamp(t,0,e.length),n=Ie.clamp(n,-1,e.length);var r=n-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,s=t;s<=n;s++)i[o++]=e[s];return i};Object.defineProperties(B,Cs);var fo=function(){};fo.prototype.compare=function(e,t){var n=e,r=t;return B.compare(n,r)};fo.prototype.interfaces_=function(){return[_i]};fo.prototype.getClass=function(){return fo};var xi=function(){};xi.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=B.compare(n,r),o=B.isEqualReversed(n,r);return o?0:i};xi.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=B.increasingDirection(n),o=B.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(l!==0)return l;s+=i,a+=o}return 0};xi.prototype.interfaces_=function(){return[_i]};xi.prototype.getClass=function(){return xi};var ni=function(){};ni.prototype.get=function(){};ni.prototype.put=function(){};ni.prototype.size=function(){};ni.prototype.values=function(){};ni.prototype.entrySet=function(){};var X_=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(ni);function Co(e){this.message=e||""}Co.prototype=new Error;Co.prototype.name="OperationNotSupported";function Os(){}Os.prototype=new Ct;Os.prototype.contains=function(){};var yu=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Ct&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var r=this,i=0,o=this.array_.length;i<o;i++){var s=r.array_[i];if(s===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.iterator=function(){return new Y_(this)},t}(Os),Y_=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Wi;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new Co},t}(ji),An=0,lr=1;function gc(e){return e===null?An:e.color}function st(e){return e===null?null:e.parent}function Pn(e,t){e!==null&&(e.color=t)}function la(e){return e===null?null:e.left}function dc(e){return e===null?null:e.right}function Xt(){this.root_=null,this.size_=0}Xt.prototype=new X_;Xt.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};Xt.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:An,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var s={key:e,left:null,right:null,value:t,parent:r,color:An,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null};Xt.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=lr;e!=null&&e!==this.root_&&e.parent.color===lr;)if(st(e)===la(st(st(e)))){var n=dc(st(st(e)));gc(n)===lr?(Pn(st(e),An),Pn(n,An),Pn(st(st(e)),lr),e=st(st(e))):(e===dc(st(e))&&(e=st(e),t.rotateLeft(e)),Pn(st(e),An),Pn(st(st(e)),lr),t.rotateRight(st(st(e))))}else{var r=la(st(st(e)));gc(r)===lr?(Pn(st(e),An),Pn(r,An),Pn(st(st(e)),lr),e=st(st(e))):(e===la(st(e))&&(e=st(e),t.rotateRight(e)),Pn(st(e),An),Pn(st(st(e)),lr),t.rotateLeft(st(st(e))))}this.root_.color=An};Xt.prototype.values=function(){var e=new I,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=Xt.successor(t))!==null;)e.add(t.value);return e};Xt.prototype.entrySet=function(){var e=new yu,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=Xt.successor(t))!==null;)e.add(t);return e};Xt.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};Xt.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};Xt.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};Xt.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};Xt.prototype.size=function(){return this.size_};var po=function(){};po.prototype.interfaces_=function(){return[]};po.prototype.getClass=function(){return po};function ip(){}ip.prototype=new Os;function en(){this.array_=[],arguments[0]instanceof Ct&&this.addAll(arguments[0])}en.prototype=new ip;en.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};en.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};en.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};en.prototype.remove=function(e){throw new Co};en.prototype.size=function(){return this.array_.length};en.prototype.isEmpty=function(){return this.array_.length===0};en.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};en.prototype.iterator=function(){return new Ps(this)};var Ps=function(e){this.treeSet_=e,this.position_=0};Ps.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Wi;return this.treeSet_.array_[this.position_++]};Ps.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Ps.prototype.remove=function(){throw new Co};var yr=function(){};yr.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1)i=function(s,a){return s.compareTo(a)},e.sort(i);else if(arguments.length===2)r=arguments[1],i=function(s,a){return r.compare(s,a)},e.sort(i);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(s,a){return r.compare(s,a)},n.sort(i),o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])};yr.asList=function(e){for(var t=new I,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var X=function(){},Xe={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Xe.P.get=function(){return 0};Xe.L.get=function(){return 1};Xe.A.get=function(){return 2};Xe.FALSE.get=function(){return-1};Xe.TRUE.get=function(){return-2};Xe.DONTCARE.get=function(){return-3};Xe.SYM_FALSE.get=function(){return"F"};Xe.SYM_TRUE.get=function(){return"T"};Xe.SYM_DONTCARE.get=function(){return"*"};Xe.SYM_P.get=function(){return"0"};Xe.SYM_L.get=function(){return"1"};Xe.SYM_A.get=function(){return"2"};X.prototype.interfaces_=function(){return[]};X.prototype.getClass=function(){return X};X.toDimensionSymbol=function(e){switch(e){case X.FALSE:return X.SYM_FALSE;case X.TRUE:return X.SYM_TRUE;case X.DONTCARE:return X.SYM_DONTCARE;case X.P:return X.SYM_P;case X.L:return X.SYM_L;case X.A:return X.SYM_A}throw new pt("Unknown dimension value: "+e)};X.toDimensionValue=function(e){switch(co.toUpperCase(e)){case X.SYM_FALSE:return X.FALSE;case X.SYM_TRUE:return X.TRUE;case X.SYM_DONTCARE:return X.DONTCARE;case X.SYM_P:return X.P;case X.SYM_L:return X.L;case X.SYM_A:return X.A}throw new pt("Unknown dimension symbol: "+e)};Object.defineProperties(X,Xe);var nn=function(){};nn.prototype.filter=function(e){};nn.prototype.interfaces_=function(){return[]};nn.prototype.getClass=function(){return nn};var qe=function(){};qe.prototype.filter=function(e,t){};qe.prototype.isDone=function(){};qe.prototype.isGeometryChanged=function(){};qe.prototype.interfaces_=function(){return[]};qe.prototype.getClass=function(){return qe};var ee=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new pt("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new P,o=0;o<this._geometries.length;o++)i.expandToInclude(r._geometries[o].getEnvelopeInternal());return i},t.prototype.getGeometryN=function(r){return this._geometries[r]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),o=-1,s=0;s<this._geometries.length;s++)for(var a=r._geometries[s].getCoordinates(),u=0;u<a.length;u++)o++,i[o]=a[u];return i},t.prototype.getArea=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getArea();return i},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._geometries.length!==s._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!r._geometries[a].equalsExact(s._geometries[a],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();yr.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var r=this,i=X.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getBoundaryDimension());return i},t.prototype.getDimension=function(){for(var r=this,i=X.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getDimension());return i},t.prototype.getLength=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getNumPoints();return i},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createGeometryCollection(o)},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=new en(yr.asList(this._geometries)),s=new en(yr.asList(i._geometries));return this.compare(o,s)}else if(arguments.length===2){for(var a=arguments[0],u=arguments[1],l=a,c=this.getNumGeometries(),f=l.getNumGeometries(),p=0;p<c&&p<f;){var h=r.getGeometryN(p),d=l.getGeometryN(p),_=h.compareToSameClass(d,u);if(_!==0)return _;p++}return p<c?1:p<f?-1:0}},t.prototype.apply=function(){var r=this;if(D(arguments[0],bn))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(D(arguments[0],qe)){var s=arguments[0];if(this._geometries.length===0)return null;for(var a=0;a<this._geometries.length&&(r._geometries[a].apply(s),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(D(arguments[0],nn)){var u=arguments[0];u.filter(this);for(var l=0;l<this._geometries.length;l++)r._geometries[l].apply(u)}else if(D(arguments[0],Gn)){var c=arguments[0];c.filter(this);for(var f=0;f<this._geometries.length;f++)r._geometries[f].apply(c)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),k.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var o=0;o<this._geometries.length;o++)i._geometries[o]=r._geometries[o].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(A),vr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return A.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?X.FALSE:0},t.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[i-1-s]=r._geometries[s].reverse();return this.getFactory().createMultiLineString(o)},t.prototype.getBoundary=function(){return new Ce(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[po]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(ee),Ce=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=Re.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Ce.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};Ce.prototype.getBoundary=function(){return this._geom instanceof mt?this.boundaryLineString(this._geom):this._geom instanceof vr?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};Ce.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};Ce.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};Ce.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new I;this._endpointMap=new Xt;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getNumPoints()!==0&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue(),u=a.count;t._bnRule.isInBoundary(u)&&n.add(s.getKey())}return B.toCoordinateArray(n)};Ce.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new hs,this._endpointMap.put(e,t)),t.count++};Ce.prototype.interfaces_=function(){return[]};Ce.prototype.getClass=function(){return Ce};Ce.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new Ce(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Ce(n,r);return i.getBoundary()}};var hs=function(){this.count=null};hs.prototype.interfaces_=function(){return[]};hs.prototype.getClass=function(){return hs};function H_(){}function J_(){}var K_=function(){};function Q_(){}function Z_(){}function tv(){}var Oe=function(){},mu={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Oe.prototype.interfaces_=function(){return[]};Oe.prototype.getClass=function(){return Oe};Oe.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)};Oe.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new Q_,n=new H_;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o="";new J_(Oe.getStackTrace(r));for(var s=new tv,a=0;a<i;a++)try{o+=s.readLine()+Oe.NEWLINE}catch(u){if(u instanceof Z_)k.shouldNeverReachHere();else throw u}finally{}return o}};Oe.split=function(e,t){for(var n=t.length,r=new I,i=""+e,o=i.indexOf(t);o>=0;){var s=i.substring(0,o);r.add(s),i=i.substring(o+n),o=i.indexOf(t)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a};Oe.toString=function(){if(arguments.length===1){var e=arguments[0];return Oe.SIMPLE_ORDINATE_FORMAT.format(e)}};Oe.spaces=function(e){return Oe.chars(" ",e)};mu.NEWLINE.get=function(){return Ut.getProperty("line.separator")};mu.SIMPLE_ORDINATE_FORMAT.get=function(){return new K_};Object.defineProperties(Oe,mu);var It=function(){};It.prototype.interfaces_=function(){return[]};It.prototype.getClass=function(){return It};It.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))};It.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,j.X)===e.getOrdinate(t-1,j.X)&&e.getOrdinate(0,j.Y)===e.getOrdinate(t-1,j.Y)};It.isEqual=function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),o=0;o<n;o++)for(var s=0;s<i;s++){var a=e.getOrdinate(o,s),u=t.getOrdinate(o,s);if(e.getOrdinate(o,s)!==t.getOrdinate(o,s)&&!(M.isNaN(a)&&M.isNaN(u)))return!1}return!0};It.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(It.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)It.copy(t,i-1,r,o,1);return r};It.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)It.swap(e,r,t-r)};It.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}};It.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)It.copyCoord(e,t+o,n,r+o)};It.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),r=new hn;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Oe.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}};It.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return It.createClosedRing(e,t,4);var r=t.getOrdinate(0,j.X)===t.getOrdinate(n-1,j.X)&&t.getOrdinate(0,j.Y)===t.getOrdinate(n-1,j.Y);return r?t:It.createClosedRing(e,t,n+1)};It.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();It.copy(t,0,r,0,i);for(var o=i;o<n;o++)It.copy(t,0,r,o,1);return r};var mt=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new P:this._points.expandEnvelope(new P)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._points.size()!==s._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!r.equal(r._points.getCoordinate(a),s._points.getCoordinate(a),o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&It.reverse(r._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?X.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return w.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var r=this._points.copy();It.reverse(r);var i=this.getFactory().createLineString(r);return i},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],o=i,s=0,a=0;s<this._points.size()&&a<o._points.size();){var u=r._points.getCoordinate(s).compareTo(o._points.getCoordinate(a));if(u!==0)return u;s++,a++}return s<this._points.size()?1:a<o._points.size()?-1:0}else if(arguments.length===2){var l=arguments[0],c=arguments[1],f=l;return c.compare(this._points,f._points)}},t.prototype.apply=function(){var r=this;if(D(arguments[0],bn))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(r._points.getCoordinate(o));else if(D(arguments[0],qe)){var s=arguments[0];if(this._points.size()===0)return null;for(var a=0;a<this._points.size()&&(s.filter(r._points,a),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(D(arguments[0],nn)){var u=arguments[0];u.filter(this)}else if(D(arguments[0],Gn)){var l=arguments[0];l.filter(this)}},t.prototype.getBoundary=function(){return new Ce(this).getBoundary()},t.prototype.isEquivalentClass=function(r){return r instanceof t},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._points=this._points.clone(),r},t.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new pt("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},t.prototype.isCoordinate=function(r){for(var i=this,o=0;o<this._points.size();o++)if(i._points.getCoordinate(o).equals(r))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},t.prototype.interfaces_=function(){return[po]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(A),ho=function(){};ho.prototype.interfaces_=function(){return[]};ho.prototype.getClass=function(){return ho};var ge=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new P;var r=new P;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return X.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var o=arguments[0],s=arguments[1],a=o;return s.compare(this._coordinates,a._coordinates)}},t.prototype.apply=function(){if(D(arguments[0],bn)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(D(arguments[0],qe)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(D(arguments[0],nn)){var o=arguments[0];o.filter(this)}else if(D(arguments[0],Gn)){var s=arguments[0];s.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),k.isTrue(r.size()<=1),this._coordinates=r},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[ho]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(A),Zn=function(){};Zn.prototype.interfaces_=function(){return[]};Zn.prototype.getClass=function(){return Zn};var Pt=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new pt("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new pt("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),o=-1,s=this._shell.getCoordinates(),a=0;a<s.length;a++)o++,i[o]=s[a];for(var u=0;u<this._holes.length;u++)for(var l=r._holes[u].getCoordinates(),c=0;c<l.length;c++)o++,i[o]=l[c];return i},t.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(w.signedArea(this._shell.getCoordinateSequence()));for(var o=0;o<this._holes.length;o++)i-=Math.abs(w.signedArea(r._holes[o].getCoordinateSequence()));return i},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var s=r.getX(o);if(!(s===i.getMinX()||s===i.getMaxX()))return!1;var a=r.getY(o);if(!(a===i.getMinY()||a===i.getMaxY()))return!1}for(var u=r.getX(0),l=r.getY(0),c=1;c<=4;c++){var f=r.getX(c),p=r.getY(c),h=f!==u,d=p!==l;if(h===d)return!1;u=f,l=p}return!0},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i,a=this._shell,u=s._shell;if(!a.equalsExact(u,o)||this._holes.length!==s._holes.length)return!1;for(var l=0;l<this._holes.length;l++)if(!r._holes[l].equalsExact(s._holes[l],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);yr.sort(this._holes)}else if(arguments.length===2){var o=arguments[0],s=arguments[1];if(o.isEmpty())return null;var a=new Array(o.getCoordinates().length-1).fill(null);Ut.arraycopy(o.getCoordinates(),0,a,0,a.length);var u=B.minCoordinate(o.getCoordinates());B.scroll(a,u),Ut.arraycopy(a,0,o.getCoordinates(),0,a.length),o.getCoordinates()[a.length]=a[0],w.isCCW(o.getCoordinates())===s&&B.reverse(o.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var o=0;o<this._holes.length;o++)i+=r._holes[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),o=0;o<this._holes.length;o++)i+=r._holes[o].getNumPoints();return i},t.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].copy().reverse();return i},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this._shell,s=i._shell;return o.compareToSameClass(s)}else if(arguments.length===2){var a=arguments[0],u=arguments[1],l=a,c=this._shell,f=l._shell,p=c.compareToSameClass(f,u);if(p!==0)return p;for(var h=this.getNumInteriorRing(),d=l.getNumInteriorRing(),_=0;_<h&&_<d;){var v=r.getInteriorRingN(_),E=l.getInteriorRingN(_),S=v.compareToSameClass(E,u);if(S!==0)return S;_++}return _<h?1:_<d?-1:0}},t.prototype.apply=function(r){var i=this;if(D(r,bn)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(D(r,qe)){if(this._shell.apply(r),!r.isDone())for(var s=0;s<this._holes.length&&(i._holes[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(D(r,nn))r.filter(this);else if(D(r,Gn)){r.filter(this),this._shell.apply(r);for(var a=0;a<this._holes.length;a++)i._holes[a].apply(r)}},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var o=0;o<this._holes.length;o++)i[o+1]=r._holes[o];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,i=this._shell.copy(),o=new Array(this._holes.length).fill(null),s=0;s<o.length;s++)o[s]=r._holes[s].copy();return new t(i,o,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(r){return this._holes[r]},t.prototype.interfaces_=function(){return[Zn]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(A),wi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return A.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return X.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[ho]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(ee),En=function(e){function t(r,i){r instanceof g&&i instanceof z&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return A.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return X.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var r=this._points.copy();It.reverse(r);var i=this.getFactory().createLinearRing(r);return i},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new pt("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new pt("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(mt),_n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return A.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createMultiPolygon(o)},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new I,o=0;o<this._geometries.length;o++)for(var s=r._geometries[o],a=s.getBoundary(),u=0;u<a.getNumGeometries();u++)i.add(a.getGeometryN(u));var l=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(l))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Zn]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(ee),Te=function(e){this._factory=e||null,this._isUserDataCopied=!1},Rs={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Te.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};Te.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};Te.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof ee?this.editGeometryCollection(e,t):e instanceof Pt?this.editPolygon(e,t):e instanceof ge?t.edit(e,this._factory):e instanceof mt?t.edit(e,this._factory):(k.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};Te.prototype.editGeometryCollection=function(e,t){for(var n=this,r=t.edit(e,this._factory),i=new I,o=0;o<r.getNumGeometries();o++){var s=n.edit(r.getGeometryN(o),t);s===null||s.isEmpty()||i.add(s)}return r.getClass()===wi?this._factory.createMultiPoint(i.toArray([])):r.getClass()===vr?this._factory.createMultiLineString(i.toArray([])):r.getClass()===_n?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};Te.prototype.editPolygon=function(e,t){var n=this,r=t.edit(e,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var o=new I,s=0;s<r.getNumInteriorRing();s++){var a=n.edit(r.getInteriorRingN(s),t);a===null||a.isEmpty()||o.add(a)}return this._factory.createPolygon(i,o.toArray([]))};Te.prototype.interfaces_=function(){return[]};Te.prototype.getClass=function(){return Te};Te.GeometryEditorOperation=function(){};Rs.NoOpGeometryOperation.get=function(){return go};Rs.CoordinateOperation.get=function(){return yo};Rs.CoordinateSequenceOperation.get=function(){return mo};Object.defineProperties(Te,Rs);var go=function(){};go.prototype.edit=function(e,t){return e};go.prototype.interfaces_=function(){return[Te.GeometryEditorOperation]};go.prototype.getClass=function(){return go};var yo=function(){};yo.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof En?t.createLinearRing(n):e instanceof mt?t.createLineString(n):e instanceof ge?n.length>0?t.createPoint(n[0]):t.createPoint():e};yo.prototype.interfaces_=function(){return[Te.GeometryEditorOperation]};yo.prototype.getClass=function(){return yo};var mo=function(){};mo.prototype.edit=function(e,t){return e instanceof En?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof mt?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof ge?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};mo.prototype.interfaces_=function(){return[Te.GeometryEditorOperation]};mo.prototype.getClass=function(){return mo};var bt=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new g}else if(D(arguments[0],j)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,o===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)e._coordinates[l]=new g}}},op={serialVersionUID:{configurable:!0}};bt.prototype.setOrdinate=function(e,t,n){switch(t){case j.X:this._coordinates[e].x=n;break;case j.Y:this._coordinates[e].y=n;break;case j.Z:this._coordinates[e].z=n;break;default:throw new pt("invalid ordinateIndex")}};bt.prototype.size=function(){return this._coordinates.length};bt.prototype.getOrdinate=function(e,t){switch(t){case j.X:return this._coordinates[e].x;case j.Y:return this._coordinates[e].y;case j.Z:return this._coordinates[e].z}return M.NaN};bt.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};bt.prototype.getCoordinateCopy=function(e){return new g(this._coordinates[e])};bt.prototype.getDimension=function(){return this._dimension};bt.prototype.getX=function(e){return this._coordinates[e].x};bt.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new bt(t,this._dimension)};bt.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};bt.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new bt(t,this._dimension)};bt.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new hn(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};bt.prototype.getY=function(e){return this._coordinates[e].y};bt.prototype.toCoordinateArray=function(){return this._coordinates};bt.prototype.interfaces_=function(){return[j,Me]};bt.prototype.getClass=function(){return bt};op.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(bt,op);var In=function(){},_u={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};In.prototype.readResolve=function(){return In.instance()};In.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new bt(e)}else if(D(arguments[0],j)){var t=arguments[0];return new bt(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new bt(n):new bt(n,r)}};In.prototype.interfaces_=function(){return[vi,Me]};In.prototype.getClass=function(){return In};In.instance=function(){return In.instanceObject};_u.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};_u.instanceObject.get=function(){return new In};Object.defineProperties(In,_u);var sp=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,r){return this.map_.set(n,r),r},t.prototype.values=function(){for(var n=new I,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},t.prototype.entrySet=function(){var n=new yu;return this.map_.entries().forEach(function(r){return n.add(r)}),n},t.prototype.size=function(){return this.map_.size()},t}(ni),Q=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof rn){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},vu={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Q.prototype.equals=function(e){if(!(e instanceof Q))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};Q.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new tn(n).compareTo(new tn(r))};Q.prototype.getScale=function(){return this._scale};Q.prototype.isFloating=function(){return this._modelType===Q.FLOATING||this._modelType===Q.FLOATING_SINGLE};Q.prototype.getType=function(){return this._modelType};Q.prototype.toString=function(){var e="UNKNOWN";return this._modelType===Q.FLOATING?e="Floating":this._modelType===Q.FLOATING_SINGLE?e="Floating-Single":this._modelType===Q.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};Q.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(M.isNaN(e))return e;if(this._modelType===Q.FLOATING_SINGLE){var t=e;return t}return this._modelType===Q.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof g){var n=arguments[0];if(this._modelType===Q.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};Q.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===Q.FLOATING?e=16:this._modelType===Q.FLOATING_SINGLE?e=6:this._modelType===Q.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};Q.prototype.setScale=function(e){this._scale=Math.abs(e)};Q.prototype.interfaces_=function(){return[Me,De]};Q.prototype.getClass=function(){return Q};Q.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};vu.serialVersionUID.get=function(){return 7777263578777804e3};vu.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Q,vu);var rn=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},bu={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};rn.prototype.readResolve=function(){return rn.nameToTypeMap.get(this._name)};rn.prototype.toString=function(){return this._name};rn.prototype.interfaces_=function(){return[Me]};rn.prototype.getClass=function(){return rn};bu.serialVersionUID.get=function(){return-552860263173159e4};bu.nameToTypeMap.get=function(){return new sp};Object.defineProperties(rn,bu);Q.Type=rn;Q.FIXED=new rn("FIXED");Q.FLOATING=new rn("FLOATING");Q.FLOATING_SINGLE=new rn("FLOATING SINGLE");var z=function e(){this._precisionModel=new Q,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?D(arguments[0],vi)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Q&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ap={serialVersionUID:{configurable:!0}};z.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new g(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new g(e.getMinX(),e.getMinY()),new g(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new g(e.getMinX(),e.getMinY()),new g(e.getMinX(),e.getMaxY()),new g(e.getMaxX(),e.getMaxY()),new g(e.getMaxX(),e.getMinY()),new g(e.getMinX(),e.getMinY())]),null)};z.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new mt(this.getCoordinateSequenceFactory().create(e),this);if(D(e,j))return new mt(e,this)}else return new mt(this.getCoordinateSequenceFactory().create([]),this)};z.prototype.createMultiLineString=function(){if(arguments.length===0)return new vr(null,this);if(arguments.length===1){var e=arguments[0];return new vr(e,this)}};z.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),s=o.getClass();t===null&&(t=s),s!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(z.toGeometryArray(e));var a=e.iterator().next(),u=e.size()>1;if(u){if(a instanceof Pt)return this.createMultiPolygon(z.toPolygonArray(e));if(a instanceof mt)return this.createMultiLineString(z.toLineStringArray(e));if(a instanceof ge)return this.createMultiPoint(z.toPointArray(e));k.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a};z.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};z.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof g){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(D(arguments[0],j)){var t=arguments[0];return new ge(t,this)}}};z.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};z.prototype.createPolygon=function(){if(arguments.length===0)return new Pt(null,null,this);if(arguments.length===1){if(D(arguments[0],j)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof En){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new Pt(r,i,this)}};z.prototype.getSRID=function(){return this._SRID};z.prototype.createGeometryCollection=function(){if(arguments.length===0)return new ee(null,this);if(arguments.length===1){var e=arguments[0];return new ee(e,this)}};z.prototype.createGeometry=function(e){var t=new Te(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};z.prototype.getPrecisionModel=function(){return this._precisionModel};z.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(D(arguments[0],j)){var t=arguments[0];return new En(t,this)}}};z.prototype.createMultiPolygon=function(){if(arguments.length===0)return new _n(null,this);if(arguments.length===1){var e=arguments[0];return new _n(e,this)}};z.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new wi(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new wi(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(D(arguments[0],j)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=e.getCoordinateSequenceFactory().create(1,r.getDimension());It.copy(r,o,s,0,1),i[o]=e.createPoint(s)}return this.createMultiPoint(i)}}};z.prototype.interfaces_=function(){return[Me]};z.prototype.getClass=function(){return z};z.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};z.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};z.getDefaultCoordinateSequenceFactory=function(){return In.instance()};z.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};z.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};z.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};z.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};z.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};z.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};z.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};ap.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(z,ap);var b=function(){},Ts={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};b.prototype.interfaces_=function(){return[]};b.prototype.getClass=function(){return b};b.opposite=function(e){return e===b.LEFT?b.RIGHT:e===b.RIGHT?b.LEFT:e};Ts.ON.get=function(){return 0};Ts.LEFT.get=function(){return 1};Ts.RIGHT.get=function(){return 2};Object.defineProperties(b,Ts);function As(e){this.message=e||""}As.prototype=new Error;As.prototype.name="EmptyStackException";function gn(){this.array_=[]}gn.prototype=new Ge;gn.prototype.add=function(e){return this.array_.push(e),!0};gn.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};gn.prototype.push=function(e){return this.array_.push(e),e};gn.prototype.pop=function(e){if(this.array_.length===0)throw new As;return this.array_.pop()};gn.prototype.peek=function(){if(this.array_.length===0)throw new As;return this.array_[this.array_.length-1]};gn.prototype.empty=function(){return this.array_.length===0};gn.prototype.isEmpty=function(){return this.empty()};gn.prototype.search=function(e){return this.array_.indexOf(e)};gn.prototype.size=function(){return this.array_.length};gn.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var on=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};on.prototype.getCoordinate=function(){return this._minCoord};on.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};on.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();k.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=w.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===w.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===w.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};on.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length||r[t].y===r[t+1].y)return-1;var i=b.LEFT;return r[t].y<r[t+1].y&&(i=b.RIGHT),i};on.prototype.getEdge=function(){return this._orientedDe};on.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(t._minCoord===null||n[r].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=r,t._minCoord=n[r])};on.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};on.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&t.checkForRightmostCoordinate(r)}k.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===b.LEFT&&(this._orientedDe=this._minDe.getSym())};on.prototype.interfaces_=function(){return[]};on.prototype.getClass=function(){return on};var Bn=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new g(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},t}(kn),Ds=function(){this.array_=[]};Ds.prototype.addLast=function(e){this.array_.push(e)};Ds.prototype.removeFirst=function(){return this.array_.shift()};Ds.prototype.isEmpty=function(){return this.array_.length===0};var ne=function(){this._finder=null,this._dirEdgeList=new I,this._nodes=new I,this._rightMostCoord=null,this._env=null,this._finder=new on};ne.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};ne.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};ne.prototype.computeNodeDepth=function(e){for(var t=this,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new Bn("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var o=e.getEdges().iterator();o.hasNext();){var s=o.next();s.setVisited(!0),t.copySymDepths(s)}};ne.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(b.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};ne.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};ne.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(b.RIGHT)>=1&&t.getDepth(b.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};ne.prototype.computeDepths=function(e){var t=this,n=new yu,r=new Ds,i=e.getNode();for(r.addLast(i),n.add(i),e.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),t.computeNodeDepth(o);for(var s=o.getEdges().iterator();s.hasNext();){var a=s.next(),u=a.getSym();if(!u.isVisited()){var l=u.getNode();n.contains(l)||(r.addLast(l),n.add(l))}}}};ne.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};ne.prototype.getEnvelope=function(){if(this._env===null){for(var e=new P,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this._env=e}return this._env};ne.prototype.addReachable=function(e){var t=this,n=new gn;for(n.add(e);!n.empty();){var r=n.pop();t.add(r,n)}};ne.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(b.LEFT,e.getDepth(b.RIGHT)),t.setDepth(b.RIGHT,e.getDepth(b.LEFT))};ne.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),s=o.getNode();s.isVisited()||t.push(s)}};ne.prototype.getNodes=function(){return this._nodes};ne.prototype.getDirectedEdges=function(){return this._dirEdgeList};ne.prototype.interfaces_=function(){return[De]};ne.prototype.getClass=function(){return ne};var at=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[b.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[b.ON]=s,this.location[b.LEFT]=a,this.location[b.RIGHT]=u}};at.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};at.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==y.NONE)return!1;return!0};at.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===y.NONE&&(t.location[n]=e)};at.prototype.isLine=function(){return this.location.length===1};at.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[b.ON]=this.location[b.ON],n[b.LEFT]=y.NONE,n[b.RIGHT]=y.NONE,this.location=n}for(var r=0;r<this.location.length;r++)t.location[r]===y.NONE&&r<e.location.length&&(t.location[r]=e.location[r])};at.prototype.getLocations=function(){return this.location};at.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[b.LEFT];this.location[b.LEFT]=this.location[b.RIGHT],this.location[b.RIGHT]=e};at.prototype.toString=function(){var e=new hn;return this.location.length>1&&e.append(y.toLocationSymbol(this.location[b.LEFT])),e.append(y.toLocationSymbol(this.location[b.ON])),this.location.length>1&&e.append(y.toLocationSymbol(this.location[b.RIGHT])),e.toString()};at.prototype.setLocations=function(e,t,n){this.location[b.ON]=e,this.location[b.LEFT]=t,this.location[b.RIGHT]=n};at.prototype.get=function(e){return e<this.location.length?this.location[e]:y.NONE};at.prototype.isArea=function(){return this.location.length>1};at.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===y.NONE)return!0;return!1};at.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(b.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};at.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(y.NONE)};at.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};at.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};at.prototype.interfaces_=function(){return[]};at.prototype.getClass=function(){return at};var tt=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new at(t),this.elt[1]=new at(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new at(n.elt[0]),this.elt[1]=new at(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new at(y.NONE),this.elt[1]=new at(y.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new at(o,s,a),this.elt[1]=new at(o,s,a)}else if(arguments.length===4){var u=arguments[0],l=arguments[1],c=arguments[2],f=arguments[3];this.elt[0]=new at(y.NONE,y.NONE,y.NONE),this.elt[1]=new at(y.NONE,y.NONE,y.NONE),this.elt[u].setLocations(l,c,f)}};tt.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};tt.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};tt.prototype.isNull=function(e){return this.elt[e].isNull()};tt.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};tt.prototype.isLine=function(e){return this.elt[e].isLine()};tt.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new at(e.elt[n]):t.elt[n].merge(e.elt[n])};tt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};tt.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(b.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};tt.prototype.toString=function(){var e=new hn;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};tt.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};tt.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};tt.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(b.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};tt.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};tt.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};tt.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new at(this.elt[e].location[0]))};tt.prototype.interfaces_=function(){return[]};tt.prototype.getClass=function(){return tt};tt.toLineLabel=function(e){for(var t=new tt(y.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Nt=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new I,this._pts=new I,this._label=new tt(y.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new I,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Nt.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=w.isCCW(this._ring.getCoordinates())};Nt.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Nt.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,r=!0;do{if(n===null)throw new Bn("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new Bn("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var i=n.getLabel();k.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(n.getEdge(),n.isForward(),r),r=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};Nt.prototype.getLinearRing=function(){return this._ring};Nt.prototype.getCoordinate=function(e){return this._pts.get(e)};Nt.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),r=n.getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};Nt.prototype.addPoints=function(e,t,n){var r=this,i=e.getCoordinates();if(t){var o=1;n&&(o=0);for(var s=o;s<i.length;s++)r._pts.add(i[s])}else{var a=i.length-2;n&&(a=i.length-1);for(var u=a;u>=0;u--)r._pts.add(i[u])}};Nt.prototype.isHole=function(){return this._isHole};Nt.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};Nt.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!w.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0};Nt.prototype.addHole=function(e){this._holes.add(e)};Nt.prototype.isShell=function(){return this._shell===null};Nt.prototype.getLabel=function(){return this._label};Nt.prototype.getEdges=function(){return this._edges};Nt.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Nt.prototype.getShell=function(){return this._shell};Nt.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=t.getLocation(n,b.RIGHT);if(r===y.NONE)return null;if(this._label.getLocation(n)===y.NONE)return this._label.setLocation(n,r),null}};Nt.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};Nt.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=t._holes.get(r).getLinearRing();var i=e.createPolygon(this.getLinearRing(),n);return i};Nt.prototype.interfaces_=function(){return[]};Nt.prototype.getClass=function(){return Nt};var ev=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nt),nv=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,r=new I,i=this._startDe;do{if(i.getMinEdgeRing()===null){var o=new ev(i,n._geometryFactory);r.add(o)}i=i.getNext()}while(i!==this._startDe);return r},t.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nt),Se=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._label=e}};Se.prototype.setVisited=function(e){this._isVisited=e};Se.prototype.setInResult=function(e){this._isInResult=e};Se.prototype.isCovered=function(){return this._isCovered};Se.prototype.isCoveredSet=function(){return this._isCoveredSet};Se.prototype.setLabel=function(e){this._label=e};Se.prototype.getLabel=function(){return this._label};Se.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};Se.prototype.updateIM=function(e){k.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};Se.prototype.isInResult=function(){return this._isInResult};Se.prototype.isVisited=function(){return this._isVisited};Se.prototype.interfaces_=function(){return[]};Se.prototype.getClass=function(){return Se};var Ms=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new tt(0,y.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,r){var i=y.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==y.BOUNDARY&&(i=o)}return i},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new tt(n,r):this._label.setLocation(n,r)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof tt)for(var i=arguments[0],o=0;o<2;o++){var s=n.computeMergedLocation(i,o),a=n._label.getLocation(o);a===y.NONE&&n._label.setLocation(o,s)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=y.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case y.BOUNDARY:i=y.INTERIOR;break;case y.INTERIOR:i=y.BOUNDARY;break;default:i=y.BOUNDARY;break}this._label.setLocation(n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Se),sn=function(){this.nodeMap=new Xt,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};sn.prototype.find=function(e){return this.nodeMap.get(e)};sn.prototype.addNode=function(){if(arguments[0]instanceof g){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof Ms){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};sn.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};sn.prototype.iterator=function(){return this.nodeMap.values().iterator()};sn.prototype.values=function(){return this.nodeMap.values()};sn.prototype.getBoundaryNodes=function(e){for(var t=new I,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===y.BOUNDARY&&t.add(r)}return t};sn.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};sn.prototype.interfaces_=function(){return[]};sn.prototype.getClass=function(){return sn};var et=function(){},Oo={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};et.prototype.interfaces_=function(){return[]};et.prototype.getClass=function(){return et};et.isNorthern=function(e){return e===et.NE||e===et.NW};et.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};et.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r};et.isInHalfPlane=function(e,t){return t===et.SE?e===et.SE||e===et.SW:e===t||e===t+1};et.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new pt("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?et.NE:et.SE:t>=0?et.NW:et.SW}else if(arguments[0]instanceof g&&arguments[1]instanceof g){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new pt("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?et.NE:et.SE:r.y>=n.y?et.NW:et.SW}};Oo.NE.get=function(){return 0};Oo.NW.get=function(){return 1};Oo.SW.get=function(){return 2};Oo.SE.get=function(){return 3};Object.defineProperties(et,Oo);var Yt=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=t,this.init(n,r),this._label=i}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Yt.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:w.computeOrientation(e._p0,e._p1,this._p1)};Yt.prototype.getDy=function(){return this._dy};Yt.prototype.getCoordinate=function(){return this._p0};Yt.prototype.setNode=function(e){this._node=e};Yt.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};Yt.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};Yt.prototype.getDirectedCoordinate=function(){return this._p1};Yt.prototype.getDx=function(){return this._dx};Yt.prototype.getLabel=function(){return this._label};Yt.prototype.getEdge=function(){return this._edge};Yt.prototype.getQuadrant=function(){return this._quadrant};Yt.prototype.getNode=function(){return this._node};Yt.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};Yt.prototype.computeLabel=function(e){};Yt.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=et.quadrant(this._dx,this._dy),k.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Yt.prototype.interfaces_=function(){return[De]};Yt.prototype.getClass=function(){return Yt};var Ba=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new tt(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new Bn("assigned depths do not match",this.getCoordinate());this._depth[n]=r},t.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,b.LEFT)===y.INTERIOR&&n._label.getLocation(i,b.RIGHT)===y.INTERIOR||(r=!1);return r},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[b.LEFT]+"/"+this._depth[b.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,y.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,y.EXTERIOR);return n&&r&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===b.LEFT&&(o=-1);var s=b.opposite(n),a=i*o,u=r+a;this.setDepth(n,r),this.setDepth(s,u)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,r){return n===y.EXTERIOR&&r===y.INTERIOR?1:n===y.INTERIOR&&r===y.EXTERIOR?-1:0},t}(Yt),Ni=function(){};Ni.prototype.createNode=function(e){return new Ms(e,null)};Ni.prototype.interfaces_=function(){return[]};Ni.prototype.getClass=function(){return Ni};var gt=function(){if(this._edges=new I,this._nodes=null,this._edgeEndList=new I,arguments.length===0)this._nodes=new sn(new Ni);else if(arguments.length===1){var e=arguments[0];this._nodes=new sn(e)}};gt.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var r=t._edges.get(n);r.print(e),r.eiList.print(e)}};gt.prototype.find=function(e){return this._nodes.find(e)};gt.prototype.addNode=function(){if(arguments[0]instanceof Ms){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof g){var t=arguments[0];return this._nodes.addNode(t)}};gt.prototype.getNodeIterator=function(){return this._nodes.iterator()};gt.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};gt.prototype.debugPrintln=function(e){Ut.out.println(e)};gt.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===y.BOUNDARY};gt.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};gt.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?w.computeOrientation(e,t,r)===w.COLLINEAR&&et.quadrant(e,t)===et.quadrant(n,r):!1};gt.prototype.getEdgeEnds=function(){return this._edgeEndList};gt.prototype.debugPrint=function(e){Ut.out.print(e)};gt.prototype.getEdgeIterator=function(){return this._edges.iterator()};gt.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(e,t,o[0],o[1])||n.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return i}return null};gt.prototype.insertEdge=function(e){this._edges.add(e)};gt.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};gt.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();t._edges.add(r);var i=new Ba(r,!0),o=new Ba(r,!1);i.setSym(o),o.setSym(i),t.add(i),t.add(o)}};gt.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};gt.prototype.getNodes=function(){return this._nodes.values()};gt.prototype.findEdge=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(e.equals(o[0])&&t.equals(o[1]))return i}return null};gt.prototype.interfaces_=function(){return[]};gt.prototype.getClass=function(){return gt};gt.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var de=function(){this._geometryFactory=null,this._shellList=new I;var e=arguments[0];this._geometryFactory=e};de.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}};de.prototype.computePolygons=function(e){for(var t=this,n=new I,r=e.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(t._geometryFactory);n.add(o)}return n};de.prototype.placeFreeHoles=function(e,t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var o=n.findEdgeRingContaining(i,e);if(o===null)throw new Bn("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}};de.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=this,i=new I,o=e.iterator();o.hasNext();){var s=o.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings(),u=r.findShell(a);u!==null?(r.placePolygonHoles(u,a),t.add(u)):n.addAll(a)}else i.add(s)}return i};de.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};de.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new I,r=e.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var o=new nv(i,t._geometryFactory);n.add(o),o.setInResult()}}return n};de.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}};de.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};de.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=t.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();o!==null&&(s=o.getLinearRing().getEnvelopeInternal());var f=!1;c.contains(r)&&w.isPointInRing(i,l.getCoordinates())&&(f=!0),f&&(o===null||s.contains(c))&&(o=u)}return o};de.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return k.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};de.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];gt.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new I,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};de.prototype.interfaces_=function(){return[]};de.prototype.getClass=function(){return de};var Li=function(){};Li.prototype.getBounds=function(){};Li.prototype.interfaces_=function(){return[]};Li.prototype.getClass=function(){return Li};var Ue=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Ue.prototype.getItem=function(){return this._item};Ue.prototype.getBounds=function(){return this._bounds};Ue.prototype.interfaces_=function(){return[Li,Me]};Ue.prototype.getClass=function(){return Ue};var qn=function(){this._size=null,this._items=null,this._size=0,this._items=new I,this._items.add(null)};qn.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};qn.prototype.size=function(){return this._size};qn.prototype.reorder=function(e){for(var t=this,n=null,r=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(r)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,r)};qn.prototype.clear=function(){this._size=0,this._items.clear()};qn.prototype.isEmpty=function(){return this._size===0};qn.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};qn.prototype.interfaces_=function(){return[]};qn.prototype.getClass=function(){return qn};var tr=function(){};tr.prototype.visitItem=function(e){};tr.prototype.interfaces_=function(){return[]};tr.prototype.getClass=function(){return tr};var Ur=function(){};Ur.prototype.insert=function(e,t){};Ur.prototype.remove=function(e,t){};Ur.prototype.query=function(){};Ur.prototype.interfaces_=function(){return[]};Ur.prototype.getClass=function(){return Ur};var Ot=function(){if(this._childBoundables=new I,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._level=e}},up={serialVersionUID:{configurable:!0}};Ot.prototype.getLevel=function(){return this._level};Ot.prototype.size=function(){return this._childBoundables.size()};Ot.prototype.getChildBoundables=function(){return this._childBoundables};Ot.prototype.addChildBoundable=function(e){k.isTrue(this._bounds===null),this._childBoundables.add(e)};Ot.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Ot.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Ot.prototype.interfaces_=function(){return[Li,Me]};Ot.prototype.getClass=function(){return Ot};up.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Ot,up);var ze=function(){};ze.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}};ze.min=function(e){return ze.sort(e),e.get(0)};ze.sort=function(e,t){var n=e.toArray();t?yr.sort(n,t):yr.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])};ze.singletonList=function(e){var t=new I;return t.add(e),t};var xt=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};xt.prototype.expandToQueue=function(e,t){var n=xt.isComposite(this._boundable1),r=xt.isComposite(this._boundable2);if(n&&r)return xt.area(this._boundable1)>xt.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new pt("neither boundable is composite")};xt.prototype.isLeaves=function(){return!(xt.isComposite(this._boundable1)||xt.isComposite(this._boundable2))};xt.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};xt.prototype.expand=function(e,t,n,r){for(var i=this,o=e.getChildBoundables(),s=o.iterator();s.hasNext();){var a=s.next(),u=new xt(a,t,i._itemDistance);u.getDistance()<r&&n.add(u)}};xt.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};xt.prototype.getDistance=function(){return this._distance};xt.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};xt.prototype.interfaces_=function(){return[De]};xt.prototype.getClass=function(){return xt};xt.area=function(e){return e.getBounds().getArea()};xt.isComposite=function(e){return e instanceof Ot};var Ft=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new I,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];k.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Fs={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ft.prototype.getNodeCapacity=function(){return this._nodeCapacity};Ft.prototype.lastNode=function(e){return e.get(e.size()-1)};Ft.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ot?n+=e.size(i):i instanceof Ue&&(n+=1)}return n}};Ft.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ue&&i.getItem()===t&&(n=i)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};Ft.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new I:t}else if(arguments.length===1){for(var n=arguments[0],r=new I,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Ot){var s=e.itemsTree(o);s!==null&&r.add(s)}else o instanceof Ue?r.add(o.getItem()):k.shouldNeverReachHere()}return r.size()<=0?null:r}};Ft.prototype.insert=function(e,t){k.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ue(e,t))};Ft.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new I;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(k.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Ot?e.boundablesAtLevel(r,a,o):(k.isTrue(a instanceof Ue),r===-1&&o.add(a))}return null}};Ft.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new I;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(D(arguments[2],tr)&&arguments[0]instanceof Object&&arguments[1]instanceof Ot)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);e.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof Ot?e.query(o,c,a):c instanceof Ue?a.visitItem(c.getItem()):k.shouldNeverReachHere())}else if(D(arguments[2],Ge)&&arguments[0]instanceof Object&&arguments[1]instanceof Ot)for(var f=arguments[0],p=arguments[1],h=arguments[2],d=p.getChildBoundables(),_=0;_<d.size();_++){var v=d.get(_);e.getIntersectsOp().intersects(v.getBounds(),f)&&(v instanceof Ot?e.query(f,v,h):v instanceof Ue?h.add(v.getItem()):k.shouldNeverReachHere())}}};Ft.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Ft.prototype.getRoot=function(){return this.build(),this._root};Ft.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(e.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof Ot&&(s=e.remove(r,l,o),s)){a=l;break}}return a!==null&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}};Ft.prototype.createHigherLevels=function(e,t){k.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};Ft.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ot){var o=e.depth(i);o>n&&(n=o)}}return n+1}};Ft.prototype.createParentBoundables=function(e,t){var n=this;k.isTrue(!e.isEmpty());var r=new I;r.add(this.createNode(t));var i=new I(e);ze.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(t)),n.lastNode(r).addChildBoundable(s)}return r};Ft.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Ft.prototype.interfaces_=function(){return[Me]};Ft.prototype.getClass=function(){return Ft};Ft.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};Fs.IntersectsOp.get=function(){return rv};Fs.serialVersionUID.get=function(){return-3886435814360241e3};Fs.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Ft,Fs);var rv=function(){},Ci=function(){};Ci.prototype.distance=function(e,t){};Ci.prototype.interfaces_=function(){return[]};Ci.prototype.getClass=function(){return Ci};var lp=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var o=this;k.isTrue(r.length>0);for(var s=new I,a=0;a<r.length;a++)s.addAll(o.createParentBoundablesFromVerticalSlice(r[a],i));return s},t.prototype.createNode=function(r){return new yc(r)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;e.prototype.insert.call(this,r,i)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),s=new Array(i).fill(null),a=r.iterator(),u=0;u<i;u++){s[u]=new I;for(var l=0;a.hasNext()&&l<o;){var c=a.next();s[u].add(c),l++}}return s},t.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return e.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];e.prototype.query.call(this,i,o)}else if(arguments.length===3){if(D(arguments[2],tr)&&arguments[0]instanceof Object&&arguments[1]instanceof Ot){var s=arguments[0],a=arguments[1],u=arguments[2];e.prototype.query.call(this,s,a,u)}else if(D(arguments[2],Ge)&&arguments[0]instanceof Object&&arguments[1]instanceof Ot){var l=arguments[0],c=arguments[1],f=arguments[2];e.prototype.query.call(this,l,c,f)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return e.prototype.createParentBoundables.call(this,r,i)},t.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return e.prototype.remove.call(this,r,i)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(r,i){k.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),s=new I(r);ze.sort(s,t.xComparator);var a=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(a,i)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(D(arguments[0],Ci)){var r=arguments[0],i=new xt(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof xt){var o=arguments[0];return this.nearestNeighbour(o,M.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&D(arguments[1],Ci)){var s=arguments[0],a=arguments[1],u=new xt(this.getRoot(),s.getRoot(),a);return this.nearestNeighbour(u)}else if(arguments[0]instanceof xt&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],f=c,p=null,h=new qn;for(h.add(l);!h.isEmpty()&&f>0;){var d=h.poll(),_=d.getDistance();if(_>=f)break;d.isLeaves()?(f=_,p=d):d.expandToQueue(h,f)}return[p.getBoundable(0).getItem(),p.getBoundable(1).getItem()]}}else if(arguments.length===3){var v=arguments[0],E=arguments[1],S=arguments[2],x=new Ue(v,E),C=new xt(this.getRoot(),x,S);return this.nearestNeighbour(C)[0]}},t.prototype.interfaces_=function(){return[Ur,Me]},t.prototype.getClass=function(){return t},t.centreX=function(r){return t.avg(r.getMinX(),r.getMaxX())},t.avg=function(r,i){return(r+i)/2},t.centreY=function(r){return t.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return yc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[_i]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[_i]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(Ft),yc=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new P(i.getBounds()):n.expandToInclude(i.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ot),se=function(){};se.prototype.interfaces_=function(){return[]};se.prototype.getClass=function(){return se};se.relativeSign=function(e,t){return e<t?-1:e>t?1:0};se.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=se.relativeSign(t.x,n.x),i=se.relativeSign(t.y,n.y);switch(e){case 0:return se.compareValue(r,i);case 1:return se.compareValue(i,r);case 2:return se.compareValue(i,-r);case 3:return se.compareValue(-r,i);case 4:return se.compareValue(-r,-i);case 5:return se.compareValue(-i,-r);case 6:return se.compareValue(-i,r);case 7:return se.compareValue(r,-i)}return k.shouldNeverReachHere("invalid octant value"),0};se.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var er=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new g(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};er.prototype.getCoordinate=function(){return this.coord};er.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};er.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:se.compare(this._segmentOctant,this.coord,t.coord)};er.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};er.prototype.isInterior=function(){return this._isInterior};er.prototype.interfaces_=function(){return[De]};er.prototype.getClass=function(){return er};var re=function(){this._nodeMap=new Xt,this._edge=null;var e=arguments[0];this._edge=e};re.prototype.getSplitCoordinates=function(){var e=this,t=new Lo;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();e.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()};re.prototype.addCollapsedNodes=function(){var e=this,t=new I;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var r=n.next().intValue();e.add(e._edge.getCoordinate(r),r)}};re.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};re.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var r=t._edge.getCoordinate(n),i=t._edge.getCoordinate(n+2);r.equals2D(i)&&e.add(new tn(n+1))}};re.prototype.addEdgeCoordinates=function(e,t,n){var r=this,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);n.add(new g(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(r._edge.getCoordinate(s));o&&n.add(new g(t.coord))};re.prototype.iterator=function(){return this._nodeMap.values().iterator()};re.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};re.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1};re.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),s=t.findCollapseIndex(i,o,n);s&&e.add(new tn(n[0])),i=o}};re.prototype.getEdge=function(){return this._edge};re.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};re.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new g(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=n._edge.getCoordinate(u);return o&&(s[a]=new g(t.coord)),new St(s,this._edge.getData())};re.prototype.add=function(e,t){var n=new er(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return r!==null?(k.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};re.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new kn("bad split edge start point at "+r);var i=e.get(e.size()-1),o=i.getCoordinates(),s=o[o.length-1];if(!s.equals2D(t[t.length-1]))throw new kn("bad split edge end point at "+s)};re.prototype.interfaces_=function(){return[]};re.prototype.getClass=function(){return re};var zr=function(){};zr.prototype.interfaces_=function(){return[]};zr.prototype.getClass=function(){return zr};zr.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new pt("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof g&&arguments[1]instanceof g){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(s===0&&a===0)throw new pt("Cannot compute the octant for two identical points "+i);return zr.octant(s,a)}};var Sn=function(){};Sn.prototype.getCoordinates=function(){};Sn.prototype.size=function(){};Sn.prototype.getCoordinate=function(e){};Sn.prototype.isClosed=function(){};Sn.prototype.setData=function(e){};Sn.prototype.getData=function(){};Sn.prototype.interfaces_=function(){return[]};Sn.prototype.getClass=function(){return Sn};var _o=function(){};_o.prototype.addIntersection=function(e,t){};_o.prototype.interfaces_=function(){return[Sn]};_o.prototype.getClass=function(){return _o};var St=function(){this._nodeList=new re(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};St.prototype.getCoordinates=function(){return this._pts};St.prototype.size=function(){return this._pts.length};St.prototype.getCoordinate=function(e){return this._pts[e]};St.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};St.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};St.prototype.setData=function(e){this._data=e};St.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:zr.octant(e,t)};St.prototype.getData=function(){return this._data};St.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],o=new g(n.getIntersection(i));this.addIntersection(o,r)}};St.prototype.toString=function(){return Be.toLineString(new bt(this._pts))};St.prototype.getNodeList=function(){return this._nodeList};St.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}var o=this._nodeList.add(e,n);return o};St.prototype.addIntersections=function(e,t,n){for(var r=this,i=0;i<e.getIntersectionNum();i++)r.addIntersection(e,t,n,i)};St.prototype.interfaces_=function(){return[_o]};St.prototype.getClass=function(){return St};St.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new I;return St.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var R=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new g,this.p1=new g;else if(arguments.length===1){var e=arguments[0];this.p0=new g(e.p0),this.p1=new g(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new g(t,n),this.p1=new g(r,i)}},cp={serialVersionUID:{configurable:!0}};R.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};R.prototype.orientationIndex=function(){if(arguments[0]instanceof R){var e=arguments[0],t=w.orientationIndex(this.p0,this.p1,e.p0),n=w.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof g){var r=arguments[0];return w.orientationIndex(this.p0,this.p1,r)}};R.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};R.prototype.isVertical=function(){return this.p0.x===this.p1.x};R.prototype.equals=function(e){if(!(e instanceof R))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};R.prototype.intersection=function(e){var t=new Pr;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};R.prototype.project=function(){if(arguments[0]instanceof g){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new g(e);var t=this.projectionFactor(e),n=new g;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof R){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new R(s,a)}};R.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};R.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};R.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};R.prototype.distancePerpendicular=function(e){return w.distancePointLinePerpendicular(e,this.p0,this.p1)};R.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};R.prototype.midPoint=function(){return R.midPoint(this.p0,this.p1)};R.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(r<=0)return M.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i};R.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=M.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var s=this.closestPoint(e.p1);i=s.distance(e.p1),i<r&&(r=i,n[0]=s,n[1]=e.p1);var a=e.closestPoint(this.p0);i=a.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=a);var u=e.closestPoint(this.p1);return i=u.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=u),n};R.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1};R.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};R.prototype.getLength=function(){return this.p0.distance(this.p1)};R.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};R.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};R.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};R.prototype.lineIntersection=function(e){try{var t=ke.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof Vi))throw n}finally{}return null};R.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};R.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(t!==0){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=t*i/s,u=t*o/s}var l=n-u,c=r+a,f=new g(l,c);return f};R.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};R.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||M.isNaN(t))&&(t=1),t};R.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};R.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};R.prototype.distance=function(){if(arguments[0]instanceof R){var e=arguments[0];return w.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof g){var t=arguments[0];return w.distancePointLine(t,this.p0,this.p1)}};R.prototype.pointAlong=function(e){var t=new g;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};R.prototype.hashCode=function(){var e=M.doubleToLongBits(this.p0.x);e^=M.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=M.doubleToLongBits(this.p1.x);n^=M.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return t^r};R.prototype.interfaces_=function(){return[De,Me]};R.prototype.getClass=function(){return R};R.midPoint=function(e,t){return new g((e.x+t.x)/2,(e.y+t.y)/2)};cp.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(R,cp);var vo=function(){this.tempEnv1=new P,this.tempEnv2=new P,this._overlapSeg1=new R,this._overlapSeg2=new R};vo.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};vo.prototype.interfaces_=function(){return[]};vo.prototype.getClass=function(){return vo};var ye=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};ye.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};ye.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var s=Math.trunc((t+n)/2);t<s&&this.computeSelect(e,t,s,r),s<n&&this.computeSelect(e,s,n,r)};ye.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)t[n++]=e._pts[r];return t};ye.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};ye.prototype.setId=function(e){this._id=e};ye.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};ye.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new P(e,t)}return this._env};ye.prototype.getEndIndex=function(){return this._end};ye.prototype.getStartIndex=function(){return this._start};ye.prototype.getContext=function(){return this._context};ye.prototype.getId=function(){return this._id};ye.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var s=this._pts[e],a=this._pts[t],u=n._pts[r],l=n._pts[i];if(t-e===1&&i-r===1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((e+t)/2),f=Math.trunc((r+i)/2);e<c&&(r<f&&this.computeOverlapsInternal(e,c,n,r,f,o),f<i&&this.computeOverlapsInternal(e,c,n,f,i,o)),c<t&&(r<f&&this.computeOverlapsInternal(c,t,n,r,f,o),f<i&&this.computeOverlapsInternal(c,t,n,f,i,o))};ye.prototype.interfaces_=function(){return[]};ye.prototype.getClass=function(){return ye};var Ze=function(){};Ze.prototype.interfaces_=function(){return[]};Ze.prototype.getClass=function(){return Ze};Ze.getChainStartIndices=function(e){var t=0,n=new I;n.add(new tn(t));do{var r=Ze.findChainEnd(e,t);n.add(new tn(r)),t=r}while(t<e.length-1);var i=Ze.toIntArray(n);return i};Ze.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=et.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var o=et.quadrant(e[i-1],e[i]);if(o!==r)break}i++}return i-1};Ze.getChains=function(){if(arguments.length===1){var e=arguments[0];return Ze.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],r=new I,i=Ze.getChainStartIndices(t),o=0;o<i.length-1;o++){var s=new ye(t,i[o],i[o+1],n);r.add(s)}return r}};Ze.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var br=function(){};br.prototype.computeNodes=function(e){};br.prototype.getNodedSubstrings=function(){};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};var bo=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}};bo.prototype.setSegmentIntersector=function(e){this._segInt=e};bo.prototype.interfaces_=function(){return[br]};bo.prototype.getClass=function(){return bo};var Eu=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new I,this._index=new lp,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return St.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(r){for(var i=this,o=Ze.getChains(r.getCoordinates(),r),s=o.iterator();s.hasNext();){var a=s.next();a.setId(i._idCounter++),i._index.insert(a.getEnvelope(),a),i._monoChains.add(a)}},t.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var o=r.iterator();o.hasNext();)i.add(o.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var r=this,i=new mc(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var s=o.next(),a=r._index.query(s.getEnvelope()),u=a.iterator();u.hasNext();){var l=u.next();if(l.getId()>s.getId()&&(s.computeOverlaps(l,i),r._nOverlaps++),r._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return mc},Object.defineProperties(t,n),t}(bo),mc=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=n.getContext(),a=i.getContext();this._si.processIntersections(s,r,a,o)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(vo),Y=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},Wn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Y.prototype.getEndCapStyle=function(){return this._endCapStyle};Y.prototype.isSingleSided=function(){return this._isSingleSided};Y.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=Y.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Y.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==Y.JOIN_ROUND&&(this._quadrantSegments=Y.DEFAULT_QUADRANT_SEGMENTS)};Y.prototype.getJoinStyle=function(){return this._joinStyle};Y.prototype.setJoinStyle=function(e){this._joinStyle=e};Y.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};Y.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Y.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Y.prototype.setEndCapStyle=function(e){this._endCapStyle=e};Y.prototype.getMitreLimit=function(){return this._mitreLimit};Y.prototype.setMitreLimit=function(e){this._mitreLimit=e};Y.prototype.setSingleSided=function(e){this._isSingleSided=e};Y.prototype.interfaces_=function(){return[]};Y.prototype.getClass=function(){return Y};Y.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};Wn.CAP_ROUND.get=function(){return 1};Wn.CAP_FLAT.get=function(){return 2};Wn.CAP_SQUARE.get=function(){return 3};Wn.JOIN_ROUND.get=function(){return 1};Wn.JOIN_MITRE.get=function(){return 2};Wn.JOIN_BEVEL.get=function(){return 3};Wn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};Wn.DEFAULT_MITRE_LIMIT.get=function(){return 5};Wn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Y,Wn);var _t=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=w.COUNTERCLOCKWISE,this._inputLine=e||null},Po={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};_t.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],s=this._inputLine[n];return!this.isConcave(i,o,s)||!this.isShallow(i,o,s,r)?!1:this.isShallowSampled(i,o,e,n,r)};_t.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;e.isDeletable(t,n,r,e._distanceTol)&&(e._isDeleted[n]=_t.DELETE,o=!0,i=!0),o?t=r:t=n,n=e.findNextNonDeletedIndex(t),r=e.findNextNonDeletedIndex(n)}return i};_t.prototype.isShallowConcavity=function(e,t,n,r){var i=w.computeOrientation(e,t,n),o=i===this._angleOrientation;if(!o)return!1;var s=w.distancePointLine(t,e,n);return s<r};_t.prototype.isShallowSampled=function(e,t,n,r,i){var o=this,s=Math.trunc((r-n)/_t.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=n;a<r;a+=s)if(!o.isShallow(e,t,o._inputLine[a],i))return!1;return!0};_t.prototype.isConcave=function(e,t,n){var r=w.computeOrientation(e,t,n),i=r===this._angleOrientation;return i};_t.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=w.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};_t.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===_t.DELETE;)t++;return t};_t.prototype.isShallow=function(e,t,n,r){var i=w.distancePointLine(t,e,n);return i<r};_t.prototype.collapseLine=function(){for(var e=this,t=new Lo,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==_t.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};_t.prototype.interfaces_=function(){return[]};_t.prototype.getClass=function(){return _t};_t.simplify=function(e,t){var n=new _t(e);return n.simplify(t)};Po.INIT.get=function(){return 0};Po.DELETE.get=function(){return 1};Po.KEEP.get=function(){return 1};Po.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(_t,Po);var xe=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new I},fp={COORDINATE_ARRAY_TYPE:{configurable:!0}};xe.prototype.getCoordinates=function(){var e=this._ptList.toArray(xe.COORDINATE_ARRAY_TYPE);return e};xe.prototype.setPrecisionModel=function(e){this._precisionModel=e};xe.prototype.addPt=function(e){var t=new g(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};xe.prototype.revere=function(){};xe.prototype.addPts=function(e,t){var n=this;if(t)for(var r=0;r<e.length;r++)n.addPt(e[r]);else for(var i=e.length-1;i>=0;i--)n.addPt(e[i])};xe.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};xe.prototype.toString=function(){var e=new z,t=e.createLineString(this.getCoordinates());return t.toString()};xe.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new g(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};xe.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};xe.prototype.interfaces_=function(){return[]};xe.prototype.getClass=function(){return xe};fp.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(xe,fp);var V=function(){},ri={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};V.prototype.interfaces_=function(){return[]};V.prototype.getClass=function(){return V};V.toDegrees=function(e){return e*180/Math.PI};V.normalize=function(e){for(;e>Math.PI;)e-=V.PI_TIMES_2;for(;e<=-Math.PI;)e+=V.PI_TIMES_2;return e};V.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}};V.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=r*o+i*s;return a>0};V.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=r*o+i*s;return a<0};V.interiorAngle=function(e,t,n){var r=V.angle(t,e),i=V.angle(t,n);return Math.abs(i-r)};V.normalizePositive=function(e){if(e<0){for(;e<0;)e+=V.PI_TIMES_2;e>=V.PI_TIMES_2&&(e=0)}else{for(;e>=V.PI_TIMES_2;)e-=V.PI_TIMES_2;e<0&&(e=0)}return e};V.angleBetween=function(e,t,n){var r=V.angle(t,e),i=V.angle(t,n);return V.diff(r,i)};V.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};V.toRadians=function(e){return e*Math.PI/180};V.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?V.COUNTERCLOCKWISE:n<0?V.CLOCKWISE:V.NONE};V.angleBetweenOriented=function(e,t,n){var r=V.angle(t,e),i=V.angle(t,n),o=i-r;return o<=-Math.PI?o+V.PI_TIMES_2:o>Math.PI?o-V.PI_TIMES_2:o};ri.PI_TIMES_2.get=function(){return 2*Math.PI};ri.PI_OVER_2.get=function(){return Math.PI/2};ri.PI_OVER_4.get=function(){return Math.PI/4};ri.COUNTERCLOCKWISE.get=function(){return w.COUNTERCLOCKWISE};ri.CLOCKWISE.get=function(){return w.CLOCKWISE};ri.NONE.get=function(){return w.COLLINEAR};Object.defineProperties(V,ri);var lt=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new R,this._seg1=new R,this._offset0=new R,this._offset1=new R,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new Pr,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Y.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Ro={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};lt.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=w.computeOrientation(this._s0,this._s1,this._s2),r=n===w.CLOCKWISE&&this._side===b.LEFT||n===w.COUNTERCLOCKWISE&&this._side===b.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};lt.prototype.addLineEndCap=function(e,t){var n=new R(e,t),r=new R;this.computeOffsetSegment(n,b.LEFT,this._distance,r);var i=new R;this.computeOffsetSegment(n,b.RIGHT,this._distance,i);var o=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Y.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,a+Math.PI/2,a-Math.PI/2,w.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Y.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Y.CAP_SQUARE:var u=new g;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new g(r.p1.x+u.x,r.p1.y+u.y),c=new g(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c);break}};lt.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};lt.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=ke.intersection(t.p0,t.p1,n.p0,n.p1);var s=r<=0?1:o.distance(e)/Math.abs(r);s>this._bufParams.getMitreLimit()&&(i=!1)}catch(a){if(a instanceof Vi)o=new g(0,0),i=!1;else throw a}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())};lt.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,o),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===w.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,a,c,r,i),this._segList.addPt(n)};lt.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*lt.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Y.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Y.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};lt.prototype.createSquare=function(e){this._segList.addPt(new g(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new g(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new g(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new g(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};lt.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};lt.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};lt.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};lt.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};lt.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=V.angle(i,this._seg0.p0),s=V.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),a=s/2,u=V.normalize(o+a),l=V.normalize(u+Math.PI),c=r*n,f=c*Math.abs(Math.sin(a)),p=n-f,h=i.x+c*Math.cos(l),d=i.y+c*Math.sin(l),_=new g(h,d),v=new R(i,_),E=v.pointAlongOffset(1,p),S=v.pointAlongOffset(1,-p);this._side===b.LEFT?(this._segList.addPt(E),this._segList.addPt(S)):(this._segList.addPt(S),this._segList.addPt(E))};lt.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===b.LEFT?1:-1,o=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u};lt.prototype.addFilletArc=function(e,t,n,r,i){var o=this,s=r===w.CLOCKWISE?-1:1,a=Math.abs(t-n),u=Math.trunc(a/this._filletAngleQuantum+.5);if(u<1)return null;for(var l=0,c=a/u,f=l,p=new g;f<a;){var h=t+s*f;p.x=e.x+i*Math.cos(h),p.y=e.y+i*Math.sin(h),o._segList.addPt(p),f+=c}};lt.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*lt.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new g((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new g((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};lt.prototype.createCircle=function(e){var t=new g(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};lt.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};lt.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new xe,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*lt.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};lt.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===Y.JOIN_BEVEL||this._bufParams.getJoinStyle()===Y.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,w.CLOCKWISE,this._distance))};lt.prototype.closeRing=function(){this._segList.closeRing()};lt.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};lt.prototype.interfaces_=function(){return[]};lt.prototype.getClass=function(){return lt};Ro.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};Ro.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};Ro.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};Ro.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(lt,Ro);var ue=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};ue.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&B.reverse(o),o};ue.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=_t.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],b.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(e,!1);var a=_t.simplify(e,r),u=a.length-1;n.initSideSegments(a[0],a[1],b.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()};ue.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===b.RIGHT&&(r=-r);var i=_t.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var s=1;s<=o;s++){var a=s!==1;n.addNextSegment(i[s],a)}n.closeRing()};ue.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=_t.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],b.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var s=_t.simplify(e,-n),a=s.length-1;t.initSideSegments(s[a],s[a-1],b.LEFT);for(var u=a-2;u>=0;u--)t.addNextSegment(s[u],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()};ue.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case Y.CAP_ROUND:t.createCircle(e);break;case Y.CAP_SQUARE:t.createSquare(e);break}};ue.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var o=r.getCoordinates();return o};ue.prototype.getBufferParameters=function(){return this._bufParams};ue.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};ue.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return ue.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()};ue.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=_t.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],b.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=_t.simplify(e,r),u=a.length-1;n.initSideSegments(a[0],a[1],b.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()};ue.prototype.getSegGen=function(e){return new lt(this._precisionModel,this._bufParams,e)};ue.prototype.interfaces_=function(){return[]};ue.prototype.getClass=function(){return ue};ue.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new g(e[n]);return t};var Vr=function(){this._subgraphs=null,this._seg=new R,this._cga=new w;var e=arguments[0];this._subgraphs=e},pp={DepthSegment:{configurable:!0}};Vr.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new I,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(D(arguments[2],Ge)&&arguments[0]instanceof g&&arguments[1]instanceof Ba)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){e._seg.p0=l[c],e._seg.p1=l[c+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var f=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(f<s.x)&&!e._seg.isHorizontal()&&!(s.y<e._seg.p0.y||s.y>e._seg.p1.y)&&w.computeOrientation(e._seg.p0,e._seg.p1,s)!==w.RIGHT){var p=a.getDepth(b.LEFT);e._seg.p0.equals(l[c])||(p=a.getDepth(b.RIGHT));var h=new Er(e._seg,p);u.add(h)}}else if(D(arguments[2],Ge)&&arguments[0]instanceof g&&D(arguments[1],Ge))for(var d=arguments[0],_=arguments[1],v=arguments[2],E=_.iterator();E.hasNext();){var S=E.next();S.isForward()&&e.findStabbedSegments(d,S,v)}}};Vr.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=ze.min(t);return n._leftDepth};Vr.prototype.interfaces_=function(){return[]};Vr.prototype.getClass=function(){return Vr};pp.DepthSegment.get=function(){return Er};Object.defineProperties(Vr,pp);var Er=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new R(e),this._leftDepth=t};Er.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};Er.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};Er.prototype.toString=function(){return this._upwardSeg.toString()};Er.prototype.interfaces_=function(){return[De]};Er.prototype.getClass=function(){return Er};var H=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};H.prototype.area=function(){return H.area(this.p0,this.p1,this.p2)};H.prototype.signedArea=function(){return H.signedArea(this.p0,this.p1,this.p2)};H.prototype.interpolateZ=function(e){if(e===null)throw new pt("Supplied point is null.");return H.interpolateZ(e,this.p0,this.p1,this.p2)};H.prototype.longestSideLength=function(){return H.longestSideLength(this.p0,this.p1,this.p2)};H.prototype.isAcute=function(){return H.isAcute(this.p0,this.p1,this.p2)};H.prototype.circumcentre=function(){return H.circumcentre(this.p0,this.p1,this.p2)};H.prototype.area3D=function(){return H.area3D(this.p0,this.p1,this.p2)};H.prototype.centroid=function(){return H.centroid(this.p0,this.p1,this.p2)};H.prototype.inCentre=function(){return H.inCentre(this.p0,this.p1,this.p2)};H.prototype.interfaces_=function(){return[]};H.prototype.getClass=function(){return H};H.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};H.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};H.det=function(e,t,n,r){return e*r-t*n};H.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,f=e.x-i,p=e.y-o,h=(l*f-a*p)/c,d=(-u*f+s*p)/c,_=t.z+h*(n.z-t.z)+d*(r.z-t.z);return _};H.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),s=r;return i>s&&(s=i),o>s&&(s=o),s};H.isAcute=function(e,t,n){return!(!V.isAcute(e,t,n)||!V.isAcute(t,n,e)||!V.isAcute(n,e,t))};H.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,s=e.y-i,a=t.x-r,u=t.y-i,l=2*H.det(o,s,a,u),c=H.det(s,o*o+s*s,u,a*a+u*u),f=H.det(o,o*o+s*s,a,a*a+u*u),p=r-c/l,h=i+f/l;return new g(p,h)};H.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new ke(e.x+n/2,e.y+r/2,1),o=new ke(e.x-r+n/2,e.y+n+r/2,1);return new ke(i,o)};H.angleBisector=function(e,t,n){var r=t.distance(e),i=t.distance(n),o=r/(r+i),s=n.x-e.x,a=n.y-e.y,u=new g(e.x+o*s,e.y+o*a);return u};H.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,s=n.x-e.x,a=n.y-e.y,u=n.z-e.z,l=i*u-o*a,c=o*s-r*u,f=r*a-i*s,p=l*l+c*c+f*f,h=Math.sqrt(p)/2;return h};H.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new g(r,i)};H.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),s=r+i+o,a=(r*e.x+i*t.x+o*n.x)/s,u=(r*e.y+i*t.y+o*n.y)/s;return new g(a,u)};var Ae=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new I;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};Ae.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,y.EXTERIOR,y.INTERIOR)};Ae.prototype.addPolygon=function(e){var t=this,n=this._distance,r=b.LEFT;this._distance<0&&(n=-this._distance,r=b.RIGHT);var i=e.getExteriorRing(),o=B.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,y.EXTERIOR,y.INTERIOR);for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),u=B.removeRepeatedPoints(a.getCoordinates());t._distance>0&&t.isErodedCompletely(a,-t._distance)||t.addPolygonRing(u,n,b.opposite(r),y.INTERIOR,y.EXTERIOR)}};Ae.prototype.isTriangleErodedCompletely=function(e,t){var n=new H(e[0],e[1],e[2]),r=n.inCentre(),i=w.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)};Ae.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=B.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,y.EXTERIOR,y.INTERIOR)};Ae.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var r=new St(e,new tt(0,y.BOUNDARY,t,n));this._curveList.add(r)};Ae.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};Ae.prototype.addPolygonRing=function(e,t,n,r,i){if(t===0&&e.length<En.MINIMUM_VALID_SIZE)return null;var o=r,s=i;e.length>=En.MINIMUM_VALID_SIZE&&w.isCCW(e)&&(o=i,s=r,n=b.opposite(n));var a=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(a,o,s)};Ae.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Pt?this.addPolygon(e):e instanceof mt?this.addLineString(e):e instanceof ge?this.addPoint(e):e instanceof wi?this.addCollection(e):e instanceof vr?this.addCollection(e):e instanceof _n?this.addCollection(e):e instanceof ee&&this.addCollection(e)};Ae.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i};Ae.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);t.add(r)}};Ae.prototype.interfaces_=function(){return[]};Ae.prototype.getClass=function(){return Ae};var Oi=function(){};Oi.prototype.locate=function(e){};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};var vn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};vn.prototype.next=function(){if(this._atStart)return this._atStart=!1,vn.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Wi;var e=this._parent.getGeometryN(this._index++);return e instanceof ee?(this._subcollectionIterator=new vn(e),this._subcollectionIterator.next()):e};vn.prototype.remove=function(){throw new Error(this.getClass().getName())};vn.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};vn.prototype.interfaces_=function(){return[ji]};vn.prototype.getClass=function(){return vn};vn.isAtomic=function(e){return!(e instanceof ee)};var be=function(){this._geom=null;var e=arguments[0];this._geom=e};be.prototype.locate=function(e){return be.locate(e,this._geom)};be.prototype.interfaces_=function(){return[Oi]};be.prototype.getClass=function(){return be};be.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?w.isPointInRing(e,t.getCoordinates()):!1};be.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!be.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(be.isPointInRing(e,i))return!1}return!0};be.containsPoint=function(e,t){if(t instanceof Pt)return be.containsPointInPolygon(e,t);if(t instanceof ee)for(var n=new vn(t);n.hasNext();){var r=n.next();if(r!==t&&be.containsPoint(e,r))return!0}return!1};be.locate=function(e,t){return t.isEmpty()?y.EXTERIOR:be.containsPoint(e,t)?y.INTERIOR:y.EXTERIOR};var Ht=function(){this._edgeMap=new Xt,this._edgeList=null,this._ptInAreaLocation=[y.NONE,y.NONE]};Ht.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};Ht.prototype.propagateSideLabels=function(e){for(var t=y.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,b.LEFT)!==y.NONE&&(t=i.getLocation(e,b.LEFT))}if(t===y.NONE)return null;for(var o=t,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();if(u.getLocation(e,b.ON)===y.NONE&&u.setLocation(e,b.ON,o),u.isArea(e)){var l=u.getLocation(e,b.LEFT),c=u.getLocation(e,b.RIGHT);if(c!==y.NONE){if(c!==o)throw new Bn("side location conflict",a.getCoordinate());l===y.NONE&&k.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),o=l}else k.isTrue(u.getLocation(e,b.LEFT)===y.NONE,"found single null side"),u.setLocation(e,b.RIGHT,o),u.setLocation(e,b.LEFT,o)}}};Ht.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};Ht.prototype.print=function(e){Ut.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Ht.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};Ht.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,b.LEFT);k.isTrue(i!==y.NONE,"Found unlabelled area edge");for(var o=i,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();k.isTrue(u.isArea(e),"Found non-area edge");var l=u.getLocation(e,b.LEFT),c=u.getLocation(e,b.RIGHT);if(l===c||c!==o)return!1;o=l}return!0};Ht.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=t._edgeList.get(n);if(r===e)return n}return-1};Ht.prototype.iterator=function(){return this.getEdges().iterator()};Ht.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new I(this._edgeMap.values())),this._edgeList};Ht.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===y.NONE&&(this._ptInAreaLocation[e]=be.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};Ht.prototype.toString=function(){var e=new hn;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};Ht.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};Ht.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),s=0;s<2;s++)o.isLine(s)&&o.getLocation(s)===y.BOUNDARY&&(n[s]=!0);for(var a=this.iterator();a.hasNext();)for(var u=a.next(),l=u.getLabel(),c=0;c<2;c++)if(l.isAnyNull(c)){var f=y.NONE;if(n[c])f=y.EXTERIOR;else{var p=u.getCoordinate();f=t.getLocation(c,p,e)}l.setAllLocationsIfNull(c,f)}};Ht.prototype.getDegree=function(){return this._edgeMap.size()};Ht.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};Ht.prototype.interfaces_=function(){return[]};Ht.prototype.getClass=function(){return Ht};var iv=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var a=n._resultAreaEdgeList.get(s),u=a.getSym();if(a.getLabel().isArea())switch(r===null&&a.isInResult()&&(r=a),o){case n._SCANNING_FOR_INCOMING:if(!u.isInResult())continue;i=u,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!a.isInResult())continue;i.setNext(a),o=n._SCANNING_FOR_INCOMING;break}}if(o===this._LINKING_TO_OUTGOING){if(r===null)throw new Bn("no outgoing dirEdge found",this.getCoordinate());k.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},t.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var o=n.get(r-1),s=i.getQuadrant(),a=o.getQuadrant();return et.isNorthern(s)&&et.isNorthern(a)?i:!et.isNorthern(s)&&!et.isNorthern(a)?o:i.getDy()!==0?i:o.getDy()!==0?o:(k.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){Ut.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new I;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.setAllLocationsIfNull(0,n.getLocation(0)),o.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,o=this._edgeList.size()-1;o>=0;o--){var s=n._edgeList.get(o),a=s.getSym();i===null&&(i=a),r!==null&&a.setNext(r),r=s}i.setNext(r)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(b.LEFT),s=r.getDepth(b.RIGHT),a=this.computeDepths(i+1,this._edgeList.size(),o),u=this.computeDepths(0,i,a);if(u!==s)throw new Bn("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var l=arguments[0],c=arguments[1],f=arguments[2],p=f,h=l;h<c;h++){var d=n._edgeList.get(h);d.setEdgeDepths(b.RIGHT,p),p=d.getDepth(b.LEFT)}return p}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,s=this._SCANNING_FOR_INCOMING,a=this._resultAreaEdgeList.size()-1;a>=0;a--){var u=r._resultAreaEdgeList.get(a),l=u.getSym();switch(i===null&&u.getEdgeRing()===n&&(i=u),s){case r._SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==n)continue;o=l,s=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(u.getEdgeRing()!==n)continue;o.setNextMin(u),s=r._SCANNING_FOR_INCOMING;break}}s===this._LINKING_TO_OUTGOING&&(k.isTrue(i!==null,"found null for first outgoing dirEdge"),k.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var o=arguments[0],s=0,a=this.iterator();a.hasNext();){var u=a.next();u.getEdgeRing()===o&&s++}return s}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=y.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=y.INTERIOR;break}if(o.isInResult()){n=y.EXTERIOR;break}}}if(n===y.NONE)return null;for(var s=n,a=this.iterator();a.hasNext();){var u=a.next(),l=u.getSym();u.isLineEdge()?u.getEdge().setCovered(s===y.INTERIOR):(u.isInResult()&&(s=y.EXTERIOR),l.isInResult()&&(s=y.INTERIOR))}},t.prototype.computeLabelling=function(n){var r=this;e.prototype.computeLabelling.call(this,n),this._label=new tt(y.NONE);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),s=o.getEdge(),a=s.getLabel(),u=0;u<2;u++){var l=a.getLocation(u);(l===y.INTERIOR||l===y.BOUNDARY)&&r._label.setLocation(u,y.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ht),hp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new Ms(n,new iv)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ni),nr=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};nr.prototype.compareTo=function(e){var t=e,n=nr.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};nr.prototype.interfaces_=function(){return[De]};nr.prototype.getClass=function(){return nr};nr.orientation=function(e){return B.increasingDirection(e)===1};nr.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,s=t?e.length:-1,a=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(c!==0)return c;u+=i,l+=o;var f=u===s,p=l===a;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var Ve=function(){this._edges=new I,this._ocaMap=new Xt};Ve.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&e.print(","),e.print(i[o].x+" "+i[o].y);e.println(")")}e.print(")  ")};Ve.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};Ve.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};Ve.prototype.iterator=function(){return this._edges.iterator()};Ve.prototype.getEdges=function(){return this._edges};Ve.prototype.get=function(e){return this._edges.get(e)};Ve.prototype.findEqualEdge=function(e){var t=new nr(e.getCoordinates()),n=this._ocaMap.get(t);return n};Ve.prototype.add=function(e){this._edges.add(e);var t=new nr(e.getCoordinates());this._ocaMap.put(t,e)};Ve.prototype.interfaces_=function(){return[]};Ve.prototype.getClass=function(){return Ve};var Ir=function(){};Ir.prototype.processIntersections=function(e,t,n,r){};Ir.prototype.isDone=function(){};Ir.prototype.interfaces_=function(){return[]};Ir.prototype.getClass=function(){return Ir};var we=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};we.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(we.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};we.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};we.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};we.prototype.getLineIntersector=function(){return this._li};we.prototype.hasProperIntersection=function(){return this._hasProper};we.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};we.prototype.hasIntersection=function(){return this._hasIntersection};we.prototype.isDone=function(){return!1};we.prototype.hasInteriorIntersection=function(){return this._hasInterior};we.prototype.interfaces_=function(){return[Ir]};we.prototype.getClass=function(){return we};we.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var an=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new g(e),this.segmentIndex=t,this.dist=n};an.prototype.getSegmentIndex=function(){return this.segmentIndex};an.prototype.getCoordinate=function(){return this.coord};an.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};an.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};an.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};an.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};an.prototype.getDistance=function(){return this.dist};an.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};an.prototype.interfaces_=function(){return[De]};an.prototype.getClass=function(){return an};var xn=function(){this._nodeMap=new Xt,this.edge=null;var e=arguments[0];this.edge=e};xn.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};xn.prototype.iterator=function(){return this._nodeMap.values().iterator()};xn.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};xn.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};xn.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new g(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=n.edge.pts[u];return o&&(s[a]=t.coord),new gs(s,new tt(this.edge._label))};xn.prototype.add=function(e,t,n){var r=new an(e,t,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};xn.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};xn.prototype.interfaces_=function(){return[]};xn.prototype.getClass=function(){return xn};var Sr=function(){};Sr.prototype.getChainStartIndices=function(e){var t=this,n=0,r=new I;r.add(new tn(n));do{var i=t.findChainEnd(e,n);r.add(new tn(i)),n=i}while(n<e.length-1);var o=Sr.toIntArray(r);return o};Sr.prototype.findChainEnd=function(e,t){for(var n=et.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=et.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Sr.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Un=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new P,this.env2=new P;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Sr;this.startIndex=t.getChainStartIndices(this.pts)};Un.prototype.getCoordinates=function(){return this.pts};Un.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};Un.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};Un.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],f=this.pts[o],p=s.pts[a],h=s.pts[u];if(o-i===1&&u-a===1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,f),this.env2.init(p,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),_=Math.trunc((a+u)/2);i<d&&(a<_&&this.computeIntersectsForChain(i,d,s,a,_,l),_<u&&this.computeIntersectsForChain(i,d,s,_,u,l)),d<o&&(a<_&&this.computeIntersectsForChain(d,o,s,a,_,l),_<u&&this.computeIntersectsForChain(d,o,s,_,u,l))}};Un.prototype.getStartIndexes=function(){return this.startIndex};Un.prototype.computeIntersects=function(e,t){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<e.startIndex.length-1;i++)n.computeIntersectsForChain(r,e,i,t)};Un.prototype.interfaces_=function(){return[]};Un.prototype.getClass=function(){return Un};var qt=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},gp={NULL_VALUE:{configurable:!0}};qt.prototype.getDepth=function(e,t){return this._depth[e][t]};qt.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};qt.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==qt.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===qt.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._depth[i][o]===qt.NULL_VALUE}};qt.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;e._depth[t][r]>n&&(i=1),e._depth[t][r]=i}}};qt.prototype.getDelta=function(e){return this._depth[e][b.RIGHT]-this._depth[e][b.LEFT]};qt.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?y.EXTERIOR:y.INTERIOR};qt.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};qt.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);(i===y.EXTERIOR||i===y.INTERIOR)&&(e.isNull(n,r)?e._depth[n][r]=qt.depthAtLocation(i):e._depth[n][r]+=qt.depthAtLocation(i))}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];a===y.INTERIOR&&this._depth[o][s]++}};qt.prototype.interfaces_=function(){return[]};qt.prototype.getClass=function(){return qt};qt.depthAtLocation=function(e){return e===y.EXTERIOR?0:e===y.INTERIOR?1:qt.NULL_VALUE};gp.NULL_VALUE.get=function(){return-1};Object.defineProperties(qt,gp);var gs=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new xn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new qt,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new t(n,tt.toLineLabel(this._label));return r},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r=this;if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var o=!0,s=!0,a=this.pts.length,u=0;u<this.pts.length;u++)if(r.pts[u].equals2D(i.pts[u])||(o=!1),r.pts[u].equals2D(i.pts[--a])||(s=!1),!o&&!s)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Un(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new P;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},t.prototype.addIntersection=function(n,r,i,o){var s=new g(n.getIntersection(o)),a=r,u=n.getEdgeDistance(i,o),l=a+1;if(l<this.pts.length){var c=this.pts[l];s.equals2D(c)&&(a=l,u=0)}this.eiList.add(s,a,u)},t.prototype.toString=function(){var n=this,r=new hn;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},t.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,r,i){for(var o=this,s=0;s<n.getIntersectionNum();s++)o.addIntersection(n,r,i,s)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,b.ON),n.getLocation(1,b.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,b.LEFT),n.getLocation(1,b.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,b.RIGHT),n.getLocation(1,b.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(Se),te=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ve,this._bufParams=e||null};te.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};te.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new tt(e.getLabel()),r.flip()),n.merge(r);var i=te.depthDelta(r),o=t.getDepthDelta(),s=o+i;t.setDepthDelta(s)}else this._edgeList.add(e),e.setDepthDelta(te.depthDelta(e.getLabel()))};te.prototype.buildSubgraphs=function(e,t){for(var n=new I,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Vr(n),a=s.getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}};te.prototype.createSubgraphs=function(e){for(var t=new I,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new ne;i.create(r),t.add(i)}}return ze.sort(t,ze.reverseOrder()),t};te.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};te.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new Eu,n=new Pr;return n.setPrecisionModel(e),t.setSegmentIntersector(new we(n)),t};te.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new ue(n,this._bufParams),i=new Ae(e,t,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new gt(new hp),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),a=new de(this._geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this._geomFact.buildGeometry(u);return l};te.prototype.computeNodedEdges=function(e,t){var n=this,r=this.getNoder(t);r.computeNodes(e);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var s=o.next(),a=s.getCoordinates();if(!(a.length===2&&a[0].equals2D(a[1]))){var u=s.getData(),l=new gs(s.getCoordinates(),new tt(u));n.insertUniqueEdge(l)}}};te.prototype.setNoder=function(e){this._workingNoder=e};te.prototype.interfaces_=function(){return[]};te.prototype.getClass=function(){return te};te.depthDelta=function(e){var t=e.getLocation(0,b.LEFT),n=e.getLocation(0,b.RIGHT);return t===y.INTERIOR&&n===y.EXTERIOR?1:t===y.EXTERIOR&&n===y.INTERIOR?-1:0};te.convertSegStrings=function(e){for(var t=new z,n=new I;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var rr=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};rr.prototype.rescale=function(){var e=this;if(D(arguments[0],Ct))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/e._scaleFactor+e._offsetX,i[o].y=i[o].y/e._scaleFactor+e._offsetY;i.length===2&&i[0].equals2D(i[1])&&Ut.out.println(i)}};rr.prototype.scale=function(){var e=this;if(D(arguments[0],Ct)){for(var t=arguments[0],n=new I,r=t.iterator();r.hasNext();){var i=r.next();n.add(new St(e.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new g(Math.round((o[a].x-e._offsetX)*e._scaleFactor),Math.round((o[a].y-e._offsetY)*e._scaleFactor),o[a].z);var u=B.removeRepeatedPoints(s);return u}};rr.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};rr.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};rr.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};rr.prototype.interfaces_=function(){return[br]};rr.prototype.getClass=function(){return rr};var un=function(){this._li=new Pr,this._segStrings=null;var e=arguments[0];this._segStrings=e},dp={fact:{configurable:!0}};un.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),r=n.getCoordinates();e.checkEndPtVertexIntersections(r[0],e._segStrings),e.checkEndPtVertexIntersections(r[r.length-1],e._segStrings)}else if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new kn("found endpt/interior pt intersection at index "+l+" :pt "+i)}};un.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();e.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)e.checkInteriorIntersections(o,l,s,c);else if(arguments.length===4){var f=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3];if(f===h&&p===d)return null;var _=f.getCoordinates()[p],v=f.getCoordinates()[p+1],E=h.getCoordinates()[d],S=h.getCoordinates()[d+1];if(this._li.computeIntersection(_,v,E,S),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,_,v)||this.hasInteriorIntersection(this._li,E,S)))throw new kn("found non-noded intersection at "+_+"-"+v+" and "+E+"-"+S)}};un.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};un.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])};un.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!(i.equals(t)||i.equals(n)))return!0}return!1};un.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new kn("found non-noded collapse at "+un.fact.createLineString([e,t,n]))};un.prototype.interfaces_=function(){return[]};un.prototype.getClass=function(){return un};dp.fact.get=function(){return new z};Object.defineProperties(un,dp);var le=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new pt("Scale factor must be non-zero");t!==1&&(this._pt=new g(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new g,this._p1Scaled=new g),this.initCorners(this._pt)},yp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};le.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(e,t);return k.isTrue(!(s&&a),"Found bad envelope test"),a};le.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new g(this._maxx,this._maxy),this._corner[1]=new g(this._minx,this._maxy),this._corner[2]=new g(this._minx,this._miny),this._corner[3]=new g(this._maxx,this._miny)};le.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};le.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};le.prototype.getCoordinate=function(){return this._originalPt};le.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};le.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=le.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new P(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};le.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};le.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||e.equals(this._pt)||t.equals(this._pt))};le.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1};le.prototype.interfaces_=function(){return[]};le.prototype.getClass=function(){return le};yp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(le,yp);var Eo=function(){this.tempEnv1=new P,this.selectedSegment=new R};Eo.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}};Eo.prototype.interfaces_=function(){return[]};Eo.prototype.getClass=function(){return Eo};var Pi=function(){this._index=null;var e=arguments[0];this._index=e},mp={HotPixelSnapAction:{configurable:!0}};Pi.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new _p(t,n,r);return this._index.query(i,{interfaces_:function(){return[tr]},visitItem:function(s){var a=s;a.select(i,o)}}),o.isNodeAdded()}};Pi.prototype.interfaces_=function(){return[]};Pi.prototype.getClass=function(){return Pi};mp.HotPixelSnapAction.get=function(){return _p};Object.defineProperties(Pi,mp);var _p=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Eo),jr=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new I};jr.prototype.processIntersections=function(e,t,n,r){var i=this;if(e===n&&t===r)return null;var o=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)i._interiorIntersections.add(i._li.getIntersection(l));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}};jr.prototype.isDone=function(){return!1};jr.prototype.getInteriorIntersections=function(){return this._interiorIntersections};jr.prototype.interfaces_=function(){return[Ir]};jr.prototype.getClass=function(){return jr};var wn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new Pr,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};wn.prototype.checkCorrectness=function(e){var t=St.getNodedSubstrings(e),n=new un(t);try{n.checkValid()}catch(r){if(r instanceof np)r.printStackTrace();else throw r}finally{}};wn.prototype.getNodedSubstrings=function(){return St.getNodedSubstrings(this._nodedSegStrings)};wn.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};wn.prototype.findInteriorIntersections=function(e,t){var n=new jr(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};wn.prototype.computeVertexSnaps=function(){var e=this;if(D(arguments[0],Ct))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.computeVertexSnaps(r)}else if(arguments[0]instanceof St)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new le(o[s],e._scaleFactor,e._li),u=e._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}};wn.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new Eu,this._pointSnapper=new Pi(this._noder.getIndex()),this.snapRound(e,this._li)};wn.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=new le(r,t._scaleFactor,t._li);t._pointSnapper.snap(i)}};wn.prototype.interfaces_=function(){return[br]};wn.prototype.getClass=function(){return wn};var Wt=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Y,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},$i={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Wt.prototype.bufferFixedPrecision=function(e){var t=new rr(new wn(new Q(1)),e.getScale()),n=new te(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Wt.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=Wt.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(o){if(o instanceof Bn)e._saveException=o;else throw o}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=Wt.precisionScaleFactor(this._argGeom,this._distance,n),i=new Q(r);this.bufferFixedPrecision(i)}};Wt.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Q.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};Wt.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};Wt.prototype.bufferOriginalPrecision=function(){try{var e=new te(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof kn)this._saveException=t;else throw t}finally{}};Wt.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};Wt.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};Wt.prototype.interfaces_=function(){return[]};Wt.prototype.getClass=function(){return Wt};Wt.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Wt(e),r=n.getResultGeometry(t);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof A&&typeof arguments[1]=="number"){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Wt(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}else if(arguments[2]instanceof Y&&arguments[0]instanceof A&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],f=arguments[2],p=new Wt(l,f),h=p.getResultGeometry(c);return h}}else if(arguments.length===4){var d=arguments[0],_=arguments[1],v=arguments[2],E=arguments[3],S=new Wt(d);S.setQuadrantSegments(v),S.setEndCapStyle(E);var x=S.getResultGeometry(_);return x}};Wt.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Ie.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=t>0?t:0,s=i+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-a,l=Math.pow(10,u);return l};$i.CAP_ROUND.get=function(){return Y.CAP_ROUND};$i.CAP_BUTT.get=function(){return Y.CAP_FLAT};$i.CAP_FLAT.get=function(){return Y.CAP_FLAT};$i.CAP_SQUARE.get=function(){return Y.CAP_SQUARE};$i.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Wt,$i);var Qt=function(){this._pt=[new g,new g],this._distance=M.NaN,this._isNull=!0};Qt.prototype.getCoordinates=function(){return this._pt};Qt.prototype.getCoordinate=function(e){return this._pt[e]};Qt.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};Qt.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};Qt.prototype.getDistance=function(){return this._distance};Qt.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};Qt.prototype.interfaces_=function(){return[]};Qt.prototype.getClass=function(){return Qt};var yn=function(){};yn.prototype.interfaces_=function(){return[]};yn.prototype.getClass=function(){return yn};yn.computeDistance=function(){if(arguments[2]instanceof Qt&&arguments[0]instanceof mt&&arguments[1]instanceof g)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new R,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof Qt&&arguments[0]instanceof Pt&&arguments[1]instanceof g){var a=arguments[0],u=arguments[1],l=arguments[2];yn.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)yn.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Qt&&arguments[0]instanceof A&&arguments[1]instanceof g){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof mt)yn.computeDistance(f,p,h);else if(f instanceof Pt)yn.computeDistance(f,p,h);else if(f instanceof ee)for(var d=f,_=0;_<d.getNumGeometries();_++){var v=d.getGeometryN(_);yn.computeDistance(v,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Qt&&arguments[0]instanceof R&&arguments[1]instanceof g){var E=arguments[0],S=arguments[1],x=arguments[2],C=E.closestPoint(S);x.setMinimum(C,S)}};var xr=function(e){this._maxPtDist=new Qt,this._inputGeom=e||null},Iu={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};xr.prototype.computeMaxMidpointDistance=function(e){var t=new ir(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};xr.prototype.computeMaxVertexDistance=function(e){var t=new Wr(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};xr.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};xr.prototype.getDistancePoints=function(){return this._maxPtDist};xr.prototype.interfaces_=function(){return[]};xr.prototype.getClass=function(){return xr};Iu.MaxPointDistanceFilter.get=function(){return Wr};Iu.MaxMidpointDistanceFilter.get=function(){return ir};Object.defineProperties(xr,Iu);var Wr=function(e){this._maxPtDist=new Qt,this._minPtDist=new Qt,this._geom=e||null};Wr.prototype.filter=function(e){this._minPtDist.initialize(),yn.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Wr.prototype.getMaxPointDistance=function(){return this._maxPtDist};Wr.prototype.interfaces_=function(){return[bn]};Wr.prototype.getClass=function(){return Wr};var ir=function(e){this._maxPtDist=new Qt,this._minPtDist=new Qt,this._geom=e||null};ir.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new g((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),yn.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ir.prototype.isDone=function(){return!1};ir.prototype.isGeometryChanged=function(){return!1};ir.prototype.getMaxPointDistance=function(){return this._maxPtDist};ir.prototype.interfaces_=function(){return[qe]};ir.prototype.getClass=function(){return ir};var Mn=function(e){this._comps=e||null};Mn.prototype.filter=function(e){e instanceof Pt&&this._comps.add(e)};Mn.prototype.interfaces_=function(){return[nn]};Mn.prototype.getClass=function(){return Mn};Mn.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return Mn.getPolygons(e,new I)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Pt?n.add(t):t instanceof ee&&t.apply(new Mn(n)),n}};var Bt=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};Bt.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof En){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof mt&&this._lines.add(e)};Bt.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};Bt.prototype.interfaces_=function(){return[Gn]};Bt.prototype.getClass=function(){return Bt};Bt.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(Bt.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(Bt.getLines(t,n))}};Bt.getLines=function(){if(arguments.length===1){var e=arguments[0];return Bt.getLines(e,!1)}else if(arguments.length===2){if(D(arguments[0],Ct)&&D(arguments[1],Ct)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();Bt.getLines(i,n)}return n}else if(arguments[0]instanceof A&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1],a=new I;return o.apply(new Bt(a,s)),a}else if(arguments[0]instanceof A&&D(arguments[1],Ct)){var u=arguments[0],l=arguments[1];return u instanceof mt?l.add(u):u.apply(new Bt(l)),l}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&D(arguments[0],Ct)&&D(arguments[1],Ct)){for(var c=arguments[0],f=arguments[1],p=arguments[2],h=c.iterator();h.hasNext();){var d=h.next();Bt.getLines(d,f,p)}return f}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof A&&D(arguments[1],Ct)){var _=arguments[0],v=arguments[1],E=arguments[2];return _.apply(new Bt(v,E)),v}}};var je=function(){if(this._boundaryRule=Re.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e===null)throw new pt("Rule must be non-null");this._boundaryRule=e}};je.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof g&&arguments[1]instanceof Pt){var t=arguments[0],n=arguments[1];if(n.isEmpty())return y.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===y.EXTERIOR)return y.EXTERIOR;if(i===y.BOUNDARY)return y.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=e.locateInPolygonRing(t,s);if(a===y.INTERIOR)return y.EXTERIOR;if(a===y.BOUNDARY)return y.BOUNDARY}return y.INTERIOR}else if(arguments[0]instanceof g&&arguments[1]instanceof mt){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return y.EXTERIOR;var c=l.getCoordinates();return!l.isClosed()&&(u.equals(c[0])||u.equals(c[c.length-1]))?y.BOUNDARY:w.isOnLine(u,c)?y.INTERIOR:y.EXTERIOR}else if(arguments[0]instanceof g&&arguments[1]instanceof ge){var f=arguments[0],p=arguments[1],h=p.getCoordinate();return h.equals2D(f)?y.INTERIOR:y.EXTERIOR}};je.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?w.locatePointInRing(e,t.getCoordinates()):y.EXTERIOR};je.prototype.intersects=function(e,t){return this.locate(e,t)!==y.EXTERIOR};je.prototype.updateLocationInfo=function(e){e===y.INTERIOR&&(this._isIn=!0),e===y.BOUNDARY&&this._numBoundaries++};je.prototype.computeLocation=function(e,t){var n=this;if(t instanceof ge&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof mt)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Pt)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof vr)for(var r=t,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(e,o))}else if(t instanceof _n)for(var s=t,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(e,u))}else if(t instanceof ee)for(var l=new vn(t);l.hasNext();){var c=l.next();c!==t&&n.computeLocation(e,c)}};je.prototype.locate=function(e,t){return t.isEmpty()?y.EXTERIOR:t instanceof mt?this.locateInternal(e,t):t instanceof Pt?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?y.BOUNDARY:this._numBoundaries>0||this._isIn?y.INTERIOR:y.EXTERIOR)};je.prototype.interfaces_=function(){return[]};je.prototype.getClass=function(){return je};var Zt=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},vp={INSIDE_AREA:{configurable:!0}};Zt.prototype.isInsideArea=function(){return this._segIndex===Zt.INSIDE_AREA};Zt.prototype.getCoordinate=function(){return this._pt};Zt.prototype.getGeometryComponent=function(){return this._component};Zt.prototype.getSegmentIndex=function(){return this._segIndex};Zt.prototype.interfaces_=function(){return[]};Zt.prototype.getClass=function(){return Zt};vp.INSIDE_AREA.get=function(){return-1};Object.defineProperties(Zt,vp);var Kn=function(e){this._pts=e||null};Kn.prototype.filter=function(e){e instanceof ge&&this._pts.add(e)};Kn.prototype.interfaces_=function(){return[nn]};Kn.prototype.getClass=function(){return Kn};Kn.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof ge?ze.singletonList(e):Kn.getPoints(e,new I)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof ge?n.add(t):t instanceof ee&&t.apply(new Kn(n)),n}};var $r=function(){this._locations=null;var e=arguments[0];this._locations=e};$r.prototype.filter=function(e){(e instanceof ge||e instanceof mt||e instanceof Pt)&&this._locations.add(new Zt(e,0,e.getCoordinate()))};$r.prototype.interfaces_=function(){return[nn]};$r.prototype.getClass=function(){return $r};$r.getLocations=function(e){var t=new I;return e.apply(new $r(t)),t};var zt=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new je,this._minDistanceLocation=null,this._minDistance=M.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};zt.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,o=Mn.getPolygons(this._geom[n]);if(o.size()>0){var s=$r.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&D(arguments[0],Ge)&&D(arguments[1],Ge)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var f=a.get(c),p=0;p<u.size();p++)if(e.computeContainmentDistance(f,u.get(p),l),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Pt){var h=arguments[0],d=arguments[1],_=arguments[2],v=h.getCoordinate();if(y.EXTERIOR!==this._ptLocator.locate(v,d))return this._minDistance=0,_[0]=h,_[1]=new Zt(d,v),null}}};zt.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};zt.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Bt.getLines(this._geom[0]),n=Bt.getLines(this._geom[1]),r=Kn.getPoints(this._geom[0]),i=Kn.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)};zt.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};zt.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};zt.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};zt.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof mt&&arguments[1]instanceof ge){var t=arguments[0],n=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=w.distancePointLine(o,i[s],i[s+1]);if(a<e._minDistance){e._minDistance=a;var u=new R(i[s],i[s+1]),l=u.closestPoint(o);r[0]=new Zt(t,s,l),r[1]=new Zt(n,0,o)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof mt&&arguments[1]instanceof mt){var c=arguments[0],f=arguments[1],p=arguments[2];if(c.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var h=c.getCoordinates(),d=f.getCoordinates(),_=0;_<h.length-1;_++)for(var v=0;v<d.length-1;v++){var E=w.distanceLineLine(h[_],h[_+1],d[v],d[v+1]);if(E<e._minDistance){e._minDistance=E;var S=new R(h[_],h[_+1]),x=new R(d[v],d[v+1]),C=S.closestPoints(x);p[0]=new Zt(c,_,C[0]),p[1]=new Zt(f,v,C[1])}if(e._minDistance<=e._terminateDistance)return null}}}};zt.prototype.computeMinDistancePoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Zt(o,0,o.getCoordinate()),n[1]=new Zt(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};zt.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new pt("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};zt.prototype.computeMinDistanceLines=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};zt.prototype.interfaces_=function(){return[]};zt.prototype.getClass=function(){return zt};zt.distance=function(e,t){var n=new zt(e,t);return n.distance()};zt.isWithinDistance=function(e,t,n){var r=new zt(e,t,n);return r.distance()<=n};zt.nearestPoints=function(e,t){var n=new zt(e,t);return n.nearestPoints()};var $t=function(){this._pt=[new g,new g],this._distance=M.NaN,this._isNull=!0};$t.prototype.getCoordinates=function(){return this._pt};$t.prototype.getCoordinate=function(e){return this._pt[e]};$t.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};$t.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};$t.prototype.toString=function(){return Be.toLineString(this._pt[0],this._pt[1])};$t.prototype.getDistance=function(){return this._distance};$t.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};$t.prototype.interfaces_=function(){return[]};$t.prototype.getClass=function(){return $t};var Ke=function(){};Ke.prototype.interfaces_=function(){return[]};Ke.prototype.getClass=function(){return Ke};Ke.computeDistance=function(){if(arguments[2]instanceof $t&&arguments[0]instanceof mt&&arguments[1]instanceof g)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new R,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof $t&&arguments[0]instanceof Pt&&arguments[1]instanceof g){var a=arguments[0],u=arguments[1],l=arguments[2];Ke.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Ke.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof $t&&arguments[0]instanceof A&&arguments[1]instanceof g){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof mt)Ke.computeDistance(f,p,h);else if(f instanceof Pt)Ke.computeDistance(f,p,h);else if(f instanceof ee)for(var d=f,_=0;_<d.getNumGeometries();_++){var v=d.getGeometryN(_);Ke.computeDistance(v,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof $t&&arguments[0]instanceof R&&arguments[1]instanceof g){var E=arguments[0],S=arguments[1],x=arguments[2],C=E.closestPoint(S);x.setMinimum(C,S)}};var Pe=function(){this._g0=null,this._g1=null,this._ptDist=new $t,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},Su={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Pe.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};Pe.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new pt("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};Pe.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};Pe.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};Pe.prototype.computeOrientedDistance=function(e,t,n){var r=new Xr(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new or(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}};Pe.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};Pe.prototype.interfaces_=function(){return[]};Pe.prototype.getClass=function(){return Pe};Pe.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Pe(e,t);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Pe(r,i);return s.setDensifyFraction(o),s.distance()}};Su.MaxPointDistanceFilter.get=function(){return Xr};Su.MaxDensifiedByFractionDistanceFilter.get=function(){return or};Object.defineProperties(Pe,Su);var Xr=function(){this._maxPtDist=new $t,this._minPtDist=new $t,this._euclideanDist=new Ke,this._geom=null;var e=arguments[0];this._geom=e};Xr.prototype.filter=function(e){this._minPtDist.initialize(),Ke.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Xr.prototype.getMaxPointDistance=function(){return this._maxPtDist};Xr.prototype.interfaces_=function(){return[bn]};Xr.prototype.getClass=function(){return Xr};var or=function(){this._maxPtDist=new $t,this._minPtDist=new $t,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};or.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var r=e.getCoordinate(t-1),i=e.getCoordinate(t),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,l=r.y+a*s,c=new g(u,l);n._minPtDist.initialize(),Ke.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};or.prototype.isDone=function(){return!1};or.prototype.isGeometryChanged=function(){return!1};or.prototype.getMaxPointDistance=function(){return this._maxPtDist};or.prototype.interfaces_=function(){return[qe]};or.prototype.getClass=function(){return or};var pe=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},xu={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};pe.prototype.checkMaximumDistance=function(e,t,n){var r=new Pe(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Be.toLineString(i[0],i[1])+")"}};pe.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=pe.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),pe.VERBOSE&&Ut.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};pe.prototype.checkNegativeValid=function(){if(!(this._input instanceof Pt||this._input instanceof _n||this._input instanceof ee))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};pe.prototype.getErrorIndicator=function(){return this._errorIndicator};pe.prototype.checkMinimumDistance=function(e,t,n){var r=new zt(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Be.toLineString(i[0],i[1])+" )"}};pe.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};pe.prototype.getErrorLocation=function(){return this._errorLocation};pe.prototype.getPolygonLines=function(e){for(var t=new I,n=new Bt(t),r=Mn.getPolygons(e),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return e.getFactory().buildGeometry(t)};pe.prototype.getErrorMessage=function(){return this._errMsg};pe.prototype.interfaces_=function(){return[]};pe.prototype.getClass=function(){return pe};xu.VERBOSE.get=function(){return!1};xu.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(pe,xu);var Vt=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},wu={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Vt.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Vt.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Vt.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new P(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new P(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Vt.prototype.checkDistance=function(){var e=new pe(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};Vt.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Vt.prototype.checkPolygonal=function(){this._result instanceof Pt||this._result instanceof _n||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Vt.prototype.getErrorIndicator=function(){return this._errorIndicator};Vt.prototype.getErrorLocation=function(){return this._errorLocation};Vt.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Vt.prototype.report=function(e){if(!Vt.VERBOSE)return null;Ut.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};Vt.prototype.getErrorMessage=function(){return this._errorMsg};Vt.prototype.interfaces_=function(){return[]};Vt.prototype.getClass=function(){return Vt};Vt.isValidMsg=function(e,t,n){var r=new Vt(e,t,n);return r.isValid()?null:r.getErrorMessage()};Vt.isValid=function(e,t,n){var r=new Vt(e,t,n);return!!r.isValid()};wu.VERBOSE.get=function(){return!1};wu.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Vt,wu);var ln=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};ln.prototype.getCoordinates=function(){return this._pts};ln.prototype.size=function(){return this._pts.length};ln.prototype.getCoordinate=function(e){return this._pts[e]};ln.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};ln.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:zr.octant(this.getCoordinate(e),this.getCoordinate(e+1))};ln.prototype.setData=function(e){this._data=e};ln.prototype.getData=function(){return this._data};ln.prototype.toString=function(){return Be.toLineString(new bt(this._pts))};ln.prototype.interfaces_=function(){return[Sn]};ln.prototype.getClass=function(){return ln};var kt=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new I,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};kt.prototype.getInteriorIntersection=function(){return this._interiorIntersection};kt.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};kt.prototype.getIntersectionSegments=function(){return this._intSegments};kt.prototype.count=function(){return this._intersectionCount};kt.prototype.getIntersections=function(){return this._intersections};kt.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};kt.prototype.setKeepIntersections=function(e){this._keepIntersections=e};kt.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var o=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=s,this._intSegments[2]=a,this._intSegments[3]=u,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};kt.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};kt.prototype.hasIntersection=function(){return this._interiorIntersection!==null};kt.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};kt.prototype.interfaces_=function(){return[Ir]};kt.prototype.getClass=function(){return kt};kt.createAllIntersectionsFinder=function(e){var t=new kt(e);return t.setFindAllIntersections(!0),t};kt.createAnyIntersectionFinder=function(e){return new kt(e)};kt.createIntersectionCounter=function(e){var t=new kt(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var We=function(){this._li=new Pr,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};We.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};We.prototype.getIntersections=function(){return this._segInt.getIntersections()};We.prototype.isValid=function(){return this.execute(),this._isValid};We.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};We.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new kt(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new Eu;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};We.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Bn(this.getErrorMessage(),this._segInt.getInteriorIntersection())};We.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Be.toLineString(e[0],e[1])+" and "+Be.toLineString(e[2],e[3])};We.prototype.interfaces_=function(){return[]};We.prototype.getClass=function(){return We};We.computeIntersections=function(e){var t=new We(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var wr=function e(){this._nv=null;var t=arguments[0];this._nv=new We(e.toSegmentStrings(t))};wr.prototype.checkValid=function(){this._nv.checkValid()};wr.prototype.interfaces_=function(){return[]};wr.prototype.getClass=function(){return wr};wr.toSegmentStrings=function(e){for(var t=new I,n=e.iterator();n.hasNext();){var r=n.next();t.add(new ln(r.getCoordinates(),r))}return t};wr.checkValid=function(e){var t=new wr(e);t.checkValid()};var Yr=function(e){this._mapOp=e};Yr.prototype.map=function(e){for(var t=this,n=new I,r=0;r<e.getNumGeometries();r++){var i=t._mapOp.map(e.getGeometryN(r));i.isEmpty()||n.add(i)}return e.getFactory().createGeometryCollection(z.toGeometryArray(n))};Yr.prototype.interfaces_=function(){return[]};Yr.prototype.getClass=function(){return Yr};Yr.map=function(e,t){var n=new Yr(t);return n.map(e)};var cn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new I,this._resultLineList=new I;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};cn.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();t.collectLineEdge(r,e,t._lineEdgesList),t.collectBoundaryTouchEdge(r,e,t._lineEdgesList)}};cn.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};cn.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};cn.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&F.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))};cn.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var s=e._op.isCoveredByA(i.getCoordinate());o.setCovered(s)}}};cn.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?t.labelIsolatedLine(r,0):t.labelIsolatedLine(r,1))}};cn.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=t._geometryFactory.createLineString(r.getCoordinates());t._resultLineList.add(i),r.setInResult(!0)}};cn.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;k.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),F.isResultOfOp(r,t)&&t===F.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};cn.prototype.interfaces_=function(){return[]};cn.prototype.getClass=function(){return cn};var Hr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new I;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Hr.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Hr.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||e===F.INTERSECTION)){var i=r.getLabel();F.isResultOfOp(i,e)&&t.filterCoveredNodeToPoint(r)}}};Hr.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Hr.prototype.interfaces_=function(){return[]};Hr.prototype.getClass=function(){return Hr};var ce=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};ce.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};ce.prototype.transformPolygon=function(e,t){var n=this,r=!0,i=this.transformLinearRing(e.getExteriorRing(),e);(i===null||!(i instanceof En)||i.isEmpty())&&(r=!1);for(var o=new I,s=0;s<e.getNumInteriorRing();s++){var a=n.transformLinearRing(e.getInteriorRingN(s),e);a===null||a.isEmpty()||(a instanceof En||(r=!1),o.add(a))}if(r)return this._factory.createPolygon(i,o.toArray([]));var u=new I;return i!==null&&u.add(i),u.addAll(o),this._factory.buildGeometry(u)};ce.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};ce.prototype.getInputGeometry=function(){return this._inputGeom};ce.prototype.transformMultiLineString=function(e,t){for(var n=this,r=new I,i=0;i<e.getNumGeometries();i++){var o=n.transformLineString(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};ce.prototype.transformCoordinates=function(e,t){return this.copy(e)};ce.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};ce.prototype.transformMultiPoint=function(e,t){for(var n=this,r=new I,i=0;i<e.getNumGeometries();i++){var o=n.transformPoint(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};ce.prototype.transformMultiPolygon=function(e,t){for(var n=this,r=new I,i=0;i<e.getNumGeometries();i++){var o=n.transformPolygon(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};ce.prototype.copy=function(e){return e.copy()};ce.prototype.transformGeometryCollection=function(e,t){for(var n=this,r=new I,i=0;i<e.getNumGeometries();i++){var o=n.transform(e.getGeometryN(i));o!==null&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(z.toGeometryArray(r)):this._factory.buildGeometry(r)};ce.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof ge)return this.transformPoint(e,null);if(e instanceof wi)return this.transformMultiPoint(e,null);if(e instanceof En)return this.transformLinearRing(e,null);if(e instanceof mt)return this.transformLineString(e,null);if(e instanceof vr)return this.transformMultiLineString(e,null);if(e instanceof Pt)return this.transformPolygon(e,null);if(e instanceof _n)return this.transformMultiPolygon(e,null);if(e instanceof ee)return this.transformGeometryCollection(e,null);throw new pt("Unknown Geometry subtype: "+e.getClass().getName())};ce.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};ce.prototype.interfaces_=function(){return[]};ce.prototype.getClass=function(){return ce};var Nn=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new R,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof mt&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};Nn.prototype.snapVertices=function(e,t){for(var n=this,r=this._isClosed?e.size()-1:e.size(),i=0;i<r;i++){var o=e.get(i),s=n.findSnapForVertex(o,t);s!==null&&(e.set(i,new g(s)),i===0&&n._isClosed&&e.set(e.size()-1,new g(s)))}};Nn.prototype.findSnapForVertex=function(e,t){for(var n=this,r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<n._snapTolerance)return t[r]}return null};Nn.prototype.snapTo=function(e){var t=new Lo(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};Nn.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var i=0;i<r;i++){var o=t[i],s=n.findSegmentIndexToSnap(o,e);s>=0&&e.add(s+1,new g(o),!1)}};Nn.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,r=M.MAX_VALUE,i=-1,o=0;o<t.size()-1;o++){if(n._seg.p0=t.get(o),n._seg.p1=t.get(o+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(e);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i};Nn.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};Nn.prototype.interfaces_=function(){return[]};Nn.prototype.getClass=function(){return Nn};Nn.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var Et=function(e){this._srcGeom=e||null},bp={SNAP_PRECISION_FACTOR:{configurable:!0}};Et.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),r=new Ep(t,n);return r.transform(this._srcGeom)};Et.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new Ep(e,n,!0),i=r.transform(this._srcGeom),o=i;return t&&D(o,Zn)&&(o=i.buffer(0)),o};Et.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};Et.prototype.extractTargetCoordinates=function(e){for(var t=new en,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))};Et.prototype.computeMinimumSegmentLength=function(e){for(var t=M.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t};Et.prototype.interfaces_=function(){return[]};Et.prototype.getClass=function(){return Et};Et.snap=function(e,t,n){var r=new Array(2).fill(null),i=new Et(e);r[0]=i.snapTo(t,n);var o=new Et(t);return r[1]=o.snapTo(r[0],n),r};Et.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=Et.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===Q.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return Math.min(Et.computeOverlaySnapTolerance(i),Et.computeOverlaySnapTolerance(o))}};Et.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*Et.SNAP_PRECISION_FACTOR;return r};Et.snapToSelf=function(e,t,n){var r=new Et(e);return r.snapToSelf(t,n)};bp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Et,bp);var Ep=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,r){var i=new Nn(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},t.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ce),Kt=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Kt.prototype.getCommon=function(){return M.longBitsToDouble(this._commonBits)};Kt.prototype.add=function(e){var t=M.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=Kt.signExpBits(this._commonBits),this._isFirst=!1,null;var n=Kt.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=Kt.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=Kt.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};Kt.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=M.longBitsToDouble(e),n=M.toBinaryString(e),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return o}};Kt.prototype.interfaces_=function(){return[]};Kt.prototype.getClass=function(){return Kt};Kt.getBit=function(e,t){var n=1<<t;return e&n?1:0};Kt.signExpBits=function(e){return e>>52};Kt.zeroLowerBits=function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i};Kt.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(Kt.getBit(e,r)!==Kt.getBit(t,r))return n;n++}return 52};var sr=function(){this._commonCoord=null,this._ccFilter=new Jr},Nu={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};sr.prototype.addCommonBits=function(e){var t=new ar(this._commonCoord);e.apply(t),e.geometryChanged()};sr.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new g(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new ar(t);return e.apply(n),e.geometryChanged(),e};sr.prototype.getCommonCoordinate=function(){return this._commonCoord};sr.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};sr.prototype.interfaces_=function(){return[]};sr.prototype.getClass=function(){return sr};Nu.CommonCoordinateFilter.get=function(){return Jr};Nu.Translater.get=function(){return ar};Object.defineProperties(sr,Nu);var Jr=function(){this._commonBitsX=new Kt,this._commonBitsY=new Kt};Jr.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};Jr.prototype.getCommonCoordinate=function(){return new g(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};Jr.prototype.interfaces_=function(){return[bn]};Jr.prototype.getClass=function(){return Jr};var ar=function(){this.trans=null;var e=arguments[0];this.trans=e};ar.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)};ar.prototype.isDone=function(){return!1};ar.prototype.isGeometryChanged=function(){return!0};ar.prototype.interfaces_=function(){return[qe]};ar.prototype.getClass=function(){return ar};var Gt=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};Gt.prototype.selfSnap=function(e){var t=new Et(e),n=t.snapTo(e,this._snapTolerance);return n};Gt.prototype.removeCommonBits=function(e){this._cbr=new sr,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};Gt.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};Gt.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=F.overlayOp(t[0],t[1],e);return this.prepareResult(n)};Gt.prototype.checkValid=function(e){e.isValid()||Ut.out.println("Snapped geometry is invalid")};Gt.prototype.computeSnapTolerance=function(){this._snapTolerance=Et.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};Gt.prototype.snap=function(e){var t=this.removeCommonBits(e),n=Et.snap(t[0],t[1],this._snapTolerance);return n};Gt.prototype.interfaces_=function(){return[]};Gt.prototype.getClass=function(){return Gt};Gt.overlayOp=function(e,t,n){var r=new Gt(e,t);return r.getResultGeometry(n)};Gt.union=function(e,t){return Gt.overlayOp(e,t,F.UNION)};Gt.intersection=function(e,t){return Gt.overlayOp(e,t,F.INTERSECTION)};Gt.symDifference=function(e,t){return Gt.overlayOp(e,t,F.SYMDIFFERENCE)};Gt.difference=function(e,t){return Gt.overlayOp(e,t,F.DIFFERENCE)};var ie=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};ie.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=F.overlayOp(this._geom[0],this._geom[1],e);var i=!0;i&&(n=!0)}catch(o){if(o instanceof kn)r=o;else throw o}finally{}if(!n)try{t=Gt.overlayOp(this._geom[0],this._geom[1],e)}catch(o){throw o instanceof kn?r:o}finally{}return t};ie.prototype.interfaces_=function(){return[]};ie.prototype.getClass=function(){return ie};ie.overlayOp=function(e,t,n){var r=new ie(e,t);return r.getResultGeometry(n)};ie.union=function(e,t){return ie.overlayOp(e,t,F.UNION)};ie.intersection=function(e,t){return ie.overlayOp(e,t,F.INTERSECTION)};ie.symDifference=function(e,t){return ie.overlayOp(e,t,F.SYMDIFFERENCE)};ie.difference=function(e,t){return ie.overlayOp(e,t,F.DIFFERENCE)};var Io=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};Io.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};Io.prototype.interfaces_=function(){return[]};Io.prototype.getClass=function(){return Io};var me=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},Lu={INSERT:{configurable:!0},DELETE:{configurable:!0}};me.prototype.isDelete=function(){return this._eventType===me.DELETE};me.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};me.prototype.getObject=function(){return this._obj};me.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};me.prototype.getInsertEvent=function(){return this._insertEvent};me.prototype.isInsert=function(){return this._eventType===me.INSERT};me.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};me.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};me.prototype.interfaces_=function(){return[De]};me.prototype.getClass=function(){return me};Lu.INSERT.get=function(){return 1};Lu.DELETE.get=function(){return 2};Object.defineProperties(me,Lu);var ds=function(){};ds.prototype.interfaces_=function(){return[]};ds.prototype.getClass=function(){return ds};var jt=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};jt.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(jt.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};jt.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};jt.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};jt.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};jt.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1};jt.prototype.hasProperIntersection=function(){return this._hasProper};jt.prototype.hasIntersection=function(){return this._hasIntersection};jt.prototype.isDone=function(){return this._isDone};jt.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};jt.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};jt.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};jt.prototype.interfaces_=function(){return[]};jt.prototype.getClass=function(){return jt};jt.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var ov=function(e){function t(){e.call(this),this.events=new I,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;ze.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=n.events.get(i);if(o.isInsert()&&n.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof jt&&D(arguments[0],Ge)&&D(arguments[1],Ge)){var s=arguments[0],a=arguments[1],u=arguments[2];this.addEdges(s,s),this.addEdges(a,a),this.computeIntersections(u)}else if(typeof arguments[2]=="boolean"&&D(arguments[0],Ge)&&arguments[1]instanceof jt){var l=arguments[0],c=arguments[1],f=arguments[2];f?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(c)}}},t.prototype.addEdge=function(n,r){for(var i=this,o=n.getMonotoneChainEdge(),s=o.getStartIndexes(),a=0;a<s.length-1;a++){var u=new Io(o,a),l=new me(r,o.getMinX(a),u);i.events.add(l),i.events.add(new me(o.getMaxX(a),l))}},t.prototype.processOverlaps=function(n,r,i,o){for(var s=this,a=i.getObject(),u=n;u<r;u++){var l=s.events.get(u);if(l.isInsert()){var c=l.getObject();i.isSameLabel(l)||(a.computeIntersections(c,o),s.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var o=i.next();n.addEdge(o,o)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.iterator();u.hasNext();){var l=u.next();n.addEdge(l,a)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ds),Ln=function(){this._min=M.POSITIVE_INFINITY,this._max=M.NEGATIVE_INFINITY},Ip={NodeComparator:{configurable:!0}};Ln.prototype.getMin=function(){return this._min};Ln.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};Ln.prototype.getMax=function(){return this._max};Ln.prototype.toString=function(){return Be.toLineString(new g(this._min,0),new g(this._max,0))};Ln.prototype.interfaces_=function(){return[]};Ln.prototype.getClass=function(){return Ln};Ip.NodeComparator.get=function(){return So};Object.defineProperties(Ln,Ip);var So=function(){};So.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0};So.prototype.interfaces_=function(){return[_i]};So.prototype.getClass=function(){return So};var sv=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ln),av=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ln),Cn=function(){this._leaves=new I,this._root=null,this._level=0};Cn.prototype.buildTree=function(){var e=this;ze.sort(this._leaves,new Ln.NodeComparator);for(var t=this._leaves,n=null,r=new I;;){if(e.buildLevel(t,r),r.size()===1)return r.get(0);n=t,t=r,r=n}};Cn.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new sv(e,t,n))};Cn.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};Cn.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Cn.prototype.printNode=function(e){Ut.out.println(Be.toLineString(new g(e._min,this._level),new g(e._max,this._level)))};Cn.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Cn.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(i===null)t.add(r);else{var o=new av(e.get(n),e.get(n+1));t.add(o)}}};Cn.prototype.interfaces_=function(){return[]};Cn.prototype.getClass=function(){return Cn};var Ri=function(){this._items=new I};Ri.prototype.visitItem=function(e){this._items.add(e)};Ri.prototype.getItems=function(){return this._items};Ri.prototype.interfaces_=function(){return[tr]};Ri.prototype.getClass=function(){return Ri};var Ti=function(){this._index=null;var e=arguments[0];if(!D(e,Zn))throw new pt("Argument must be Polygonal");this._index=new Nr(e)},Cu={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ti.prototype.locate=function(e){var t=new Qe(e),n=new Ai(t);return this._index.query(e.y,e.y,n),t.getLocation()};Ti.prototype.interfaces_=function(){return[Oi]};Ti.prototype.getClass=function(){return Ti};Cu.SegmentVisitor.get=function(){return Ai};Cu.IntervalIndexedGeometry.get=function(){return Nr};Object.defineProperties(Ti,Cu);var Ai=function(){this._counter=null;var e=arguments[0];this._counter=e};Ai.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};Ai.prototype.interfaces_=function(){return[tr]};Ai.prototype.getClass=function(){return Ai};var Nr=function(){this._index=new Cn;var e=arguments[0];this.init(e)};Nr.prototype.init=function(e){for(var t=this,n=Bt.getLines(e),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();t.addLine(o)}};Nr.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var r=new R(e[n-1],e[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);t._index.insert(i,o,r)}};Nr.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Ri;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}};Nr.prototype.interfaces_=function(){return[]};Nr.prototype.getClass=function(){return Nr};var Zi=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new sp,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new je,arguments.length===2){var n=arguments[0],r=arguments[1],i=Re.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this._argIndex=o,this._parentGeom=s,this._boundaryNodeRule=a,s!==null&&this.add(s)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),o=i.getLabel(),s=1,a=y.NONE;a=o.getLocation(n,b.ON),a===y.BOUNDARY&&s++;var u=t.determineBoundary(this._boundaryNodeRule,s);o.setLocation(n,u)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new jt(i,!0,!1);a.setIsDoneIfProperInt(s);var u=this.createEdgeSetIntersector(),l=this._parentGeom instanceof En||this._parentGeom instanceof Pt||this._parentGeom instanceof _n,c=o||!l;return u.computeIntersections(this._edges,a,c),this.addSelfIntersectionNodes(this._argIndex),a}},t.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,r,i){var o=new jt(r,i,!0);o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this._edges,n._edges,o),o},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof ge){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,y.INTERIOR)}else if(arguments[0]instanceof g){var i=arguments[0];this.insertPoint(this._argIndex,i,y.INTERIOR)}},t.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),y.EXTERIOR,y.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);r.addPolygonRing(o,y.INTERIOR,y.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],y.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],y.BOUNDARY)},t.prototype.addLineString=function(n){var r=B.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new gs(r,new tt(this._argIndex,y.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),k.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var s=o.next();r[i++]=s.getCoordinate().copy()}return r},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===y.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},t.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=B.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var s=r,a=i;w.isCCW(o)&&(s=i,a=r);var u=new gs(o,new tt(this._argIndex,y.BOUNDARY,s,a));this._lineEdgeMap.put(n,u),this.insertEdge(u),this.insertPoint(this._argIndex,o[0],y.BOUNDARY)},t.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),s=o.getLabel();s===null?o._label=new tt(n,i):s.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new ov},t.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var o=i.next(),s=o.getLabel().getLocation(n),a=o.eiList.iterator();a.hasNext();){var u=a.next();r.addSelfIntersectionNode(n,u.coord,s)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof _n&&(this._useBoundaryDeterminationRule=!1),n instanceof Pt)this.addPolygon(n);else if(n instanceof mt)this.addLineString(n);else if(n instanceof ge)this.addPoint(n);else if(n instanceof wi)this.addCollection(n);else if(n instanceof vr)this.addCollection(n);else if(n instanceof _n)this.addCollection(n);else if(n instanceof ee)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.add(o)}},t.prototype.locate=function(n){return D(this._parentGeom,Zn)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Ti(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,r){return n.isInBoundary(r)?y.BOUNDARY:y.INTERIOR},t}(gt),Di=function(){if(this._li=new Pr,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Zi(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=Re.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Zi(0,t,r),this._arg[1]=new Zi(1,n,r)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Zi(0,i,s),this._arg[1]=new Zi(1,o,s)}};Di.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};Di.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};Di.prototype.interfaces_=function(){return[]};Di.prototype.getClass=function(){return Di};var mr=function(){};mr.prototype.interfaces_=function(){return[]};mr.prototype.getClass=function(){return mr};mr.map=function(){if(arguments[0]instanceof A&&D(arguments[1],mr.MapOp)){for(var e=arguments[0],t=arguments[1],n=new I,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));i!==null&&n.add(i)}return e.getFactory().buildGeometry(n)}else if(D(arguments[0],Ct)&&D(arguments[1],mr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new I,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);c!==null&&a.add(c)}return a}};mr.MapOp=function(){};var F=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new je,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ve,this._resultPolyList=new I,this._resultLineList=new I,this._resultPointList=new I,this._graph=new gt(new hp),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new tt(n.getLabel()),o.flip());var s=r.getDepth();s.isNull()&&s.add(i),s.add(o),i.merge(o)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,r,i,o){var s=new I;return s.addAll(n),s.addAll(r),s.addAll(i),s.isEmpty()?t.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,r){for(var i=this,o=r.iterator();o.hasNext();){var s=o.next(),a=i._ptLocator.locate(n,s);if(a!==y.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new I,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();r.insertUniqueEdge(o)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new I;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),wr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new de(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new cn(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var s=new Hr(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},t.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var o=i.next(),s=r._graph.addNode(o.getCoordinate());s.setLabel(n,o.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(o.getLocation(0,b.RIGHT),o.getLocation(1,b.RIGHT),n)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var s=0;s<2;s++)!i.isNull(s)&&i.isArea()&&!o.isNull(s)&&(o.getDelta(s)===0?i.toLine(s):(k.isTrue(!o.isNull(s,b.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(s,b.LEFT,o.getLocation(s,b.LEFT)),k.isTrue(!o.isNull(s,b.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(s,b.RIGHT,o.getLocation(s,b.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(o)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Di);F.overlayOp=function(e,t,n){var r=new F(e,t),i=r.getResultGeometry(n);return i};F.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return F.createEmptyResult(F.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return Yr.map(e,{interfaces_:function(){return[mr.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ie.overlayOp(e,t,F.INTERSECTION)};F.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return F.createEmptyResult(F.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ie.overlayOp(e,t,F.SYMDIFFERENCE)};F.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case F.INTERSECTION:o=Math.min(r,i);break;case F.UNION:o=Math.max(r,i);break;case F.DIFFERENCE:o=r;break;case F.SYMDIFFERENCE:o=Math.max(r,i);break}return o};F.createEmptyResult=function(e,t,n,r){var i=null;switch(F.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};F.difference=function(e,t){return e.isEmpty()?F.createEmptyResult(F.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ie.overlayOp(e,t,F.DIFFERENCE))};F.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return F.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===y.BOUNDARY&&(i=y.INTERIOR),o===y.BOUNDARY&&(o=y.INTERIOR),s){case F.INTERSECTION:return i===y.INTERIOR&&o===y.INTERIOR;case F.UNION:return i===y.INTERIOR||o===y.INTERIOR;case F.DIFFERENCE:return i===y.INTERIOR&&o!==y.INTERIOR;case F.SYMDIFFERENCE:return i===y.INTERIOR&&o!==y.INTERIOR||i!==y.INTERIOR&&o===y.INTERIOR}return!1}};F.INTERSECTION=1;F.UNION=2;F.DIFFERENCE=3;F.SYMDIFFERENCE=4;var Qn=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new je,this._seg=new R;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};Qn.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=t._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,t._seg.p0),i.getCoordinate(o+1,t._seg.p1);var s=t._seg.distance(e);if(s<=t._boundaryDistanceTolerance)return!0}return!1};Qn.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?y.BOUNDARY:this._ptLocator.locate(e,this._g)};Qn.prototype.extractLinework=function(e){var t=new Mi;e.apply(t);var n=t.getLinework(),r=z.toLineStringArray(n);return e.getFactory().createMultiLineString(r)};Qn.prototype.interfaces_=function(){return[]};Qn.prototype.getClass=function(){return Qn};var Mi=function(){this._linework=null,this._linework=new I};Mi.prototype.getLinework=function(){return this._linework};Mi.prototype.filter=function(e){var t=this;if(e instanceof Pt){var n=e;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)t._linework.add(n.getInteriorRingN(r))}};Mi.prototype.interfaces_=function(){return[nn]};Mi.prototype.getClass=function(){return Mi};var Lr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Lr.prototype.extractPoints=function(e,t,n){for(var r=this,i=e.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],t,n)};Lr.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Lr.prototype.getPoints=function(e){for(var t=this,n=new I,r=Bt.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();t.extractPoints(o,e,n)}return n};Lr.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(t.x+e.x)/2,c=(t.y+e.y)/2;if(this._doLeft){var f=new g(l-u,c+a);r.add(f)}if(this._doRight){var p=new g(l+u,c-a);r.add(p)}};Lr.prototype.interfaces_=function(){return[]};Lr.prototype.getClass=function(){return Lr};var Ne=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new I;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new Qn(this._geom[0],this._boundaryDistanceTolerance),new Qn(this._geom[1],this._boundaryDistanceTolerance),new Qn(this._geom[2],this._boundaryDistanceTolerance)]},Sp={TOLERANCE:{configurable:!0}};Ne.prototype.reportResult=function(e,t,n){Ut.out.println("Overlay result invalid - A:"+y.toLocationSymbol(t[0])+" B:"+y.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+y.toLocationSymbol(t[2]))};Ne.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};Ne.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var r=e._testCoords.get(n);if(!e.checkValid(t,r))return e._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),Ne.hasLocation(this._location,y.BOUNDARY)?!0:this.isValidResult(i,this._location)}};Ne.prototype.addTestPts=function(e){var t=new Lr(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};Ne.prototype.isValidResult=function(e,t){var n=F.isResultOfOp(t[0],t[1],e),r=t[2]===y.INTERIOR,i=!(n^r);return i||this.reportResult(e,t,n),i};Ne.prototype.getInvalidLocation=function(){return this._invalidLocation};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Ne.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};Ne.computeBoundaryDistanceTolerance=function(e,t){return Math.min(Et.computeSizeBasedSnapTolerance(e),Et.computeSizeBasedSnapTolerance(t))};Ne.isValid=function(e,t,n,r){var i=new Ne(e,t,r);return i.isValid(n)};Sp.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Ne,Sp);var ve=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};ve.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);n._skipEmpty&&i.isEmpty()||t.add(i)}};ve.prototype.combine=function(){for(var e=this,t=new I,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();e.extractElements(r,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};ve.prototype.interfaces_=function(){return[]};ve.prototype.getClass=function(){return ve};ve.combine=function(){if(arguments.length===1){var e=arguments[0],t=new ve(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new ve(ve.createList(n,r));return i.combine()}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2],u=new ve(ve.createList(o,s,a));return u.combine()}};ve.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};ve.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new I;return n.add(e),n.add(t),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new I;return s.add(r),s.add(i),s.add(o),s}};var wt=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new I)},xp={STRTREE_NODE_CAPACITY:{configurable:!0}};wt.prototype.reduceToGeometries=function(e){for(var t=this,n=new I,r=e.iterator();r.hasNext();){var i=r.next(),o=null;D(i,Ge)?o=t.unionTree(i):i instanceof A&&(o=i),n.add(o)}return n};wt.prototype.extractByEnvelope=function(e,t,n){for(var r=new I,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)};wt.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=ve.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,o)};wt.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new lp(wt.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree(),i=this.unionTree(r);return i};wt.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=wt.getGeometry(t,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(wt.getGeometry(t,n),wt.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(t,n,o),a=this.binaryUnion(t,o,r);return this.unionSafe(s,a)}}};wt.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t===null?t=r.copy():t=t.union(r)}return t};wt.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};wt.prototype.unionActual=function(e,t){return wt.restrictToPolygons(e.union(t))};wt.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};wt.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new I,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),s=this.unionActual(i,o);r.add(s);var a=ve.combine(r);return a};wt.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}};wt.prototype.interfaces_=function(){return[]};wt.prototype.getClass=function(){return wt};wt.restrictToPolygons=function(e){if(D(e,Zn))return e;var t=Mn.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(z.toPolygonArray(t))};wt.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};wt.union=function(e){var t=new wt(e);return t.union()};xp.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(wt,xp);var ys=function(){};ys.prototype.interfaces_=function(){return[]};ys.prototype.getClass=function(){return ys};ys.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return F.createEmptyResult(F.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ie.overlayOp(e,t,F.UNION)};function Rr(){return new ms}function ms(){this.reset()}ms.prototype={constructor:ms,reset:function(){this.s=this.t=0},add:function(e){_c(Go,e,this.t),_c(this,Go.s,this.s),this.s?this.t+=Go.t:this.s=Go.t},valueOf:function(){return this.s}};var Go=new ms;function _c(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var qa=Math.PI,vc=qa*2;Rr();Rr();Rr();function bc(e,t){return[e>qa?e-vc:e<-qa?e+vc:e,t]}bc.invert=bc;function wp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uv(e){return e.length===1&&(e=lv(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function lv(e){return function(t,n){return wp(e(t),n)}}uv(wp);Rr();Rr();Rr();Rr();Rr();function Ec(){}Ec.prototype={constructor:Ec,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ic(e,t){return[e,t]}Ic.invert=Ic;const cv=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],fv={decimalLatitude:40.123,decimalLongitude:-74.123},pv=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],hv=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function gv(){const e=[];return cv.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...fv})}),[...e,...pv,...hv]}const dv=gv();dv.map(e=>e.verbatimCoordinates);const yv=Symbol.for("svelte-maplibre");function mv(){return Tp(yv)}function _v(e){return"layerType"in e&&e.layerType==="deckgl"}const vv=e=>({features:e[0]&16,data:e[0]&16,map:e[0]&4,close:e[0]&1}),Sc=e=>{var t;return{features:e[4],data:(t=e[4])==null?void 0:t[0],map:e[2],close:e[31]}};function xc(e){let t,n,r=(e[4]||e[3]instanceof ci.Marker)&&wc(e);return{c(){t=yt("div"),r&&r.c()},m(i,o){rt(i,t,o),r&&r.m(t,null),e[32](t),n=!0},p(i,o){i[4]||i[3]instanceof ci.Marker?r?(r.p(i,o),o[0]&24&&K(r,1)):(r=wc(i),r.c(),K(r,1),r.m(t,null)):r&&(bs(),ot(r,1,1,()=>{r=null}),Es())},i(i){n||(K(r),n=!0)},o(i){ot(r),n=!1},d(i){i&&it(t),r&&r.d(),e[32](null)}}}function wc(e){let t;const n=e[30].default,r=Ua(n,e,e[29],Sc);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o[0]&536870933)&&za(r,n,i,i[29],t?ja(n,i[29],o,vv):Va(i[29]),Sc)},i(i){t||(K(r,i),t=!0)},o(i){ot(r,i),t=!1},d(i){r&&r.d(i)}}}function bv(e){let t,n,r=e[9].default&&xc(e);return{c(){r&&r.c(),t=Tc()},m(i,o){r&&r.m(i,o),rt(i,t,o),n=!0},p(i,o){i[9].default?r?(r.p(i,o),o[0]&512&&K(r,1)):(r=xc(i),r.c(),K(r,1),r.m(t.parentNode,t)):r&&(bs(),ot(r,1,1,()=>{r=null}),Es())},i(i){n||(K(r),n=!0)},o(i){ot(r),n=!1},d(i){i&&it(t),r&&r.d(i)}}}function Ev(e,t,n){let r,i,o,s,a,u,{$$slots:l={},$$scope:c}=t;const f=Ap(l);let{closeButton:p=void 0}=t,{closeOnClickOutside:h=!0}=t,{closeOnClickInside:d=!1}=t,{closeOnMove:_=!1}=t,{openOn:v="click"}=t,{openIfTopMost:E=!0}=t,{focusAfterOpen:S=!0}=t,{anchor:x=void 0}=t,{offset:C=void 0}=t,{popupClass:T=void 0}=t,{maxWidth:W=void 0}=t,{lngLat:q=void 0}=t,{html:G=void 0}=t,{open:O=!1}=t;const $=Dp(),{map:N,popupTarget:ft,layerEvent:nt,layer:Le,eventTopMost:ii}=mv();Do(e,N,L=>n(2,o=L)),Do(e,ft,L=>n(3,a=L)),Do(e,nt,L=>n(28,s=L)),Do(e,Le,L=>n(35,u=L));const ur=["click","dblclick","contextmenu"];let Z,Tr=!1,Lt;function To(){if(!Z)return;let L=Z.getElement();!L||L===Lt||(Lt=L,v==="hover"&&(Lt.style.pointerEvents="none"),Lt.addEventListener("mouseenter",()=>{n(24,Tr=!0)},{passive:!0}),Lt.addEventListener("mouseleave",()=>{n(24,Tr=!1)},{passive:!0}),Lt.addEventListener("click",()=>{d&&n(0,O=!1)},{passive:!0}))}Ac(()=>{if(o)return o.on("click",Ao),o.on("contextmenu",Ao),typeof a=="string"&&(o.on("click",a,oe),o.on("dblclick",a,oe),o.on("contextmenu",a,oe),o.on("mousemove",a,Tu),o.on("mouseleave",a,Ru),o.on("touchstart",a,Ou),o.on("touchend",a,Pu)),()=>{o!=null&&o.loaded()&&(Z==null||Z.remove(),o.off("click",Ao),o.off("contextmenu",Ao),a instanceof ci.Marker?a.getPopup()===Z&&a.setPopup(void 0):typeof a=="string"&&(o.off("click",a,oe),o.off("dblclick",a,oe),o.off("contextmenu",a,oe),o.off("mousemove",a,Tu),o.off("mouseleave",a,Ru),o.off("touchstart",a,Ou),o.off("touchend",a,Pu)))}});function Ar(L){return E?!("marker"in L)&&!_v(L)&&ii(L)!==u:!1}let Rt=null,dt="normal";function oe(L){L.type===v&&(Ar(L)||("layerType"in L?L.layerType==="deckgl"?(n(10,q=L.coordinate),n(4,Rt=L.object?[L.object]:null)):(n(10,q=L.lngLat),n(4,Rt=L.features??[])):(n(10,q=L.lngLat),n(4,Rt=L.features??[])),setTimeout(()=>n(0,O=!0))))}let oi=null;function Ou(L){oi=L.point}function Pu(L){if(!oi||v!=="hover")return;let Gs=oi.dist(L.point);oi=null,Gs<3&&(n(10,q=L.lngLat),n(4,Rt=L.features??[]),Z.isOpen()?n(25,dt="justOpened"):(n(25,dt="opening"),n(0,O=!0)))}function Ru(L){v!=="hover"||oi||dt!=="normal"||(n(0,O=!1),n(4,Rt=null))}function Tu(L){if(!(v!=="hover"||oi||dt!=="normal")){if(Ar(L)){n(0,O=!1),n(4,Rt=null);return}n(0,O=!0),n(4,Rt=L.features??[]),n(10,q=L.lngLat)}}function Ao(L){if(dt==="justOpened"){n(25,dt="normal");return}if(!h)return;let Gs=[Lt,a instanceof ci.Marker?a==null?void 0:a.getElement():null];O&&Z.isOpen()&&!Gs.some(Bs=>Bs==null?void 0:Bs.contains(L.originalEvent.target))&&(L.type==="contextmenu"&&v==="contextmenu"||L.type!=="contextmenu")&&n(0,O=!1)}Mp(()=>{o&&(Z!=null&&Z.isOpen())&&Z.remove()});let Xi;const Np=()=>n(0,O=!1);function Lp(L){Bi[L?"unshift":"push"](()=>{Xi=L,n(1,Xi)})}return e.$$set=L=>{"closeButton"in L&&n(11,p=L.closeButton),"closeOnClickOutside"in L&&n(12,h=L.closeOnClickOutside),"closeOnClickInside"in L&&n(13,d=L.closeOnClickInside),"closeOnMove"in L&&n(14,_=L.closeOnMove),"openOn"in L&&n(15,v=L.openOn),"openIfTopMost"in L&&n(16,E=L.openIfTopMost),"focusAfterOpen"in L&&n(17,S=L.focusAfterOpen),"anchor"in L&&n(18,x=L.anchor),"offset"in L&&n(19,C=L.offset),"popupClass"in L&&n(20,T=L.popupClass),"maxWidth"in L&&n(21,W=L.maxWidth),"lngLat"in L&&n(10,q=L.lngLat),"html"in L&&n(22,G=L.html),"open"in L&&n(0,O=L.open),"$$scope"in L&&n(29,c=L.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&14336&&n(27,r=p??(!h&&!d)),e.$$.dirty[0]&146685952&&(Z||(n(23,Z=new ci.Popup({closeButton:r,closeOnClick:!1,closeOnMove:_,focusAfterOpen:S,maxWidth:W,className:T,anchor:x,offset:C})),Lt=Z.getElement(),Z.on("open",()=>{n(0,O=!0),To(),$("open",Z)}),Z.on("close",()=>{n(0,O=!1),$("close",Z)}),Z.on("hover",()=>{$("hover",Z)}))),e.$$.dirty[0]&8421384&&Z&&a instanceof ci.Marker&&(v==="click"?a.setPopup(Z):a.getPopup()===Z&&a.setPopup(void 0)),e.$$.dirty[0]&268468224&&ur.includes(v)&&(s==null?void 0:s.type)===v&&(oe(s),Fp(nt,s=null,s)),e.$$.dirty[0]&268468224&&n(26,i=v==="hover"&&((s==null?void 0:s.type)==="mousemove"||(s==null?void 0:s.type)==="mouseenter")),e.$$.dirty[0]&352354304&&v==="hover"&&nt&&(i&&s&&(s.layerType==="deckgl"?(n(10,q=s.coordinate),n(4,Rt=s.object?[s.object]:null)):(n(10,q=s.lngLat),n(4,Rt=s.features??[]))),n(0,O=(i||Tr)??!1)),e.$$.dirty[0]&12582914&&(Xi?Z.setDOMContent(Xi):G&&Z.setHTML(G)),e.$$.dirty[0]&8389632&&q&&Z.setLngLat(q),e.$$.dirty[0]&41943045&&o){let L=Z.isOpen();O&&!L?(Z.addTo(o),dt==="opening"&&n(25,dt="justOpened")):!O&&L&&Z.remove()}},[O,Xi,o,a,Rt,N,ft,nt,Le,f,q,p,h,d,_,v,E,S,x,C,T,W,G,Z,Tr,dt,i,r,s,c,l,Np,Lp]}class Iv extends Fi{constructor(t){super(),ki(this,t,Ev,bv,Gi,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}const Sv=e=>({props:e&8}),Nc=e=>({props:Nv(e[3])});function xv(e){let t;const n=e[1].default,r=Ua(n,e,e[2],Nc);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&12)&&za(r,n,i,i[2],t?ja(n,i[2],o,Sv):Va(i[2]),Nc)},i(i){t||(K(r,i),t=!0)},o(i){ot(r,i),t=!1},d(i){r&&r.d(i)}}}function wv(e){let t,n;return t=new Iv({props:{openOn:e[0],$$slots:{default:[xv,({features:r})=>({3:r}),({features:r})=>r?8:0]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,[i]){const o={};i&1&&(o.openOn=r[0]),i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function Nv(e){return e?e[0].properties??{}:(console.log("A Popup with null features should be impossible"),{})}function Lv(e,t,n){let{$$slots:r={},$$scope:i}=t,{openOn:o="hover"}=t;return e.$$set=s=>{"openOn"in s&&n(0,o=s.openOn),"$$scope"in s&&n(2,i=s.$$scope)},[o,r,i]}class ks extends Fi{constructor(t){super(),ki(this,t,Lv,wv,Gi,{openOn:0})}}function hi(){return{type:"FeatureCollection",features:[]}}function ca(){return{length:0,ruc:hi(),pop_density:hi(),os_nodes:hi(),os_links:hi()}}function Cv(e,t){e.fitBounds(b_(t),{animate:!1,padding:10})}function Lc(e,t,n){const r=e.slice();return r[2]=t[n],r[3]=t,r[4]=n,r}function Ov(e){let t,n;return{c(){t=yt("span"),n=Tt(),cr(t,"class","dot svelte-1jnewjk")},m(r,i){rt(r,t,i),rt(r,n,i)},p:Dc,d(r){r&&(it(t),it(n))}}}function Cc(e){let t,n,r;function i(s){e[1](s,e[2],e[3],e[4])}let o={draggable:!0,$$slots:{default:[Ov]},$$scope:{ctx:e}};return e[2]!==void 0&&(o.lngLat=e[2]),t=new Gp({props:o}),Bi.push(()=>_s(t,"lngLat",i)),{c(){At(t.$$.fragment)},m(s,a){Dt(t,s,a),r=!0},p(s,a){e=s;const u={};a&32&&(u.$$scope={dirty:a,ctx:e}),!n&&a&1&&(n=!0,u.lngLat=e[2],vs(()=>n=!1)),t.$set(u)},i(s){r||(K(t.$$.fragment,s),r=!0)},o(s){ot(t.$$.fragment,s),r=!1},d(s){Mt(t,s)}}}function Pv(e){let t,n,r=Au(e[0].geometry.coordinates),i=[];for(let s=0;s<r.length;s+=1)i[s]=Cc(Lc(e,r,s));const o=s=>ot(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=Tc()},m(s,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(s,a);rt(s,t,a),n=!0},p(s,[a]){if(a&1){r=Au(s[0].geometry.coordinates);let u;for(u=0;u<r.length;u+=1){const l=Lc(s,r,u);i[u]?(i[u].p(l,a),K(i[u],1)):(i[u]=Cc(l),i[u].c(),K(i[u],1),i[u].m(t.parentNode,t))}for(bs(),u=r.length;u<i.length;u+=1)o(u);Es()}},i(s){if(!n){for(let a=0;a<r.length;a+=1)K(i[a]);n=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)ot(i[a]);n=!1},d(s){s&&it(t),kp(i,s)}}}function Rv(e,t,n){let{f:r}=t;function i(o,s,a,u){a[u]=o,n(0,r)}return e.$$set=o=>{"f"in o&&n(0,r=o.f)},[r,i]}class Tv extends Fi{constructor(t){super(),ki(this,t,Rv,Pv,Gi,{f:0})}}let Av={type:"FeatureCollection",features:[{geometry:{coordinates:[[.478565,51.73336],[.478498,51.733405],[.478425,51.733453],[.478651,51.733573],[.478809,51.73365],[.479056,51.733785],[.479263,51.733919],[.479302,51.733944],[.479226,51.73399],[.479209,51.734006],[.479211,51.734026],[.479234,51.734045],[.47932,51.734099],[.47935,51.734109],[.479389,51.734104],[.479474,51.734055],[.47956,51.73411],[.479775,51.734254],[.479955,51.734368],[.480088,51.734452],[.480197,51.734522],[.480595,51.734767],[.480841,51.734929],[.481007,51.735066],[.481037,51.735091],[.481156,51.735179],[.481317,51.735279],[.481481,51.735376],[.481683,51.735503],[.481898,51.735633],[.481942,51.735663],[.482001,51.735705],[.482029,51.735722],[.482521,51.736039],[.482744,51.736182],[.483052,51.736362],[.483361,51.736529],[.483455,51.736583],[.483983,51.736886],[.484567,51.737215],[.484809,51.737351],[.484911,51.737406],[.485008,51.737461],[.48511,51.737519],[.485192,51.737561],[.485822,51.737882],[.485922,51.737936],[.486386,51.738187],[.48648,51.738238],[.486635,51.738321],[.486696,51.738355],[.487031,51.738539],[.487561,51.738844],[.488015,51.739107],[.48841,51.739289],[.488586,51.73937],[.488747,51.739444],[.489667,51.739958],[.489855,51.740063],[.490036,51.740164],[.490426,51.740364],[.491118,51.7407],[.491254,51.740766],[.491455,51.740863],[.491963,51.741105],[.492088,51.741162],[.49258,51.741391],[.493183,51.741707],[.493659,51.741943],[.493891,51.742057],[.494049,51.742131],[.494995,51.742574],[.495073,51.742616],[.495176,51.742666],[.495541,51.742843],[.495829,51.742974],[.495982,51.743042],[.496217,51.743161],[.496896,51.743545],[.49704,51.743616],[.497294,51.743741],[.497449,51.743817],[.497883,51.744029],[.498148,51.744149],[.498612,51.744359],[.498682,51.74439],[.499155,51.744602],[.499591,51.744798],[.500039,51.744984],[.500213,51.745104],[.500285,51.745168],[.500276,51.745218],[.500287,51.745247],[.500316,51.745285],[.500353,51.745305],[.500406,51.745324],[.500474,51.745332],[.500574,51.745393],[.500674,51.745455],[.500922,51.745627],[.501165,51.745815],[.501355,51.746007],[.50162,51.746343],[.501753,51.746529],[.501839,51.746629],[.501871,51.74667],[.501893,51.746693],[.501993,51.746835],[.502177,51.747],[.502222,51.74706],[.502212,51.747094],[.502166,51.747142],[.502144,51.747153],[.502125,51.747163],[.50174,51.747332],[.501496,51.747421],[.500837,51.747675],[.50057,51.747773],[.500066,51.747943],[.499498,51.748136],[.499337,51.748192],[.499201,51.74825],[.498687,51.748445],[.498292,51.748616],[.498011,51.748756],[.497805,51.748856],[.497764,51.74883],[.497652,51.748898],[.497556,51.748951],[.497465,51.749011],[.497268,51.749142],[.496528,51.749724],[.496409,51.749813],[.496306,51.749899],[.496263,51.749924],[.496186,51.749983],[.49596,51.750174],[.495849,51.750263],[.495776,51.750322],[.495555,51.750528],[.495427,51.750643],[.495256,51.750822],[.4951,51.751005],[.495037,51.751088],[.495007,51.751138],[.494993,51.751202],[.494965,51.751266],[.494936,51.751297],[.494839,51.75132],[.494793,51.751327],[.49479,51.751356],[.494789,51.751408],[.494828,51.751428],[.494856,51.75146],[.494857,51.751497],[.49485,51.75153],[.494808,51.751706],[.494741,51.751979],[.49465,51.752214],[.49454,51.752417],[.49443,51.752565],[.494261,51.752736],[.493924,51.752979],[.493746,51.753115],[.49335,51.753407],[.493261,51.753475],[.492975,51.753707],[.492879,51.753802],[.492769,51.753921],[.492735,51.753915],[.492375,51.75386],[.4923,51.753843],[.492261,51.753834],[.4922,51.753904],[.492139,51.753895],[.492177,51.753834],[.492214,51.753797],[.492236,51.75377],[.492237,51.753743],[.49222,51.75371],[.492195,51.753686],[.492145,51.753668],[.492043,51.753643],[.49193,51.753622],[.491649,51.753577],[.491403,51.753541],[.491063,51.753498],[.490961,51.753745]],type:"LineString"},properties:{},type:"Feature"},{type:"Feature",properties:{},geometry:{coordinates:[[-.8876338067753693,52.23771961572791],[-.8722240821606704,52.239055374398475],[-.8741210869435747,52.24282954959838],[-.8684328688797791,52.248692578424254],[-.8698547643610652,52.25223365618476],[-.8661103062913185,52.25310368912446]],type:"LineString"}}]};function Dv(e){let t=e[2].ruc11+"",n;return{c(){n=vt(t)},m(r,i){rt(r,n,i)},p(r,i){i&4&&t!==(t=r[2].ruc11+"")&&Je(n,t)},d(r){r&&it(n)}}}function Mv(e){let t,n;return t=new ks({props:{openOn:"hover",$$slots:{default:[Dv,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function Fv(e){let t,n;return t=new Bc({props:{manageHoverState:!0,layout:{visibility:e[1]=="ruc"?"visible":"none"},paint:{"fill-color":["case",["in","Urban",["get","ruc11"]],"orange","green"],"fill-opacity":$a(.3,.5)},$$slots:{default:[Mv]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="ruc"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function kv(e){let t=e[2].pop_density+"",n,r;return{c(){n=vt(t),r=vt(" people / square km")},m(i,o){rt(i,n,o),rt(i,r,o)},p(i,o){o&4&&t!==(t=i[2].pop_density+"")&&Je(n,t)},d(i){i&&(it(n),it(r))}}}function Gv(e){let t,n;return t=new ks({props:{openOn:"hover",$$slots:{default:[kv,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function Bv(e){let t,n;return t=new Bc({props:{manageHoverState:!0,layout:{visibility:e[1]=="pop_density"?"visible":"none"},paint:{"fill-color":"blue","fill-opacity":$a(.3,.5)},$$slots:{default:[Gv]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="pop_density"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function qv(e){let t=e[2].road_classification+"",n;return{c(){n=vt(t)},m(r,i){rt(r,n,i)},p(r,i){i&4&&t!==(t=r[2].road_classification+"")&&Je(n,t)},d(r){r&&it(n)}}}function Uv(e){let t,n;return t=new ks({props:{openOn:"hover",$$slots:{default:[qv,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function zv(e){let t,n;return t=new Mc({props:{layout:{visibility:e[1]=="os_network"?"visible":"none"},paint:{"line-width":3,"line-color":"black"},$$slots:{default:[Uv]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="os_network"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function Vv(e){let t=e[2].id+"",n;return{c(){n=vt(t)},m(r,i){rt(r,n,i)},p(r,i){i&4&&t!==(t=r[2].id+"")&&Je(n,t)},d(r){r&&it(n)}}}function jv(e){let t,n;return t=new ks({props:{openOn:"hover",$$slots:{default:[Vv,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function Wv(e){let t,n;return t=new Bp({props:{manageHoverState:!0,layout:{visibility:e[1]=="os_network"?"visible":"none"},paint:{"circle-color":"green","circle-radius":$a(5,8)},$$slots:{default:[jv]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="os_network"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function $v(e){let t,n,r,i,o,s,a,u;return t=new to({props:{data:e[0].ruc,$$slots:{default:[Fv]},$$scope:{ctx:e}}}),r=new to({props:{data:e[0].pop_density,$$slots:{default:[Bv]},$$scope:{ctx:e}}}),o=new to({props:{data:e[0].os_links,$$slots:{default:[zv]},$$scope:{ctx:e}}}),a=new to({props:{data:e[0].os_nodes,$$slots:{default:[Wv]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment),n=Tt(),At(r.$$.fragment),i=Tt(),At(o.$$.fragment),s=Tt(),At(a.$$.fragment)},m(l,c){Dt(t,l,c),rt(l,n,c),Dt(r,l,c),rt(l,i,c),Dt(o,l,c),rt(l,s,c),Dt(a,l,c),u=!0},p(l,[c]){const f={};c&1&&(f.data=l[0].ruc),c&10&&(f.$$scope={dirty:c,ctx:l}),t.$set(f);const p={};c&1&&(p.data=l[0].pop_density),c&10&&(p.$$scope={dirty:c,ctx:l}),r.$set(p);const h={};c&1&&(h.data=l[0].os_links),c&10&&(h.$$scope={dirty:c,ctx:l}),o.$set(h);const d={};c&1&&(d.data=l[0].os_nodes),c&10&&(d.$$scope={dirty:c,ctx:l}),a.$set(d)},i(l){u||(K(t.$$.fragment,l),K(r.$$.fragment,l),K(o.$$.fragment,l),K(a.$$.fragment,l),u=!0)},o(l){ot(t.$$.fragment,l),ot(r.$$.fragment,l),ot(o.$$.fragment,l),ot(a.$$.fragment,l),u=!1},d(l){l&&(it(n),it(i),it(s)),Mt(t,l),Mt(r,l),Mt(o,l),Mt(a,l)}}}function Xv(e,t,n){let{output:r}=t,{show:i}=t;return e.$$set=o=>{"output"in o&&n(0,r=o.output),"show"in o&&n(1,i=o.show)},[r,i]}class Yv extends Fi{constructor(t){super(),ki(this,t,Xv,$v,Gi,{output:0,show:1})}}function Oc(e){let t,n,r=e[0]+1+"",i,o,s=e[5].features.length+"",a,u,l,c,f;return{c(){t=yt("button"),t.textContent="Prev",n=Tt(),i=vt(r),o=vt(" / "),a=vt(s),u=Tt(),l=yt("button"),l.textContent="Next"},m(p,h){rt(p,t,h),rt(p,n,h),rt(p,i,h),rt(p,o,h),rt(p,a,h),rt(p,u,h),rt(p,l,h),c||(f=[fr(t,"click",e[15]),fr(l,"click",e[16])],c=!0)},p(p,h){h&1&&r!==(r=p[0]+1+"")&&Je(i,r),h&32&&s!==(s=p[5].features.length+"")&&Je(a,s)},d(p){p&&(it(t),it(n),it(i),it(o),it(a),it(u),it(l)),c=!1,Fc(f)}}}function Hv(e){let t,n,r=Math.round(e[1].length)+"",i,o,s,a,u,l,c=e[1].ruc.features.length-e[8]+"",f,p,h,d,_=e[1].os_links.features.length+"",v,E,S=e[1].os_nodes.features.length+"",x,C,T,W,q=Rc(e[1])+"",G;return{c(){t=yt("p"),n=vt("Length: "),i=vt(r),o=vt(" m"),s=Tt(),a=yt("p"),u=vt(e[8]),l=vt(" urban OAs, "),f=vt(c),p=vt(" rural"),h=Tt(),d=yt("p"),v=vt(_),E=vt(" links, "),x=vt(S),C=vt(`
        nodes`),T=Tt(),W=yt("p"),G=vt(q)},m(O,$){rt(O,t,$),U(t,n),U(t,i),U(t,o),rt(O,s,$),rt(O,a,$),U(a,u),U(a,l),U(a,f),U(a,p),rt(O,h,$),rt(O,d,$),U(d,v),U(d,E),U(d,x),U(d,C),rt(O,T,$),rt(O,W,$),U(W,G)},p(O,$){$&2&&r!==(r=Math.round(O[1].length)+"")&&Je(i,r),$&256&&Je(u,O[8]),$&258&&c!==(c=O[1].ruc.features.length-O[8]+"")&&Je(f,c),$&2&&_!==(_=O[1].os_links.features.length+"")&&Je(v,_),$&2&&S!==(S=O[1].os_nodes.features.length+"")&&Je(x,S),$&2&&q!==(q=Rc(O[1])+"")&&Je(G,q)},d(O){O&&(it(t),it(s),it(a),it(h),it(d),it(T),it(W))}}}function Jv(e){let t;return{c(){t=yt("p"),t.textContent="Loading..."},m(n,r){rt(n,t,r)},p:Dc,d(n){n&&it(t)}}}function Kv(e){let t,n,r,i,o,s,a,u,l,c,f,p,h,d,_,v,E,S,x,C,T,W,q,G,O,$,N,ft,nt,Le,ii,ur,Z,Tr,Lt=e[0]!=null&&Oc(e);function To(dt,oe){return dt[1].length==0?Jv:Hv}let Ar=To(e),Rt=Ar(e);return ur=Up(e[19][0]),{c(){t=yt("div"),n=yt("p"),n.textContent="Input:",r=Tt(),i=yt("label"),o=vt(`Load a GeoJSON file
      `),s=yt("input"),a=Tt(),Lt&&Lt.c(),u=Tt(),l=yt("p"),l.textContent="Output:",c=Tt(),f=yt("button"),f.textContent="Recalculate",p=Tt(),h=yt("label"),d=yt("input"),_=vt(`
      Show input route`),v=Tt(),E=yt("br"),S=Tt(),x=yt("fieldset"),C=yt("label"),T=yt("input"),W=vt(`
        RUC`),q=Tt(),G=yt("label"),O=yt("input"),$=vt(`
        Pop density`),N=Tt(),ft=yt("label"),nt=yt("input"),Le=vt(`
        OS links and nodes`),ii=Tt(),Rt.c(),cr(s,"type","file"),cr(d,"type","checkbox"),cr(T,"type","radio"),T.__value="ruc",qs(T,T.__value),cr(O,"type","radio"),O.__value="pop_density",qs(O,O.__value),cr(nt,"type","radio"),nt.__value="os_network",qs(nt,nt.__value),cr(t,"slot","left"),ur.p(T,O,nt)},m(dt,oe){rt(dt,t,oe),U(t,n),U(t,r),U(t,i),U(i,o),U(i,s),e[14](s),U(t,a),Lt&&Lt.m(t,null),U(t,u),U(t,l),U(t,c),U(t,f),U(t,p),U(t,h),U(h,d),d.checked=e[3],U(h,_),U(t,v),U(t,E),U(t,S),U(t,x),U(x,C),U(C,T),T.checked=T.__value===e[4],U(C,W),U(x,q),U(x,G),U(G,O),O.checked=O.__value===e[4],U(G,$),U(x,N),U(x,ft),U(ft,nt),nt.checked=nt.__value===e[4],U(ft,Le),U(t,ii),Rt.m(t,null),Z||(Tr=[fr(s,"change",e[10]),fr(f,"click",e[9]),fr(d,"change",e[17]),fr(T,"change",e[18]),fr(O,"change",e[20]),fr(nt,"change",e[21])],Z=!0)},p(dt,oe){dt[0]!=null?Lt?Lt.p(dt,oe):(Lt=Oc(dt),Lt.c(),Lt.m(t,u)):Lt&&(Lt.d(1),Lt=null),oe&8&&(d.checked=dt[3]),oe&16&&(T.checked=T.__value===dt[4]),oe&16&&(O.checked=O.__value===dt[4]),oe&16&&(nt.checked=nt.__value===dt[4]),Ar===(Ar=To(dt))&&Rt?Rt.p(dt,oe):(Rt.d(1),Rt=Ar(dt),Rt&&(Rt.c(),Rt.m(t,null)))},d(dt){dt&&it(t),e[14](null),Lt&&Lt.d(),Rt.d(),ur.r(),Z=!1,Fc(Tr)}}}function Pc(e){let t,n,r,i,o;function s(u){e[12](u)}let a={};return e[6]!==void 0&&(a.f=e[6]),t=new Tv({props:a}),Bi.push(()=>_s(t,"f",s)),i=new to({props:{data:e[6],$$slots:{default:[Qv]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment),r=Tt(),At(i.$$.fragment)},m(u,l){Dt(t,u,l),rt(u,r,l),Dt(i,u,l),o=!0},p(u,l){const c={};!n&&l&64&&(n=!0,c.f=u[6],vs(()=>n=!1)),t.$set(c);const f={};l&64&&(f.data=u[6]),l&16777224&&(f.$$scope={dirty:l,ctx:u}),i.$set(f)},i(u){o||(K(t.$$.fragment,u),K(i.$$.fragment,u),o=!0)},o(u){ot(t.$$.fragment,u),ot(i.$$.fragment,u),o=!1},d(u){u&&it(r),Mt(t,u),Mt(i,u)}}}function Qv(e){let t,n;return t=new Mc({props:{layout:{visibility:e[3]?"visible":"none"},paint:{"line-width":5,"line-color":"red"}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,i){const o={};i&8&&(o.layout={visibility:r[3]?"visible":"none"}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function Zv(e){let t,n,r,i=e[6]&&e[3]&&Pc(e);return n=new Yv({props:{output:e[1],show:e[4]}}),{c(){i&&i.c(),t=Tt(),At(n.$$.fragment)},m(o,s){i&&i.m(o,s),rt(o,t,s),Dt(n,o,s),r=!0},p(o,s){o[6]&&o[3]?i?(i.p(o,s),s&72&&K(i,1)):(i=Pc(o),i.c(),K(i,1),i.m(t.parentNode,t)):i&&(bs(),ot(i,1,1,()=>{i=null}),Es());const a={};s&2&&(a.output=o[1]),s&16&&(a.show=o[4]),n.$set(a)},i(o){r||(K(i),K(n.$$.fragment,o),r=!0)},o(o){ot(i),ot(n.$$.fragment,o),r=!1},d(o){o&&it(t),i&&i.d(o),Mt(n,o)}}}function t0(e){let t,n,r,i;function o(a){e[13](a)}let s={style:`https://api.maptiler.com/maps/dataviz/style.json?key=${n0}`,standardControls:!0,$$slots:{default:[Zv]},$$scope:{ctx:e}};return e[2]!==void 0&&(s.map=e[2]),n=new zp({props:s}),Bi.push(()=>_s(n,"map",o)),{c(){t=yt("div"),At(n.$$.fragment),cr(t,"slot","main"),Us(t,"position","relative"),Us(t,"width","100%"),Us(t,"height","100vh")},m(a,u){rt(a,t,u),Dt(n,t,null),i=!0},p(a,u){const l={};u&16777306&&(l.$$scope={dirty:u,ctx:a}),!r&&u&4&&(r=!0,l.map=a[2],vs(()=>r=!1)),n.$set(l)},i(a){i||(K(n.$$.fragment,a),i=!0)},o(a){ot(n.$$.fragment,a),i=!1},d(a){a&&it(t),Mt(n)}}}function e0(e){let t,n;return t=new qp({props:{$$slots:{main:[t0],left:[Kv]},$$scope:{ctx:e}}}),{c(){At(t.$$.fragment)},m(r,i){Dt(t,r,i),n=!0},p(r,[i]){const o={};i&16777727&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(K(t.$$.fragment,r),n=!0)},o(r){ot(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}let n0="MZEJTanw3WpxRvt7qDfo";function Rc(e){return e.os_links.features.map(t=>t.properties.road_classification).join(", ")}function r0(e,t,n){let r,i="https://assets.od2net.org/route-element",o,s=!1,a=!0,u="ruc";Ac(async()=>{await Gc(),n(11,s=!0),h(JSON.stringify(Av))});let l=hi(),c=null,f=null,p=ca();function h(N){n(5,l=hi()),n(0,c=null);try{let ft=JSON.parse(N);if(ft.features=ft.features.filter(nt=>nt.geometry.type=="LineString"),ft.features.length==0)throw new Error("No LineStrings");n(5,l=ft),n(0,c=0),n(1,p=ca())}catch(ft){window.alert(ft)}}async function d(){if(s&&c!=null){n(1,p=ca()),n(6,f=l.features[c]),o&&Cv(o,f);try{let N=JSON.parse(await $p(f,i));n(1,p={length:N.length,ruc:JSON.parse(N.ruc),pop_density:JSON.parse(N.pop_density),os_nodes:JSON.parse(N.os_nodes),os_links:JSON.parse(N.os_links)})}catch(N){window.alert(N)}}}let _;async function v(N){h(await _.files[0].text())}const E=[[]];function S(N){f=N,n(6,f)}function x(N){o=N,n(2,o)}function C(N){Bi[N?"unshift":"push"](()=>{_=N,n(7,_)})}const T=()=>{n(0,c--,c),d()},W=()=>{n(0,c++,c),d()};function q(){a=this.checked,n(3,a)}function G(){u=this.__value,n(4,u)}function O(){u=this.__value,n(4,u)}function $(){u=this.__value,n(4,u)}return e.$$.update=()=>{e.$$.dirty&2051&&s&&c!=null&&p.length==0&&d(),e.$$.dirty&2&&n(8,r=p.ruc.features.filter(N=>N.properties.ruc11.startsWith("Urban")).length)},[c,p,o,a,u,l,f,_,r,d,v,s,S,x,C,T,W,q,G,E,O,$]}class i0 extends Fi{constructor(t){super(),ki(this,t,r0,e0,Gi,{})}}new i0({target:document.getElementById("app")});
