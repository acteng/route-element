import{a0 as Pe,a1 as He,a2 as re,w as K,e as v,x as P,t as k,a3 as Re,S as H,i as R,s as U,A as Ue,a4 as We,B as Xe,E as Ze,h as Ge,G as g,K as j,$ as V,v as d,Y as M,a5 as Ye,u as Me,j as Je,k as Oe,y as m,l as de,H as ee,c as D,J as B,r as ae,m as N,f as Q,I as me,M as Ve,b as te,a as ue,d as ce,N as L,R as F,W as A,a6 as we,X as b,a7 as se,a8 as Ae,Z as fe,a9 as ye,T as ge,U as xe,_ as et,O as tt,Q as Ie,P as nt}from"./Layout-b4877880.js";function lt(n,e){const l=e.token={};function t(s,r,o,i){if(e.token!==l)return;e.resolved=i;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=i);const c=s&&(e.current=s)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,_)=>{_!==r&&f&&(K(),v(f,1,1,()=>{e.blocks[_]===f&&(e.blocks[_]=null)}),P())}):e.block.d(1),c.c(),k(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[r]=c),u&&Re()}if(Pe(n)){const s=He();if(n.then(r=>{re(s),t(e.then,1,e.value,r),re(null)},r=>{if(re(s),t(e.catch,2,e.error,r),re(null),!e.hasCatch)throw r}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,n),!0;e.resolved=n}}function ot(n,e,l){const t=e.slice(),{resolved:s}=n;n.current===n.then&&(t[n.value]=s),n.current===n.catch&&(t[n.error]=s),n.block.p(t,l)}function rt(n,e,l){let t;const s=Ue();let{layer:r=void 0}=e;const{map:o}=We();Xe(n,o,u=>l(2,t=u));function i(u){s(u.type,{...u,map:o})}const a=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],c=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return Ze(()=>{if(t)if(r)for(const u of a)t.off(u,r,i);else for(const u of c)t.off(u,i)}),n.$$set=u=>{"layer"in u&&l(1,r=u.layer)},n.$$.update=()=>{if(n.$$.dirty&6&&t)if(r)for(const u of a)t.on(u,r,i);else for(const u of c)t.on(u,i)},[o,r,t]}class st extends H{constructor(e){super(),R(this,e,rt,null,U,{layer:1})}}function it(n){let e,l,t,s;const r=n[2].default,o=Ge(r,n,n[1],null);return{c(){e=g("a"),o&&o.c(),j(e,"href","#"),V(e,"color",n[0])},m(i,a){d(i,e,a),o&&o.m(e,null),l=!0,t||(s=M(e,"click",Ye(n[3])),t=!0)},p(i,[a]){o&&o.p&&(!l||a&2)&&Me(o,r,i,i[1],l?Oe(r,i[1],a,null):Je(i[1]),null),a&1&&V(e,"color",i[0])},i(i){l||(k(o,i),l=!0)},o(i){v(o,i),l=!1},d(i){i&&m(e),o&&o.d(i),t=!1,s()}}}function at(n,e,l){let{$$slots:t={},$$scope:s}=e,{color:r}=e;function o(i){de.call(this,n,i)}return n.$$set=i=>{"color"in i&&l(0,r=i.color),"$$scope"in i&&l(1,s=i.$$scope)},[r,s,t,o]}class ie extends H{constructor(e){super(),R(this,e,at,it,U,{color:0})}}function qe(n,e,l){const t=n.slice();return t[5]=e[l],t[6]=e,t[7]=l,t}function ut(n){let e,l;return{c(){e=g("span"),l=B(),j(e,"class","dot svelte-1lzmzqo")},m(t,s){d(t,e,s),d(t,l,s)},p:L,d(t){t&&(m(e),m(l))}}}function Ce(n){let e,l,t;function s(o){n[4](o,n[5],n[6],n[7])}let r={draggable:!0,$$slots:{default:[ut]},$$scope:{ctx:n}};return n[5]!==void 0&&(r.lngLat=n[5]),e=new Ve({props:r}),te.push(()=>ue(e,"lngLat",s)),{c(){D(e.$$.fragment)},m(o,i){N(e,o,i),t=!0},p(o,i){n=o;const a={};i&256&&(a.$$scope={dirty:i,ctx:n}),!l&&i&1&&(l=!0,a.lngLat=n[5],ce(()=>l=!1)),e.$set(a)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){v(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function ct(n){let e,l,t,s,r,o;e=new st({}),e.$on("click",n[1]);let i=ee(n[0].geometry.coordinates),a=[];for(let u=0;u<i.length;u+=1)a[u]=Ce(qe(n,i,u));const c=u=>v(a[u],1,1,()=>{a[u]=null});return{c(){D(e.$$.fragment),l=B();for(let u=0;u<a.length;u+=1)a[u].c();t=ae()},m(u,f){N(e,u,f),d(u,l,f);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(u,f);d(u,t,f),s=!0,r||(o=M(window,"keydown",n[2]),r=!0)},p(u,[f]){if(f&1){i=ee(u[0].geometry.coordinates);let _;for(_=0;_<i.length;_+=1){const $=qe(u,i,_);a[_]?(a[_].p($,f),k(a[_],1)):(a[_]=Ce($),a[_].c(),k(a[_],1),a[_].m(t.parentNode,t))}for(K(),_=i.length;_<a.length;_+=1)c(_);P()}},i(u){if(!s){k(e.$$.fragment,u);for(let f=0;f<i.length;f+=1)k(a[f]);s=!0}},o(u){v(e.$$.fragment,u),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)v(a[f]);s=!1},d(u){u&&(m(l),m(t)),Q(e,u),me(a,u),r=!1,o()}}}function ft(n,e,l){let{f:t}=e,{onDone:s}=e;function r(a){t.geometry.coordinates.push(a.detail.lngLat.toArray()),l(0,t)}function o(a){a.key=="Enter"&&s()}function i(a,c,u,f){u[f]=a,l(0,t)}return n.$$set=a=>{"f"in a&&l(0,t=a.f),"onDone"in a&&l(3,s=a.onDone)},[t,r,o,s,i]}class _t extends H{constructor(e){super(),R(this,e,ft,ct,U,{f:0,onDone:3})}}let Le="MZEJTanw3WpxRvt7qDfo";async function pt(n){return n?{version:8,sources:{"raster-tiles":{type:"raster",tiles:[`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${await dt(n)}&key=${n}`],tileSize:256,attribution:"Google (detailed attributions not wired up)"}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:`https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=${Le}`}:`https://api.maptiler.com/maps/dataviz/style.json?key=${Le}`}async function dt(n){try{let l=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${n}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in l?l.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(l)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}function mt(n){let e,l,t,s,r,o,i,a,c,u,f,_,$,h,y,J,E,G,W;return{c(){e=g("label"),l=F(`Question 1
  `),t=g("select"),s=g("option"),r=g("option"),r.textContent="A",o=g("option"),o.textContent="B",i=B(),a=g("label"),c=F(`Question 2
  `),u=g("select"),f=g("option"),_=g("option"),_.textContent="C",$=g("option"),$.textContent="D",h=B(),y=g("label"),J=F(`Question 3
  `),E=g("input"),s.__value="",A(s,s.__value),r.__value="a",A(r,r.__value),o.__value="b",A(o,o.__value),n[0].properties.q1===void 0&&we(()=>n[1].call(t)),f.__value="",A(f,f.__value),_.__value="c",A(_,_.__value),$.__value="d",A($,$.__value),n[0].properties.q2===void 0&&we(()=>n[2].call(u)),j(E,"type","number")},m(q,z){d(q,e,z),b(e,l),b(e,t),b(t,s),b(t,r),b(t,o),se(t,n[0].properties.q1,!0),d(q,i,z),d(q,a,z),b(a,c),b(a,u),b(u,f),b(u,_),b(u,$),se(u,n[0].properties.q2,!0),d(q,h,z),d(q,y,z),b(y,J),b(y,E),A(E,n[0].properties.q3),G||(W=[M(t,"change",n[1]),M(u,"change",n[2]),M(E,"input",n[3])],G=!0)},p(q,[z]){z&1&&se(t,q[0].properties.q1),z&1&&se(u,q[0].properties.q2),z&1&&Ae(E.value)!==q[0].properties.q3&&A(E,q[0].properties.q3)},i:L,o:L,d(q){q&&(m(e),m(i),m(a),m(h),m(y)),G=!1,fe(W)}}}function gt(n,e,l){let{f:t}=e;function s(){t.properties.q1=ye(this),l(0,t)}function r(){t.properties.q2=ye(this),l(0,t)}function o(){t.properties.q3=Ae(this.value),l(0,t)}return n.$$set=i=>{"f"in i&&l(0,t=i.f)},[t,s,r,o]}class kt extends H{constructor(e){super(),R(this,e,gt,mt,U,{f:0})}}function $t(n){let e=["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"];return{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{name:"Untitled link",color:e[n%e.length],q1:"",q2:"",q3:0}}}function ht(){try{let n=JSON.parse(window.localStorage.getItem("tmp-rcv2")||"");if("features"in n)return n.features}catch{}return[]}const bt=n=>({dialog:n&1}),Se=n=>({dialog:n[0]});function vt(n){let e,l,t,s,r;const o=n[4].default,i=Ge(o,n,n[3],Se);return{c(){e=g("dialog"),l=g("article"),i&&i.c(),e.open=!0},m(a,c){d(a,e,c),b(e,l),i&&i.m(l,null),n[6](e),t=!0,s||(r=[M(window,"click",n[1]),M(window,"keydown",n[2]),M(e,"close",n[5])],s=!0)},p(a,[c]){i&&i.p&&(!t||c&9)&&Me(i,o,a,a[3],t?Oe(o,a[3],c,bt):Je(a[3]),Se)},i(a){t||(k(i,a),t=!0)},o(a){v(i,a),t=!1},d(a){a&&m(e),i&&i.d(a),n[6](null),s=!1,fe(r)}}}function wt(n,e,l){let{$$slots:t={},$$scope:s}=e,r;function o(u){r.open&&u.target==r&&r.close()}function i(u){(u.key=="Escape"||u.key=="Enter")&&(u.stopPropagation(),r.close())}function a(u){de.call(this,n,u)}function c(u){te[u?"unshift":"push"](()=>{r=u,l(0,r)})}return n.$$set=u=>{"$$scope"in u&&l(3,s=u.$$scope)},[r,o,i,s,t,a,c]}class yt extends H{constructor(e){super(),R(this,e,wt,vt,U,{})}}function qt(n){let e;return{c(){e=g("td"),V(e,"background","red")},m(l,t){d(l,e,t)},d(l){l&&m(e)}}}function Ct(n){let e;return{c(){e=g("td"),e.textContent="X",V(e,"background","green")},m(l,t){d(l,e,t)},d(l){l&&m(e)}}}function Lt(n){let e;function l(r,o){return r[0]?Ct:qt}let t=l(n),s=t(n);return{c(){s.c(),e=ae()},m(r,o){s.m(r,o),d(r,e,o)},p(r,[o]){t!==(t=l(r))&&(s.d(1),s=t(r),s&&(s.c(),s.m(e.parentNode,e)))},i:L,o:L,d(r){r&&m(e),s.d(r)}}}function St(n,e,l){let{done:t}=e;return n.$$set=s=>{"done"in s&&l(0,t=s.done)},[t]}class pe extends H{constructor(e){super(),R(this,e,St,Lt,U,{done:0})}}function Be(n,e,l){const t=n.slice();return t[2]=e[l],t}function Ee(n){let e,l,t=n[2].properties.name+"",s,r,o,i,a,c,u,f,_;return o=new pe({props:{done:n[2].properties.q1!=""}}),a=new pe({props:{done:n[2].properties.q2!=""}}),u=new pe({props:{done:n[2].properties.q3!=0}}),{c(){e=g("tr"),l=g("td"),s=F(t),r=B(),D(o.$$.fragment),i=B(),D(a.$$.fragment),c=B(),D(u.$$.fragment),f=B()},m($,h){d($,e,h),b(e,l),b(l,s),b(e,r),N(o,e,null),b(e,i),N(a,e,null),b(e,c),N(u,e,null),b(e,f),_=!0},p($,h){(!_||h&1)&&t!==(t=$[2].properties.name+"")&&ge(s,t);const y={};h&1&&(y.done=$[2].properties.q1!=""),o.$set(y);const J={};h&1&&(J.done=$[2].properties.q2!=""),a.$set(J);const E={};h&1&&(E.done=$[2].properties.q3!=0),u.$set(E)},i($){_||(k(o.$$.fragment,$),k(a.$$.fragment,$),k(u.$$.fragment,$),_=!0)},o($){v(o.$$.fragment,$),v(a.$$.fragment,$),v(u.$$.fragment,$),_=!1},d($){$&&m(e),Q(o),Q(a),Q(u)}}}function Bt(n){let e,l,t,s,r,o=ee(n[0]),i=[];for(let c=0;c<o.length;c+=1)i[c]=Ee(Be(n,o,c));const a=c=>v(i[c],1,1,()=>{i[c]=null});return{c(){e=g("table"),l=g("thead"),l.innerHTML="<tr><th>Link</th> <th>Question 1</th> <th>Question 2</th> <th>Question 3</th></tr>",t=B(),s=g("tbody");for(let c=0;c<i.length;c+=1)i[c].c()},m(c,u){d(c,e,u),b(e,l),b(e,t),b(e,s);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(s,null);r=!0},p(c,u){if(u&1){o=ee(c[0]);let f;for(f=0;f<o.length;f+=1){const _=Be(c,o,f);i[f]?(i[f].p(_,u),k(i[f],1)):(i[f]=Ee(_),i[f].c(),k(i[f],1),i[f].m(s,null))}for(K(),f=o.length;f<i.length;f+=1)a(f);P()}},i(c){if(!r){for(let u=0;u<o.length;u+=1)k(i[u]);r=!0}},o(c){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)v(i[u]);r=!1},d(c){c&&m(e),me(i,c)}}}function Et(n){let e,l;return e=new yt({props:{$$slots:{default:[Bt]},$$scope:{ctx:n}}}),e.$on("close",n[1]),{c(){D(e.$$.fragment)},m(t,s){N(e,t,s),l=!0},p(t,[s]){const r={};s&33&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Dt(n,e,l){let{links:t}=e;function s(r){de.call(this,n,r)}return n.$$set=r=>{"links"in r&&l(0,t=r.links)},[t,s]}class Nt extends H{constructor(e){super(),R(this,e,Dt,Et,U,{links:0})}}function De(n,e,l){const t=n.slice();return t[22]=e[l],t[24]=l,t}function Ne(n){let e,l;return e=new Nt({props:{links:n[0]}}),e.$on("close",n[7]),{c(){D(e.$$.fragment)},m(t,s){N(e,t,s),l=!0},p(t,s){const r={};s&1&&(r.links=t[0]),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Qt(n){let e,l,t,s,r=n[3].n+"",o,i,a;return{c(){e=g("button"),e.textContent="Done",l=B(),t=g("h2"),s=F("Question "),o=F(r)},m(c,u){d(c,e,u),d(c,l,u),d(c,t,u),b(t,s),b(t,o),i||(a=M(e,"click",n[20]),i=!0)},p(c,u){u&8&&r!==(r=c[3].n+"")&&ge(o,r)},i:L,o:L,d(c){c&&(m(e),m(l),m(t)),i=!1,a()}}}function zt(n){let e,l,t,s,r,o,i,a,c,u,f;function _(h){n[19](h)}let $={};return n[0][n[3].idx]!==void 0&&($.f=n[0][n[3].idx]),i=new kt({props:$}),te.push(()=>ue(i,"f",_)),{c(){e=g("button"),e.textContent="Done",l=B(),t=g("label"),s=F(`Name:
        `),r=g("input"),o=B(),D(i.$$.fragment),j(r,"type","text")},m(h,y){d(h,e,y),d(h,l,y),d(h,t,y),b(t,s),b(t,r),A(r,n[0][n[3].idx].properties.name),d(h,o,y),N(i,h,y),c=!0,u||(f=[M(e,"click",n[17]),M(r,"input",n[18])],u=!0)},p(h,y){y&9&&r.value!==h[0][h[3].idx].properties.name&&A(r,h[0][h[3].idx].properties.name);const J={};!a&&y&9&&(a=!0,J.f=h[0][h[3].idx],ce(()=>a=!1)),i.$set(J)},i(h){c||(k(i.$$.fragment,h),c=!0)},o(h){v(i.$$.fragment,h),c=!1},d(h){h&&(m(e),m(l),m(t),m(o)),Q(i,h),u=!1,fe(f)}}}function Ft(n){let e,l,t,s,r,o,i,a,c,u,f,_,$,h,y,J,E,G,W,q,z,x,ne,S,I,ke,X,le,oe,O,_e,$e,Z=ee(n[0]),C=[];for(let p=0;p<Z.length;p+=1)C[p]=Qe(De(n,Z,p));const Ke=p=>v(C[p],1,1,()=>{C[p]=null});return f=new ie({props:{$$slots:{default:[jt]},$$scope:{ctx:n}}}),f.$on("click",n[14]),G=new ie({props:{$$slots:{default:[Gt]},$$scope:{ctx:n}}}),G.$on("click",n[15]),I=new ie({props:{$$slots:{default:[Mt]},$$scope:{ctx:n}}}),I.$on("click",n[16]),{c(){e=g("button"),e.textContent="New link",l=B(),t=g("button"),t.textContent="Clear",s=B(),r=g("button"),r.textContent="Table of questions",o=F(`

      Links:
      `),i=g("ol");for(let p=0;p<C.length;p+=1)C[p].c();a=F(`

      Questions:
      `),c=g("ol"),u=g("li"),D(f.$$.fragment),_=F(`:
          `),$=g("progress"),J=B(),E=g("li"),D(G.$$.fragment),W=F(`:
          `),q=g("progress"),ne=B(),S=g("li"),D(I.$$.fragment),ke=F(`:
          `),X=g("progress"),$.value=h=n[0].filter(Fe).length,j($,"max",y=n[0].length),j($,"class","svelte-zadug4"),q.value=z=n[0].filter(Te).length,j(q,"max",x=n[0].length),j(q,"class","svelte-zadug4"),X.value=le=n[0].filter(je).length,j(X,"max",oe=n[0].length),j(X,"class","svelte-zadug4")},m(p,w){d(p,e,w),d(p,l,w),d(p,t,w),d(p,s,w),d(p,r,w),d(p,o,w),d(p,i,w);for(let Y=0;Y<C.length;Y+=1)C[Y]&&C[Y].m(i,null);d(p,a,w),d(p,c,w),b(c,u),N(f,u,null),b(u,_),b(u,$),b(c,J),b(c,E),N(G,E,null),b(E,W),b(E,q),b(c,ne),b(c,S),N(I,S,null),b(S,ke),b(S,X),O=!0,_e||($e=[M(e,"click",n[6]),M(t,"click",n[5]),M(r,"click",n[12])],_e=!0)},p(p,w){if(w&9){Z=ee(p[0]);let T;for(T=0;T<Z.length;T+=1){const ve=De(p,Z,T);C[T]?(C[T].p(ve,w),k(C[T],1)):(C[T]=Qe(ve),C[T].c(),k(C[T],1),C[T].m(i,null))}for(K(),T=Z.length;T<C.length;T+=1)Ke(T);P()}const Y={};w&33554432&&(Y.$$scope={dirty:w,ctx:p}),f.$set(Y),(!O||w&1&&h!==(h=p[0].filter(Fe).length))&&($.value=h),(!O||w&1&&y!==(y=p[0].length))&&j($,"max",y);const he={};w&33554432&&(he.$$scope={dirty:w,ctx:p}),G.$set(he),(!O||w&1&&z!==(z=p[0].filter(Te).length))&&(q.value=z),(!O||w&1&&x!==(x=p[0].length))&&j(q,"max",x);const be={};w&33554432&&(be.$$scope={dirty:w,ctx:p}),I.$set(be),(!O||w&1&&le!==(le=p[0].filter(je).length))&&(X.value=le),(!O||w&1&&oe!==(oe=p[0].length))&&j(X,"max",oe)},i(p){if(!O){for(let w=0;w<Z.length;w+=1)k(C[w]);k(f.$$.fragment,p),k(G.$$.fragment,p),k(I.$$.fragment,p),O=!0}},o(p){C=C.filter(Boolean);for(let w=0;w<C.length;w+=1)v(C[w]);v(f.$$.fragment,p),v(G.$$.fragment,p),v(I.$$.fragment,p),O=!1},d(p){p&&(m(e),m(l),m(t),m(s),m(r),m(o),m(i),m(a),m(c)),me(C,p),Q(f),Q(G),Q(I),_e=!1,fe($e)}}}function Tt(n){let e=n[22].properties.name+"",l;return{c(){l=F(e)},m(t,s){d(t,l,s)},p(t,s){s&1&&e!==(e=t[22].properties.name+"")&&ge(l,e)},d(t){t&&m(l)}}}function Qe(n){let e,l,t,s;function r(){return n[13](n[24])}return l=new ie({props:{color:n[22].properties.color,$$slots:{default:[Tt]},$$scope:{ctx:n}}}),l.$on("click",r),{c(){e=g("li"),D(l.$$.fragment),t=B()},m(o,i){d(o,e,i),N(l,e,null),b(e,t),s=!0},p(o,i){n=o;const a={};i&1&&(a.color=n[22].properties.color),i&33554433&&(a.$$scope={dirty:i,ctx:n}),l.$set(a)},i(o){s||(k(l.$$.fragment,o),s=!0)},o(o){v(l.$$.fragment,o),s=!1},d(o){o&&m(e),Q(l)}}}function jt(n){let e;return{c(){e=F(`Question 1
          `)},m(l,t){d(l,e,t)},d(l){l&&m(e)}}}function Gt(n){let e;return{c(){e=F(`Question 2
          `)},m(l,t){d(l,e,t)},d(l){l&&m(e)}}}function Mt(n){let e;return{c(){e=F(`Question 3
          `)},m(l,t){d(l,e,t)},d(l){l&&m(e)}}}function Jt(n){let e,l,t,s;const r=[Ft,zt,Qt],o=[];function i(a,c){return a[3].kind=="neutral"?0:a[3].kind=="edit-link"?1:a[3].kind=="edit-question"?2:-1}return~(l=i(n))&&(t=o[l]=r[l](n)),{c(){e=g("div"),t&&t.c(),j(e,"slot","left")},m(a,c){d(a,e,c),~l&&o[l].m(e,null),s=!0},p(a,c){let u=l;l=i(a),l===u?~l&&o[l].p(a,c):(t&&(K(),v(o[u],1,1,()=>{o[u]=null}),P()),~l?(t=o[l],t?t.p(a,c):(t=o[l]=r[l](a),t.c()),k(t,1),t.m(e,null)):t=null)},i(a){s||(k(t),s=!0)},o(a){v(t),s=!1},d(a){a&&m(e),~l&&o[l].d()}}}function Ot(n){return{c:L,m:L,p:L,i:L,o:L,d:L}}function At(n){let e,l,t;function s(o){n[11](o)}let r={style:n[21],standardControls:!0,hash:!0,$$slots:{default:[Ht]},$$scope:{ctx:n}};return n[2]!==void 0&&(r.map=n[2]),e=new et({props:r}),te.push(()=>ue(e,"map",s)),{c(){D(e.$$.fragment)},m(o,i){N(e,o,i),t=!0},p(o,i){const a={};i&33554443&&(a.$$scope={dirty:i,ctx:o}),!l&&i&4&&(l=!0,a.map=o[2],ce(()=>l=!1)),e.$set(a)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){v(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function It(n){let e,l;return e=new Ie({props:{paint:{"line-color":["case",["==",["id"],n[3].idx],["get","color"],"black"],"line-opacity":["case",["==",["id"],n[3].idx],1,.5],"line-width":6}}}),{c(){D(e.$$.fragment)},m(t,s){N(e,t,s),l=!0},p(t,s){const r={};s&8&&(r.paint={"line-color":["case",["==",["id"],t[3].idx],["get","color"],"black"],"line-opacity":["case",["==",["id"],t[3].idx],1,.5],"line-width":6}),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Kt(n){let e,l;return e=new Ie({props:{manageHoverState:!0,paint:{"line-color":["get","color"],"line-width":nt(6,9)},hoverCursor:"pointer"}}),e.$on("click",n[8]),{c(){D(e.$$.fragment)},m(t,s){N(e,t,s),l=!0},p:L,i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Pt(n){let e,l,t,s;const r=[Kt,It],o=[];function i(a,c){return a[3].kind=="neutral"||a[3].kind=="edit-question"?0:a[3].kind=="edit-link"?1:-1}return~(e=i(n))&&(l=o[e]=r[e](n)),{c(){l&&l.c(),t=ae()},m(a,c){~e&&o[e].m(a,c),d(a,t,c),s=!0},p(a,c){let u=e;e=i(a),e===u?~e&&o[e].p(a,c):(l&&(K(),v(o[u],1,1,()=>{o[u]=null}),P()),~e?(l=o[e],l?l.p(a,c):(l=o[e]=r[e](a),l.c()),k(l,1),l.m(t.parentNode,t)):l=null)},i(a){s||(k(l),s=!0)},o(a){v(l),s=!1},d(a){a&&m(t),~e&&o[e].d(a)}}}function ze(n){let e,l,t;function s(o){n[10](o)}let r={onDone:n[9]};return n[0][n[3].idx]!==void 0&&(r.f=n[0][n[3].idx]),e=new _t({props:r}),te.push(()=>ue(e,"f",s)),{c(){D(e.$$.fragment)},m(o,i){N(e,o,i),t=!0},p(o,i){const a={};i&8&&(a.onDone=o[9]),!l&&i&9&&(l=!0,a.f=o[0][o[3].idx],ce(()=>l=!1)),e.$set(a)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){v(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function Ht(n){let e,l,t,s;e=new tt({props:{data:n[1],generateId:!0,$$slots:{default:[Pt]},$$scope:{ctx:n}}});let r=n[3].kind=="edit-link"&&ze(n);return{c(){D(e.$$.fragment),l=B(),r&&r.c(),t=ae()},m(o,i){N(e,o,i),d(o,l,i),r&&r.m(o,i),d(o,t,i),s=!0},p(o,i){const a={};i&2&&(a.data=o[1]),i&33554440&&(a.$$scope={dirty:i,ctx:o}),e.$set(a),o[3].kind=="edit-link"?r?(r.p(o,i),i&8&&k(r,1)):(r=ze(o),r.c(),k(r,1),r.m(t.parentNode,t)):r&&(K(),v(r,1,1,()=>{r=null}),P())},i(o){s||(k(e.$$.fragment,o),k(r),s=!0)},o(o){v(e.$$.fragment,o),v(r),s=!1},d(o){o&&(m(l),m(t)),Q(e,o),r&&r.d(o)}}}function Rt(n){return{c:L,m:L,p:L,i:L,o:L,d:L}}function Ut(n){let e,l,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Rt,then:At,catch:Ot,value:21,blocks:[,,,]};return lt(pt(new URLSearchParams(window.location.search).get("google")||""),t),{c(){e=g("div"),t.block.c(),j(e,"slot","main"),V(e,"position","relative"),V(e,"width","100%"),V(e,"height","100vh")},m(s,r){d(s,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,l=!0},p(s,r){n=s,ot(t,n,r)},i(s){l||(k(t.block),l=!0)},o(s){for(let r=0;r<3;r+=1){const o=t.blocks[r];v(o)}l=!1},d(s){s&&m(e),t.block.d(),t.token=null,t=null}}}function Wt(n){let e,l,t,s=n[4]&&Ne(n);return l=new xe({props:{$$slots:{main:[Ut],left:[Jt]},$$scope:{ctx:n}}}),{c(){s&&s.c(),e=B(),D(l.$$.fragment)},m(r,o){s&&s.m(r,o),d(r,e,o),N(l,r,o),t=!0},p(r,[o]){r[4]?s?(s.p(r,o),o&16&&k(s,1)):(s=Ne(r),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(K(),v(s,1,1,()=>{s=null}),P());const i={};o&33554463&&(i.$$scope={dirty:o,ctx:r}),l.$set(i)},i(r){t||(k(s),k(l.$$.fragment,r),t=!0)},o(r){v(s),v(l.$$.fragment,r),t=!1},d(r){r&&m(e),s&&s.d(r),Q(l,r)}}}const Fe=n=>n.properties.q1!="",Te=n=>n.properties.q2!="",je=n=>n.properties.q3!=0;function Xt(n,e,l){let t,s,r=ht(),o={kind:"neutral"},i=!1;function a(){l(0,r=[])}function c(){let S=$t(r.length);l(0,r=[...r,S]),l(3,o={kind:"edit-link",idx:r.length-1})}const u=()=>l(4,i=!1),f=S=>l(3,o={kind:"edit-link",idx:S.detail.features[0].id}),_=()=>l(3,o={kind:"neutral"});function $(S){n.$$.not_equal(r[o.idx],S)&&(r[o.idx]=S,l(0,r))}function h(S){s=S,l(2,s)}const y=()=>l(4,i=!0),J=S=>l(3,o={kind:"edit-link",idx:S}),E=()=>l(3,o={kind:"edit-question",n:1}),G=()=>l(3,o={kind:"edit-question",n:2}),W=()=>l(3,o={kind:"edit-question",n:3}),q=()=>l(3,o={kind:"neutral"});function z(){r[o.idx].properties.name=this.value,l(0,r)}function x(S){n.$$.not_equal(r[o.idx],S)&&(r[o.idx]=S,l(0,r))}const ne=()=>l(3,o={kind:"neutral"});return n.$$.update=()=>{n.$$.dirty&1&&l(1,t={type:"FeatureCollection",features:r}),n.$$.dirty&2&&window.localStorage.setItem("tmp-rcv2",JSON.stringify(t))},[r,t,s,o,i,a,c,u,f,_,$,h,y,J,E,G,W,q,z,x,ne]}class Zt extends H{constructor(e){super(),R(this,e,Xt,Wt,U,{})}}new Zt({target:document.getElementById("app")});
