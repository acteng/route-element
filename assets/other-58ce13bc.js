import{a0 as Oe,a1 as Te,a2 as x,w as P,e as C,x as R,t as y,a3 as Ie,S as H,i as Q,s as Z,A as Me,a4 as Ke,B as Pe,E as Re,h as Ne,G as w,v as $,X as b,Y as q,u as Be,j as Fe,k as qe,y as v,Z as ie,l as se,b as V,K,$ as T,a5 as Ue,H as B,c as j,J as A,r as te,m as G,f as J,I,M as We,a as ne,d as le,N,R as F,a6 as ze,a7 as ee,a8 as je,W as Y,T as W,U as He,a9 as Qe,_ as Ze,O as Xe,Q as Ge,P as Ye}from"./Layout-d4d3608c.js";function Ve(n,e){const l=e.token={};function t(i,r,o,c){if(e.token!==l)return;e.resolved=c;let s=e.ctx;o!==void 0&&(s=s.slice(),s[o]=c);const u=i&&(e.current=i)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach((_,p)=>{p!==r&&_&&(P(),C(_,1,1,()=>{e.blocks[p]===_&&(e.blocks[p]=null)}),R())}):e.block.d(1),u.c(),y(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&Ie()}if(Oe(n)){const i=Te();if(n.then(r=>{x(i),t(e.then,1,e.value,r),x(null)},r=>{if(x(i),t(e.catch,2,e.error,r),x(null),!e.hasCatch)throw r}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,n),!0;e.resolved=n}}function xe(n,e,l){const t=e.slice(),{resolved:i}=n;n.current===n.then&&(t[n.value]=i),n.current===n.catch&&(t[n.error]=i),n.block.p(t,l)}function et(n,e,l){let t;const i=Me();let{layer:r=void 0}=e;const{map:o}=Ke();Pe(n,o,a=>l(2,t=a));function c(a){i(a.type,{...a,map:o})}const s=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],u=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return Re(()=>{if(t)if(r)for(const a of s)t.off(a,r,c);else for(const a of u)t.off(a,c)}),n.$$set=a=>{"layer"in a&&l(1,r=a.layer)},n.$$.update=()=>{if(n.$$.dirty&6&&t)if(r)for(const a of s)t.on(a,r,c);else for(const a of u)t.on(a,c)},[o,r,t]}class tt extends H{constructor(e){super(),Q(this,e,et,null,Z,{layer:1})}}const nt=n=>({dialog:n&1}),ce=n=>({dialog:n[0]});function lt(n){let e,l,t,i,r;const o=n[4].default,c=Ne(o,n,n[3],ce);return{c(){e=w("dialog"),l=w("article"),c&&c.c(),e.open=!0},m(s,u){$(s,e,u),b(e,l),c&&c.m(l,null),n[6](e),t=!0,i||(r=[q(window,"click",n[1]),q(window,"keydown",n[2]),q(e,"close",n[5])],i=!0)},p(s,[u]){c&&c.p&&(!t||u&9)&&Be(c,o,s,s[3],t?qe(o,s[3],u,nt):Fe(s[3]),ce)},i(s){t||(y(c,s),t=!0)},o(s){C(c,s),t=!1},d(s){s&&v(e),c&&c.d(s),n[6](null),i=!1,ie(r)}}}function ot(n,e,l){let{$$slots:t={},$$scope:i}=e,r;function o(a){r.open&&a.target==r&&r.close()}function c(a){(a.key=="Escape"||a.key=="Enter")&&(a.stopPropagation(),r.close())}function s(a){se.call(this,n,a)}function u(a){V[a?"unshift":"push"](()=>{r=a,l(0,r)})}return n.$$set=a=>{"$$scope"in a&&l(3,i=a.$$scope)},[r,o,c,i,t,s,u]}class rt extends H{constructor(e){super(),Q(this,e,ot,lt,Z,{})}}function it(n,e){let l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",n),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function st(n){let e,l,t,i;const r=n[2].default,o=Ne(r,n,n[1],null);return{c(){e=w("a"),o&&o.c(),K(e,"href","#"),T(e,"color",n[0])},m(c,s){$(c,e,s),o&&o.m(e,null),l=!0,t||(i=q(e,"click",Ue(n[3])),t=!0)},p(c,[s]){o&&o.p&&(!l||s&2)&&Be(o,r,c,c[1],l?qe(r,c[1],s,null):Fe(c[1]),null),s&1&&T(e,"color",c[0])},i(c){l||(y(o,c),l=!0)},o(c){C(o,c),l=!1},d(c){c&&v(e),o&&o.d(c),t=!1,i()}}}function ct(n,e,l){let{$$slots:t={},$$scope:i}=e,{color:r}=e;function o(c){se.call(this,n,c)}return n.$$set=c=>{"color"in c&&l(0,r=c.color),"$$scope"in c&&l(1,i=c.$$scope)},[r,i,t,o]}class Je extends H{constructor(e){super(),Q(this,e,ct,st,Z,{color:0})}}function ae(n,e,l){const t=n.slice();return t[5]=e[l],t[6]=e,t[7]=l,t}function at(n){let e,l;return{c(){e=w("span"),l=A(),K(e,"class","dot svelte-1lzmzqo")},m(t,i){$(t,e,i),$(t,l,i)},p:N,d(t){t&&(v(e),v(l))}}}function ue(n){let e,l,t;function i(o){n[4](o,n[5],n[6],n[7])}let r={draggable:!0,$$slots:{default:[at]},$$scope:{ctx:n}};return n[5]!==void 0&&(r.lngLat=n[5]),e=new We({props:r}),V.push(()=>ne(e,"lngLat",i)),{c(){j(e.$$.fragment)},m(o,c){G(e,o,c),t=!0},p(o,c){n=o;const s={};c&256&&(s.$$scope={dirty:c,ctx:n}),!l&&c&1&&(l=!0,s.lngLat=n[5],le(()=>l=!1)),e.$set(s)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function ut(n){let e,l,t,i,r,o;e=new tt({}),e.$on("click",n[1]);let c=B(n[0].geometry.coordinates),s=[];for(let a=0;a<c.length;a+=1)s[a]=ue(ae(n,c,a));const u=a=>C(s[a],1,1,()=>{s[a]=null});return{c(){j(e.$$.fragment),l=A();for(let a=0;a<s.length;a+=1)s[a].c();t=te()},m(a,_){G(e,a,_),$(a,l,_);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(a,_);$(a,t,_),i=!0,r||(o=q(window,"keydown",n[2]),r=!0)},p(a,[_]){if(_&1){c=B(a[0].geometry.coordinates);let p;for(p=0;p<c.length;p+=1){const m=ae(a,c,p);s[p]?(s[p].p(m,_),y(s[p],1)):(s[p]=ue(m),s[p].c(),y(s[p],1),s[p].m(t.parentNode,t))}for(P(),p=c.length;p<s.length;p+=1)u(p);R()}},i(a){if(!i){y(e.$$.fragment,a);for(let _=0;_<c.length;_+=1)y(s[_]);i=!0}},o(a){C(e.$$.fragment,a),s=s.filter(Boolean);for(let _=0;_<s.length;_+=1)C(s[_]);i=!1},d(a){a&&(v(l),v(t)),J(e,a),I(s,a),r=!1,o()}}}function ft(n,e,l){let{f:t}=e,{onDone:i}=e;function r(s){t.geometry.coordinates.push(s.detail.lngLat.toArray()),l(0,t)}function o(s){s.key=="Escape"&&i()}function c(s,u,a,_){a[_]=s,l(0,t)}return n.$$set=s=>{"f"in s&&l(0,t=s.f),"onDone"in s&&l(3,i=s.onDone)},[t,r,o,i,c]}class _t extends H{constructor(e){super(),Q(this,e,ft,ut,Z,{f:0,onDone:3})}}let fe="MZEJTanw3WpxRvt7qDfo";async function pt(n){return n?{version:8,sources:{"raster-tiles":{type:"raster",tiles:[`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${await dt(n)}&key=${n}`],tileSize:256,attribution:"Google (detailed attributions not wired up)"}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:`https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=${fe}`}:`https://api.maptiler.com/maps/dataviz/style.json?key=${fe}`}async function dt(n){try{let l=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${n}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in l?l.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(l)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}function O(){return["","2","1","0","Critical"]}let z=[{name:"Street or path check",description:"Is this on-carriageway or a traffic-free path?",choices:["","Street check","Path check"]},{name:"SA03",description:"lane widths",choices:O()},{name:"SA04",description:"trip hazards",choices:O()},{name:"SA05",description:"kerbside activity",choices:O()},{name:"SA08",description:"motor traffic speed",choices:O()},{name:"SA09",description:"motor traffic volume",choices:O()},{name:"SA11",description:"footway widths",choices:O()},{name:"SA12",description:"effective width next to tram lines",choices:O()},{name:"SA13",description:"crossing angle of tram/train rails",choices:O()},{name:"SA14",description:"cycling surface and maintenance defects",choices:O()},{name:"SA15",description:"WW surface and maintenance defects",choices:O()},{name:"SA16",description:"guard railing",choices:O()}];function mt(n){let e=["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"];return{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{name:"Untitled link",color:e[n%e.length],answers:Array(z.length).fill("")}}}function ht(){try{let n=JSON.parse(window.localStorage.getItem("tmp-rcv2")||"");if("features"in n&&"answers"in n.features[0].properties)return n.features}catch{}return[]}function _e(n,e,l){const t=n.slice();return t[2]=e[l],t[3]=e,t[4]=l,t}function gt(n,e,l){const t=n.slice();return t[5]=e[l],t}function kt(n){let e;return{c(){e=w("option"),e.textContent=`${n[5]}`,e.__value=n[5],Y(e,e.__value)},m(l,t){$(l,e,t)},p:N,d(l){l&&v(e)}}}function pe(n){let e,l=n[2].name+"",t,i,r=n[2].description+"",o,c,s,u,a,_,p=B(n[2].choices),m=[];for(let d=0;d<p.length;d+=1)m[d]=kt(gt(n,p,d));function f(){n[1].call(s,n[4])}return{c(){e=w("label"),t=F(l),i=F(": "),o=F(r),c=A(),s=w("select");for(let d=0;d<m.length;d+=1)m[d].c();u=A(),n[0].properties.answers[n[4]]===void 0&&ze(f)},m(d,S){$(d,e,S),b(e,t),b(e,i),b(e,o),b(e,c),b(e,s);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(s,null);ee(s,n[0].properties.answers[n[4]],!0),b(e,u),a||(_=q(s,"change",f),a=!0)},p(d,S){n=d,S&1&&ee(s,n[0].properties.answers[n[4]])},d(d){d&&v(e),I(m,d),a=!1,_()}}}function bt(n){let e,l=B(z),t=[];for(let i=0;i<l.length;i+=1)t[i]=pe(_e(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=te()},m(i,r){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(i,r);$(i,e,r)},p(i,[r]){if(r&1){l=B(z);let o;for(o=0;o<l.length;o+=1){const c=_e(i,l,o);t[o]?t[o].p(c,r):(t[o]=pe(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:N,o:N,d(i){i&&v(e),I(t,i)}}}function $t(n,e,l){let{f:t}=e;function i(r){t.properties.answers[r]=je(this),l(0,t)}return n.$$set=r=>{"f"in r&&l(0,t=r.f)},[t,i]}class vt extends H{constructor(e){super(),Q(this,e,$t,bt,Z,{f:0})}}function de(n,e,l){const t=n.slice();return t[2]=e[l],t[4]=l,t}function me(n,e,l){const t=n.slice();t[5]=e[l];const i=t[5].properties.answers[t[4]];return t[6]=i,t}function he(n,e,l){const t=n.slice();return t[5]=e[l],t}function ge(n){let e,l=n[5].properties.name+"",t;return{c(){e=w("th"),t=F(l),T(e,"color",n[5].properties.color)},m(i,r){$(i,e,r),b(e,t)},p(i,r){r&1&&l!==(l=i[5].properties.name+"")&&W(t,l),r&1&&T(e,"color",i[5].properties.color)},d(i){i&&v(e)}}}function ke(n){let e,l=n[6]+"",t;return{c(){e=w("td"),t=F(l),T(e,"background",n[6]==""?"red":"green")},m(i,r){$(i,e,r),b(e,t)},p(i,r){r&1&&l!==(l=i[6]+"")&&W(t,l),r&1&&T(e,"background",i[6]==""?"red":"green")},d(i){i&&v(e)}}}function be(n){let e,l,t,i,r=B(n[0]),o=[];for(let c=0;c<r.length;c+=1)o[c]=ke(me(n,r,c));return{c(){e=w("tr"),l=w("th"),l.textContent=`${n[2].name}`,t=A();for(let c=0;c<o.length;c+=1)o[c].c();i=A()},m(c,s){$(c,e,s),b(e,l),b(e,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);b(e,i)},p(c,s){if(s&1){r=B(c[0]);let u;for(u=0;u<r.length;u+=1){const a=me(c,r,u);o[u]?o[u].p(a,s):(o[u]=ke(a),o[u].c(),o[u].m(e,i))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(c){c&&v(e),I(o,c)}}}function wt(n){let e,l,t,i,r,o,c,s=B(n[0]),u=[];for(let p=0;p<s.length;p+=1)u[p]=ge(he(n,s,p));let a=B(z),_=[];for(let p=0;p<a.length;p+=1)_[p]=be(de(n,a,p));return{c(){e=w("table"),l=w("thead"),t=w("tr"),i=w("th"),r=A();for(let p=0;p<u.length;p+=1)u[p].c();o=A(),c=w("tbody");for(let p=0;p<_.length;p+=1)_[p].c()},m(p,m){$(p,e,m),b(e,l),b(l,t),b(t,i),b(t,r);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null);b(e,o),b(e,c);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(c,null)},p(p,m){if(m&1){s=B(p[0]);let f;for(f=0;f<s.length;f+=1){const d=he(p,s,f);u[f]?u[f].p(d,m):(u[f]=ge(d),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}if(m&1){a=B(z);let f;for(f=0;f<a.length;f+=1){const d=de(p,a,f);_[f]?_[f].p(d,m):(_[f]=be(d),_[f].c(),_[f].m(c,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=a.length}},d(p){p&&v(e),I(u,p),I(_,p)}}}function yt(n){let e,l;return e=new rt({props:{$$slots:{default:[wt]},$$scope:{ctx:n}}}),e.$on("close",n[1]),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p(t,[i]){const r={};i&2049&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ct(n,e,l){let{links:t}=e;function i(r){se.call(this,n,r)}return n.$$set=r=>{"links"in r&&l(0,t=r.links)},[t,i]}class St extends H{constructor(e){super(),Q(this,e,Ct,yt,Z,{links:0})}}const{window:Lt}=Qe;function $e(n,e,l){const t=n.slice();return t[27]=e[l],t[29]=e,t[26]=l,t}function ve(n,e,l){const t=n.slice();return t[30]=e[l],t}function we(n,e,l){const t=n.slice();return t[24]=e[l],t[26]=l,t}function ye(n,e,l){const t=n.slice();return t[27]=e[l],t[26]=l,t}function Ce(n){let e,l;return e=new St({props:{links:n[0]}}),e.$on("close",n[8]),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p(t,i){const r={};i[0]&1&&(r.links=t[0]),e.$set(r)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Et(n){let e,l,t,i=z[n[3].idx].name+"",r,o,c=z[n[3].idx].description+"",s,u,a,_,p,m=B(n[0]),f=[];for(let d=0;d<m.length;d+=1)f[d]=Le($e(n,m,d));return{c(){e=w("button"),e.textContent="Done",l=A(),t=w("h2"),r=F(i),o=F(": "),s=F(c),u=A(),a=w("ol");for(let d=0;d<f.length;d+=1)f[d].c()},m(d,S){$(d,e,S),$(d,l,S),$(d,t,S),b(t,r),b(t,o),b(t,s),$(d,u,S),$(d,a,S);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(a,null);_||(p=q(e,"click",n[21]),_=!0)},p(d,S){if(S[0]&8&&i!==(i=z[d[3].idx].name+"")&&W(r,i),S[0]&8&&c!==(c=z[d[3].idx].description+"")&&W(s,c),S[0]&9){m=B(d[0]);let h;for(h=0;h<m.length;h+=1){const X=$e(d,m,h);f[h]?f[h].p(X,S):(f[h]=Le(X),f[h].c(),f[h].m(a,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=m.length}},i:N,o:N,d(d){d&&(v(e),v(l),v(t),v(u),v(a)),I(f,d),_=!1,p()}}}function At(n){let e,l,t,i,r,o,c,s,u,a,_;function p(f){n[20](f)}let m={};return n[0][n[3].idx]!==void 0&&(m.f=n[0][n[3].idx]),c=new vt({props:m}),V.push(()=>ne(c,"f",p)),{c(){e=w("button"),e.textContent="Done",l=A(),t=w("label"),i=F(`Name:
        `),r=w("input"),o=A(),j(c.$$.fragment),K(r,"type","text")},m(f,d){$(f,e,d),$(f,l,d),$(f,t,d),b(t,i),b(t,r),Y(r,n[0][n[3].idx].properties.name),$(f,o,d),G(c,f,d),u=!0,a||(_=[q(e,"click",n[18]),q(r,"input",n[19])],a=!0)},p(f,d){d[0]&9&&r.value!==f[0][f[3].idx].properties.name&&Y(r,f[0][f[3].idx].properties.name);const S={};!s&&d[0]&9&&(s=!0,S.f=f[0][f[3].idx],le(()=>s=!1)),c.$set(S)},i(f){u||(y(c.$$.fragment,f),u=!0)},o(f){C(c.$$.fragment,f),u=!1},d(f){f&&(v(e),v(l),v(t),v(o)),J(c,f),a=!1,ie(_)}}}function Dt(n){let e,l,t,i,r,o,c,s,u,a,_,p,m,f,d,S=B(n[0]),h=[];for(let k=0;k<S.length;k+=1)h[k]=Ee(ye(n,S,k));const X=k=>C(h[k],1,1,()=>{h[k]=null});let M=B(z),E=[];for(let k=0;k<M.length;k+=1)E[k]=Ae(we(n,M,k));const oe=k=>C(E[k],1,1,()=>{E[k]=null});return{c(){e=w("div"),l=w("button"),l.textContent="New link",t=A(),i=w("button"),i.textContent="Clear",r=A(),o=w("button"),o.textContent="Table of questions",c=A(),s=w("button"),s.textContent="Download",u=F(`

      Links:
      `),a=w("ol");for(let k=0;k<h.length;k+=1)h[k].c();_=F(`

      Questions:
      `),p=w("ol");for(let k=0;k<E.length;k+=1)E[k].c()},m(k,L){$(k,e,L),b(e,l),b(e,t),b(e,i),b(e,r),b(e,o),b(e,c),b(e,s),$(k,u,L),$(k,a,L);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(a,null);$(k,_,L),$(k,p,L);for(let g=0;g<E.length;g+=1)E[g]&&E[g].m(p,null);m=!0,f||(d=[q(l,"click",n[6]),q(i,"click",n[5]),q(o,"click",n[13]),q(s,"click",n[14])],f=!0)},p(k,L){if(L[0]&9){S=B(k[0]);let g;for(g=0;g<S.length;g+=1){const U=ye(k,S,g);h[g]?(h[g].p(U,L),y(h[g],1)):(h[g]=Ee(U),h[g].c(),y(h[g],1),h[g].m(a,null))}for(P(),g=S.length;g<h.length;g+=1)X(g);R()}if(L[0]&9){M=B(z);let g;for(g=0;g<M.length;g+=1){const U=we(k,M,g);E[g]?(E[g].p(U,L),y(E[g],1)):(E[g]=Ae(U),E[g].c(),y(E[g],1),E[g].m(p,null))}for(P(),g=M.length;g<E.length;g+=1)oe(g);R()}},i(k){if(!m){for(let L=0;L<S.length;L+=1)y(h[L]);for(let L=0;L<M.length;L+=1)y(E[L]);m=!0}},o(k){h=h.filter(Boolean);for(let L=0;L<h.length;L+=1)C(h[L]);E=E.filter(Boolean);for(let L=0;L<E.length;L+=1)C(E[L]);m=!1},d(k){k&&(v(e),v(u),v(a),v(_),v(p)),I(h,k),I(E,k),f=!1,ie(d)}}}function Se(n){let e,l=n[30]+"",t,i;return{c(){e=w("option"),t=F(l),e.__value=i=n[30],Y(e,e.__value)},m(r,o){$(r,e,o),b(e,t)},p(r,o){o[0]&8&&l!==(l=r[30]+"")&&W(t,l),o[0]&8&&i!==(i=r[30])&&(e.__value=i,Y(e,e.__value))},d(r){r&&v(e)}}}function Le(n){let e,l,t=n[27].properties.name+"",i,r,o,c,s,u,a=B(z[n[3].idx].choices),_=[];for(let m=0;m<a.length;m+=1)_[m]=Se(ve(n,a,m));function p(){n[22].call(o,n[29],n[26])}return{c(){e=w("li"),l=w("span"),i=F(t),r=A(),o=w("select");for(let m=0;m<_.length;m+=1)_[m].c();c=A(),T(l,"color",n[27].properties.color),n[27].properties.answers[n[3].idx]===void 0&&ze(p)},m(m,f){$(m,e,f),b(e,l),b(l,i),b(e,r),b(e,o);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(o,null);ee(o,n[27].properties.answers[n[3].idx],!0),b(e,c),s||(u=q(o,"change",p),s=!0)},p(m,f){if(n=m,f[0]&1&&t!==(t=n[27].properties.name+"")&&W(i,t),f[0]&1&&T(l,"color",n[27].properties.color),f[0]&8){a=B(z[n[3].idx].choices);let d;for(d=0;d<a.length;d+=1){const S=ve(n,a,d);_[d]?_[d].p(S,f):(_[d]=Se(S),_[d].c(),_[d].m(o,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=a.length}f[0]&9&&ee(o,n[27].properties.answers[n[3].idx])},d(m){m&&v(e),I(_,m),s=!1,u()}}}function Nt(n){let e=n[27].properties.name+"",l;return{c(){l=F(e)},m(t,i){$(t,l,i)},p(t,i){i[0]&1&&e!==(e=t[27].properties.name+"")&&W(l,e)},d(t){t&&v(l)}}}function Ee(n){let e,l,t,i;function r(){return n[15](n[26])}return l=new Je({props:{color:n[27].properties.color,$$slots:{default:[Nt]},$$scope:{ctx:n}}}),l.$on("click",r),{c(){e=w("li"),j(l.$$.fragment),t=A()},m(o,c){$(o,e,c),G(l,e,null),b(e,t),i=!0},p(o,c){n=o;const s={};c[0]&1&&(s.color=n[27].properties.color),c[0]&1|c[1]&4&&(s.$$scope={dirty:c,ctx:n}),l.$set(s)},i(o){i||(y(l.$$.fragment,o),i=!0)},o(o){C(l.$$.fragment,o),i=!1},d(o){o&&v(e),J(l)}}}function Bt(n){let e=n[24].name+"",l,t;return{c(){l=F(e),t=A()},m(i,r){$(i,l,r),$(i,t,r)},p:N,d(i){i&&(v(l),v(t))}}}function Ae(n){let e,l,t,i,r,o,c,s;function u(){return n[16](n[26])}l=new Je({props:{$$slots:{default:[Bt]},$$scope:{ctx:n}}}),l.$on("click",u);function a(..._){return n[17](n[26],..._)}return{c(){e=w("li"),j(l.$$.fragment),t=F(`:
            `),i=w("progress"),c=A(),i.value=r=n[0].filter(a).length,K(i,"max",o=n[0].length),K(i,"class","svelte-zadug4")},m(_,p){$(_,e,p),G(l,e,null),b(e,t),b(e,i),b(e,c),s=!0},p(_,p){n=_;const m={};p[1]&4&&(m.$$scope={dirty:p,ctx:n}),l.$set(m),(!s||p[0]&9&&r!==(r=n[0].filter(a).length))&&(i.value=r),(!s||p[0]&9&&o!==(o=n[0].length))&&K(i,"max",o)},i(_){s||(y(l.$$.fragment,_),s=!0)},o(_){C(l.$$.fragment,_),s=!1},d(_){_&&v(e),J(l)}}}function Ft(n){let e,l,t,i;const r=[Dt,At,Et],o=[];function c(s,u){return s[3].kind=="neutral"?0:s[3].kind=="edit-link"?1:s[3].kind=="edit-question"?2:-1}return~(l=c(n))&&(t=o[l]=r[l](n)),{c(){e=w("div"),t&&t.c(),K(e,"slot","left")},m(s,u){$(s,e,u),~l&&o[l].m(e,null),i=!0},p(s,u){let a=l;l=c(s),l===a?~l&&o[l].p(s,u):(t&&(P(),C(o[a],1,1,()=>{o[a]=null}),R()),~l?(t=o[l],t?t.p(s,u):(t=o[l]=r[l](s),t.c()),y(t,1),t.m(e,null)):t=null)},i(s){i||(y(t),i=!0)},o(s){C(t),i=!1},d(s){s&&v(e),~l&&o[l].d()}}}function qt(n){return{c:N,m:N,p:N,i:N,o:N,d:N}}function zt(n){let e,l,t;function i(o){n[12](o)}let r={style:n[23],standardControls:!0,hash:!0,$$slots:{default:[Ot]},$$scope:{ctx:n}};return n[2]!==void 0&&(r.map=n[2]),e=new Ze({props:r}),V.push(()=>ne(e,"map",i)),{c(){j(e.$$.fragment)},m(o,c){G(e,o,c),t=!0},p(o,c){const s={};c[0]&11|c[1]&4&&(s.$$scope={dirty:c,ctx:o}),!l&&c[0]&4&&(l=!0,s.map=o[2],le(()=>l=!1)),e.$set(s)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function jt(n){let e,l;return e=new Ge({props:{paint:{"line-color":["case",["==",["id"],n[3].idx],["get","color"],"black"],"line-opacity":["case",["==",["id"],n[3].idx],1,.5],"line-width":6}}}),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p(t,i){const r={};i[0]&8&&(r.paint={"line-color":["case",["==",["id"],t[3].idx],["get","color"],"black"],"line-opacity":["case",["==",["id"],t[3].idx],1,.5],"line-width":6}),e.$set(r)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Gt(n){let e,l;return e=new Ge({props:{manageHoverState:!0,paint:{"line-color":["get","color"],"line-width":Ye(6,9)},hoverCursor:"pointer"}}),e.$on("click",n[9]),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p:N,i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Jt(n){let e,l,t,i;const r=[Gt,jt],o=[];function c(s,u){return s[3].kind=="neutral"||s[3].kind=="edit-question"?0:s[3].kind=="edit-link"?1:-1}return~(e=c(n))&&(l=o[e]=r[e](n)),{c(){l&&l.c(),t=te()},m(s,u){~e&&o[e].m(s,u),$(s,t,u),i=!0},p(s,u){let a=e;e=c(s),e===a?~e&&o[e].p(s,u):(l&&(P(),C(o[a],1,1,()=>{o[a]=null}),R()),~e?(l=o[e],l?l.p(s,u):(l=o[e]=r[e](s),l.c()),y(l,1),l.m(t.parentNode,t)):l=null)},i(s){i||(y(l),i=!0)},o(s){C(l),i=!1},d(s){s&&v(t),~e&&o[e].d(s)}}}function De(n){let e,l,t;function i(o){n[11](o)}let r={onDone:n[10]};return n[0][n[3].idx]!==void 0&&(r.f=n[0][n[3].idx]),e=new _t({props:r}),V.push(()=>ne(e,"f",i)),{c(){j(e.$$.fragment)},m(o,c){G(e,o,c),t=!0},p(o,c){const s={};c[0]&8&&(s.onDone=o[10]),!l&&c[0]&9&&(l=!0,s.f=o[0][o[3].idx],le(()=>l=!1)),e.$set(s)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function Ot(n){let e,l,t,i;e=new Xe({props:{data:n[1],generateId:!0,$$slots:{default:[Jt]},$$scope:{ctx:n}}});let r=n[3].kind=="edit-link"&&De(n);return{c(){j(e.$$.fragment),l=A(),r&&r.c(),t=te()},m(o,c){G(e,o,c),$(o,l,c),r&&r.m(o,c),$(o,t,c),i=!0},p(o,c){const s={};c[0]&2&&(s.data=o[1]),c[0]&8|c[1]&4&&(s.$$scope={dirty:c,ctx:o}),e.$set(s),o[3].kind=="edit-link"?r?(r.p(o,c),c[0]&8&&y(r,1)):(r=De(o),r.c(),y(r,1),r.m(t.parentNode,t)):r&&(P(),C(r,1,1,()=>{r=null}),R())},i(o){i||(y(e.$$.fragment,o),y(r),i=!0)},o(o){C(e.$$.fragment,o),C(r),i=!1},d(o){o&&(v(l),v(t)),J(e,o),r&&r.d(o)}}}function Tt(n){return{c:N,m:N,p:N,i:N,o:N,d:N}}function It(n){let e,l,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Tt,then:zt,catch:qt,value:23,blocks:[,,,]};return Ve(pt(new URLSearchParams(window.location.search).get("google")||""),t),{c(){e=w("div"),t.block.c(),K(e,"slot","main"),T(e,"position","relative"),T(e,"width","100%"),T(e,"height","100vh")},m(i,r){$(i,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,l=!0},p(i,r){n=i,xe(t,n,r)},i(i){l||(y(t.block),l=!0)},o(i){for(let r=0;r<3;r+=1){const o=t.blocks[r];C(o)}l=!1},d(i){i&&v(e),t.block.d(),t.token=null,t=null}}}function Mt(n){let e,l,t,i,r,o=n[4]&&Ce(n);return l=new He({props:{$$slots:{main:[It],left:[Ft]},$$scope:{ctx:n}}}),{c(){o&&o.c(),e=A(),j(l.$$.fragment)},m(c,s){o&&o.m(c,s),$(c,e,s),G(l,c,s),t=!0,i||(r=q(Lt,"keydown",n[7]),i=!0)},p(c,s){c[4]?o?(o.p(c,s),s[0]&16&&y(o,1)):(o=Ce(c),o.c(),y(o,1),o.m(e.parentNode,e)):o&&(P(),C(o,1,1,()=>{o=null}),R());const u={};s[0]&31|s[1]&4&&(u.$$scope={dirty:s,ctx:c}),l.$set(u)},i(c){t||(y(o),y(l.$$.fragment,c),t=!0)},o(c){C(o),C(l.$$.fragment,c),t=!1},d(c){c&&v(e),o&&o.d(c),J(l,c),i=!1,r()}}}function Kt(n,e,l){let t,i,r=ht(),o={kind:"neutral"},c=!1;function s(){l(0,r=[])}function u(){let D=mt(r.length);l(0,r=[...r,D]),l(3,o={kind:"edit-link",idx:r.length-1})}function a(D){D.key=="Escape"&&o.kind=="edit-question"&&l(3,o={kind:"neutral"})}const _=()=>l(4,c=!1),p=D=>l(3,o={kind:"edit-link",idx:D.detail.features[0].id}),m=()=>l(3,o={kind:"neutral"});function f(D){n.$$.not_equal(r[o.idx],D)&&(r[o.idx]=D,l(0,r))}function d(D){i=D,l(2,i)}const S=()=>l(4,c=!0),h=()=>it("rcv2.geojson",JSON.stringify(t)),X=D=>l(3,o={kind:"edit-link",idx:D}),M=D=>l(3,o={kind:"edit-question",idx:D}),E=(D,re)=>re.properties.answers[D]!="",oe=()=>l(3,o={kind:"neutral"});function k(){r[o.idx].properties.name=this.value,l(0,r),l(3,o)}function L(D){n.$$.not_equal(r[o.idx],D)&&(r[o.idx]=D,l(0,r))}const g=()=>l(3,o={kind:"neutral"});function U(D,re){D[re].properties.answers[o.idx]=je(this),l(0,r),l(3,o)}return n.$$.update=()=>{n.$$.dirty[0]&1&&l(1,t={type:"FeatureCollection",features:r}),n.$$.dirty[0]&2&&window.localStorage.setItem("tmp-rcv2",JSON.stringify(t))},[r,t,i,o,c,s,u,a,_,p,m,f,d,S,h,X,M,E,oe,k,L,g,U]}class Pt extends H{constructor(e){super(),Q(this,e,Kt,Mt,Z,{},null,[-1,-1])}}new Pt({target:document.getElementById("app")});
