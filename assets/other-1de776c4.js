import{S as x,i as ee,s as te,L as Ce,l as Y,w as ne,x as C,y as I,z as le,f as $,h as w,A as O,B as Ie,c as Oe,u as ze,g as Ne,d as Te,r as K,af as Q,ao as Me,U as ge,C as Je,b as g,D as ye,E as ke,j as d,X as He,a3 as Ee,e as y,N as S,a as W,M as we,$ as X,aj as fe,a0 as Le,a1 as Fe,a8 as oe,Q as k,R,al as Re,am as Ue,_ as Ae,Z as re,p,q as Z,Y as Se,an as Ge,a2 as ie,ad as qe,ap as Be}from"./index-c911fc8b.js";function Pe(o){let e;const n=o[15].default,t=Oe(n,o,o[23],null);return{c(){t&&t.c()},m(l,s){t&&t.m(l,s),e=!0},p(l,s){t&&t.p&&(!e||s&8388608)&&ze(t,n,l,l[23],e?Te(n,l[23],s,null):Ne(l[23]),null)},i(l){e||($(t,l),e=!0)},o(l){w(t,l),e=!1},d(l){t&&t.d(l)}}}function De(o){let e,n,t;function l(a){o[16](a)}let s={id:o[1],type:"fill",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[Pe]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.hovered=o[0]),e=new Ce({props:s}),Y.push(()=>ne(e,"hovered",l)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){C(e.$$.fragment)},m(a,i){I(e,a,i),t=!0},p(a,[i]){const r={};i&2&&(r.id=a[1]),i&4&&(r.source=a[2]),i&8&&(r.sourceLayer=a[3]),i&16&&(r.beforeId=a[4]),i&32&&(r.beforeLayerType=a[5]),i&64&&(r.paint=a[6]),i&128&&(r.layout=a[7]),i&256&&(r.filter=a[8]),i&512&&(r.minzoom=a[9]),i&1024&&(r.maxzoom=a[10]),i&2048&&(r.hoverCursor=a[11]),i&4096&&(r.manageHoverState=a[12]),i&8192&&(r.eventsIfTopMost=a[13]),i&16384&&(r.interactive=a[14]),i&8388608&&(r.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,r.hovered=a[0],le(()=>n=!1)),e.$set(r)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function We(o,e,n){let{$$slots:t={},$$scope:l}=e,{id:s=Ie("fill")}=e,{source:a=void 0}=e,{sourceLayer:i=void 0}=e,{beforeId:r=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:_}=e,{layout:h=void 0}=e,{filter:m=void 0}=e,{minzoom:b=void 0}=e,{maxzoom:v=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:U=!1}=e,{hovered:H=null}=e,{eventsIfTopMost:E=!1}=e,{interactive:z=!0}=e;function A(f){H=f,n(0,H)}function j(f){K.call(this,o,f)}function G(f){K.call(this,o,f)}function q(f){K.call(this,o,f)}function F(f){K.call(this,o,f)}function c(f){K.call(this,o,f)}function L(f){K.call(this,o,f)}return o.$$set=f=>{"id"in f&&n(1,s=f.id),"source"in f&&n(2,a=f.source),"sourceLayer"in f&&n(3,i=f.sourceLayer),"beforeId"in f&&n(4,r=f.beforeId),"beforeLayerType"in f&&n(5,u=f.beforeLayerType),"paint"in f&&n(6,_=f.paint),"layout"in f&&n(7,h=f.layout),"filter"in f&&n(8,m=f.filter),"minzoom"in f&&n(9,b=f.minzoom),"maxzoom"in f&&n(10,v=f.maxzoom),"hoverCursor"in f&&n(11,T=f.hoverCursor),"manageHoverState"in f&&n(12,U=f.manageHoverState),"hovered"in f&&n(0,H=f.hovered),"eventsIfTopMost"in f&&n(13,E=f.eventsIfTopMost),"interactive"in f&&n(14,z=f.interactive),"$$scope"in f&&n(23,l=f.$$scope)},[H,s,a,i,r,u,_,h,m,b,v,T,U,E,z,t,A,j,G,q,F,c,L,l]}class je extends x{constructor(e){super(),ee(this,e,We,De,te,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function ue(){return{length:0,ruc:Q(),pop_density:Q(),os_nodes:Q(),os_links:Q()}}function Ze(o,e){o.fitBounds(Me(e),{animate:!1,padding:10})}function de(o,e,n){const t=o.slice();return t[2]=e[n],t[3]=e,t[4]=n,t}function Ke(o){let e,n;return{c(){e=y("span"),n=S(),W(e,"class","dot svelte-1jnewjk")},m(t,l){g(t,e,l),g(t,n,l)},p:we,d(t){t&&(d(e),d(n))}}}function he(o){let e,n,t;function l(a){o[1](a,o[2],o[3],o[4])}let s={draggable:!0,$$slots:{default:[Ke]},$$scope:{ctx:o}};return o[2]!==void 0&&(s.lngLat=o[2]),e=new Ee({props:s}),Y.push(()=>ne(e,"lngLat",l)),{c(){C(e.$$.fragment)},m(a,i){I(e,a,i),t=!0},p(a,i){o=a;const r={};i&32&&(r.$$scope={dirty:i,ctx:o}),!n&&i&1&&(n=!0,r.lngLat=o[2],le(()=>n=!1)),e.$set(r)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function Qe(o){let e,n,t=ge(o[0].geometry.coordinates),l=[];for(let a=0;a<t.length;a+=1)l[a]=he(de(o,t,a));const s=a=>w(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=Je()},m(a,i){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(a,i);g(a,e,i),n=!0},p(a,[i]){if(i&1){t=ge(a[0].geometry.coordinates);let r;for(r=0;r<t.length;r+=1){const u=de(a,t,r);l[r]?(l[r].p(u,i),$(l[r],1)):(l[r]=he(u),l[r].c(),$(l[r],1),l[r].m(e.parentNode,e))}for(ye(),r=t.length;r<l.length;r+=1)s(r);ke()}},i(a){if(!n){for(let i=0;i<t.length;i+=1)$(l[i]);n=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)w(l[i]);n=!1},d(a){a&&d(e),He(l,a)}}}function Xe(o,e,n){let{f:t}=e;function l(s,a,i,r){i[r]=s,n(0,t)}return o.$$set=s=>{"f"in s&&n(0,t=s.f)},[t,l]}class Ye extends x{constructor(e){super(),ee(this,e,Xe,Qe,te,{f:0})}}let Ve={type:"FeatureCollection",features:[{geometry:{coordinates:[[.478565,51.73336],[.478498,51.733405],[.478425,51.733453],[.478651,51.733573],[.478809,51.73365],[.479056,51.733785],[.479263,51.733919],[.479302,51.733944],[.479226,51.73399],[.479209,51.734006],[.479211,51.734026],[.479234,51.734045],[.47932,51.734099],[.47935,51.734109],[.479389,51.734104],[.479474,51.734055],[.47956,51.73411],[.479775,51.734254],[.479955,51.734368],[.480088,51.734452],[.480197,51.734522],[.480595,51.734767],[.480841,51.734929],[.481007,51.735066],[.481037,51.735091],[.481156,51.735179],[.481317,51.735279],[.481481,51.735376],[.481683,51.735503],[.481898,51.735633],[.481942,51.735663],[.482001,51.735705],[.482029,51.735722],[.482521,51.736039],[.482744,51.736182],[.483052,51.736362],[.483361,51.736529],[.483455,51.736583],[.483983,51.736886],[.484567,51.737215],[.484809,51.737351],[.484911,51.737406],[.485008,51.737461],[.48511,51.737519],[.485192,51.737561],[.485822,51.737882],[.485922,51.737936],[.486386,51.738187],[.48648,51.738238],[.486635,51.738321],[.486696,51.738355],[.487031,51.738539],[.487561,51.738844],[.488015,51.739107],[.48841,51.739289],[.488586,51.73937],[.488747,51.739444],[.489667,51.739958],[.489855,51.740063],[.490036,51.740164],[.490426,51.740364],[.491118,51.7407],[.491254,51.740766],[.491455,51.740863],[.491963,51.741105],[.492088,51.741162],[.49258,51.741391],[.493183,51.741707],[.493659,51.741943],[.493891,51.742057],[.494049,51.742131],[.494995,51.742574],[.495073,51.742616],[.495176,51.742666],[.495541,51.742843],[.495829,51.742974],[.495982,51.743042],[.496217,51.743161],[.496896,51.743545],[.49704,51.743616],[.497294,51.743741],[.497449,51.743817],[.497883,51.744029],[.498148,51.744149],[.498612,51.744359],[.498682,51.74439],[.499155,51.744602],[.499591,51.744798],[.500039,51.744984],[.500213,51.745104],[.500285,51.745168],[.500276,51.745218],[.500287,51.745247],[.500316,51.745285],[.500353,51.745305],[.500406,51.745324],[.500474,51.745332],[.500574,51.745393],[.500674,51.745455],[.500922,51.745627],[.501165,51.745815],[.501355,51.746007],[.50162,51.746343],[.501753,51.746529],[.501839,51.746629],[.501871,51.74667],[.501893,51.746693],[.501993,51.746835],[.502177,51.747],[.502222,51.74706],[.502212,51.747094],[.502166,51.747142],[.502144,51.747153],[.502125,51.747163],[.50174,51.747332],[.501496,51.747421],[.500837,51.747675],[.50057,51.747773],[.500066,51.747943],[.499498,51.748136],[.499337,51.748192],[.499201,51.74825],[.498687,51.748445],[.498292,51.748616],[.498011,51.748756],[.497805,51.748856],[.497764,51.74883],[.497652,51.748898],[.497556,51.748951],[.497465,51.749011],[.497268,51.749142],[.496528,51.749724],[.496409,51.749813],[.496306,51.749899],[.496263,51.749924],[.496186,51.749983],[.49596,51.750174],[.495849,51.750263],[.495776,51.750322],[.495555,51.750528],[.495427,51.750643],[.495256,51.750822],[.4951,51.751005],[.495037,51.751088],[.495007,51.751138],[.494993,51.751202],[.494965,51.751266],[.494936,51.751297],[.494839,51.75132],[.494793,51.751327],[.49479,51.751356],[.494789,51.751408],[.494828,51.751428],[.494856,51.75146],[.494857,51.751497],[.49485,51.75153],[.494808,51.751706],[.494741,51.751979],[.49465,51.752214],[.49454,51.752417],[.49443,51.752565],[.494261,51.752736],[.493924,51.752979],[.493746,51.753115],[.49335,51.753407],[.493261,51.753475],[.492975,51.753707],[.492879,51.753802],[.492769,51.753921],[.492735,51.753915],[.492375,51.75386],[.4923,51.753843],[.492261,51.753834],[.4922,51.753904],[.492139,51.753895],[.492177,51.753834],[.492214,51.753797],[.492236,51.75377],[.492237,51.753743],[.49222,51.75371],[.492195,51.753686],[.492145,51.753668],[.492043,51.753643],[.49193,51.753622],[.491649,51.753577],[.491403,51.753541],[.491063,51.753498],[.490961,51.753745]],type:"LineString"},properties:{},type:"Feature"},{type:"Feature",properties:{},geometry:{coordinates:[[-.8876338067753693,52.23771961572791],[-.8722240821606704,52.239055374398475],[-.8741210869435747,52.24282954959838],[-.8684328688797791,52.248692578424254],[-.8698547643610652,52.25223365618476],[-.8661103062913185,52.25310368912446]],type:"LineString"}}]};function xe(o){let e=o[2].ruc11+"",n;return{c(){n=k(e)},m(t,l){g(t,n,l)},p(t,l){l&4&&e!==(e=t[2].ruc11+"")&&R(n,e)},d(t){t&&d(n)}}}function et(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[xe,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function tt(o){let e,n;return e=new je({props:{manageHoverState:!0,layout:{visibility:o[1]=="ruc"?"visible":"none"},paint:{"fill-color":["case",["in","Urban",["get","ruc11"]],"orange","green"],"fill-opacity":fe(.3,.5)},$$slots:{default:[et]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="ruc"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function nt(o){let e=o[2].pop_density+"",n,t;return{c(){n=k(e),t=k(" people / square km")},m(l,s){g(l,n,s),g(l,t,s)},p(l,s){s&4&&e!==(e=l[2].pop_density+"")&&R(n,e)},d(l){l&&(d(n),d(t))}}}function lt(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[nt,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function ot(o){let e,n;return e=new je({props:{manageHoverState:!0,layout:{visibility:o[1]=="pop_density"?"visible":"none"},paint:{"fill-color":"blue","fill-opacity":fe(.3,.5)},$$slots:{default:[lt]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="pop_density"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function st(o){let e=o[2].road_classification+"",n;return{c(){n=k(e)},m(t,l){g(t,n,l)},p(t,l){l&4&&e!==(e=t[2].road_classification+"")&&R(n,e)},d(t){t&&d(n)}}}function at(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[st,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function rt(o){let e,n;return e=new Le({props:{layout:{visibility:o[1]=="os_network"?"visible":"none"},paint:{"line-width":3,"line-color":"black"},$$slots:{default:[at]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="os_network"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function it(o){let e=o[2].id+"",n;return{c(){n=k(e)},m(t,l){g(t,n,l)},p(t,l){l&4&&e!==(e=t[2].id+"")&&R(n,e)},d(t){t&&d(n)}}}function ut(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[it,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function ft(o){let e,n;return e=new Fe({props:{manageHoverState:!0,layout:{visibility:o[1]=="os_network"?"visible":"none"},paint:{"circle-color":"green","circle-radius":fe(5,8)},$$slots:{default:[ut]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="os_network"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function _t(o){let e,n,t,l,s,a,i,r;return e=new X({props:{data:o[0].ruc,$$slots:{default:[tt]},$$scope:{ctx:o}}}),t=new X({props:{data:o[0].pop_density,$$slots:{default:[ot]},$$scope:{ctx:o}}}),s=new X({props:{data:o[0].os_links,$$slots:{default:[rt]},$$scope:{ctx:o}}}),i=new X({props:{data:o[0].os_nodes,$$slots:{default:[ft]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment),n=S(),C(t.$$.fragment),l=S(),C(s.$$.fragment),a=S(),C(i.$$.fragment)},m(u,_){I(e,u,_),g(u,n,_),I(t,u,_),g(u,l,_),I(s,u,_),g(u,a,_),I(i,u,_),r=!0},p(u,[_]){const h={};_&1&&(h.data=u[0].ruc),_&10&&(h.$$scope={dirty:_,ctx:u}),e.$set(h);const m={};_&1&&(m.data=u[0].pop_density),_&10&&(m.$$scope={dirty:_,ctx:u}),t.$set(m);const b={};_&1&&(b.data=u[0].os_links),_&10&&(b.$$scope={dirty:_,ctx:u}),s.$set(b);const v={};_&1&&(v.data=u[0].os_nodes),_&10&&(v.$$scope={dirty:_,ctx:u}),i.$set(v)},i(u){r||($(e.$$.fragment,u),$(t.$$.fragment,u),$(s.$$.fragment,u),$(i.$$.fragment,u),r=!0)},o(u){w(e.$$.fragment,u),w(t.$$.fragment,u),w(s.$$.fragment,u),w(i.$$.fragment,u),r=!1},d(u){u&&(d(n),d(l),d(a)),O(e,u),O(t,u),O(s,u),O(i,u)}}}function pt(o,e,n){let{output:t}=e,{show:l}=e;return o.$$set=s=>{"output"in s&&n(0,t=s.output),"show"in s&&n(1,l=s.show)},[t,l]}class ct extends x{constructor(e){super(),ee(this,e,pt,_t,te,{output:0,show:1})}}function be(o){let e,n,t=o[0]+1+"",l,s,a=o[5].features.length+"",i,r,u,_,h;return{c(){e=y("button"),e.textContent="Prev",n=S(),l=k(t),s=k(" / "),i=k(a),r=S(),u=y("button"),u.textContent="Next"},m(m,b){g(m,e,b),g(m,n,b),g(m,l,b),g(m,s,b),g(m,i,b),g(m,r,b),g(m,u,b),_||(h=[Z(e,"click",o[15]),Z(u,"click",o[16])],_=!0)},p(m,b){b&1&&t!==(t=m[0]+1+"")&&R(l,t),b&32&&a!==(a=m[5].features.length+"")&&R(i,a)},d(m){m&&(d(e),d(n),d(l),d(s),d(i),d(r),d(u)),_=!1,Se(h)}}}function mt(o){let e,n,t=Math.round(o[1].length)+"",l,s,a,i,r,u,_=o[1].ruc.features.length-o[8]+"",h,m,b,v,T=o[1].os_links.features.length+"",U,H,E=o[1].os_nodes.features.length+"",z,A,j,G,q=ve(o[1])+"",F;return{c(){e=y("p"),n=k("Length: "),l=k(t),s=k(" m"),a=S(),i=y("p"),r=k(o[8]),u=k(" urban OAs, "),h=k(_),m=k(" rural"),b=S(),v=y("p"),U=k(T),H=k(" links, "),z=k(E),A=k(`
        nodes`),j=S(),G=y("p"),F=k(q)},m(c,L){g(c,e,L),p(e,n),p(e,l),p(e,s),g(c,a,L),g(c,i,L),p(i,r),p(i,u),p(i,h),p(i,m),g(c,b,L),g(c,v,L),p(v,U),p(v,H),p(v,z),p(v,A),g(c,j,L),g(c,G,L),p(G,F)},p(c,L){L&2&&t!==(t=Math.round(c[1].length)+"")&&R(l,t),L&256&&R(r,c[8]),L&258&&_!==(_=c[1].ruc.features.length-c[8]+"")&&R(h,_),L&2&&T!==(T=c[1].os_links.features.length+"")&&R(U,T),L&2&&E!==(E=c[1].os_nodes.features.length+"")&&R(z,E),L&2&&q!==(q=ve(c[1])+"")&&R(F,q)},d(c){c&&(d(e),d(a),d(i),d(b),d(v),d(j),d(G))}}}function gt(o){let e;return{c(){e=y("p"),e.textContent="Loading..."},m(n,t){g(n,e,t)},p:we,d(n){n&&d(e)}}}function dt(o){let e,n,t,l,s,a,i,r,u,_,h,m,b,v,T,U,H,E,z,A,j,G,q,F,c,L,f,B,M,_e,pe,se,ae,ce,J=o[0]!=null&&be(o);function me(N,D){return N[1].length==0?gt:mt}let V=me(o),P=V(o);return se=Ae(o[19][0]),{c(){e=y("div"),n=y("p"),n.textContent="Input:",t=S(),l=y("label"),s=k(`Load a GeoJSON file
      `),a=y("input"),i=S(),J&&J.c(),r=S(),u=y("p"),u.textContent="Output:",_=S(),h=y("button"),h.textContent="Recalculate",m=S(),b=y("label"),v=y("input"),T=k(`
      Show input route`),U=S(),H=y("br"),E=S(),z=y("fieldset"),A=y("label"),j=y("input"),G=k(`
        RUC`),q=S(),F=y("label"),c=y("input"),L=k(`
        Pop density`),f=S(),B=y("label"),M=y("input"),_e=k(`
        OS links and nodes`),pe=S(),P.c(),W(a,"type","file"),W(v,"type","checkbox"),W(j,"type","radio"),j.__value="ruc",re(j,j.__value),W(c,"type","radio"),c.__value="pop_density",re(c,c.__value),W(M,"type","radio"),M.__value="os_network",re(M,M.__value),W(e,"slot","left"),se.p(j,c,M)},m(N,D){g(N,e,D),p(e,n),p(e,t),p(e,l),p(l,s),p(l,a),o[14](a),p(e,i),J&&J.m(e,null),p(e,r),p(e,u),p(e,_),p(e,h),p(e,m),p(e,b),p(b,v),v.checked=o[3],p(b,T),p(e,U),p(e,H),p(e,E),p(e,z),p(z,A),p(A,j),j.checked=j.__value===o[4],p(A,G),p(z,q),p(z,F),p(F,c),c.checked=c.__value===o[4],p(F,L),p(z,f),p(z,B),p(B,M),M.checked=M.__value===o[4],p(B,_e),p(e,pe),P.m(e,null),ae||(ce=[Z(a,"change",o[10]),Z(h,"click",o[9]),Z(v,"change",o[17]),Z(j,"change",o[18]),Z(c,"change",o[20]),Z(M,"change",o[21])],ae=!0)},p(N,D){N[0]!=null?J?J.p(N,D):(J=be(N),J.c(),J.m(e,r)):J&&(J.d(1),J=null),D&8&&(v.checked=N[3]),D&16&&(j.checked=j.__value===N[4]),D&16&&(c.checked=c.__value===N[4]),D&16&&(M.checked=M.__value===N[4]),V===(V=me(N))&&P?P.p(N,D):(P.d(1),P=V(N),P&&(P.c(),P.m(e,null)))},d(N){N&&d(e),o[14](null),J&&J.d(),P.d(),se.r(),ae=!1,Se(ce)}}}function $e(o){let e,n,t,l,s;function a(r){o[12](r)}let i={};return o[6]!==void 0&&(i.f=o[6]),e=new Ye({props:i}),Y.push(()=>ne(e,"f",a)),l=new X({props:{data:o[6],$$slots:{default:[ht]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment),t=S(),C(l.$$.fragment)},m(r,u){I(e,r,u),g(r,t,u),I(l,r,u),s=!0},p(r,u){const _={};!n&&u&64&&(n=!0,_.f=r[6],le(()=>n=!1)),e.$set(_);const h={};u&64&&(h.data=r[6]),u&16777224&&(h.$$scope={dirty:u,ctx:r}),l.$set(h)},i(r){s||($(e.$$.fragment,r),$(l.$$.fragment,r),s=!0)},o(r){w(e.$$.fragment,r),w(l.$$.fragment,r),s=!1},d(r){r&&d(t),O(e,r),O(l,r)}}}function ht(o){let e,n;return e=new Le({props:{layout:{visibility:o[3]?"visible":"none"},paint:{"line-width":5,"line-color":"red"}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,l){const s={};l&8&&(s.layout={visibility:t[3]?"visible":"none"}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function bt(o){let e,n,t,l=o[6]&&o[3]&&$e(o);return n=new ct({props:{output:o[1],show:o[4]}}),{c(){l&&l.c(),e=S(),C(n.$$.fragment)},m(s,a){l&&l.m(s,a),g(s,e,a),I(n,s,a),t=!0},p(s,a){s[6]&&s[3]?l?(l.p(s,a),a&72&&$(l,1)):(l=$e(s),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(ye(),w(l,1,1,()=>{l=null}),ke());const i={};a&2&&(i.output=s[1]),a&16&&(i.show=s[4]),n.$set(i)},i(s){t||($(l),$(n.$$.fragment,s),t=!0)},o(s){w(l),w(n.$$.fragment,s),t=!1},d(s){s&&d(e),l&&l.d(s),O(n,s)}}}function $t(o){let e,n,t,l;function s(i){o[13](i)}let a={style:`https://api.maptiler.com/maps/dataviz/style.json?key=${yt}`,standardControls:!0,$$slots:{default:[bt]},$$scope:{ctx:o}};return o[2]!==void 0&&(a.map=o[2]),n=new Ge({props:a}),Y.push(()=>ne(n,"map",s)),{c(){e=y("div"),C(n.$$.fragment),W(e,"slot","main"),ie(e,"position","relative"),ie(e,"width","100%"),ie(e,"height","100vh")},m(i,r){g(i,e,r),I(n,e,null),l=!0},p(i,r){const u={};r&16777306&&(u.$$scope={dirty:r,ctx:i}),!t&&r&4&&(t=!0,u.map=i[2],le(()=>t=!1)),n.$set(u)},i(i){l||($(n.$$.fragment,i),l=!0)},o(i){w(n.$$.fragment,i),l=!1},d(i){i&&d(e),O(n)}}}function vt(o){let e,n;return e=new Re({props:{$$slots:{main:[$t],left:[dt]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,l){I(e,t,l),n=!0},p(t,[l]){const s={};l&16777727&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}let yt="MZEJTanw3WpxRvt7qDfo";function ve(o){return o.os_links.features.map(e=>e.properties.road_classification).join(", ")}function kt(o,e,n){let t,l="https://assets.od2net.org/route-element",s,a=!1,i=!0,r="ruc";Ue(async()=>{await qe(),n(11,a=!0),b(JSON.stringify(Ve))});let u=Q(),_=null,h=null,m=ue();function b(f){n(5,u=Q()),n(0,_=null);try{let B=JSON.parse(f);if(B.features=B.features.filter(M=>M.geometry.type=="LineString"),B.features.length==0)throw new Error("No LineStrings");n(5,u=B),n(0,_=0),n(1,m=ue())}catch(B){window.alert(B)}}async function v(){if(a&&_!=null){n(1,m=ue()),n(6,h=u.features[_]),s&&Ze(s,h);try{let f=JSON.parse(await Be(h,l));n(1,m={length:f.length,ruc:JSON.parse(f.ruc),pop_density:JSON.parse(f.pop_density),os_nodes:JSON.parse(f.os_nodes),os_links:JSON.parse(f.os_links)})}catch(f){window.alert(f)}}}let T;async function U(f){b(await T.files[0].text())}const H=[[]];function E(f){h=f,n(6,h)}function z(f){s=f,n(2,s)}function A(f){Y[f?"unshift":"push"](()=>{T=f,n(7,T)})}const j=()=>{n(0,_--,_),v()},G=()=>{n(0,_++,_),v()};function q(){i=this.checked,n(3,i)}function F(){r=this.__value,n(4,r)}function c(){r=this.__value,n(4,r)}function L(){r=this.__value,n(4,r)}return o.$$.update=()=>{o.$$.dirty&2051&&a&&_!=null&&m.length==0&&v(),o.$$.dirty&2&&n(8,t=m.ruc.features.filter(f=>f.properties.ruc11.startsWith("Urban")).length)},[_,m,s,i,r,u,h,T,t,v,U,a,E,z,A,j,G,q,F,H,c,L]}class wt extends x{constructor(e){super(),ee(this,e,kt,vt,te,{})}}new wt({target:document.getElementById("app")});
