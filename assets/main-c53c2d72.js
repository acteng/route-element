import{S as ae,i as _e,s as ce,L as We,b as se,a as ge,c as O,m as T,d as be,t as y,e as S,f as M,g as De,h as He,u as Pe,j as Ge,k as Ve,l as ee,n as Ke,o as je,p as Qe,q as d,r as Ee,v as Ne,w,x as Ze,M as Xe,y as v,z as I,A as Z,B as ze,G as re,C as ve,D as Ue,E as Ye,P as de,F as k,H as J,I as xe,J as et,K as tt,N as me,O as c,Q as X,R as Fe,T as nt,U as he}from"./Layout-487280df.js";let h;const qe=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&qe.decode();let oe=null;function le(){return(oe===null||oe.byteLength===0)&&(oe=new Uint8Array(h.memory.buffer)),oe}function Q(n,e){return n=n>>>0,qe.decode(le().subarray(n,n+e))}function rt(n){const e=h.__externref_table_alloc();return h.__wbindgen_export_2.set(e,n),e}function E(n,e){try{return n.apply(this,e)}catch(t){const r=rt(t);h.__wbindgen_exn_store(r)}}let x=0;const fe=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ot=typeof fe.encodeInto=="function"?function(n,e){return fe.encodeInto(n,e)}:function(n,e){const t=fe.encode(n);return e.set(t),{read:n.length,written:t.length}};function ie(n,e,t){if(t===void 0){const u=fe.encode(n),l=e(u.length,1)>>>0;return le().subarray(l,l+u.length).set(u),x=u.length,l}let r=n.length,o=e(r,1)>>>0;const i=le();let s=0;for(;s<r;s++){const u=n.charCodeAt(s);if(u>127)break;i[o+s]=u}if(s!==r){s!==0&&(n=n.slice(s)),o=t(o,r,r=s+n.length*3,1)>>>0;const u=le().subarray(o+s,o+r),l=ot(n,u);s+=l.written,o=t(o,r,s,1)>>>0}return x=s,o}let Y=null;function B(){return(Y===null||Y.buffer.detached===!0||Y.buffer.detached===void 0&&Y.buffer!==h.memory.buffer)&&(Y=new DataView(h.memory.buffer)),Y}function ne(n){return n==null}const Oe=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{h.__wbindgen_export_6.get(n.dtor)(n.a,n.b)});function it(n,e,t,r){const o={a:n,b:e,cnt:1,dtor:t},i=(...s)=>{o.cnt++;const u=o.a;o.a=0;try{return r(u,o.b,...s)}finally{--o.cnt===0?(h.__wbindgen_export_6.get(o.dtor)(u,o.b),Oe.unregister(o)):o.a=u}};return i.original=o,Oe.register(i,o,o),i}function $e(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let i="[";o>0&&(i+=$e(n[0]));for(let s=1;s<o;s++)i+=", "+$e(n[s]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t&&t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function st(n,e){const t=ie(e,h.__wbindgen_malloc,h.__wbindgen_realloc),r=x;return h.evalRoute(n,t,r)}function ut(n,e,t){h.closure287_externref_shim(n,e,t)}function lt(n,e,t,r){h.closure308_externref_shim(n,e,t,r)}const ft=["omit","same-origin","include"],at=["same-origin","no-cors","cors","navigate"];async function _t(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function ct(){const n={};return n.wbg={},n.wbg.__wbg_abort_19de2f828ee0874a=function(e){e.abort()},n.wbg.__wbg_append_daea8d1dbe91d314=function(){return E(function(e,t,r,o,i){e.append(Q(t,r),Q(o,i))},arguments)},n.wbg.__wbg_arrayBuffer_d004045654bdb712=function(){return E(function(e){return e.arrayBuffer()},arguments)},n.wbg.__wbg_buffer_6e1d53ff183194fc=function(e){return e.buffer},n.wbg.__wbg_call_0411c0c3c424db9a=function(){return E(function(e,t,r){return e.call(t,r)},arguments)},n.wbg.__wbg_call_3114932863209ca6=function(){return E(function(e,t){return e.call(t)},arguments)},n.wbg.__wbg_debug_347b3d1f33e1c28e=function(e){console.debug(e)},n.wbg.__wbg_done_adfd3f40364def50=function(e){return e.done},n.wbg.__wbg_entries_ce82e236f8300a53=function(e){return Object.entries(e)},n.wbg.__wbg_error_2a6b93fdada7ff11=function(e){console.error(e)},n.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let r,o;try{r=e,o=t,console.error(Q(e,t))}finally{h.__wbindgen_free(r,o,1)}},n.wbg.__wbg_fetch_2367a4a7762e7c4a=function(e,t){return e.fetch(t)},n.wbg.__wbg_fetch_b335d17f45a8b5a1=function(e){return fetch(e)},n.wbg.__wbg_get_68aa371864aa301a=function(e,t){return e[t>>>0]},n.wbg.__wbg_get_92a4780a3beb5fe9=function(){return E(function(e,t){return Reflect.get(e,t)},arguments)},n.wbg.__wbg_globalThis_1e2ac1d6eee845b3=function(){return E(function(){return globalThis.globalThis},arguments)},n.wbg.__wbg_global_f25a574ae080367c=function(){return E(function(){return global.global},arguments)},n.wbg.__wbg_has_38b228962f492b9b=function(){return E(function(e,t){return Reflect.has(e,t)},arguments)},n.wbg.__wbg_headers_a5edfea2425875b2=function(e){return e.headers},n.wbg.__wbg_info_b6bd3cb6471c2b4c=function(e){console.info(e)},n.wbg.__wbg_instanceof_ArrayBuffer_435fcead703e2827=function(e){let t;try{t=e instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_instanceof_Map_77fd223783fe0068=function(e){let t;try{t=e instanceof Map}catch{t=!1}return t},n.wbg.__wbg_instanceof_Response_0ec26bd2f8a75ca2=function(e){let t;try{t=e instanceof Response}catch{t=!1}return t},n.wbg.__wbg_instanceof_Uint8Array_9b67296cab48238f=function(e){let t;try{t=e instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_isArray_fcd559a3bcfde1e9=function(e){return Array.isArray(e)},n.wbg.__wbg_isSafeInteger_4de146aa53f6e470=function(e){return Number.isSafeInteger(e)},n.wbg.__wbg_iterator_7a20c20ce22add0f=function(){return Symbol.iterator},n.wbg.__wbg_length_2e63ba34c4121df5=function(e){return e.length},n.wbg.__wbg_length_e74df4881604f1d9=function(e){return e.length},n.wbg.__wbg_log_d818ca3cab23fc77=function(e){console.log(e)},n.wbg.__wbg_new_076cac58bb698dd4=function(){return new Object},n.wbg.__wbg_new_1e8ca58d170d6ad0=function(e,t){try{var r={a:e,b:t},o=(s,u)=>{const l=r.a;r.a=0;try{return lt(l,r.b,s,u)}finally{r.a=l}};return new Promise(o)}finally{r.a=r.b=0}},n.wbg.__wbg_new_23362fa370a0a372=function(e){return new Uint8Array(e)},n.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},n.wbg.__wbg_new_93cf40e4f48fe902=function(){return E(function(){return new AbortController},arguments)},n.wbg.__wbg_new_e2ec18a02bb844cb=function(){return E(function(){return new Headers},arguments)},n.wbg.__wbg_newnoargs_19a249f4eceaaac3=function(e,t){return new Function(Q(e,t))},n.wbg.__wbg_newwithbyteoffsetandlength_ee8def7000b7b2be=function(e,t,r){return new Uint8Array(e,t>>>0,r>>>0)},n.wbg.__wbg_newwithstrandinit_ee1418802d8d481c=function(){return E(function(e,t,r){return new Request(Q(e,t),r)},arguments)},n.wbg.__wbg_next_c591766a7286b02a=function(){return E(function(e){return e.next()},arguments)},n.wbg.__wbg_next_f387ecc56a94ba00=function(e){return e.next},n.wbg.__wbg_queueMicrotask_3d422e1ba49c2500=function(e){return e.queueMicrotask},n.wbg.__wbg_queueMicrotask_f301663ccadbb7d0=function(e){queueMicrotask(e)},n.wbg.__wbg_resolve_6a311e8bb26423ab=function(e){return Promise.resolve(e)},n.wbg.__wbg_self_ac4343e4047b83cc=function(){return E(function(){return self.self},arguments)},n.wbg.__wbg_set_7b70226104a82921=function(e,t,r){e.set(t,r>>>0)},n.wbg.__wbg_setbody_a548052400c35526=function(e,t){e.body=t},n.wbg.__wbg_setcredentials_6ae5f65d7ad22ffc=function(e,t){e.credentials=ft[t]},n.wbg.__wbg_setheaders_1f2d4c08004f4227=function(e,t){e.headers=t},n.wbg.__wbg_setmethod_c704d56d480d8580=function(e,t,r){e.method=Q(t,r)},n.wbg.__wbg_setmode_26f3e7a9f55ddb2d=function(e,t){e.mode=at[t]},n.wbg.__wbg_setsignal_de26efe32c2e413d=function(e,t){e.signal=t},n.wbg.__wbg_signal_fd2d6d0644f16ad8=function(e){return e.signal},n.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){const r=t.stack,o=ie(r,h.__wbindgen_malloc,h.__wbindgen_realloc),i=x;B().setInt32(e+4*1,i,!0),B().setInt32(e+4*0,o,!0)},n.wbg.__wbg_status_5f9868b7ed8dd175=function(e){return e.status},n.wbg.__wbg_stringify_f5476f15b5654a07=function(){return E(function(e){return JSON.stringify(e)},arguments)},n.wbg.__wbg_then_5c6469c1e1da9e59=function(e,t){return e.then(t)},n.wbg.__wbg_then_faeb8aed8c1629b7=function(e,t,r){return e.then(t,r)},n.wbg.__wbg_url_ba6c16bbafb59895=function(e,t){const r=t.url,o=ie(r,h.__wbindgen_malloc,h.__wbindgen_realloc),i=x;B().setInt32(e+4*1,i,!0),B().setInt32(e+4*0,o,!0)},n.wbg.__wbg_value_30db1d77772f3236=function(e){return e.value},n.wbg.__wbg_warn_a6963915e4da61f6=function(e){console.warn(e)},n.wbg.__wbg_window_1a23defd102c72f4=function(){return E(function(){return window.window},arguments)},n.wbg.__wbindgen_bigint_from_i64=function(e){return e},n.wbg.__wbindgen_bigint_from_u64=function(e){return BigInt.asUintN(64,e)},n.wbg.__wbindgen_bigint_get_as_i64=function(e,t){const r=t,o=typeof r=="bigint"?r:void 0;B().setBigInt64(e+8*1,ne(o)?BigInt(0):o,!0),B().setInt32(e+4*0,!ne(o),!0)},n.wbg.__wbindgen_boolean_get=function(e){const t=e;return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_cb_drop=function(e){const t=e.original;return t.cnt--==1?(t.a=0,!0):!1},n.wbg.__wbindgen_closure_wrapper817=function(e,t,r){return it(e,t,288,ut)},n.wbg.__wbindgen_debug_string=function(e,t){const r=$e(t),o=ie(r,h.__wbindgen_malloc,h.__wbindgen_realloc),i=x;B().setInt32(e+4*1,i,!0),B().setInt32(e+4*0,o,!0)},n.wbg.__wbindgen_error_new=function(e,t){return new Error(Q(e,t))},n.wbg.__wbindgen_in=function(e,t){return e in t},n.wbg.__wbindgen_init_externref_table=function(){const e=h.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},n.wbg.__wbindgen_is_bigint=function(e){return typeof e=="bigint"},n.wbg.__wbindgen_is_function=function(e){return typeof e=="function"},n.wbg.__wbindgen_is_object=function(e){const t=e;return typeof t=="object"&&t!==null},n.wbg.__wbindgen_is_undefined=function(e){return e===void 0},n.wbg.__wbindgen_jsval_eq=function(e,t){return e===t},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return e==t},n.wbg.__wbindgen_memory=function(){return h.memory},n.wbg.__wbindgen_number_get=function(e,t){const r=t,o=typeof r=="number"?r:void 0;B().setFloat64(e+8*1,ne(o)?0:o,!0),B().setInt32(e+4*0,!ne(o),!0)},n.wbg.__wbindgen_string_get=function(e,t){const r=t,o=typeof r=="string"?r:void 0;var i=ne(o)?0:ie(o,h.__wbindgen_malloc,h.__wbindgen_realloc),s=x;B().setInt32(e+4*1,s,!0),B().setInt32(e+4*0,i,!0)},n.wbg.__wbindgen_string_new=function(e,t){return Q(e,t)},n.wbg.__wbindgen_throw=function(e,t){throw new Error(Q(e,t))},n}function gt(n,e){return h=n.exports,Be.__wbindgen_wasm_module=e,Y=null,oe=null,h.__wbindgen_start(),h}async function Be(n){if(h!==void 0)return h;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n>"u"&&(n=new URL("backend_bg.wasm",self.location));const e=ct();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await _t(await n,e);return gt(t,r)}function bt(n){let e;const t=n[15].default,r=He(t,n,n[23],null);return{c(){r&&r.c()},m(o,i){r&&r.m(o,i),e=!0},p(o,i){r&&r.p&&(!e||i&8388608)&&Pe(r,t,o,o[23],e?Ve(t,o[23],i,null):Ge(o[23]),null)},i(o){e||(y(r,o),e=!0)},o(o){S(r,o),e=!1},d(o){r&&r.d(o)}}}function dt(n){let e,t,r;function o(s){n[16](s)}let i={id:n[1],type:"fill",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],interactive:n[14],$$slots:{default:[bt]},$$scope:{ctx:n}};return n[0]!==void 0&&(i.hovered=n[0]),e=new We({props:i}),se.push(()=>ge(e,"hovered",o)),e.$on("click",n[17]),e.$on("dblclick",n[18]),e.$on("contextmenu",n[19]),e.$on("mouseenter",n[20]),e.$on("mousemove",n[21]),e.$on("mouseleave",n[22]),{c(){O(e.$$.fragment)},m(s,u){T(e,s,u),r=!0},p(s,[u]){const l={};u&2&&(l.id=s[1]),u&4&&(l.source=s[2]),u&8&&(l.sourceLayer=s[3]),u&16&&(l.beforeId=s[4]),u&32&&(l.beforeLayerType=s[5]),u&64&&(l.paint=s[6]),u&128&&(l.layout=s[7]),u&256&&(l.filter=s[8]),u&512&&(l.minzoom=s[9]),u&1024&&(l.maxzoom=s[10]),u&2048&&(l.hoverCursor=s[11]),u&4096&&(l.manageHoverState=s[12]),u&8192&&(l.eventsIfTopMost=s[13]),u&16384&&(l.interactive=s[14]),u&8388608&&(l.$$scope={dirty:u,ctx:s}),!t&&u&1&&(t=!0,l.hovered=s[0],be(()=>t=!1)),e.$set(l)},i(s){r||(y(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){M(e,s)}}}function wt(n,e,t){let{$$slots:r={},$$scope:o}=e,{id:i=De("fill")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:l=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:_}=e,{layout:p=void 0}=e,{filter:b=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:$=void 0}=e,{hoverCursor:R=void 0}=e,{manageHoverState:W=!1}=e,{hovered:U=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:A=!0}=e;function D(a){U=a,t(0,U)}function j(a){ee.call(this,n,a)}function H(a){ee.call(this,n,a)}function P(a){ee.call(this,n,a)}function q(a){ee.call(this,n,a)}function g(a){ee.call(this,n,a)}function L(a){ee.call(this,n,a)}return n.$$set=a=>{"id"in a&&t(1,i=a.id),"source"in a&&t(2,s=a.source),"sourceLayer"in a&&t(3,u=a.sourceLayer),"beforeId"in a&&t(4,l=a.beforeId),"beforeLayerType"in a&&t(5,f=a.beforeLayerType),"paint"in a&&t(6,_=a.paint),"layout"in a&&t(7,p=a.layout),"filter"in a&&t(8,b=a.filter),"minzoom"in a&&t(9,m=a.minzoom),"maxzoom"in a&&t(10,$=a.maxzoom),"hoverCursor"in a&&t(11,R=a.hoverCursor),"manageHoverState"in a&&t(12,W=a.manageHoverState),"hovered"in a&&t(0,U=a.hovered),"eventsIfTopMost"in a&&t(13,F=a.eventsIfTopMost),"interactive"in a&&t(14,A=a.interactive),"$$scope"in a&&t(23,o=a.$$scope)},[U,i,s,u,l,f,_,p,b,m,$,R,W,F,A,r,D,j,H,P,q,g,L,o]}class Je extends ae{constructor(e){super(),_e(this,e,wt,dt,ce,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function te(){return{type:"FeatureCollection",features:[]}}function ye(){return{length:0,ruc:te(),pop_density:te(),os_nodes:te(),os_links:te()}}function pt(n,e){n.fitBounds(Ke(e),{animate:!1,padding:10})}function Te(n,e,t){const r=n.slice();return r[2]=e[t],r[3]=e,r[4]=t,r}function mt(n){let e,t;return{c(){e=v("span"),t=I(),Z(e,"class","dot svelte-1jnewjk")},m(r,o){d(r,e,o),d(r,t,o)},p:ze,d(r){r&&(w(e),w(t))}}}function Me(n){let e,t,r;function o(s){n[1](s,n[2],n[3],n[4])}let i={draggable:!0,$$slots:{default:[mt]},$$scope:{ctx:n}};return n[2]!==void 0&&(i.lngLat=n[2]),e=new Xe({props:i}),se.push(()=>ge(e,"lngLat",o)),{c(){O(e.$$.fragment)},m(s,u){T(e,s,u),r=!0},p(s,u){n=s;const l={};u&32&&(l.$$scope={dirty:u,ctx:n}),!t&&u&1&&(t=!0,l.lngLat=n[2],be(()=>t=!1)),e.$set(l)},i(s){r||(y(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){M(e,s)}}}function ht(n){let e,t,r=je(n[0].geometry.coordinates),o=[];for(let s=0;s<r.length;s+=1)o[s]=Me(Te(n,r,s));const i=s=>S(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=Qe()},m(s,u){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(s,u);d(s,e,u),t=!0},p(s,[u]){if(u&1){r=je(s[0].geometry.coordinates);let l;for(l=0;l<r.length;l+=1){const f=Te(s,r,l);o[l]?(o[l].p(f,u),y(o[l],1)):(o[l]=Me(f),o[l].c(),y(o[l],1),o[l].m(e.parentNode,e))}for(Ee(),l=r.length;l<o.length;l+=1)i(l);Ne()}},i(s){if(!t){for(let u=0;u<r.length;u+=1)y(o[u]);t=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)S(o[u]);t=!1},d(s){s&&w(e),Ze(o,s)}}}function yt(n,e,t){let{f:r}=e;function o(i,s,u,l){u[l]=i,t(0,r)}return n.$$set=i=>{"f"in i&&t(0,r=i.f)},[r,o]}class $t extends ae{constructor(e){super(),_e(this,e,yt,ht,ce,{f:0})}}let vt={type:"FeatureCollection",features:[{geometry:{coordinates:[[.478565,51.73336],[.478498,51.733405],[.478425,51.733453],[.478651,51.733573],[.478809,51.73365],[.479056,51.733785],[.479263,51.733919],[.479302,51.733944],[.479226,51.73399],[.479209,51.734006],[.479211,51.734026],[.479234,51.734045],[.47932,51.734099],[.47935,51.734109],[.479389,51.734104],[.479474,51.734055],[.47956,51.73411],[.479775,51.734254],[.479955,51.734368],[.480088,51.734452],[.480197,51.734522],[.480595,51.734767],[.480841,51.734929],[.481007,51.735066],[.481037,51.735091],[.481156,51.735179],[.481317,51.735279],[.481481,51.735376],[.481683,51.735503],[.481898,51.735633],[.481942,51.735663],[.482001,51.735705],[.482029,51.735722],[.482521,51.736039],[.482744,51.736182],[.483052,51.736362],[.483361,51.736529],[.483455,51.736583],[.483983,51.736886],[.484567,51.737215],[.484809,51.737351],[.484911,51.737406],[.485008,51.737461],[.48511,51.737519],[.485192,51.737561],[.485822,51.737882],[.485922,51.737936],[.486386,51.738187],[.48648,51.738238],[.486635,51.738321],[.486696,51.738355],[.487031,51.738539],[.487561,51.738844],[.488015,51.739107],[.48841,51.739289],[.488586,51.73937],[.488747,51.739444],[.489667,51.739958],[.489855,51.740063],[.490036,51.740164],[.490426,51.740364],[.491118,51.7407],[.491254,51.740766],[.491455,51.740863],[.491963,51.741105],[.492088,51.741162],[.49258,51.741391],[.493183,51.741707],[.493659,51.741943],[.493891,51.742057],[.494049,51.742131],[.494995,51.742574],[.495073,51.742616],[.495176,51.742666],[.495541,51.742843],[.495829,51.742974],[.495982,51.743042],[.496217,51.743161],[.496896,51.743545],[.49704,51.743616],[.497294,51.743741],[.497449,51.743817],[.497883,51.744029],[.498148,51.744149],[.498612,51.744359],[.498682,51.74439],[.499155,51.744602],[.499591,51.744798],[.500039,51.744984],[.500213,51.745104],[.500285,51.745168],[.500276,51.745218],[.500287,51.745247],[.500316,51.745285],[.500353,51.745305],[.500406,51.745324],[.500474,51.745332],[.500574,51.745393],[.500674,51.745455],[.500922,51.745627],[.501165,51.745815],[.501355,51.746007],[.50162,51.746343],[.501753,51.746529],[.501839,51.746629],[.501871,51.74667],[.501893,51.746693],[.501993,51.746835],[.502177,51.747],[.502222,51.74706],[.502212,51.747094],[.502166,51.747142],[.502144,51.747153],[.502125,51.747163],[.50174,51.747332],[.501496,51.747421],[.500837,51.747675],[.50057,51.747773],[.500066,51.747943],[.499498,51.748136],[.499337,51.748192],[.499201,51.74825],[.498687,51.748445],[.498292,51.748616],[.498011,51.748756],[.497805,51.748856],[.497764,51.74883],[.497652,51.748898],[.497556,51.748951],[.497465,51.749011],[.497268,51.749142],[.496528,51.749724],[.496409,51.749813],[.496306,51.749899],[.496263,51.749924],[.496186,51.749983],[.49596,51.750174],[.495849,51.750263],[.495776,51.750322],[.495555,51.750528],[.495427,51.750643],[.495256,51.750822],[.4951,51.751005],[.495037,51.751088],[.495007,51.751138],[.494993,51.751202],[.494965,51.751266],[.494936,51.751297],[.494839,51.75132],[.494793,51.751327],[.49479,51.751356],[.494789,51.751408],[.494828,51.751428],[.494856,51.75146],[.494857,51.751497],[.49485,51.75153],[.494808,51.751706],[.494741,51.751979],[.49465,51.752214],[.49454,51.752417],[.49443,51.752565],[.494261,51.752736],[.493924,51.752979],[.493746,51.753115],[.49335,51.753407],[.493261,51.753475],[.492975,51.753707],[.492879,51.753802],[.492769,51.753921],[.492735,51.753915],[.492375,51.75386],[.4923,51.753843],[.492261,51.753834],[.4922,51.753904],[.492139,51.753895],[.492177,51.753834],[.492214,51.753797],[.492236,51.75377],[.492237,51.753743],[.49222,51.75371],[.492195,51.753686],[.492145,51.753668],[.492043,51.753643],[.49193,51.753622],[.491649,51.753577],[.491403,51.753541],[.491063,51.753498],[.490961,51.753745]],type:"LineString"},properties:{},type:"Feature"},{type:"Feature",properties:{},geometry:{coordinates:[[-.8876338067753693,52.23771961572791],[-.8722240821606704,52.239055374398475],[-.8741210869435747,52.24282954959838],[-.8684328688797791,52.248692578424254],[-.8698547643610652,52.25223365618476],[-.8661103062913185,52.25310368912446]],type:"LineString"}}]};function kt(n){let e=n[2].ruc11+"",t;return{c(){t=k(e)},m(r,o){d(r,t,o)},p(r,o){o&4&&e!==(e=r[2].ruc11+"")&&J(t,e)},d(r){r&&w(t)}}}function St(n){let e,t;return e=new de({props:{openOn:"hover",$$slots:{default:[kt,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&12&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Lt(n){let e,t;return e=new Je({props:{manageHoverState:!0,layout:{visibility:n[1]=="ruc"?"visible":"none"},paint:{"fill-color":["case",["in","Urban",["get","ruc11"]],"orange","green"],"fill-opacity":ve(.3,.5)},$$slots:{default:[St]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&2&&(i.layout={visibility:r[1]=="ruc"?"visible":"none"}),o&8&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function It(n){let e=n[2].pop_density+"",t,r;return{c(){t=k(e),r=k(" people / square km")},m(o,i){d(o,t,i),d(o,r,i)},p(o,i){i&4&&e!==(e=o[2].pop_density+"")&&J(t,e)},d(o){o&&(w(t),w(r))}}}function jt(n){let e,t;return e=new de({props:{openOn:"hover",$$slots:{default:[It,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&12&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Ot(n){let e,t;return e=new Je({props:{manageHoverState:!0,layout:{visibility:n[1]=="pop_density"?"visible":"none"},paint:{"fill-color":"blue","fill-opacity":ve(.3,.5)},$$slots:{default:[jt]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&2&&(i.layout={visibility:r[1]=="pop_density"?"visible":"none"}),o&8&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Tt(n){let e=n[2].road_classification+"",t;return{c(){t=k(e)},m(r,o){d(r,t,o)},p(r,o){o&4&&e!==(e=r[2].road_classification+"")&&J(t,e)},d(r){r&&w(t)}}}function Mt(n){let e,t;return e=new de({props:{openOn:"hover",$$slots:{default:[Tt,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&12&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function At(n){let e,t;return e=new Ue({props:{layout:{visibility:n[1]=="os_network"?"visible":"none"},paint:{"line-width":3,"line-color":"black"},$$slots:{default:[Mt]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&2&&(i.layout={visibility:r[1]=="os_network"?"visible":"none"}),o&8&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Ct(n){let e=n[2].id+"",t;return{c(){t=k(e)},m(r,o){d(r,t,o)},p(r,o){o&4&&e!==(e=r[2].id+"")&&J(t,e)},d(r){r&&w(t)}}}function Rt(n){let e,t;return e=new de({props:{openOn:"hover",$$slots:{default:[Ct,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&12&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Et(n){let e,t;return e=new Ye({props:{manageHoverState:!0,layout:{visibility:n[1]=="os_network"?"visible":"none"},paint:{"circle-color":"green","circle-radius":ve(5,8)},$$slots:{default:[Rt]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&2&&(i.layout={visibility:r[1]=="os_network"?"visible":"none"}),o&8&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Nt(n){let e,t,r,o,i,s,u,l;return e=new re({props:{data:n[0].ruc,$$slots:{default:[Lt]},$$scope:{ctx:n}}}),r=new re({props:{data:n[0].pop_density,$$slots:{default:[Ot]},$$scope:{ctx:n}}}),i=new re({props:{data:n[0].os_links,$$slots:{default:[At]},$$scope:{ctx:n}}}),u=new re({props:{data:n[0].os_nodes,$$slots:{default:[Et]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=I(),O(r.$$.fragment),o=I(),O(i.$$.fragment),s=I(),O(u.$$.fragment)},m(f,_){T(e,f,_),d(f,t,_),T(r,f,_),d(f,o,_),T(i,f,_),d(f,s,_),T(u,f,_),l=!0},p(f,[_]){const p={};_&1&&(p.data=f[0].ruc),_&10&&(p.$$scope={dirty:_,ctx:f}),e.$set(p);const b={};_&1&&(b.data=f[0].pop_density),_&10&&(b.$$scope={dirty:_,ctx:f}),r.$set(b);const m={};_&1&&(m.data=f[0].os_links),_&10&&(m.$$scope={dirty:_,ctx:f}),i.$set(m);const $={};_&1&&($.data=f[0].os_nodes),_&10&&($.$$scope={dirty:_,ctx:f}),u.$set($)},i(f){l||(y(e.$$.fragment,f),y(r.$$.fragment,f),y(i.$$.fragment,f),y(u.$$.fragment,f),l=!0)},o(f){S(e.$$.fragment,f),S(r.$$.fragment,f),S(i.$$.fragment,f),S(u.$$.fragment,f),l=!1},d(f){f&&(w(t),w(o),w(s)),M(e,f),M(r,f),M(i,f),M(u,f)}}}function zt(n,e,t){let{output:r}=e,{show:o}=e;return n.$$set=i=>{"output"in i&&t(0,r=i.output),"show"in i&&t(1,o=i.show)},[r,o]}class Ut extends ae{constructor(e){super(),_e(this,e,zt,Nt,ce,{output:0,show:1})}}function Ae(n){let e,t,r=n[0]+1+"",o,i,s=n[5].features.length+"",u,l,f,_,p;return{c(){e=v("button"),e.textContent="Prev",t=I(),o=k(r),i=k(" / "),u=k(s),l=I(),f=v("button"),f.textContent="Next"},m(b,m){d(b,e,m),d(b,t,m),d(b,o,m),d(b,i,m),d(b,u,m),d(b,l,m),d(b,f,m),_||(p=[X(e,"click",n[15]),X(f,"click",n[16])],_=!0)},p(b,m){m&1&&r!==(r=b[0]+1+"")&&J(o,r),m&32&&s!==(s=b[5].features.length+"")&&J(u,s)},d(b){b&&(w(e),w(t),w(o),w(i),w(u),w(l),w(f)),_=!1,Fe(p)}}}function Ft(n){let e,t,r=Math.round(n[1].length)+"",o,i,s,u,l,f,_=n[1].ruc.features.length-n[8]+"",p,b,m,$,R=n[1].os_links.features.length+"",W,U,F=n[1].os_nodes.features.length+"",A,D,j,H,P=Re(n[1])+"",q;return{c(){e=v("p"),t=k("Length: "),o=k(r),i=k(" m"),s=I(),u=v("p"),l=k(n[8]),f=k(" urban OAs, "),p=k(_),b=k(" rural"),m=I(),$=v("p"),W=k(R),U=k(" links, "),A=k(F),D=k(`
        nodes`),j=I(),H=v("p"),q=k(P)},m(g,L){d(g,e,L),c(e,t),c(e,o),c(e,i),d(g,s,L),d(g,u,L),c(u,l),c(u,f),c(u,p),c(u,b),d(g,m,L),d(g,$,L),c($,W),c($,U),c($,A),c($,D),d(g,j,L),d(g,H,L),c(H,q)},p(g,L){L&2&&r!==(r=Math.round(g[1].length)+"")&&J(o,r),L&256&&J(l,g[8]),L&258&&_!==(_=g[1].ruc.features.length-g[8]+"")&&J(p,_),L&2&&R!==(R=g[1].os_links.features.length+"")&&J(W,R),L&2&&F!==(F=g[1].os_nodes.features.length+"")&&J(A,F),L&2&&P!==(P=Re(g[1])+"")&&J(q,P)},d(g){g&&(w(e),w(s),w(u),w(m),w($),w(j),w(H))}}}function qt(n){let e;return{c(){e=v("p"),e.textContent="Loading..."},m(t,r){d(t,e,r)},p:ze,d(t){t&&w(e)}}}function Bt(n){let e,t,r,o,i,s,u,l,f,_,p,b,m,$,R,W,U,F,A,D,j,H,P,q,g,L,a,G,N,ke,Se,we,pe,Le,z=n[0]!=null&&Ae(n);function Ie(C,K){return C[1].length==0?qt:Ft}let ue=Ie(n),V=ue(n);return we=tt(n[19][0]),{c(){e=v("div"),t=v("p"),t.textContent="Input:",r=I(),o=v("label"),i=k(`Load a GeoJSON file
      `),s=v("input"),u=I(),z&&z.c(),l=I(),f=v("p"),f.textContent="Output:",_=I(),p=v("button"),p.textContent="Recalculate",b=I(),m=v("label"),$=v("input"),R=k(`
      Show input route`),W=I(),U=v("br"),F=I(),A=v("fieldset"),D=v("label"),j=v("input"),H=k(`
        RUC`),P=I(),q=v("label"),g=v("input"),L=k(`
        Pop density`),a=I(),G=v("label"),N=v("input"),ke=k(`
        OS links and nodes`),Se=I(),V.c(),Z(s,"type","file"),Z($,"type","checkbox"),Z(j,"type","radio"),j.__value="ruc",me(j,j.__value),Z(g,"type","radio"),g.__value="pop_density",me(g,g.__value),Z(N,"type","radio"),N.__value="os_network",me(N,N.__value),Z(e,"slot","left"),we.p(j,g,N)},m(C,K){d(C,e,K),c(e,t),c(e,r),c(e,o),c(o,i),c(o,s),n[14](s),c(e,u),z&&z.m(e,null),c(e,l),c(e,f),c(e,_),c(e,p),c(e,b),c(e,m),c(m,$),$.checked=n[3],c(m,R),c(e,W),c(e,U),c(e,F),c(e,A),c(A,D),c(D,j),j.checked=j.__value===n[4],c(D,H),c(A,P),c(A,q),c(q,g),g.checked=g.__value===n[4],c(q,L),c(A,a),c(A,G),c(G,N),N.checked=N.__value===n[4],c(G,ke),c(e,Se),V.m(e,null),pe||(Le=[X(s,"change",n[10]),X(p,"click",n[9]),X($,"change",n[17]),X(j,"change",n[18]),X(g,"change",n[20]),X(N,"change",n[21])],pe=!0)},p(C,K){C[0]!=null?z?z.p(C,K):(z=Ae(C),z.c(),z.m(e,l)):z&&(z.d(1),z=null),K&8&&($.checked=C[3]),K&16&&(j.checked=j.__value===C[4]),K&16&&(g.checked=g.__value===C[4]),K&16&&(N.checked=N.__value===C[4]),ue===(ue=Ie(C))&&V?V.p(C,K):(V.d(1),V=ue(C),V&&(V.c(),V.m(e,null)))},d(C){C&&w(e),n[14](null),z&&z.d(),V.d(),we.r(),pe=!1,Fe(Le)}}}function Ce(n){let e,t,r,o,i;function s(l){n[12](l)}let u={};return n[6]!==void 0&&(u.f=n[6]),e=new $t({props:u}),se.push(()=>ge(e,"f",s)),o=new re({props:{data:n[6],$$slots:{default:[Jt]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),r=I(),O(o.$$.fragment)},m(l,f){T(e,l,f),d(l,r,f),T(o,l,f),i=!0},p(l,f){const _={};!t&&f&64&&(t=!0,_.f=l[6],be(()=>t=!1)),e.$set(_);const p={};f&64&&(p.data=l[6]),f&16777224&&(p.$$scope={dirty:f,ctx:l}),o.$set(p)},i(l){i||(y(e.$$.fragment,l),y(o.$$.fragment,l),i=!0)},o(l){S(e.$$.fragment,l),S(o.$$.fragment,l),i=!1},d(l){l&&w(r),M(e,l),M(o,l)}}}function Jt(n){let e,t;return e=new Ue({props:{layout:{visibility:n[3]?"visible":"none"},paint:{"line-width":5,"line-color":"red"}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,o){const i={};o&8&&(i.layout={visibility:r[3]?"visible":"none"}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Wt(n){let e,t,r,o=n[6]&&n[3]&&Ce(n);return t=new Ut({props:{output:n[1],show:n[4]}}),{c(){o&&o.c(),e=I(),O(t.$$.fragment)},m(i,s){o&&o.m(i,s),d(i,e,s),T(t,i,s),r=!0},p(i,s){i[6]&&i[3]?o?(o.p(i,s),s&72&&y(o,1)):(o=Ce(i),o.c(),y(o,1),o.m(e.parentNode,e)):o&&(Ee(),S(o,1,1,()=>{o=null}),Ne());const u={};s&2&&(u.output=i[1]),s&16&&(u.show=i[4]),t.$set(u)},i(i){r||(y(o),y(t.$$.fragment,i),r=!0)},o(i){S(o),S(t.$$.fragment,i),r=!1},d(i){i&&w(e),o&&o.d(i),M(t,i)}}}function Dt(n){let e,t,r,o;function i(u){n[13](u)}let s={style:`https://api.maptiler.com/maps/dataviz/style.json?key=${Pt}`,standardControls:!0,$$slots:{default:[Wt]},$$scope:{ctx:n}};return n[2]!==void 0&&(s.map=n[2]),t=new nt({props:s}),se.push(()=>ge(t,"map",i)),{c(){e=v("div"),O(t.$$.fragment),Z(e,"slot","main"),he(e,"position","relative"),he(e,"width","100%"),he(e,"height","100vh")},m(u,l){d(u,e,l),T(t,e,null),o=!0},p(u,l){const f={};l&16777306&&(f.$$scope={dirty:l,ctx:u}),!r&&l&4&&(r=!0,f.map=u[2],be(()=>r=!1)),t.$set(f)},i(u){o||(y(t.$$.fragment,u),o=!0)},o(u){S(t.$$.fragment,u),o=!1},d(u){u&&w(e),M(t)}}}function Ht(n){let e,t;return e=new xe({props:{$$slots:{main:[Dt],left:[Bt]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(r,o){T(e,r,o),t=!0},p(r,[o]){const i={};o&16777727&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}let Pt="MZEJTanw3WpxRvt7qDfo";function Re(n){return n.os_links.features.map(e=>e.properties.road_classification).join(", ")}function Gt(n,e,t){let r,o="https://assets.od2net.org/route-element",i,s=!1,u=!0,l="ruc";et(async()=>{await Be(),t(11,s=!0),m(JSON.stringify(vt))});let f=te(),_=null,p=null,b=ye();function m(a){t(5,f=te()),t(0,_=null);try{let G=JSON.parse(a);if(G.features=G.features.filter(N=>N.geometry.type=="LineString"),G.features.length==0)throw new Error("No LineStrings");t(5,f=G),t(0,_=0),t(1,b=ye())}catch(G){window.alert(G)}}async function $(){if(s&&_!=null){t(1,b=ye()),t(6,p=f.features[_]),i&&pt(i,p);try{let a=JSON.parse(await st(p,o));t(1,b={length:a.length,ruc:JSON.parse(a.ruc),pop_density:JSON.parse(a.pop_density),os_nodes:JSON.parse(a.os_nodes),os_links:JSON.parse(a.os_links)})}catch(a){window.alert(a)}}}let R;async function W(a){m(await R.files[0].text())}const U=[[]];function F(a){p=a,t(6,p)}function A(a){i=a,t(2,i)}function D(a){se[a?"unshift":"push"](()=>{R=a,t(7,R)})}const j=()=>{t(0,_--,_),$()},H=()=>{t(0,_++,_),$()};function P(){u=this.checked,t(3,u)}function q(){l=this.__value,t(4,l)}function g(){l=this.__value,t(4,l)}function L(){l=this.__value,t(4,l)}return n.$$.update=()=>{n.$$.dirty&2051&&s&&_!=null&&b.length==0&&$(),n.$$.dirty&2&&t(8,r=b.ruc.features.filter(a=>a.properties.ruc11.startsWith("Urban")).length)},[_,b,i,u,l,f,p,R,r,$,W,s,F,A,D,j,H,P,q,U,g,L]}class Vt extends ae{constructor(e){super(),_e(this,e,Gt,Ht,ce,{})}}new Vt({target:document.getElementById("app")});
