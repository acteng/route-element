import{a0 as Je,a1 as Oe,a2 as V,w as K,e as C,x as R,t as y,a3 as Te,S as W,i as H,s as Q,A as Ie,a4 as Me,B as Pe,E as Ke,h as Ne,G as w,v as $,X as b,Y as q,u as Be,j as De,k as Fe,y as v,Z as re,l as ie,b as Y,K as P,$ as T,a5 as Re,H as D,c as j,J as N,r as ee,m as G,f as J,I,M as Ue,a as te,d as ne,N as B,R as F,a6 as qe,a7 as x,a8 as ze,W as X,T as U,U as We,_ as He,O as Qe,Q as je,P as Ze}from"./Layout-e6abb336.js";function Xe(n,e){const l=e.token={};function t(i,r,o,c){if(e.token!==l)return;e.resolved=c;let s=e.ctx;o!==void 0&&(s=s.slice(),s[o]=c);const u=i&&(e.current=i)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach((_,p)=>{p!==r&&_&&(K(),C(_,1,1,()=>{e.blocks[p]===_&&(e.blocks[p]=null)}),R())}):e.block.d(1),u.c(),y(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&Te()}if(Je(n)){const i=Oe();if(n.then(r=>{V(i),t(e.then,1,e.value,r),V(null)},r=>{if(V(i),t(e.catch,2,e.error,r),V(null),!e.hasCatch)throw r}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,n),!0;e.resolved=n}}function Ye(n,e,l){const t=e.slice(),{resolved:i}=n;n.current===n.then&&(t[n.value]=i),n.current===n.catch&&(t[n.error]=i),n.block.p(t,l)}function Ve(n,e,l){let t;const i=Ie();let{layer:r=void 0}=e;const{map:o}=Me();Pe(n,o,a=>l(2,t=a));function c(a){i(a.type,{...a,map:o})}const s=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],u=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return Ke(()=>{if(t)if(r)for(const a of s)t.off(a,r,c);else for(const a of u)t.off(a,c)}),n.$$set=a=>{"layer"in a&&l(1,r=a.layer)},n.$$.update=()=>{if(n.$$.dirty&6&&t)if(r)for(const a of s)t.on(a,r,c);else for(const a of u)t.on(a,c)},[o,r,t]}class xe extends W{constructor(e){super(),H(this,e,Ve,null,Q,{layer:1})}}const et=n=>({dialog:n&1}),se=n=>({dialog:n[0]});function tt(n){let e,l,t,i,r;const o=n[4].default,c=Ne(o,n,n[3],se);return{c(){e=w("dialog"),l=w("article"),c&&c.c(),e.open=!0},m(s,u){$(s,e,u),b(e,l),c&&c.m(l,null),n[6](e),t=!0,i||(r=[q(window,"click",n[1]),q(window,"keydown",n[2]),q(e,"close",n[5])],i=!0)},p(s,[u]){c&&c.p&&(!t||u&9)&&Be(c,o,s,s[3],t?Fe(o,s[3],u,et):De(s[3]),se)},i(s){t||(y(c,s),t=!0)},o(s){C(c,s),t=!1},d(s){s&&v(e),c&&c.d(s),n[6](null),i=!1,re(r)}}}function nt(n,e,l){let{$$slots:t={},$$scope:i}=e,r;function o(a){r.open&&a.target==r&&r.close()}function c(a){(a.key=="Escape"||a.key=="Enter")&&(a.stopPropagation(),r.close())}function s(a){ie.call(this,n,a)}function u(a){Y[a?"unshift":"push"](()=>{r=a,l(0,r)})}return n.$$set=a=>{"$$scope"in a&&l(3,i=a.$$scope)},[r,o,c,i,t,s,u]}class lt extends W{constructor(e){super(),H(this,e,nt,tt,Q,{})}}function ot(n,e){let l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",n),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function rt(n){let e,l,t,i;const r=n[2].default,o=Ne(r,n,n[1],null);return{c(){e=w("a"),o&&o.c(),P(e,"href","#"),T(e,"color",n[0])},m(c,s){$(c,e,s),o&&o.m(e,null),l=!0,t||(i=q(e,"click",Re(n[3])),t=!0)},p(c,[s]){o&&o.p&&(!l||s&2)&&Be(o,r,c,c[1],l?Fe(r,c[1],s,null):De(c[1]),null),s&1&&T(e,"color",c[0])},i(c){l||(y(o,c),l=!0)},o(c){C(o,c),l=!1},d(c){c&&v(e),o&&o.d(c),t=!1,i()}}}function it(n,e,l){let{$$slots:t={},$$scope:i}=e,{color:r}=e;function o(c){ie.call(this,n,c)}return n.$$set=c=>{"color"in c&&l(0,r=c.color),"$$scope"in c&&l(1,i=c.$$scope)},[r,i,t,o]}class Ge extends W{constructor(e){super(),H(this,e,it,rt,Q,{color:0})}}function ce(n,e,l){const t=n.slice();return t[5]=e[l],t[6]=e,t[7]=l,t}function st(n){let e,l;return{c(){e=w("span"),l=N(),P(e,"class","dot svelte-1lzmzqo")},m(t,i){$(t,e,i),$(t,l,i)},p:B,d(t){t&&(v(e),v(l))}}}function ae(n){let e,l,t;function i(o){n[4](o,n[5],n[6],n[7])}let r={draggable:!0,$$slots:{default:[st]},$$scope:{ctx:n}};return n[5]!==void 0&&(r.lngLat=n[5]),e=new Ue({props:r}),Y.push(()=>te(e,"lngLat",i)),{c(){j(e.$$.fragment)},m(o,c){G(e,o,c),t=!0},p(o,c){n=o;const s={};c&256&&(s.$$scope={dirty:c,ctx:n}),!l&&c&1&&(l=!0,s.lngLat=n[5],ne(()=>l=!1)),e.$set(s)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function ct(n){let e,l,t,i,r,o;e=new xe({}),e.$on("click",n[1]);let c=D(n[0].geometry.coordinates),s=[];for(let a=0;a<c.length;a+=1)s[a]=ae(ce(n,c,a));const u=a=>C(s[a],1,1,()=>{s[a]=null});return{c(){j(e.$$.fragment),l=N();for(let a=0;a<s.length;a+=1)s[a].c();t=ee()},m(a,_){G(e,a,_),$(a,l,_);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(a,_);$(a,t,_),i=!0,r||(o=q(window,"keydown",n[2]),r=!0)},p(a,[_]){if(_&1){c=D(a[0].geometry.coordinates);let p;for(p=0;p<c.length;p+=1){const m=ce(a,c,p);s[p]?(s[p].p(m,_),y(s[p],1)):(s[p]=ae(m),s[p].c(),y(s[p],1),s[p].m(t.parentNode,t))}for(K(),p=c.length;p<s.length;p+=1)u(p);R()}},i(a){if(!i){y(e.$$.fragment,a);for(let _=0;_<c.length;_+=1)y(s[_]);i=!0}},o(a){C(e.$$.fragment,a),s=s.filter(Boolean);for(let _=0;_<s.length;_+=1)C(s[_]);i=!1},d(a){a&&(v(l),v(t)),J(e,a),I(s,a),r=!1,o()}}}function at(n,e,l){let{f:t}=e,{onDone:i}=e;function r(s){t.geometry.coordinates.push(s.detail.lngLat.toArray()),l(0,t)}function o(s){s.key=="Enter"&&i()}function c(s,u,a,_){a[_]=s,l(0,t)}return n.$$set=s=>{"f"in s&&l(0,t=s.f),"onDone"in s&&l(3,i=s.onDone)},[t,r,o,i,c]}class ft extends W{constructor(e){super(),H(this,e,at,ct,Q,{f:0,onDone:3})}}let fe="MZEJTanw3WpxRvt7qDfo";async function ut(n){return n?{version:8,sources:{"raster-tiles":{type:"raster",tiles:[`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${await _t(n)}&key=${n}`],tileSize:256,attribution:"Google (detailed attributions not wired up)"}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:`https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=${fe}`}:`https://api.maptiler.com/maps/dataviz/style.json?key=${fe}`}async function _t(n){try{let l=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${n}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in l?l.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(l)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}function O(){return["","2","1","0","Critical"]}let z=[{name:"Street or path check",description:"Is this on-carriageway or a traffic-free path?",choices:["","Street check","Path check"]},{name:"SA03",description:"lane widths",choices:O()},{name:"SA04",description:"trip hazards",choices:O()},{name:"SA05",description:"kerbside activity",choices:O()},{name:"SA08",description:"motor traffic speed",choices:O()},{name:"SA09",description:"motor traffic volume",choices:O()},{name:"SA11",description:"footway widths",choices:O()},{name:"SA12",description:"effective width next to tram lines",choices:O()},{name:"SA13",description:"crossing angle of tram/train rails",choices:O()},{name:"SA14",description:"cycling surface and maintenance defects",choices:O()},{name:"SA15",description:"WW surface and maintenance defects",choices:O()},{name:"SA16",description:"guard railing",choices:O()}];function pt(n){let e=["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"];return{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{name:"Untitled link",color:e[n%e.length],answers:Array(z.length).fill("")}}}function dt(){try{let n=JSON.parse(window.localStorage.getItem("tmp-rcv2")||"");if("features"in n&&"answers"in n.features[0].properties)return n.features}catch{}return[]}function ue(n,e,l){const t=n.slice();return t[2]=e[l],t[3]=e,t[4]=l,t}function mt(n,e,l){const t=n.slice();return t[5]=e[l],t}function ht(n){let e;return{c(){e=w("option"),e.textContent=`${n[5]}`,e.__value=n[5],X(e,e.__value)},m(l,t){$(l,e,t)},p:B,d(l){l&&v(e)}}}function _e(n){let e,l=n[2].name+"",t,i,r=n[2].description+"",o,c,s,u,a,_,p=D(n[2].choices),m=[];for(let d=0;d<p.length;d+=1)m[d]=ht(mt(n,p,d));function f(){n[1].call(s,n[4])}return{c(){e=w("label"),t=F(l),i=F(": "),o=F(r),c=N(),s=w("select");for(let d=0;d<m.length;d+=1)m[d].c();u=N(),n[0].properties.answers[n[4]]===void 0&&qe(f)},m(d,S){$(d,e,S),b(e,t),b(e,i),b(e,o),b(e,c),b(e,s);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(s,null);x(s,n[0].properties.answers[n[4]],!0),b(e,u),a||(_=q(s,"change",f),a=!0)},p(d,S){n=d,S&1&&x(s,n[0].properties.answers[n[4]])},d(d){d&&v(e),I(m,d),a=!1,_()}}}function gt(n){let e,l=D(z),t=[];for(let i=0;i<l.length;i+=1)t[i]=_e(ue(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=ee()},m(i,r){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(i,r);$(i,e,r)},p(i,[r]){if(r&1){l=D(z);let o;for(o=0;o<l.length;o+=1){const c=ue(i,l,o);t[o]?t[o].p(c,r):(t[o]=_e(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:B,o:B,d(i){i&&v(e),I(t,i)}}}function kt(n,e,l){let{f:t}=e;function i(r){t.properties.answers[r]=ze(this),l(0,t)}return n.$$set=r=>{"f"in r&&l(0,t=r.f)},[t,i]}class bt extends W{constructor(e){super(),H(this,e,kt,gt,Q,{f:0})}}function pe(n,e,l){const t=n.slice();return t[2]=e[l],t[4]=l,t}function de(n,e,l){const t=n.slice();t[5]=e[l];const i=t[5].properties.answers[t[4]];return t[6]=i,t}function me(n,e,l){const t=n.slice();return t[5]=e[l],t}function he(n){let e,l=n[5].properties.name+"",t;return{c(){e=w("th"),t=F(l),T(e,"color",n[5].properties.color)},m(i,r){$(i,e,r),b(e,t)},p(i,r){r&1&&l!==(l=i[5].properties.name+"")&&U(t,l),r&1&&T(e,"color",i[5].properties.color)},d(i){i&&v(e)}}}function ge(n){let e,l=n[6]+"",t;return{c(){e=w("td"),t=F(l),T(e,"background",n[6]==""?"red":"green")},m(i,r){$(i,e,r),b(e,t)},p(i,r){r&1&&l!==(l=i[6]+"")&&U(t,l),r&1&&T(e,"background",i[6]==""?"red":"green")},d(i){i&&v(e)}}}function ke(n){let e,l,t,i,r=D(n[0]),o=[];for(let c=0;c<r.length;c+=1)o[c]=ge(de(n,r,c));return{c(){e=w("tr"),l=w("th"),l.textContent=`${n[2].name}`,t=N();for(let c=0;c<o.length;c+=1)o[c].c();i=N()},m(c,s){$(c,e,s),b(e,l),b(e,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);b(e,i)},p(c,s){if(s&1){r=D(c[0]);let u;for(u=0;u<r.length;u+=1){const a=de(c,r,u);o[u]?o[u].p(a,s):(o[u]=ge(a),o[u].c(),o[u].m(e,i))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(c){c&&v(e),I(o,c)}}}function $t(n){let e,l,t,i,r,o,c,s=D(n[0]),u=[];for(let p=0;p<s.length;p+=1)u[p]=he(me(n,s,p));let a=D(z),_=[];for(let p=0;p<a.length;p+=1)_[p]=ke(pe(n,a,p));return{c(){e=w("table"),l=w("thead"),t=w("tr"),i=w("th"),r=N();for(let p=0;p<u.length;p+=1)u[p].c();o=N(),c=w("tbody");for(let p=0;p<_.length;p+=1)_[p].c()},m(p,m){$(p,e,m),b(e,l),b(l,t),b(t,i),b(t,r);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null);b(e,o),b(e,c);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(c,null)},p(p,m){if(m&1){s=D(p[0]);let f;for(f=0;f<s.length;f+=1){const d=me(p,s,f);u[f]?u[f].p(d,m):(u[f]=he(d),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}if(m&1){a=D(z);let f;for(f=0;f<a.length;f+=1){const d=pe(p,a,f);_[f]?_[f].p(d,m):(_[f]=ke(d),_[f].c(),_[f].m(c,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=a.length}},d(p){p&&v(e),I(u,p),I(_,p)}}}function vt(n){let e,l;return e=new lt({props:{$$slots:{default:[$t]},$$scope:{ctx:n}}}),e.$on("close",n[1]),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p(t,[i]){const r={};i&2049&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function wt(n,e,l){let{links:t}=e;function i(r){ie.call(this,n,r)}return n.$$set=r=>{"links"in r&&l(0,t=r.links)},[t,i]}class yt extends W{constructor(e){super(),H(this,e,wt,vt,Q,{links:0})}}function be(n,e,l){const t=n.slice();return t[26]=e[l],t[28]=e,t[25]=l,t}function $e(n,e,l){const t=n.slice();return t[29]=e[l],t}function ve(n,e,l){const t=n.slice();return t[23]=e[l],t[25]=l,t}function we(n,e,l){const t=n.slice();return t[26]=e[l],t[25]=l,t}function ye(n){let e,l;return e=new yt({props:{links:n[0]}}),e.$on("close",n[7]),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p(t,i){const r={};i[0]&1&&(r.links=t[0]),e.$set(r)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ct(n){let e,l,t,i=z[n[3].idx].name+"",r,o,c=z[n[3].idx].description+"",s,u,a,_,p,m=D(n[0]),f=[];for(let d=0;d<m.length;d+=1)f[d]=Se(be(n,m,d));return{c(){e=w("button"),e.textContent="Done",l=N(),t=w("h2"),r=F(i),o=F(": "),s=F(c),u=N(),a=w("ol");for(let d=0;d<f.length;d+=1)f[d].c()},m(d,S){$(d,e,S),$(d,l,S),$(d,t,S),b(t,r),b(t,o),b(t,s),$(d,u,S),$(d,a,S);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(a,null);_||(p=q(e,"click",n[20]),_=!0)},p(d,S){if(S[0]&8&&i!==(i=z[d[3].idx].name+"")&&U(r,i),S[0]&8&&c!==(c=z[d[3].idx].description+"")&&U(s,c),S[0]&9){m=D(d[0]);let h;for(h=0;h<m.length;h+=1){const Z=be(d,m,h);f[h]?f[h].p(Z,S):(f[h]=Se(Z),f[h].c(),f[h].m(a,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=m.length}},i:B,o:B,d(d){d&&(v(e),v(l),v(t),v(u),v(a)),I(f,d),_=!1,p()}}}function St(n){let e,l,t,i,r,o,c,s,u,a,_;function p(f){n[19](f)}let m={};return n[0][n[3].idx]!==void 0&&(m.f=n[0][n[3].idx]),c=new bt({props:m}),Y.push(()=>te(c,"f",p)),{c(){e=w("button"),e.textContent="Done",l=N(),t=w("label"),i=F(`Name:
        `),r=w("input"),o=N(),j(c.$$.fragment),P(r,"type","text")},m(f,d){$(f,e,d),$(f,l,d),$(f,t,d),b(t,i),b(t,r),X(r,n[0][n[3].idx].properties.name),$(f,o,d),G(c,f,d),u=!0,a||(_=[q(e,"click",n[17]),q(r,"input",n[18])],a=!0)},p(f,d){d[0]&9&&r.value!==f[0][f[3].idx].properties.name&&X(r,f[0][f[3].idx].properties.name);const S={};!s&&d[0]&9&&(s=!0,S.f=f[0][f[3].idx],ne(()=>s=!1)),c.$set(S)},i(f){u||(y(c.$$.fragment,f),u=!0)},o(f){C(c.$$.fragment,f),u=!1},d(f){f&&(v(e),v(l),v(t),v(o)),J(c,f),a=!1,re(_)}}}function Lt(n){let e,l,t,i,r,o,c,s,u,a,_,p,m,f,d,S=D(n[0]),h=[];for(let k=0;k<S.length;k+=1)h[k]=Le(we(n,S,k));const Z=k=>C(h[k],1,1,()=>{h[k]=null});let M=D(z),A=[];for(let k=0;k<M.length;k+=1)A[k]=Ee(ve(n,M,k));const le=k=>C(A[k],1,1,()=>{A[k]=null});return{c(){e=w("div"),l=w("button"),l.textContent="New link",t=N(),i=w("button"),i.textContent="Clear",r=N(),o=w("button"),o.textContent="Table of questions",c=N(),s=w("button"),s.textContent="Download",u=F(`

      Links:
      `),a=w("ol");for(let k=0;k<h.length;k+=1)h[k].c();_=F(`

      Questions:
      `),p=w("ol");for(let k=0;k<A.length;k+=1)A[k].c()},m(k,L){$(k,e,L),b(e,l),b(e,t),b(e,i),b(e,r),b(e,o),b(e,c),b(e,s),$(k,u,L),$(k,a,L);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(a,null);$(k,_,L),$(k,p,L);for(let g=0;g<A.length;g+=1)A[g]&&A[g].m(p,null);m=!0,f||(d=[q(l,"click",n[6]),q(i,"click",n[5]),q(o,"click",n[12]),q(s,"click",n[13])],f=!0)},p(k,L){if(L[0]&9){S=D(k[0]);let g;for(g=0;g<S.length;g+=1){const E=we(k,S,g);h[g]?(h[g].p(E,L),y(h[g],1)):(h[g]=Le(E),h[g].c(),y(h[g],1),h[g].m(a,null))}for(K(),g=S.length;g<h.length;g+=1)Z(g);R()}if(L[0]&9){M=D(z);let g;for(g=0;g<M.length;g+=1){const E=ve(k,M,g);A[g]?(A[g].p(E,L),y(A[g],1)):(A[g]=Ee(E),A[g].c(),y(A[g],1),A[g].m(p,null))}for(K(),g=M.length;g<A.length;g+=1)le(g);R()}},i(k){if(!m){for(let L=0;L<S.length;L+=1)y(h[L]);for(let L=0;L<M.length;L+=1)y(A[L]);m=!0}},o(k){h=h.filter(Boolean);for(let L=0;L<h.length;L+=1)C(h[L]);A=A.filter(Boolean);for(let L=0;L<A.length;L+=1)C(A[L]);m=!1},d(k){k&&(v(e),v(u),v(a),v(_),v(p)),I(h,k),I(A,k),f=!1,re(d)}}}function Ce(n){let e,l=n[29]+"",t,i;return{c(){e=w("option"),t=F(l),e.__value=i=n[29],X(e,e.__value)},m(r,o){$(r,e,o),b(e,t)},p(r,o){o[0]&8&&l!==(l=r[29]+"")&&U(t,l),o[0]&8&&i!==(i=r[29])&&(e.__value=i,X(e,e.__value))},d(r){r&&v(e)}}}function Se(n){let e,l,t=n[26].properties.name+"",i,r,o,c,s,u,a=D(z[n[3].idx].choices),_=[];for(let m=0;m<a.length;m+=1)_[m]=Ce($e(n,a,m));function p(){n[21].call(o,n[28],n[25])}return{c(){e=w("li"),l=w("span"),i=F(t),r=N(),o=w("select");for(let m=0;m<_.length;m+=1)_[m].c();c=N(),T(l,"color",n[26].properties.color),n[26].properties.answers[n[3].idx]===void 0&&qe(p)},m(m,f){$(m,e,f),b(e,l),b(l,i),b(e,r),b(e,o);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(o,null);x(o,n[26].properties.answers[n[3].idx],!0),b(e,c),s||(u=q(o,"change",p),s=!0)},p(m,f){if(n=m,f[0]&1&&t!==(t=n[26].properties.name+"")&&U(i,t),f[0]&1&&T(l,"color",n[26].properties.color),f[0]&8){a=D(z[n[3].idx].choices);let d;for(d=0;d<a.length;d+=1){const S=$e(n,a,d);_[d]?_[d].p(S,f):(_[d]=Ce(S),_[d].c(),_[d].m(o,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=a.length}f[0]&9&&x(o,n[26].properties.answers[n[3].idx])},d(m){m&&v(e),I(_,m),s=!1,u()}}}function Et(n){let e=n[26].properties.name+"",l;return{c(){l=F(e)},m(t,i){$(t,l,i)},p(t,i){i[0]&1&&e!==(e=t[26].properties.name+"")&&U(l,e)},d(t){t&&v(l)}}}function Le(n){let e,l,t,i;function r(){return n[14](n[25])}return l=new Ge({props:{color:n[26].properties.color,$$slots:{default:[Et]},$$scope:{ctx:n}}}),l.$on("click",r),{c(){e=w("li"),j(l.$$.fragment),t=N()},m(o,c){$(o,e,c),G(l,e,null),b(e,t),i=!0},p(o,c){n=o;const s={};c[0]&1&&(s.color=n[26].properties.color),c[0]&1|c[1]&2&&(s.$$scope={dirty:c,ctx:n}),l.$set(s)},i(o){i||(y(l.$$.fragment,o),i=!0)},o(o){C(l.$$.fragment,o),i=!1},d(o){o&&v(e),J(l)}}}function At(n){let e=n[23].name+"",l,t;return{c(){l=F(e),t=N()},m(i,r){$(i,l,r),$(i,t,r)},p:B,d(i){i&&(v(l),v(t))}}}function Ee(n){let e,l,t,i,r,o,c,s;function u(){return n[15](n[25])}l=new Ge({props:{$$slots:{default:[At]},$$scope:{ctx:n}}}),l.$on("click",u);function a(..._){return n[16](n[25],..._)}return{c(){e=w("li"),j(l.$$.fragment),t=F(`:
            `),i=w("progress"),c=N(),i.value=r=n[0].filter(a).length,P(i,"max",o=n[0].length),P(i,"class","svelte-zadug4")},m(_,p){$(_,e,p),G(l,e,null),b(e,t),b(e,i),b(e,c),s=!0},p(_,p){n=_;const m={};p[1]&2&&(m.$$scope={dirty:p,ctx:n}),l.$set(m),(!s||p[0]&9&&r!==(r=n[0].filter(a).length))&&(i.value=r),(!s||p[0]&9&&o!==(o=n[0].length))&&P(i,"max",o)},i(_){s||(y(l.$$.fragment,_),s=!0)},o(_){C(l.$$.fragment,_),s=!1},d(_){_&&v(e),J(l)}}}function Nt(n){let e,l,t,i;const r=[Lt,St,Ct],o=[];function c(s,u){return s[3].kind=="neutral"?0:s[3].kind=="edit-link"?1:s[3].kind=="edit-question"?2:-1}return~(l=c(n))&&(t=o[l]=r[l](n)),{c(){e=w("div"),t&&t.c(),P(e,"slot","left")},m(s,u){$(s,e,u),~l&&o[l].m(e,null),i=!0},p(s,u){let a=l;l=c(s),l===a?~l&&o[l].p(s,u):(t&&(K(),C(o[a],1,1,()=>{o[a]=null}),R()),~l?(t=o[l],t?t.p(s,u):(t=o[l]=r[l](s),t.c()),y(t,1),t.m(e,null)):t=null)},i(s){i||(y(t),i=!0)},o(s){C(t),i=!1},d(s){s&&v(e),~l&&o[l].d()}}}function Bt(n){return{c:B,m:B,p:B,i:B,o:B,d:B}}function Dt(n){let e,l,t;function i(o){n[11](o)}let r={style:n[22],standardControls:!0,hash:!0,$$slots:{default:[jt]},$$scope:{ctx:n}};return n[2]!==void 0&&(r.map=n[2]),e=new He({props:r}),Y.push(()=>te(e,"map",i)),{c(){j(e.$$.fragment)},m(o,c){G(e,o,c),t=!0},p(o,c){const s={};c[0]&11|c[1]&2&&(s.$$scope={dirty:c,ctx:o}),!l&&c[0]&4&&(l=!0,s.map=o[2],ne(()=>l=!1)),e.$set(s)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function Ft(n){let e,l;return e=new je({props:{paint:{"line-color":["case",["==",["id"],n[3].idx],["get","color"],"black"],"line-opacity":["case",["==",["id"],n[3].idx],1,.5],"line-width":6}}}),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p(t,i){const r={};i[0]&8&&(r.paint={"line-color":["case",["==",["id"],t[3].idx],["get","color"],"black"],"line-opacity":["case",["==",["id"],t[3].idx],1,.5],"line-width":6}),e.$set(r)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function qt(n){let e,l;return e=new je({props:{manageHoverState:!0,paint:{"line-color":["get","color"],"line-width":Ze(6,9)},hoverCursor:"pointer"}}),e.$on("click",n[8]),{c(){j(e.$$.fragment)},m(t,i){G(e,t,i),l=!0},p:B,i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function zt(n){let e,l,t,i;const r=[qt,Ft],o=[];function c(s,u){return s[3].kind=="neutral"||s[3].kind=="edit-question"?0:s[3].kind=="edit-link"?1:-1}return~(e=c(n))&&(l=o[e]=r[e](n)),{c(){l&&l.c(),t=ee()},m(s,u){~e&&o[e].m(s,u),$(s,t,u),i=!0},p(s,u){let a=e;e=c(s),e===a?~e&&o[e].p(s,u):(l&&(K(),C(o[a],1,1,()=>{o[a]=null}),R()),~e?(l=o[e],l?l.p(s,u):(l=o[e]=r[e](s),l.c()),y(l,1),l.m(t.parentNode,t)):l=null)},i(s){i||(y(l),i=!0)},o(s){C(l),i=!1},d(s){s&&v(t),~e&&o[e].d(s)}}}function Ae(n){let e,l,t;function i(o){n[10](o)}let r={onDone:n[9]};return n[0][n[3].idx]!==void 0&&(r.f=n[0][n[3].idx]),e=new ft({props:r}),Y.push(()=>te(e,"f",i)),{c(){j(e.$$.fragment)},m(o,c){G(e,o,c),t=!0},p(o,c){const s={};c[0]&8&&(s.onDone=o[9]),!l&&c[0]&9&&(l=!0,s.f=o[0][o[3].idx],ne(()=>l=!1)),e.$set(s)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function jt(n){let e,l,t,i;e=new Qe({props:{data:n[1],generateId:!0,$$slots:{default:[zt]},$$scope:{ctx:n}}});let r=n[3].kind=="edit-link"&&Ae(n);return{c(){j(e.$$.fragment),l=N(),r&&r.c(),t=ee()},m(o,c){G(e,o,c),$(o,l,c),r&&r.m(o,c),$(o,t,c),i=!0},p(o,c){const s={};c[0]&2&&(s.data=o[1]),c[0]&8|c[1]&2&&(s.$$scope={dirty:c,ctx:o}),e.$set(s),o[3].kind=="edit-link"?r?(r.p(o,c),c[0]&8&&y(r,1)):(r=Ae(o),r.c(),y(r,1),r.m(t.parentNode,t)):r&&(K(),C(r,1,1,()=>{r=null}),R())},i(o){i||(y(e.$$.fragment,o),y(r),i=!0)},o(o){C(e.$$.fragment,o),C(r),i=!1},d(o){o&&(v(l),v(t)),J(e,o),r&&r.d(o)}}}function Gt(n){return{c:B,m:B,p:B,i:B,o:B,d:B}}function Jt(n){let e,l,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Gt,then:Dt,catch:Bt,value:22,blocks:[,,,]};return Xe(ut(new URLSearchParams(window.location.search).get("google")||""),t),{c(){e=w("div"),t.block.c(),P(e,"slot","main"),T(e,"position","relative"),T(e,"width","100%"),T(e,"height","100vh")},m(i,r){$(i,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,l=!0},p(i,r){n=i,Ye(t,n,r)},i(i){l||(y(t.block),l=!0)},o(i){for(let r=0;r<3;r+=1){const o=t.blocks[r];C(o)}l=!1},d(i){i&&v(e),t.block.d(),t.token=null,t=null}}}function Ot(n){let e,l,t,i=n[4]&&ye(n);return l=new We({props:{$$slots:{main:[Jt],left:[Nt]},$$scope:{ctx:n}}}),{c(){i&&i.c(),e=N(),j(l.$$.fragment)},m(r,o){i&&i.m(r,o),$(r,e,o),G(l,r,o),t=!0},p(r,o){r[4]?i?(i.p(r,o),o[0]&16&&y(i,1)):(i=ye(r),i.c(),y(i,1),i.m(e.parentNode,e)):i&&(K(),C(i,1,1,()=>{i=null}),R());const c={};o[0]&31|o[1]&2&&(c.$$scope={dirty:o,ctx:r}),l.$set(c)},i(r){t||(y(i),y(l.$$.fragment,r),t=!0)},o(r){C(i),C(l.$$.fragment,r),t=!1},d(r){r&&v(e),i&&i.d(r),J(l,r)}}}function Tt(n,e,l){let t,i,r=dt(),o={kind:"neutral"},c=!1;function s(){l(0,r=[])}function u(){let E=pt(r.length);l(0,r=[...r,E]),l(3,o={kind:"edit-link",idx:r.length-1})}const a=()=>l(4,c=!1),_=E=>l(3,o={kind:"edit-link",idx:E.detail.features[0].id}),p=()=>l(3,o={kind:"neutral"});function m(E){n.$$.not_equal(r[o.idx],E)&&(r[o.idx]=E,l(0,r))}function f(E){i=E,l(2,i)}const d=()=>l(4,c=!0),S=()=>ot("rcv2.geojson",JSON.stringify(t)),h=E=>l(3,o={kind:"edit-link",idx:E}),Z=E=>l(3,o={kind:"edit-question",idx:E}),M=(E,oe)=>oe.properties.answers[E]!="",A=()=>l(3,o={kind:"neutral"});function le(){r[o.idx].properties.name=this.value,l(0,r),l(3,o)}function k(E){n.$$.not_equal(r[o.idx],E)&&(r[o.idx]=E,l(0,r))}const L=()=>l(3,o={kind:"neutral"});function g(E,oe){E[oe].properties.answers[o.idx]=ze(this),l(0,r),l(3,o)}return n.$$.update=()=>{n.$$.dirty[0]&1&&l(1,t={type:"FeatureCollection",features:r}),n.$$.dirty[0]&2&&window.localStorage.setItem("tmp-rcv2",JSON.stringify(t))},[r,t,i,o,c,s,u,a,_,p,m,f,d,S,h,Z,M,A,le,k,L,g]}class It extends W{constructor(e){super(),H(this,e,Tt,Ot,Q,{},null,[-1,-1])}}new It({target:document.getElementById("app")});
