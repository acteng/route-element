import{a0 as ae,a1 as ue,a2 as K,w as j,e as h,x as z,t as k,a3 as ce,S as I,i as M,s as A,A as fe,a4 as pe,B as _e,E as me,h as de,G as b,K as G,$ as J,v as d,Y as N,a5 as ge,u as ke,j as be,k as he,y as g,l as $e,H as T,c as S,J as L,r as W,m as B,f as E,I as re,M as ve,b as P,a as R,d as U,N as y,R as O,W as q,a6 as Y,X as w,a7 as Q,a8 as se,Z,a9 as V,U as ye,_ as we,O as Ce,T as qe,Q as ie,P as Le}from"./Layout-b4877880.js";function Se(n,e){const l=e.token={};function t(u,r,o,i){if(e.token!==l)return;e.resolved=i;let s=e.ctx;o!==void 0&&(s=s.slice(),s[o]=i);const p=u&&(e.current=u)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach((_,c)=>{c!==r&&_&&(j(),h(_,1,1,()=>{e.blocks[c]===_&&(e.blocks[c]=null)}),z())}):e.block.d(1),p.c(),k(p,1),p.m(e.mount(),e.anchor),a=!0),e.block=p,e.blocks&&(e.blocks[r]=p),a&&ce()}if(ae(n)){const u=ue();if(n.then(r=>{K(u),t(e.then,1,e.value,r),K(null)},r=>{if(K(u),t(e.catch,2,e.error,r),K(null),!e.hasCatch)throw r}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,n),!0;e.resolved=n}}function Be(n,e,l){const t=e.slice(),{resolved:u}=n;n.current===n.then&&(t[n.value]=u),n.current===n.catch&&(t[n.error]=u),n.block.p(t,l)}function Ee(n,e,l){let t;const u=fe();let{layer:r=void 0}=e;const{map:o}=pe();_e(n,o,a=>l(2,t=a));function i(a){u(a.type,{...a,map:o})}const s=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],p=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return me(()=>{if(t)if(r)for(const a of s)t.off(a,r,i);else for(const a of p)t.off(a,i)}),n.$$set=a=>{"layer"in a&&l(1,r=a.layer)},n.$$.update=()=>{if(n.$$.dirty&6&&t)if(r)for(const a of s)t.on(a,r,i);else for(const a of p)t.on(a,i)},[o,r,t]}class De extends I{constructor(e){super(),M(this,e,Ee,null,A,{layer:1})}}function Ne(n){let e,l,t,u;const r=n[2].default,o=de(r,n,n[1],null);return{c(){e=b("a"),o&&o.c(),G(e,"href","#"),J(e,"color",n[0])},m(i,s){d(i,e,s),o&&o.m(e,null),l=!0,t||(u=N(e,"click",ge(n[3])),t=!0)},p(i,[s]){o&&o.p&&(!l||s&2)&&ke(o,r,i,i[1],l?he(r,i[1],s,null):be(i[1]),null),s&1&&J(e,"color",i[0])},i(i){l||(k(o,i),l=!0)},o(i){h(o,i),l=!1},d(i){i&&g(e),o&&o.d(i),t=!1,u()}}}function Fe(n,e,l){let{$$slots:t={},$$scope:u}=e,{color:r}=e;function o(i){$e.call(this,n,i)}return n.$$set=i=>{"color"in i&&l(0,r=i.color),"$$scope"in i&&l(1,u=i.$$scope)},[r,u,t,o]}class je extends I{constructor(e){super(),M(this,e,Fe,Ne,A,{color:0})}}function x(n,e,l){const t=n.slice();return t[5]=e[l],t[6]=e,t[7]=l,t}function ze(n){let e,l;return{c(){e=b("span"),l=L(),G(e,"class","dot svelte-1lzmzqo")},m(t,u){d(t,e,u),d(t,l,u)},p:y,d(t){t&&(g(e),g(l))}}}function ee(n){let e,l,t;function u(o){n[4](o,n[5],n[6],n[7])}let r={draggable:!0,$$slots:{default:[ze]},$$scope:{ctx:n}};return n[5]!==void 0&&(r.lngLat=n[5]),e=new ve({props:r}),P.push(()=>R(e,"lngLat",u)),{c(){S(e.$$.fragment)},m(o,i){B(e,o,i),t=!0},p(o,i){n=o;const s={};i&256&&(s.$$scope={dirty:i,ctx:n}),!l&&i&1&&(l=!0,s.lngLat=n[5],U(()=>l=!1)),e.$set(s)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){E(e,o)}}}function Ge(n){let e,l,t,u,r,o;e=new De({}),e.$on("click",n[1]);let i=T(n[0].geometry.coordinates),s=[];for(let a=0;a<i.length;a+=1)s[a]=ee(x(n,i,a));const p=a=>h(s[a],1,1,()=>{s[a]=null});return{c(){S(e.$$.fragment),l=L();for(let a=0;a<s.length;a+=1)s[a].c();t=W()},m(a,_){B(e,a,_),d(a,l,_);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(a,_);d(a,t,_),u=!0,r||(o=N(window,"keydown",n[2]),r=!0)},p(a,[_]){if(_&1){i=T(a[0].geometry.coordinates);let c;for(c=0;c<i.length;c+=1){const m=x(a,i,c);s[c]?(s[c].p(m,_),k(s[c],1)):(s[c]=ee(m),s[c].c(),k(s[c],1),s[c].m(t.parentNode,t))}for(j(),c=i.length;c<s.length;c+=1)p(c);z()}},i(a){if(!u){k(e.$$.fragment,a);for(let _=0;_<i.length;_+=1)k(s[_]);u=!0}},o(a){h(e.$$.fragment,a),s=s.filter(Boolean);for(let _=0;_<s.length;_+=1)h(s[_]);u=!1},d(a){a&&(g(l),g(t)),E(e,a),re(s,a),r=!1,o()}}}function Je(n,e,l){let{f:t}=e,{onDone:u}=e;function r(s){t.geometry.coordinates.push(s.detail.lngLat.toArray()),l(0,t)}function o(s){s.key=="Enter"&&u()}function i(s,p,a,_){a[_]=s,l(0,t)}return n.$$set=s=>{"f"in s&&l(0,t=s.f),"onDone"in s&&l(3,u=s.onDone)},[t,r,o,u,i]}class Oe extends I{constructor(e){super(),M(this,e,Je,Ge,A,{f:0,onDone:3})}}let te="MZEJTanw3WpxRvt7qDfo";async function Ie(n){return n?{version:8,sources:{"raster-tiles":{type:"raster",tiles:[`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${await Me(n)}&key=${n}`],tileSize:256,attribution:"Google (detailed attributions not wired up)"}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:`https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=${te}`}:`https://api.maptiler.com/maps/dataviz/style.json?key=${te}`}async function Me(n){try{let l=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${n}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in l?l.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(l)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}function Ae(n){let e,l,t,u,r,o,i,s,p,a,_,c,m,f,v,F,$,H,X;return{c(){e=b("label"),l=O(`Question 1
  `),t=b("select"),u=b("option"),r=b("option"),r.textContent="A",o=b("option"),o.textContent="B",i=L(),s=b("label"),p=O(`Question 2
  `),a=b("select"),_=b("option"),c=b("option"),c.textContent="C",m=b("option"),m.textContent="D",f=L(),v=b("label"),F=O(`Question 3
  `),$=b("input"),u.__value="",q(u,u.__value),r.__value="a",q(r,r.__value),o.__value="b",q(o,o.__value),n[0].properties.q1===void 0&&Y(()=>n[1].call(t)),_.__value="",q(_,_.__value),c.__value="c",q(c,c.__value),m.__value="d",q(m,m.__value),n[0].properties.q2===void 0&&Y(()=>n[2].call(a)),G($,"type","number")},m(C,D){d(C,e,D),w(e,l),w(e,t),w(t,u),w(t,r),w(t,o),Q(t,n[0].properties.q1,!0),d(C,i,D),d(C,s,D),w(s,p),w(s,a),w(a,_),w(a,c),w(a,m),Q(a,n[0].properties.q2,!0),d(C,f,D),d(C,v,D),w(v,F),w(v,$),q($,n[0].properties.q3),H||(X=[N(t,"change",n[1]),N(a,"change",n[2]),N($,"input",n[3])],H=!0)},p(C,[D]){D&1&&Q(t,C[0].properties.q1),D&1&&Q(a,C[0].properties.q2),D&1&&se($.value)!==C[0].properties.q3&&q($,C[0].properties.q3)},i:y,o:y,d(C){C&&(g(e),g(i),g(s),g(f),g(v)),H=!1,Z(X)}}}function Ke(n,e,l){let{f:t}=e;function u(){t.properties.q1=V(this),l(0,t)}function r(){t.properties.q2=V(this),l(0,t)}function o(){t.properties.q3=se(this.value),l(0,t)}return n.$$set=i=>{"f"in i&&l(0,t=i.f)},[t,u,r,o]}class Qe extends I{constructor(e){super(),M(this,e,Ke,Ae,A,{f:0})}}function Te(n){let e=["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"];return{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{name:"Untitled link",color:e[n%e.length],q1:"",q2:"",q3:0}}}function Pe(){try{let n=JSON.parse(window.localStorage.getItem("tmp-rcv2")||"");if("features"in n)return n.features}catch{}return[]}function ne(n,e,l){const t=n.slice();return t[15]=e[l],t[17]=l,t}function Re(n){let e,l,t,u,r,o,i,s,p,a,_;function c(f){n[13](f)}let m={};return n[0][n[3]]!==void 0&&(m.f=n[0][n[3]]),i=new Qe({props:m}),P.push(()=>R(i,"f",c)),{c(){e=b("button"),e.textContent="Done",l=L(),t=b("label"),u=O(`Name:
        `),r=b("input"),o=L(),S(i.$$.fragment),G(r,"type","text")},m(f,v){d(f,e,v),d(f,l,v),d(f,t,v),w(t,u),w(t,r),q(r,n[0][n[3]].properties.name),d(f,o,v),B(i,f,v),p=!0,a||(_=[N(e,"click",n[11]),N(r,"input",n[12])],a=!0)},p(f,v){v&9&&r.value!==f[0][f[3]].properties.name&&q(r,f[0][f[3]].properties.name);const F={};!s&&v&9&&(s=!0,F.f=f[0][f[3]],U(()=>s=!1)),i.$set(F)},i(f){p||(k(i.$$.fragment,f),p=!0)},o(f){h(i.$$.fragment,f),p=!1},d(f){f&&(g(e),g(l),g(t),g(o)),E(i,f),a=!1,Z(_)}}}function Ue(n){let e,l,t,u,r,o,i,s,p=T(n[0]),a=[];for(let c=0;c<p.length;c+=1)a[c]=le(ne(n,p,c));const _=c=>h(a[c],1,1,()=>{a[c]=null});return{c(){e=b("button"),e.textContent="New link",l=L(),t=b("button"),t.textContent="Clear",u=L(),r=b("ol");for(let c=0;c<a.length;c+=1)a[c].c()},m(c,m){d(c,e,m),d(c,l,m),d(c,t,m),d(c,u,m),d(c,r,m);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(r,null);o=!0,i||(s=[N(e,"click",n[5]),N(t,"click",n[4])],i=!0)},p(c,m){if(m&9){p=T(c[0]);let f;for(f=0;f<p.length;f+=1){const v=ne(c,p,f);a[f]?(a[f].p(v,m),k(a[f],1)):(a[f]=le(v),a[f].c(),k(a[f],1),a[f].m(r,null))}for(j(),f=p.length;f<a.length;f+=1)_(f);z()}},i(c){if(!o){for(let m=0;m<p.length;m+=1)k(a[m]);o=!0}},o(c){a=a.filter(Boolean);for(let m=0;m<a.length;m+=1)h(a[m]);o=!1},d(c){c&&(g(e),g(l),g(t),g(u),g(r)),re(a,c),i=!1,Z(s)}}}function He(n){let e=n[15].properties.name+"",l;return{c(){l=O(e)},m(t,u){d(t,l,u)},p(t,u){u&1&&e!==(e=t[15].properties.name+"")&&qe(l,e)},d(t){t&&g(l)}}}function le(n){let e,l,t,u;function r(){return n[10](n[17])}return l=new je({props:{color:n[15].properties.color,$$slots:{default:[He]},$$scope:{ctx:n}}}),l.$on("click",r),{c(){e=b("li"),S(l.$$.fragment),t=L()},m(o,i){d(o,e,i),B(l,e,null),w(e,t),u=!0},p(o,i){n=o;const s={};i&1&&(s.color=n[15].properties.color),i&262145&&(s.$$scope={dirty:i,ctx:n}),l.$set(s)},i(o){u||(k(l.$$.fragment,o),u=!0)},o(o){h(l.$$.fragment,o),u=!1},d(o){o&&g(e),E(l)}}}function We(n){let e,l,t,u;const r=[Ue,Re],o=[];function i(s,p){return s[3]==null?0:1}return l=i(n),t=o[l]=r[l](n),{c(){e=b("div"),t.c(),G(e,"slot","left")},m(s,p){d(s,e,p),o[l].m(e,null),u=!0},p(s,p){let a=l;l=i(s),l===a?o[l].p(s,p):(j(),h(o[a],1,1,()=>{o[a]=null}),z(),t=o[l],t?t.p(s,p):(t=o[l]=r[l](s),t.c()),k(t,1),t.m(e,null))},i(s){u||(k(t),u=!0)},o(s){h(t),u=!1},d(s){s&&g(e),o[l].d()}}}function Ze(n){return{c:y,m:y,p:y,i:y,o:y,d:y}}function Xe(n){let e,l,t;function u(o){n[9](o)}let r={style:n[14],standardControls:!0,hash:!0,$$slots:{default:[et]},$$scope:{ctx:n}};return n[2]!==void 0&&(r.map=n[2]),e=new we({props:r}),P.push(()=>R(e,"map",u)),{c(){S(e.$$.fragment)},m(o,i){B(e,o,i),t=!0},p(o,i){const s={};i&262155&&(s.$$scope={dirty:i,ctx:o}),!l&&i&4&&(l=!0,s.map=o[2],U(()=>l=!1)),e.$set(s)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){E(e,o)}}}function Ye(n){let e,l;return e=new ie({props:{paint:{"line-color":"black","line-opacity":.5,"line-width":6}}}),{c(){S(e.$$.fragment)},m(t,u){B(e,t,u),l=!0},p:y,i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function Ve(n){let e,l;return e=new ie({props:{manageHoverState:!0,paint:{"line-color":["get","color"],"line-width":Le(6,9)},hoverCursor:"pointer"}}),e.$on("click",n[6]),{c(){S(e.$$.fragment)},m(t,u){B(e,t,u),l=!0},p:y,i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function xe(n){let e,l,t,u;const r=[Ve,Ye],o=[];function i(s,p){return s[3]==null?0:1}return e=i(n),l=o[e]=r[e](n),{c(){l.c(),t=W()},m(s,p){o[e].m(s,p),d(s,t,p),u=!0},p(s,p){let a=e;e=i(s),e===a?o[e].p(s,p):(j(),h(o[a],1,1,()=>{o[a]=null}),z(),l=o[e],l?l.p(s,p):(l=o[e]=r[e](s),l.c()),k(l,1),l.m(t.parentNode,t))},i(s){u||(k(l),u=!0)},o(s){h(l),u=!1},d(s){s&&g(t),o[e].d(s)}}}function oe(n){let e,l,t;function u(o){n[8](o)}let r={onDone:n[7]};return n[0][n[3]]!==void 0&&(r.f=n[0][n[3]]),e=new Oe({props:r}),P.push(()=>R(e,"f",u)),{c(){S(e.$$.fragment)},m(o,i){B(e,o,i),t=!0},p(o,i){const s={};i&8&&(s.onDone=o[7]),!l&&i&9&&(l=!0,s.f=o[0][o[3]],U(()=>l=!1)),e.$set(s)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){E(e,o)}}}function et(n){let e,l,t,u;e=new Ce({props:{data:n[1],generateId:!0,$$slots:{default:[xe]},$$scope:{ctx:n}}});let r=n[3]!=null&&oe(n);return{c(){S(e.$$.fragment),l=L(),r&&r.c(),t=W()},m(o,i){B(e,o,i),d(o,l,i),r&&r.m(o,i),d(o,t,i),u=!0},p(o,i){const s={};i&2&&(s.data=o[1]),i&262152&&(s.$$scope={dirty:i,ctx:o}),e.$set(s),o[3]!=null?r?(r.p(o,i),i&8&&k(r,1)):(r=oe(o),r.c(),k(r,1),r.m(t.parentNode,t)):r&&(j(),h(r,1,1,()=>{r=null}),z())},i(o){u||(k(e.$$.fragment,o),k(r),u=!0)},o(o){h(e.$$.fragment,o),h(r),u=!1},d(o){o&&(g(l),g(t)),E(e,o),r&&r.d(o)}}}function tt(n){return{c:y,m:y,p:y,i:y,o:y,d:y}}function nt(n){let e,l,t={ctx:n,current:null,token:null,hasCatch:!1,pending:tt,then:Xe,catch:Ze,value:14,blocks:[,,,]};return Se(Ie(new URLSearchParams(window.location.search).get("google")||""),t),{c(){e=b("div"),t.block.c(),G(e,"slot","main"),J(e,"position","relative"),J(e,"width","100%"),J(e,"height","100vh")},m(u,r){d(u,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,l=!0},p(u,r){n=u,Be(t,n,r)},i(u){l||(k(t.block),l=!0)},o(u){for(let r=0;r<3;r+=1){const o=t.blocks[r];h(o)}l=!1},d(u){u&&g(e),t.block.d(),t.token=null,t=null}}}function lt(n){let e,l;return e=new ye({props:{$$slots:{main:[nt],left:[We]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment)},m(t,u){B(e,t,u),l=!0},p(t,[u]){const r={};u&262159&&(r.$$scope={dirty:u,ctx:t}),e.$set(r)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){E(e,t)}}}function ot(n,e,l){let t,u,r=Pe(),o=null;function i(){l(0,r=[])}function s(){let $=Te(r.length);l(0,r=[...r,$]),l(3,o=r.length-1)}const p=$=>l(3,o=$.detail.features[0].id),a=()=>l(3,o=null);function _($){n.$$.not_equal(r[o],$)&&(r[o]=$,l(0,r))}function c($){u=$,l(2,u)}const m=$=>l(3,o=$),f=()=>l(3,o=null);function v(){r[o].properties.name=this.value,l(0,r)}function F($){n.$$.not_equal(r[o],$)&&(r[o]=$,l(0,r))}return n.$$.update=()=>{n.$$.dirty&1&&l(1,t={type:"FeatureCollection",features:r}),n.$$.dirty&2&&window.localStorage.setItem("tmp-rcv2",JSON.stringify(t))},[r,t,u,o,i,s,p,a,_,c,m,f,v,F]}class rt extends I{constructor(e){super(),M(this,e,ot,lt,A,{})}}new rt({target:document.getElementById("app")});
