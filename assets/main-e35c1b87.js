import{S as Vn,i as jn,s as nn,e as io,a as tt,t as U,g as Xr,b as X,c as Yr,d as et,f as Yo,h as su,u as Wp,j as xe,o as ms,k as ui,l as Oa,n as qs,m as Hr,p as Kr,q as Jr,r as Zr,v as Qr,w as oo,x as Rt,y as At,z as so,A as Mt,B as ee,C as Xp,D as Yp,E as Hp,F as yt,G as un,H as xo,I as Hu,J as Le,K as ia,L as Kp,M as au,N as Jp,O as oi,P as Zp,Q as uu,R as Qp,T as $p,U as th,V as tf,W as eh,X as Bt,Y as Et,Z as ln,_ as nh,$ as rh,a0 as oa,a1 as H,a2 as ih}from"./Layout-2dd641ae.js";function Ku(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}let pt;const ef=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&ef.decode();let So=null;function as(){return(So===null||So.byteLength===0)&&(So=new Uint8Array(pt.memory.buffer)),So}function pr(e,t){return e=e>>>0,ef.decode(as().subarray(e,e+t))}function oh(e){const t=pt.__externref_table_alloc();return pt.__wbindgen_export_2.set(t,e),t}function we(e,t){try{return e.apply(this,t)}catch(n){const r=oh(n);pt.__wbindgen_exn_store(r)}}let si=0;const us=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},sh=typeof us.encodeInto=="function"?function(e,t){return us.encodeInto(e,t)}:function(e,t){const n=us.encode(e);return t.set(n),{read:e.length,written:n.length}};function wo(e,t,n){if(n===void 0){const a=us.encode(e),u=t(a.length,1)>>>0;return as().subarray(u,u+a.length).set(a),si=a.length,u}let r=e.length,i=t(r,1)>>>0;const o=as();let s=0;for(;s<r;s++){const a=e.charCodeAt(s);if(a>127)break;o[i+s]=a}if(s!==r){s!==0&&(e=e.slice(s)),i=n(i,r,r=s+e.length*3,1)>>>0;const a=as().subarray(i+s,i+r),u=sh(e,a);s+=u.written,i=n(i,r,s,1)>>>0}return si=s,i}let ii=null;function sn(){return(ii===null||ii.buffer.detached===!0||ii.buffer.detached===void 0&&ii.buffer!==pt.memory.buffer)&&(ii=new DataView(pt.memory.buffer)),ii}function mo(e){return e==null}const Ju=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>{pt.__wbindgen_export_6.get(e.dtor)(e.a,e.b)});function ah(e,t,n,r){const i={a:e,b:t,cnt:1,dtor:n},o=(...s)=>{i.cnt++;const a=i.a;i.a=0;try{return r(a,i.b,...s)}finally{--i.cnt===0?(pt.__wbindgen_export_6.get(i.dtor)(a,i.b),Ju.unregister(i)):i.a=a}};return o.original=i,Ju.register(o,i,i),o}function Pa(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){const i=e.length;let o="[";i>0&&(o+=Pa(e[0]));for(let s=1;s<i;s++)o+=", "+Pa(e[s]);return o+="]",o}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(n&&n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function uh(e,t){const n=wo(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=si;return pt.evalRoute(e,n,r)}function lh(e,t,n){pt.closure287_externref_shim(e,t,n)}function ch(e,t,n,r){pt.closure308_externref_shim(e,t,n,r)}const fh=["omit","same-origin","include"],ph=["same-origin","no-cors","cors","navigate"];async function hh(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function gh(){const e={};return e.wbg={},e.wbg.__wbg_abort_19de2f828ee0874a=function(t){t.abort()},e.wbg.__wbg_append_daea8d1dbe91d314=function(){return we(function(t,n,r,i,o){t.append(pr(n,r),pr(i,o))},arguments)},e.wbg.__wbg_arrayBuffer_d004045654bdb712=function(){return we(function(t){return t.arrayBuffer()},arguments)},e.wbg.__wbg_buffer_6e1d53ff183194fc=function(t){return t.buffer},e.wbg.__wbg_call_0411c0c3c424db9a=function(){return we(function(t,n,r){return t.call(n,r)},arguments)},e.wbg.__wbg_call_3114932863209ca6=function(){return we(function(t,n){return t.call(n)},arguments)},e.wbg.__wbg_debug_347b3d1f33e1c28e=function(t){console.debug(t)},e.wbg.__wbg_done_adfd3f40364def50=function(t){return t.done},e.wbg.__wbg_entries_ce82e236f8300a53=function(t){return Object.entries(t)},e.wbg.__wbg_error_2a6b93fdada7ff11=function(t){console.error(t)},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let r,i;try{r=t,i=n,console.error(pr(t,n))}finally{pt.__wbindgen_free(r,i,1)}},e.wbg.__wbg_fetch_2367a4a7762e7c4a=function(t,n){return t.fetch(n)},e.wbg.__wbg_fetch_b335d17f45a8b5a1=function(t){return fetch(t)},e.wbg.__wbg_get_68aa371864aa301a=function(t,n){return t[n>>>0]},e.wbg.__wbg_get_92a4780a3beb5fe9=function(){return we(function(t,n){return Reflect.get(t,n)},arguments)},e.wbg.__wbg_globalThis_1e2ac1d6eee845b3=function(){return we(function(){return globalThis.globalThis},arguments)},e.wbg.__wbg_global_f25a574ae080367c=function(){return we(function(){return global.global},arguments)},e.wbg.__wbg_has_38b228962f492b9b=function(){return we(function(t,n){return Reflect.has(t,n)},arguments)},e.wbg.__wbg_headers_a5edfea2425875b2=function(t){return t.headers},e.wbg.__wbg_info_b6bd3cb6471c2b4c=function(t){console.info(t)},e.wbg.__wbg_instanceof_ArrayBuffer_435fcead703e2827=function(t){let n;try{n=t instanceof ArrayBuffer}catch{n=!1}return n},e.wbg.__wbg_instanceof_Map_77fd223783fe0068=function(t){let n;try{n=t instanceof Map}catch{n=!1}return n},e.wbg.__wbg_instanceof_Response_0ec26bd2f8a75ca2=function(t){let n;try{n=t instanceof Response}catch{n=!1}return n},e.wbg.__wbg_instanceof_Uint8Array_9b67296cab48238f=function(t){let n;try{n=t instanceof Uint8Array}catch{n=!1}return n},e.wbg.__wbg_isArray_fcd559a3bcfde1e9=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_4de146aa53f6e470=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_7a20c20ce22add0f=function(){return Symbol.iterator},e.wbg.__wbg_length_2e63ba34c4121df5=function(t){return t.length},e.wbg.__wbg_length_e74df4881604f1d9=function(t){return t.length},e.wbg.__wbg_log_d818ca3cab23fc77=function(t){console.log(t)},e.wbg.__wbg_new_076cac58bb698dd4=function(){return new Object},e.wbg.__wbg_new_1e8ca58d170d6ad0=function(t,n){try{var r={a:t,b:n},i=(s,a)=>{const u=r.a;r.a=0;try{return ch(u,r.b,s,a)}finally{r.a=u}};return new Promise(i)}finally{r.a=r.b=0}},e.wbg.__wbg_new_23362fa370a0a372=function(t){return new Uint8Array(t)},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_new_93cf40e4f48fe902=function(){return we(function(){return new AbortController},arguments)},e.wbg.__wbg_new_e2ec18a02bb844cb=function(){return we(function(){return new Headers},arguments)},e.wbg.__wbg_newnoargs_19a249f4eceaaac3=function(t,n){return new Function(pr(t,n))},e.wbg.__wbg_newwithbyteoffsetandlength_ee8def7000b7b2be=function(t,n,r){return new Uint8Array(t,n>>>0,r>>>0)},e.wbg.__wbg_newwithstrandinit_ee1418802d8d481c=function(){return we(function(t,n,r){return new Request(pr(t,n),r)},arguments)},e.wbg.__wbg_next_c591766a7286b02a=function(){return we(function(t){return t.next()},arguments)},e.wbg.__wbg_next_f387ecc56a94ba00=function(t){return t.next},e.wbg.__wbg_queueMicrotask_3d422e1ba49c2500=function(t){return t.queueMicrotask},e.wbg.__wbg_queueMicrotask_f301663ccadbb7d0=function(t){queueMicrotask(t)},e.wbg.__wbg_resolve_6a311e8bb26423ab=function(t){return Promise.resolve(t)},e.wbg.__wbg_self_ac4343e4047b83cc=function(){return we(function(){return self.self},arguments)},e.wbg.__wbg_set_7b70226104a82921=function(t,n,r){t.set(n,r>>>0)},e.wbg.__wbg_setbody_a548052400c35526=function(t,n){t.body=n},e.wbg.__wbg_setcredentials_6ae5f65d7ad22ffc=function(t,n){t.credentials=fh[n]},e.wbg.__wbg_setheaders_1f2d4c08004f4227=function(t,n){t.headers=n},e.wbg.__wbg_setmethod_c704d56d480d8580=function(t,n,r){t.method=pr(n,r)},e.wbg.__wbg_setmode_26f3e7a9f55ddb2d=function(t,n){t.mode=ph[n]},e.wbg.__wbg_setsignal_de26efe32c2e413d=function(t,n){t.signal=n},e.wbg.__wbg_signal_fd2d6d0644f16ad8=function(t){return t.signal},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){const r=n.stack,i=wo(r,pt.__wbindgen_malloc,pt.__wbindgen_realloc),o=si;sn().setInt32(t+4*1,o,!0),sn().setInt32(t+4*0,i,!0)},e.wbg.__wbg_status_5f9868b7ed8dd175=function(t){return t.status},e.wbg.__wbg_stringify_f5476f15b5654a07=function(){return we(function(t){return JSON.stringify(t)},arguments)},e.wbg.__wbg_then_5c6469c1e1da9e59=function(t,n){return t.then(n)},e.wbg.__wbg_then_faeb8aed8c1629b7=function(t,n,r){return t.then(n,r)},e.wbg.__wbg_url_ba6c16bbafb59895=function(t,n){const r=n.url,i=wo(r,pt.__wbindgen_malloc,pt.__wbindgen_realloc),o=si;sn().setInt32(t+4*1,o,!0),sn().setInt32(t+4*0,i,!0)},e.wbg.__wbg_value_30db1d77772f3236=function(t){return t.value},e.wbg.__wbg_warn_a6963915e4da61f6=function(t){console.warn(t)},e.wbg.__wbg_window_1a23defd102c72f4=function(){return we(function(){return window.window},arguments)},e.wbg.__wbindgen_bigint_from_i64=function(t){return t},e.wbg.__wbindgen_bigint_from_u64=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_bigint_get_as_i64=function(t,n){const r=n,i=typeof r=="bigint"?r:void 0;sn().setBigInt64(t+8*1,mo(i)?BigInt(0):i,!0),sn().setInt32(t+4*0,!mo(i),!0)},e.wbg.__wbindgen_boolean_get=function(t){const n=t;return typeof n=="boolean"?n?1:0:2},e.wbg.__wbindgen_cb_drop=function(t){const n=t.original;return n.cnt--==1?(n.a=0,!0):!1},e.wbg.__wbindgen_closure_wrapper817=function(t,n,r){return ah(t,n,288,lh)},e.wbg.__wbindgen_debug_string=function(t,n){const r=Pa(n),i=wo(r,pt.__wbindgen_malloc,pt.__wbindgen_realloc),o=si;sn().setInt32(t+4*1,o,!0),sn().setInt32(t+4*0,i,!0)},e.wbg.__wbindgen_error_new=function(t,n){return new Error(pr(t,n))},e.wbg.__wbindgen_in=function(t,n){return t in n},e.wbg.__wbindgen_init_externref_table=function(){const t=pt.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_is_bigint=function(t){return typeof t=="bigint"},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_is_object=function(t){const n=t;return typeof n=="object"&&n!==null},e.wbg.__wbindgen_is_undefined=function(t){return t===void 0},e.wbg.__wbindgen_jsval_eq=function(t,n){return t===n},e.wbg.__wbindgen_jsval_loose_eq=function(t,n){return t==n},e.wbg.__wbindgen_memory=function(){return pt.memory},e.wbg.__wbindgen_number_get=function(t,n){const r=n,i=typeof r=="number"?r:void 0;sn().setFloat64(t+8*1,mo(i)?0:i,!0),sn().setInt32(t+4*0,!mo(i),!0)},e.wbg.__wbindgen_string_get=function(t,n){const r=n,i=typeof r=="string"?r:void 0;var o=mo(i)?0:wo(i,pt.__wbindgen_malloc,pt.__wbindgen_realloc),s=si;sn().setInt32(t+4*1,s,!0),sn().setInt32(t+4*0,o,!0)},e.wbg.__wbindgen_string_new=function(t,n){return pr(t,n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(pr(t,n))},e}function dh(e,t){return pt=e.exports,nf.__wbindgen_wasm_module=t,ii=null,So=null,pt.__wbindgen_start(),pt}async function nf(e){if(pt!==void 0)return pt;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("backend_bg.wasm",self.location));const t=gh();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await hh(await e,t);return dh(n,r)}function Zu(e){let t;return n=>{if(n)for(let r in n){let i=t==null?void 0:t[r],o=n[r];i!==o&&e(r,o,i)}else if(t)for(let r in t)e(r,void 0,t[r]);t=n}}function yh(e,...t){let n=[e];for(let r of t)if(r)Array.isArray(r)&&r[0]===e?n.push(...r.slice(1)):n.push(r);else continue;if(n.length!==1)return n.length===2?n[1]:n}function mh(e){return e===!0?["has","point_count"]:e===!1?["!",["has","point_count"]]:void 0}function lu(e,t){return["case",["boolean",["feature-state","hover"],!1],t,e]}function Qu(e){let t=e[0],n,r,i=$u(e);return{c(){i.c(),n=io()},m(o,s){i.m(o,s),tt(o,n,s),r=!0},p(o,s){s[0]&1&&nn(t,t=o[0])?(Xr(),X(i,1,1,qs),Yr(),i=$u(o),i.c(),U(i,1),i.m(n.parentNode,n)):i.p(o,s)},i(o){r||(U(i),r=!0)},o(o){X(i),r=!1},d(o){o&&et(n),i.d(o)}}}function $u(e){let t;const n=e[36].default,r=Hr(n,e,e[35],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o[1]&16)&&Kr(r,n,i,i[35],t?Zr(n,i[35],o,null):Jr(i[35]),null)},i(i){t||(U(r,i),t=!0)},o(i){X(r,i),t=!1},d(i){r&&r.d(i)}}}function _h(e){let t,n,r=e[0]&&Qu(e);return{c(){r&&r.c(),t=io()},m(i,o){r&&r.m(i,o),tt(i,t,o),n=!0},p(i,o){i[0]?r?(r.p(i,o),o[0]&1&&U(r,1)):(r=Qu(i),r.c(),U(r,1),r.m(t.parentNode,t)):r&&(Xr(),X(r,1,1,()=>{r=null}),Yr())},i(i){n||(U(r),n=!0)},o(i){X(r),n=!1},d(i){i&&et(t),r&&r.d(i)}}}function vh(e,t,n){let r,i,o,s,a,u,l,c,f,p,h,g,{$$slots:m={},$$scope:v}=t,{id:E=Yo("layer")}=t,{source:I=void 0}=t,{sourceLayer:S=void 0}=t,{beforeId:O=void 0}=t,{beforeLayerType:R=void 0}=t,{type:k}=t,{paint:B=void 0}=t,{layout:x=void 0}=t,{filter:A=void 0}=t,{applyToClusters:G=void 0}=t,{minzoom:b=void 0}=t,{maxzoom:T=void 0}=t,{manageHoverState:Z=!1}=t,{hovered:Pt=null}=t,{interactive:me=!0}=t,{hoverCursor:ce=void 0}=t,{eventsIfTopMost:C=!1}=t;const Ht=su(),{map:ut,source:Ve,self:xn,minzoom:Nt,maxzoom:ft,eventTopMost:kt,layerInfo:Xn}=Wp();xe(e,ut,M=>n(31,f=M)),xe(e,Ve,M=>n(32,p=M)),xe(e,xn,M=>n(0,c=M)),xe(e,Nt,M=>n(34,g=M)),xe(e,ft,M=>n(33,h=M)),ms(()=>{c&&f&&(Xn.delete(c),f==null||f.removeLayer(c))});let je;function fr(M){var Hn,Cr;if(!me||!c||!f||C&&kt(M)!==c)return;let w=M.features??[],Cn=(Cr=(Hn=w[0])==null?void 0:Hn.properties)==null?void 0:Cr.cluster_id,We={event:M,map:f,clusterId:Cn,layer:c,source:a,features:w};Ht(M.type,We)}function go(M){var Hn,Cr;if(!me||!c||!f||C&&kt(M)!==c)return;ce&&(f.getCanvas().style.cursor=ce);let w=M.features??[];n(6,Pt=w[0]??null);let Cn=(Cr=(Hn=w[0])==null?void 0:Hn.properties)==null?void 0:Cr.cluster_id;Ht("mouseenter",{event:M,map:f,clusterId:Cn,layer:c,source:a,features:w})}function yo(M){var Hn,Cr,Yu;if(!me||!f)return;if(C&&kt(M)!==c){n(6,Pt=null),Z&&je!==void 0&&(f==null||f.setFeatureState({source:a,sourceLayer:S,id:je},{hover:!1}),je=void 0);return}f.getCanvas().style.cursor=ce;let w=M.features??[],Cn=(Cr=(Hn=w[0])==null?void 0:Hn.properties)==null?void 0:Cr.cluster_id,We=(Yu=w[0])==null?void 0:Yu.id;We!==je&&(Z&&(je!==void 0&&(f==null||f.setFeatureState({source:a,id:je,sourceLayer:S},{hover:!1})),f==null||f.setFeatureState({source:a,id:We,sourceLayer:S},{hover:!0})),je=We,n(6,Pt=w[0]??null)),Ht("mousemove",{event:M,map:f,clusterId:Cn,layer:c,source:a,features:w})}function ri(M){if(!(!me||!c||!f)){if(ce&&(f.getCanvas().style.cursor=""),n(6,Pt=null),Z&&je!==void 0){const w={source:a,id:je,sourceLayer:S};f==null||f.setFeatureState(w,{hover:!1}),je=void 0}Ht("mouseleave",{map:f,layer:c,source:a})}}let Yn=!0;function ns(M){f&&(f.off("click",M,fr),f.off("dblclick",M,fr),f.off("contextmenu",M,fr),f.off("mouseenter",M,go),f.off("mousemove",M,yo),f.off("mouseleave",M,ri))}return ms(()=>{f&&c&&ns(c)}),e.$$set=M=>{"id"in M&&n(7,E=M.id),"source"in M&&n(8,I=M.source),"sourceLayer"in M&&n(9,S=M.sourceLayer),"beforeId"in M&&n(10,O=M.beforeId),"beforeLayerType"in M&&n(11,R=M.beforeLayerType),"type"in M&&n(12,k=M.type),"paint"in M&&n(13,B=M.paint),"layout"in M&&n(14,x=M.layout),"filter"in M&&n(15,A=M.filter),"applyToClusters"in M&&n(16,G=M.applyToClusters),"minzoom"in M&&n(17,b=M.minzoom),"maxzoom"in M&&n(18,T=M.maxzoom),"manageHoverState"in M&&n(19,Z=M.manageHoverState),"hovered"in M&&n(6,Pt=M.hovered),"interactive"in M&&n(20,me=M.interactive),"hoverCursor"in M&&n(21,ce=M.hoverCursor),"eventsIfTopMost"in M&&n(22,C=M.eventsIfTopMost),"$$scope"in M&&n(35,v=M.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&65536&&n(30,r=mh(G)),e.$$.dirty[0]&1073774592&&n(24,i=yh("all",r,A)),e.$$.dirty[0]&131072|e.$$.dirty[1]&8&&n(26,o=b??g),e.$$.dirty[0]&262144|e.$$.dirty[1]&4&&n(25,s=T??h),e.$$.dirty[0]&256|e.$$.dirty[1]&2&&n(29,a=I||p),e.$$.dirty[0]&654343809|e.$$.dirty[1]&1&&f&&c!==E&&a){c&&(ns(c),Xn.delete(c));let M=O;if(!O&&R){let w=f.getStyle().layers,Cn=typeof R=="function"?R:Hn=>Hn.type===R,We=w==null?void 0:w.find(Cn);We&&(M=We.id)}ui(xn,c=E,c),f.addLayer(Oa({id:c,type:k,source:a,"source-layer":S,filter:i,paint:B,layout:x,minzoom:o,maxzoom:s}),M),n(23,Yn=!0),f.on("click",c,fr),f.on("dblclick",c,fr),f.on("contextmenu",c,fr),f.on("mouseenter",c,go),f.on("mousemove",c,yo),f.on("mouseleave",c,ri)}e.$$.dirty[0]&1048577&&c&&Xn.set(c,{interactive:me}),e.$$.dirty[0]&1|e.$$.dirty[1]&1&&n(28,u=c?Zu((M,w)=>f==null?void 0:f.setPaintProperty(c,M,w)):void 0),e.$$.dirty[0]&1|e.$$.dirty[1]&1&&n(27,l=c?Zu((M,w)=>f==null?void 0:f.setLayoutProperty(c,M,w)):void 0),e.$$.dirty[0]&268443648&&(u==null||u(B)),e.$$.dirty[0]&134234112&&(l==null||l(x)),e.$$.dirty[0]&100663297|e.$$.dirty[1]&1&&c&&(f==null||f.setLayerZoomRange(c,o,s)),e.$$.dirty[0]&25165825|e.$$.dirty[1]&1&&c&&(Yn?n(23,Yn=!1):f==null||f.setFilter(c,i))},[c,ut,Ve,xn,Nt,ft,Pt,E,I,S,O,R,k,B,x,A,G,b,T,Z,me,ce,C,Yn,i,s,o,l,u,a,r,f,p,h,g,v,m]}class cu extends Vn{constructor(t){super(),jn(this,t,vh,_h,nn,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function bh(e){let t;const n=e[16].default,r=Hr(n,e,e[24],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&16777216)&&Kr(r,n,i,i[24],t?Zr(n,i[24],o,null):Jr(i[24]),null)},i(i){t||(U(r,i),t=!0)},o(i){X(r,i),t=!1},d(i){r&&r.d(i)}}}function Eh(e){let t,n,r;function i(s){e[17](s)}let o={id:e[1],type:"circle",source:e[2],sourceLayer:e[3],beforeId:e[4],beforeLayerType:e[5],paint:e[6],layout:e[7],filter:e[8],applyToClusters:e[9],minzoom:e[10],maxzoom:e[11],hoverCursor:e[12],manageHoverState:e[13],eventsIfTopMost:e[14],interactive:e[15],$$slots:{default:[bh]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.hovered=e[0]),t=new cu({props:o}),Qr.push(()=>oo(t,"hovered",i)),t.$on("click",e[18]),t.$on("dblclick",e[19]),t.$on("contextmenu",e[20]),t.$on("mouseenter",e[21]),t.$on("mousemove",e[22]),t.$on("mouseleave",e[23]),{c(){Rt(t.$$.fragment)},m(s,a){At(t,s,a),r=!0},p(s,[a]){const u={};a&2&&(u.id=s[1]),a&4&&(u.source=s[2]),a&8&&(u.sourceLayer=s[3]),a&16&&(u.beforeId=s[4]),a&32&&(u.beforeLayerType=s[5]),a&64&&(u.paint=s[6]),a&128&&(u.layout=s[7]),a&256&&(u.filter=s[8]),a&512&&(u.applyToClusters=s[9]),a&1024&&(u.minzoom=s[10]),a&2048&&(u.maxzoom=s[11]),a&4096&&(u.hoverCursor=s[12]),a&8192&&(u.manageHoverState=s[13]),a&16384&&(u.eventsIfTopMost=s[14]),a&32768&&(u.interactive=s[15]),a&16777216&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.hovered=s[0],so(()=>n=!1)),t.$set(u)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){X(t.$$.fragment,s),r=!1},d(s){Mt(t,s)}}}function Ih(e,t,n){let{$$slots:r={},$$scope:i}=t,{id:o=Yo("circle")}=t,{source:s=void 0}=t,{sourceLayer:a=void 0}=t,{beforeId:u=void 0}=t,{beforeLayerType:l=void 0}=t,{paint:c}=t,{layout:f=void 0}=t,{filter:p=void 0}=t,{applyToClusters:h=void 0}=t,{minzoom:g=void 0}=t,{maxzoom:m=void 0}=t,{hoverCursor:v=void 0}=t,{manageHoverState:E=!1}=t,{hovered:I=null}=t,{eventsIfTopMost:S=!1}=t,{interactive:O=!0}=t;function R(T){I=T,n(0,I)}function k(T){ee.call(this,e,T)}function B(T){ee.call(this,e,T)}function x(T){ee.call(this,e,T)}function A(T){ee.call(this,e,T)}function G(T){ee.call(this,e,T)}function b(T){ee.call(this,e,T)}return e.$$set=T=>{"id"in T&&n(1,o=T.id),"source"in T&&n(2,s=T.source),"sourceLayer"in T&&n(3,a=T.sourceLayer),"beforeId"in T&&n(4,u=T.beforeId),"beforeLayerType"in T&&n(5,l=T.beforeLayerType),"paint"in T&&n(6,c=T.paint),"layout"in T&&n(7,f=T.layout),"filter"in T&&n(8,p=T.filter),"applyToClusters"in T&&n(9,h=T.applyToClusters),"minzoom"in T&&n(10,g=T.minzoom),"maxzoom"in T&&n(11,m=T.maxzoom),"hoverCursor"in T&&n(12,v=T.hoverCursor),"manageHoverState"in T&&n(13,E=T.manageHoverState),"hovered"in T&&n(0,I=T.hovered),"eventsIfTopMost"in T&&n(14,S=T.eventsIfTopMost),"interactive"in T&&n(15,O=T.interactive),"$$scope"in T&&n(24,i=T.$$scope)},[I,o,s,a,u,l,c,f,p,h,g,m,v,E,S,O,r,R,k,B,x,A,G,b,i]}class Sh extends Vn{constructor(t){super(),jn(this,t,Ih,Eh,nn,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function wh(e){let t;const n=e[15].default,r=Hr(n,e,e[23],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&8388608)&&Kr(r,n,i,i[23],t?Zr(n,i[23],o,null):Jr(i[23]),null)},i(i){t||(U(r,i),t=!0)},o(i){X(r,i),t=!1},d(i){r&&r.d(i)}}}function Lh(e){let t,n,r;function i(s){e[16](s)}let o={id:e[1],type:"fill",source:e[2],sourceLayer:e[3],beforeId:e[4],beforeLayerType:e[5],paint:e[6],layout:e[7],filter:e[8],minzoom:e[9],maxzoom:e[10],hoverCursor:e[11],manageHoverState:e[12],eventsIfTopMost:e[13],interactive:e[14],$$slots:{default:[wh]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.hovered=e[0]),t=new cu({props:o}),Qr.push(()=>oo(t,"hovered",i)),t.$on("click",e[17]),t.$on("dblclick",e[18]),t.$on("contextmenu",e[19]),t.$on("mouseenter",e[20]),t.$on("mousemove",e[21]),t.$on("mouseleave",e[22]),{c(){Rt(t.$$.fragment)},m(s,a){At(t,s,a),r=!0},p(s,[a]){const u={};a&2&&(u.id=s[1]),a&4&&(u.source=s[2]),a&8&&(u.sourceLayer=s[3]),a&16&&(u.beforeId=s[4]),a&32&&(u.beforeLayerType=s[5]),a&64&&(u.paint=s[6]),a&128&&(u.layout=s[7]),a&256&&(u.filter=s[8]),a&512&&(u.minzoom=s[9]),a&1024&&(u.maxzoom=s[10]),a&2048&&(u.hoverCursor=s[11]),a&4096&&(u.manageHoverState=s[12]),a&8192&&(u.eventsIfTopMost=s[13]),a&16384&&(u.interactive=s[14]),a&8388608&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.hovered=s[0],so(()=>n=!1)),t.$set(u)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){X(t.$$.fragment,s),r=!1},d(s){Mt(t,s)}}}function Nh(e,t,n){let{$$slots:r={},$$scope:i}=t,{id:o=Yo("fill")}=t,{source:s=void 0}=t,{sourceLayer:a=void 0}=t,{beforeId:u=void 0}=t,{beforeLayerType:l=void 0}=t,{paint:c}=t,{layout:f=void 0}=t,{filter:p=void 0}=t,{minzoom:h=void 0}=t,{maxzoom:g=void 0}=t,{hoverCursor:m=void 0}=t,{manageHoverState:v=!1}=t,{hovered:E=null}=t,{eventsIfTopMost:I=!1}=t,{interactive:S=!0}=t;function O(b){E=b,n(0,E)}function R(b){ee.call(this,e,b)}function k(b){ee.call(this,e,b)}function B(b){ee.call(this,e,b)}function x(b){ee.call(this,e,b)}function A(b){ee.call(this,e,b)}function G(b){ee.call(this,e,b)}return e.$$set=b=>{"id"in b&&n(1,o=b.id),"source"in b&&n(2,s=b.source),"sourceLayer"in b&&n(3,a=b.sourceLayer),"beforeId"in b&&n(4,u=b.beforeId),"beforeLayerType"in b&&n(5,l=b.beforeLayerType),"paint"in b&&n(6,c=b.paint),"layout"in b&&n(7,f=b.layout),"filter"in b&&n(8,p=b.filter),"minzoom"in b&&n(9,h=b.minzoom),"maxzoom"in b&&n(10,g=b.maxzoom),"hoverCursor"in b&&n(11,m=b.hoverCursor),"manageHoverState"in b&&n(12,v=b.manageHoverState),"hovered"in b&&n(0,E=b.hovered),"eventsIfTopMost"in b&&n(13,I=b.eventsIfTopMost),"interactive"in b&&n(14,S=b.interactive),"$$scope"in b&&n(23,i=b.$$scope)},[E,o,s,a,u,l,c,f,p,h,g,m,v,I,S,r,O,R,k,B,x,A,G,i]}class rf extends Vn{constructor(t){super(),jn(this,t,Nh,Lh,nn,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function xh(e,t,n,r,i){let o=!1;e.getSource(t)&&(o=!0,e.removeSource(t));const s=()=>{r(t)&&(e.addSource(t,n),i())};if(o){const a=()=>{t&&(e.getSource(t)?setTimeout(a,1):s())};a()}else s()}function Ch(e,t,n){Xp().then(()=>{let r=Yp(e);if(!r)return;r.getSource(t)===n&&r.removeSource(t)})}function tl(e){let t=e[0],n,r,i=el(e);return{c(){i.c(),n=io()},m(o,s){i.m(o,s),tt(o,n,s),r=!0},p(o,s){s&1&&nn(t,t=o[0])?(Xr(),X(i,1,1,qs),Yr(),i=el(o),i.c(),U(i,1),i.m(n.parentNode,n)):i.p(o,s)},i(o){r||(U(i),r=!0)},o(o){X(i),r=!1},d(o){o&&et(n),i.d(o)}}}function el(e){let t;const n=e[19].default,r=Hr(n,e,e[18],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&262144)&&Kr(r,n,i,i[18],t?Zr(n,i[18],o,null):Jr(i[18]),null)},i(i){t||(U(r,i),t=!0)},o(i){X(r,i),t=!1},d(i){r&&r.d(i)}}}function Oh(e){let t,n,r=e[0]&&tl(e);return{c(){r&&r.c(),t=io()},m(i,o){r&&r.m(i,o),tt(i,t,o),n=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&U(r,1)):(r=tl(i),r.c(),U(r,1),r.m(t.parentNode,t)):r&&(Xr(),X(r,1,1,()=>{r=null}),Yr())},i(i){n||(U(r),n=!0)},o(i){X(r),n=!1},d(i){i&&et(t),r&&r.d(i)}}}function Ph(e,t,n){let r,i,o,{$$slots:s={},$$scope:a}=t,{id:u=Yo("geojson")}=t,{data:l}=t,{generateId:c=!1}=t,{promoteId:f=void 0}=t,{filter:p=void 0}=t,{lineMetrics:h=void 0}=t,{cluster:g=void 0}=t,{maxzoom:m=void 0}=t,{attribution:v=void 0}=t,{buffer:E=void 0}=t,{tolerance:I=void 0}=t;const{map:S,cluster:O,self:R}=Hp();xe(e,S,x=>n(17,i=x)),xe(e,O,x=>n(20,o=x)),xe(e,R,x=>n(0,r=x));let k,B=!0;return ms(()=>{r&&k&&i&&(Ch(S,r,k),ui(R,r=null,r),n(15,k=void 0))}),e.$$set=x=>{"id"in x&&n(4,u=x.id),"data"in x&&n(5,l=x.data),"generateId"in x&&n(6,c=x.generateId),"promoteId"in x&&n(7,f=x.promoteId),"filter"in x&&n(8,p=x.filter),"lineMetrics"in x&&n(9,h=x.lineMetrics),"cluster"in x&&n(10,g=x.cluster),"maxzoom"in x&&n(11,m=x.maxzoom),"attribution"in x&&n(12,v=x.attribution),"buffer"in x&&n(13,E=x.buffer),"tolerance"in x&&n(14,I=x.tolerance),"$$scope"in x&&n(18,a=x.$$scope)},e.$$.update=()=>{e.$$.dirty&1024&&ui(O,o=g,o),e.$$.dirty&196593&&i&&r!==u&&(ui(R,r=u,r),xh(i,r,Oa({type:"geojson",data:l,filter:p,lineMetrics:h,generateId:c,promoteId:f,cluster:!!g,clusterMinPoints:g==null?void 0:g.minPoints,clusterMaxZoom:g==null?void 0:g.maxZoom,clusterRadius:g==null?void 0:g.radius,clusterProperties:g==null?void 0:g.properties,maxzoom:m,attribution:v,buffer:E,tolerance:I}),x=>i&&x===r,()=>{r&&(n(15,k=i==null?void 0:i.getSource(r)),n(16,B=!0))})),e.$$.dirty&131088&&(i==null||i.on("style.load",()=>{n(15,k=i==null?void 0:i.getSource(u))})),e.$$.dirty&98336&&k&&(B?n(16,B=!1):k.setData(l)),e.$$.dirty&33792&&(k==null||k.setClusterOptions(Oa({cluster:!!g,clusterMaxZoom:g==null?void 0:g.maxZoom,clusterRadius:g==null?void 0:g.radius})))},[r,S,O,R,u,l,c,f,p,h,g,m,v,E,I,k,B,i,a,s]}class Lo extends Vn{constructor(t){super(),jn(this,t,Ph,Oh,nn,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10,maxzoom:11,attribution:12,buffer:13,tolerance:14})}}function Th(e){let t;const n=e[15].default,r=Hr(n,e,e[23],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&8388608)&&Kr(r,n,i,i[23],t?Zr(n,i[23],o,null):Jr(i[23]),null)},i(i){t||(U(r,i),t=!0)},o(i){X(r,i),t=!1},d(i){r&&r.d(i)}}}function Rh(e){let t,n,r;function i(s){e[16](s)}let o={id:e[1],type:"line",source:e[2],sourceLayer:e[3],beforeId:e[4],beforeLayerType:e[5],paint:e[6],layout:e[7],filter:e[8],minzoom:e[9],maxzoom:e[10],hoverCursor:e[11],manageHoverState:e[12],eventsIfTopMost:e[13],interactive:e[14],$$slots:{default:[Th]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.hovered=e[0]),t=new cu({props:o}),Qr.push(()=>oo(t,"hovered",i)),t.$on("click",e[17]),t.$on("dblclick",e[18]),t.$on("contextmenu",e[19]),t.$on("mouseenter",e[20]),t.$on("mousemove",e[21]),t.$on("mouseleave",e[22]),{c(){Rt(t.$$.fragment)},m(s,a){At(t,s,a),r=!0},p(s,[a]){const u={};a&2&&(u.id=s[1]),a&4&&(u.source=s[2]),a&8&&(u.sourceLayer=s[3]),a&16&&(u.beforeId=s[4]),a&32&&(u.beforeLayerType=s[5]),a&64&&(u.paint=s[6]),a&128&&(u.layout=s[7]),a&256&&(u.filter=s[8]),a&512&&(u.minzoom=s[9]),a&1024&&(u.maxzoom=s[10]),a&2048&&(u.hoverCursor=s[11]),a&4096&&(u.manageHoverState=s[12]),a&8192&&(u.eventsIfTopMost=s[13]),a&16384&&(u.interactive=s[14]),a&8388608&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.hovered=s[0],so(()=>n=!1)),t.$set(u)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){X(t.$$.fragment,s),r=!1},d(s){Mt(t,s)}}}function Ah(e,t,n){let{$$slots:r={},$$scope:i}=t,{id:o=Yo("line")}=t,{source:s=void 0}=t,{sourceLayer:a=void 0}=t,{beforeId:u=void 0}=t,{beforeLayerType:l=void 0}=t,{paint:c}=t,{layout:f=void 0}=t,{filter:p=void 0}=t,{minzoom:h=void 0}=t,{maxzoom:g=void 0}=t,{hoverCursor:m=void 0}=t,{manageHoverState:v=!1}=t,{hovered:E=null}=t,{eventsIfTopMost:I=!1}=t,{interactive:S=!0}=t;function O(b){E=b,n(0,E)}function R(b){ee.call(this,e,b)}function k(b){ee.call(this,e,b)}function B(b){ee.call(this,e,b)}function x(b){ee.call(this,e,b)}function A(b){ee.call(this,e,b)}function G(b){ee.call(this,e,b)}return e.$$set=b=>{"id"in b&&n(1,o=b.id),"source"in b&&n(2,s=b.source),"sourceLayer"in b&&n(3,a=b.sourceLayer),"beforeId"in b&&n(4,u=b.beforeId),"beforeLayerType"in b&&n(5,l=b.beforeLayerType),"paint"in b&&n(6,c=b.paint),"layout"in b&&n(7,f=b.layout),"filter"in b&&n(8,p=b.filter),"minzoom"in b&&n(9,h=b.minzoom),"maxzoom"in b&&n(10,g=b.maxzoom),"hoverCursor"in b&&n(11,m=b.hoverCursor),"manageHoverState"in b&&n(12,v=b.manageHoverState),"hovered"in b&&n(0,E=b.hovered),"eventsIfTopMost"in b&&n(13,I=b.eventsIfTopMost),"interactive"in b&&n(14,S=b.interactive),"$$scope"in b&&n(23,i=b.$$scope)},[E,o,s,a,u,l,c,f,p,h,g,m,v,I,S,r,O,R,k,B,x,A,G,i]}class of extends Vn{constructor(t){super(),jn(this,t,Ah,Rh,nn,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}const Mh=e=>({marker:e&8}),nl=e=>({marker:e[3]});function Dh(e){let t,n,r,i,o,s,a;const u=e[19].default,l=Hr(u,e,e[18],nl);return{c(){t=yt("div"),l&&l.c(),un(t,"tabindex",n=e[1]?0:void 0),un(t,"role",r=e[1]?"button":void 0),xo(t,"z-index",e[2])},m(c,f){tt(c,t,f),l&&l.m(t,null),o=!0,s||(a=[Hu(e[7].call(null,t)),Hu(i=Fh.call(null,t,e[0])),Le(t,"click",ia(e[20])),Le(t,"dblclick",ia(e[21])),Le(t,"contextmenu",ia(e[22])),Le(t,"mouseenter",e[23]),Le(t,"mouseleave",e[24]),Le(t,"mousemove",e[25]),Le(t,"keydown",e[8])],s=!0)},p(c,[f]){l&&l.p&&(!o||f&262152)&&Kr(l,u,c,c[18],o?Zr(u,c[18],f,Mh):Jr(c[18]),nl),(!o||f&2&&n!==(n=c[1]?0:void 0))&&un(t,"tabindex",n),(!o||f&2&&r!==(r=c[1]?"button":void 0))&&un(t,"role",r),i&&Kp(i.update)&&f&1&&i.update.call(null,c[0]),f&4&&xo(t,"z-index",c[2])},i(c){o||(U(l,c),o=!0)},o(c){X(l,c),o=!1},d(c){c&&et(t),l&&l.d(c),s=!1,au(a)}}}function Fh(e,t){const n=e.className;function r(i){i?e.className=`${n} ${i}`:e.className=n}return r(t),{update:r}}function kh(e,t,n){let r,i,o,{$$slots:s={},$$scope:a}=t,{marker:u=void 0}=t,{lngLat:l}=t,{class:c=void 0}=t,{interactive:f=!0}=t,{asButton:p=!1}=t,{draggable:h=!1}=t,{feature:g=null}=t,{offset:m=void 0}=t,{zIndex:v=void 0}=t,{rotation:E=0}=t,{opacity:I=1}=t;const S=su(),{map:O,layerEvent:R,self:k}=Jp();xe(e,O,C=>n(27,o=C)),xe(e,R,C=>n(26,r=C)),xe(e,k,C=>n(3,i=C));function B(C){ui(k,i=new oi.Marker({element:C,rotation:E,draggable:h,offset:m,opacity:I.toString()}).setLngLat(l).addTo(o),i),n(11,u=i);const Ht=()=>G("dragstart"),ut=()=>{x(),G("drag")},Ve=()=>{x(),G("dragend")};return h&&(i.on("dragstart",Ht),i.on("drag",ut),i.on("dragend",Ve)),{destroy(){h&&(i==null||i.off("dragstart",Ht),i==null||i.off("drag",ut),i==null||i.off("dragend",Ve)),n(11,u=void 0),i==null||i.remove()}}}function x(){let C=i==null?void 0:i.getLngLat();C&&(Array.isArray(l)?n(10,l=[C.lng,C.lat]):l&&"lon"in l?n(10,l={lon:C.lng,lat:C.lat}):n(10,l=C))}function A(C){C.key===" "&&(C.preventDefault(),C.stopPropagation(),G("click"))}function G(C){if(!f)return;let Ht=i==null?void 0:i.getLngLat();if(!Ht)return;const ut=[Ht.lng,Ht.lat];let Ve={map:o,marker:i,lngLat:ut,features:[{type:"Feature",properties:(g==null?void 0:g.properties)??{},geometry:{type:"Point",coordinates:ut}}]};ui(R,r={...Ve,layerType:"marker",type:C},r),S(C,Ve)}const b=()=>G("click"),T=()=>G("dblclick"),Z=()=>G("contextmenu"),Pt=C=>{G("mouseenter")},me=()=>{G("mouseleave")},ce=()=>G("mousemove");return e.$$set=C=>{"marker"in C&&n(11,u=C.marker),"lngLat"in C&&n(10,l=C.lngLat),"class"in C&&n(0,c=C.class),"interactive"in C&&n(12,f=C.interactive),"asButton"in C&&n(1,p=C.asButton),"draggable"in C&&n(13,h=C.draggable),"feature"in C&&n(14,g=C.feature),"offset"in C&&n(15,m=C.offset),"zIndex"in C&&n(2,v=C.zIndex),"rotation"in C&&n(16,E=C.rotation),"opacity"in C&&n(17,I=C.opacity),"$$scope"in C&&n(18,a=C.$$scope)},e.$$.update=()=>{e.$$.dirty&1032&&(i==null||i.setLngLat(l)),e.$$.dirty&32776&&(i==null||i.setOffset(m??[0,0])),e.$$.dirty&65544&&(i==null||i.setRotation(E)),e.$$.dirty&131080&&(i==null||i.setOpacity(I.toString()))},[c,p,v,i,O,R,k,B,A,G,l,u,f,h,g,m,E,I,a,s,b,T,Z,Pt,me,ce]}class Bh extends Vn{constructor(t){super(),jn(this,t,kh,Dh,nn,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}var rl=Object.prototype.toString,sf=function(t){var n=rl.call(t),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&rl.call(t.callee)==="[object Function]"),r},sa,il;function Gh(){if(il)return sa;il=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=sf,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(p){var h=p.constructor;return h&&h.prototype===p},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var p in window)try{if(!l["$"+p]&&t.call(window,p)&&window[p]!==null&&typeof window[p]=="object")try{u(window[p])}catch{return!0}}catch{return!0}return!1}(),f=function(p){if(typeof window>"u"||!c)return u(p);try{return u(p)}catch{return!1}};e=function(h){var g=h!==null&&typeof h=="object",m=n.call(h)==="[object Function]",v=r(h),E=g&&n.call(h)==="[object String]",I=[];if(!g&&!m&&!v)throw new TypeError("Object.keys called on a non-object");var S=s&&m;if(E&&h.length>0&&!t.call(h,0))for(var O=0;O<h.length;++O)I.push(String(O));if(v&&h.length>0)for(var R=0;R<h.length;++R)I.push(String(R));else for(var k in h)!(S&&k==="prototype")&&t.call(h,k)&&I.push(String(k));if(o)for(var B=f(h),x=0;x<a.length;++x)!(B&&a[x]==="constructor")&&t.call(h,a[x])&&I.push(a[x]);return I}}return sa=e,sa}var zh=Array.prototype.slice,qh=sf,ol=Object.keys,ls=ol?function(t){return ol(t)}:Gh(),sl=Object.keys;ls.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(r){return qh(r)?sl(zh.call(r)):sl(r)})}else Object.keys=ls;return Object.keys||ls};var fu=ls,Uh=Error,Vh=EvalError,jh=RangeError,Wh=ReferenceError,af=SyntaxError,$r=TypeError,Xh=URIError,Us=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0},al=typeof Symbol<"u"&&Symbol,Yh=Us,pu=function(){return typeof al!="function"||typeof Symbol!="function"||typeof al("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Yh()},aa={__proto__:null,foo:{}},Hh=Object,Kh=function(){return{__proto__:aa}.foo===aa.foo&&!(aa instanceof Hh)},Jh="Function.prototype.bind called on incompatible ",Zh=Object.prototype.toString,Qh=Math.max,$h="[object Function]",ul=function(t,n){for(var r=[],i=0;i<t.length;i+=1)r[i]=t[i];for(var o=0;o<n.length;o+=1)r[o+t.length]=n[o];return r},tg=function(t,n){for(var r=[],i=n||0,o=0;i<t.length;i+=1,o+=1)r[o]=t[i];return r},eg=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n},ng=function(t){var n=this;if(typeof n!="function"||Zh.apply(n)!==$h)throw new TypeError(Jh+n);for(var r=tg(arguments,1),i,o=function(){if(this instanceof i){var c=n.apply(this,ul(r,arguments));return Object(c)===c?c:this}return n.apply(t,ul(r,arguments))},s=Qh(0,n.length-r.length),a=[],u=0;u<s;u++)a[u]="$"+u;if(i=Function("binder","return function ("+eg(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var l=function(){};l.prototype=n.prototype,i.prototype=new l,l.prototype=null}return i},rg=ng,hu=Function.prototype.bind||rg,ig=Function.prototype.call,og=Object.prototype.hasOwnProperty,sg=hu,uf=sg.call(ig,og),it,ag=Uh,ug=Vh,lg=jh,cg=Wh,ki=af,Fi=$r,fg=Xh,lf=Function,ua=function(e){try{return lf('"use strict"; return ('+e+").constructor;")()}catch{}},li=Object.getOwnPropertyDescriptor;if(li)try{li({},"")}catch{li=null}var la=function(){throw new Fi},pg=li?function(){try{return arguments.callee,la}catch{try{return li(arguments,"callee").get}catch{return la}}}():la,Pi=pu(),hg=Kh(),te=Object.getPrototypeOf||(hg?function(e){return e.__proto__}:null),Ri={},gg=typeof Uint8Array>"u"||!te?it:te(Uint8Array),ci={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?it:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?it:ArrayBuffer,"%ArrayIteratorPrototype%":Pi&&te?te([][Symbol.iterator]()):it,"%AsyncFromSyncIteratorPrototype%":it,"%AsyncFunction%":Ri,"%AsyncGenerator%":Ri,"%AsyncGeneratorFunction%":Ri,"%AsyncIteratorPrototype%":Ri,"%Atomics%":typeof Atomics>"u"?it:Atomics,"%BigInt%":typeof BigInt>"u"?it:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?it:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?it:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?it:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":ag,"%eval%":eval,"%EvalError%":ug,"%Float32Array%":typeof Float32Array>"u"?it:Float32Array,"%Float64Array%":typeof Float64Array>"u"?it:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?it:FinalizationRegistry,"%Function%":lf,"%GeneratorFunction%":Ri,"%Int8Array%":typeof Int8Array>"u"?it:Int8Array,"%Int16Array%":typeof Int16Array>"u"?it:Int16Array,"%Int32Array%":typeof Int32Array>"u"?it:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pi&&te?te(te([][Symbol.iterator]())):it,"%JSON%":typeof JSON=="object"?JSON:it,"%Map%":typeof Map>"u"?it:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Pi||!te?it:te(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?it:Promise,"%Proxy%":typeof Proxy>"u"?it:Proxy,"%RangeError%":lg,"%ReferenceError%":cg,"%Reflect%":typeof Reflect>"u"?it:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?it:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Pi||!te?it:te(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?it:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pi&&te?te(""[Symbol.iterator]()):it,"%Symbol%":Pi?Symbol:it,"%SyntaxError%":ki,"%ThrowTypeError%":pg,"%TypedArray%":gg,"%TypeError%":Fi,"%Uint8Array%":typeof Uint8Array>"u"?it:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?it:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?it:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?it:Uint32Array,"%URIError%":fg,"%WeakMap%":typeof WeakMap>"u"?it:WeakMap,"%WeakRef%":typeof WeakRef>"u"?it:WeakRef,"%WeakSet%":typeof WeakSet>"u"?it:WeakSet};if(te)try{null.error}catch(e){var dg=te(te(e));ci["%Error.prototype%"]=dg}var yg=function e(t){var n;if(t==="%AsyncFunction%")n=ua("async function () {}");else if(t==="%GeneratorFunction%")n=ua("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=ua("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&te&&(n=te(i.prototype))}return ci[t]=n,n},ll={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ho=hu,_s=uf,mg=Ho.call(Function.call,Array.prototype.concat),_g=Ho.call(Function.apply,Array.prototype.splice),cl=Ho.call(Function.call,String.prototype.replace),vs=Ho.call(Function.call,String.prototype.slice),vg=Ho.call(Function.call,RegExp.prototype.exec),bg=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Eg=/\\(\\)?/g,Ig=function(t){var n=vs(t,0,1),r=vs(t,-1);if(n==="%"&&r!=="%")throw new ki("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new ki("invalid intrinsic syntax, expected opening `%`");var i=[];return cl(t,bg,function(o,s,a,u){i[i.length]=a?cl(u,Eg,"$1"):s||o}),i},Sg=function(t,n){var r=t,i;if(_s(ll,r)&&(i=ll[r],r="%"+i[0]+"%"),_s(ci,r)){var o=ci[r];if(o===Ri&&(o=yg(r)),typeof o>"u"&&!n)throw new Fi("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new ki("intrinsic "+t+" does not exist!")},ar=function(t,n){if(typeof t!="string"||t.length===0)throw new Fi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Fi('"allowMissing" argument must be a boolean');if(vg(/^%?[^%]*%?$/,t)===null)throw new ki("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Ig(t),i=r.length>0?r[0]:"",o=Sg("%"+i+"%",n),s=o.name,a=o.value,u=!1,l=o.alias;l&&(i=l[0],_g(r,mg([0,1],l)));for(var c=1,f=!0;c<r.length;c+=1){var p=r[c],h=vs(p,0,1),g=vs(p,-1);if((h==='"'||h==="'"||h==="`"||g==='"'||g==="'"||g==="`")&&h!==g)throw new ki("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(u=!0),i+="."+p,s="%"+i+"%",_s(ci,s))a=ci[s];else if(a!=null){if(!(p in a)){if(!n)throw new Fi("base intrinsic for "+t+" exists, but the property is not available.");return}if(li&&c+1>=r.length){var m=li(a,p);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[p]}else f=_s(a,p),a=a[p];f&&!u&&(ci[s]=a)}}return a},ca,fl;function gu(){if(fl)return ca;fl=1;var e=ar,t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return ca=t,ca}var wg=ar,cs=wg("%Object.getOwnPropertyDescriptor%",!0);if(cs)try{cs([],"length")}catch{cs=null}var du=cs,pl=gu(),Lg=af,Ti=$r,hl=du,yu=function(t,n,r){if(!t||typeof t!="object"&&typeof t!="function")throw new Ti("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Ti("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ti("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ti("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ti("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ti("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!hl&&hl(t,n);if(pl)pl(t,n,{configurable:s===null&&u?u.configurable:!s,enumerable:i===null&&u?u.enumerable:!i,value:r,writable:o===null&&u?u.writable:!o});else if(a||!i&&!o&&!s)t[n]=r;else throw new Lg("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ta=gu(),cf=function(){return!!Ta};cf.hasArrayLengthDefineBug=function(){if(!Ta)return null;try{return Ta([],"length",{value:1}).length!==1}catch{return!0}};var mu=cf,Ng=fu,xg=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Cg=Object.prototype.toString,Og=Array.prototype.concat,gl=yu,Pg=function(e){return typeof e=="function"&&Cg.call(e)==="[object Function]"},ff=mu(),Tg=function(e,t,n,r){if(t in e){if(r===!0){if(e[t]===n)return}else if(!Pg(r)||!r())return}ff?gl(e,t,n,!0):gl(e,t,n)},pf=function(e,t){var n=arguments.length>2?arguments[2]:{},r=Ng(t);xg&&(r=Og.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)Tg(e,r[i],t[r[i]],n[r[i]])};pf.supportsDescriptors=!!ff;var Si=pf,hf={exports:{}},Rg=ar,dl=yu,Ag=mu(),yl=du,ml=$r,Mg=Rg("%Math.floor%"),Dg=function(t,n){if(typeof t!="function")throw new ml("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||Mg(n)!==n)throw new ml("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&yl){var s=yl(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!r)&&(Ag?dl(t,"length",n,!0,!0):dl(t,"length",n)),t};(function(e){var t=hu,n=ar,r=Dg,i=$r,o=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(s,o),u=gu(),l=n("%Math.max%");e.exports=function(p){if(typeof p!="function")throw new i("a function is required");var h=a(t,s,arguments);return r(h,1+l(0,p.length-(arguments.length-1)),!0)};var c=function(){return a(t,o,arguments)};u?u(e.exports,"apply",{value:c}):e.exports.apply=c})(hf);var ao=hf.exports,gf=ar,df=ao,Fg=df(gf("String.prototype.indexOf")),Sn=function(t,n){var r=gf(t,!!n);return typeof r=="function"&&Fg(t,".prototype.")>-1?df(r):r},kg=fu,yf=Us(),mf=Sn,_l=Object,Bg=mf("Array.prototype.push"),vl=mf("Object.prototype.propertyIsEnumerable"),Gg=yf?Object.getOwnPropertySymbols:null,_f=function(t,n){if(t==null)throw new TypeError("target must be an object");var r=_l(t);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var o=_l(arguments[i]),s=kg(o),a=yf&&(Object.getOwnPropertySymbols||Gg);if(a)for(var u=a(o),l=0;l<u.length;++l){var c=u[l];vl(o,c)&&Bg(s,c)}for(var f=0;f<s.length;++f){var p=s[f];if(vl(o,p)){var h=o[p];r[p]=h}}}return r},fa=_f,zg=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return e!==o},qg=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},vf=function(){return!Object.assign||zg()||qg()?fa:Object.assign},Ug=Si,Vg=vf,jg=function(){var t=Vg();return Ug(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},Wg=Si,Xg=ao,Yg=_f,bf=vf,Hg=jg,Kg=Xg.apply(bf()),Ef=function(t,n){return Kg(Object,arguments)};Wg(Ef,{getPolyfill:bf,implementation:Yg,shim:Hg});var Jg=Ef,Ro=function(){return typeof(function(){}).name=="string"},Co=Object.getOwnPropertyDescriptor;if(Co)try{Co([],"length")}catch{Co=null}Ro.functionsHaveConfigurableNames=function(){if(!Ro()||!Co)return!1;var t=Co(function(){},"name");return!!t&&!!t.configurable};var Zg=Function.prototype.bind;Ro.boundFunctionsHaveNames=function(){return Ro()&&typeof Zg=="function"&&(function(){}).bind().name!==""};var Qg=Ro,bl=yu,$g=mu(),td=Qg.functionsHaveConfigurableNames(),ed=$r,nd=function(t,n){if(typeof t!="function")throw new ed("`fn` is not a function");var r=arguments.length>2&&!!arguments[2];return(!r||td)&&($g?bl(t,"name",n,!0,!0):bl(t,"name",n)),t},rd=nd,id=$r,od=Object,If=rd(function(){if(this==null||this!==od(this))throw new id("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),sd=If,ad=Si.supportsDescriptors,ud=Object.getOwnPropertyDescriptor,Sf=function(){if(ad&&/a/mig.flags==="gim"){var t=ud(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(r,"sticky",{get:function(){n+="y"}}),n==="dy")return t.get}}return sd},ld=Si.supportsDescriptors,cd=Sf,fd=Object.getOwnPropertyDescriptor,pd=Object.defineProperty,hd=TypeError,El=Object.getPrototypeOf,gd=/a/,dd=function(){if(!ld||!El)throw new hd("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=cd(),n=El(gd),r=fd(n,"flags");return(!r||r.get!==t)&&pd(n,"flags",{configurable:!0,enumerable:!1,get:t}),t},yd=Si,md=ao,_d=If,wf=Sf,vd=dd,Lf=md(wf());yd(Lf,{getPolyfill:wf,implementation:_d,shim:vd});var bd=Lf,fs={exports:{}},Ed=Us,wi=function(){return Ed()&&!!Symbol.toStringTag},Id=wi(),Sd=Sn,Ra=Sd("Object.prototype.toString"),Vs=function(t){return Id&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Ra(t)==="[object Arguments]"},Nf=function(t){return Vs(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Ra(t)!=="[object Array]"&&Ra(t.callee)==="[object Function]"},wd=function(){return Vs(arguments)}();Vs.isLegacyArguments=Nf;var xf=wd?Vs:Nf;const Ld={},Nd=Object.freeze(Object.defineProperty({__proto__:null,default:Ld},Symbol.toStringTag,{value:"Module"})),xd=Zp(Nd);var _u=typeof Map=="function"&&Map.prototype,pa=Object.getOwnPropertyDescriptor&&_u?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,bs=_u&&pa&&typeof pa.get=="function"?pa.get:null,Il=_u&&Map.prototype.forEach,vu=typeof Set=="function"&&Set.prototype,ha=Object.getOwnPropertyDescriptor&&vu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Es=vu&&ha&&typeof ha.get=="function"?ha.get:null,Sl=vu&&Set.prototype.forEach,Cd=typeof WeakMap=="function"&&WeakMap.prototype,Oo=Cd?WeakMap.prototype.has:null,Od=typeof WeakSet=="function"&&WeakSet.prototype,Po=Od?WeakSet.prototype.has:null,Pd=typeof WeakRef=="function"&&WeakRef.prototype,wl=Pd?WeakRef.prototype.deref:null,Td=Boolean.prototype.valueOf,Rd=Object.prototype.toString,Ad=Function.prototype.toString,Md=String.prototype.match,bu=String.prototype.slice,Rr=String.prototype.replace,Dd=String.prototype.toUpperCase,Ll=String.prototype.toLowerCase,Cf=RegExp.prototype.test,Nl=Array.prototype.concat,$n=Array.prototype.join,Fd=Array.prototype.slice,xl=Math.floor,Aa=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ga=Object.getOwnPropertySymbols,Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ve=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Bi||"symbol")?Symbol.toStringTag:null,Of=Object.prototype.propertyIsEnumerable,Cl=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Ol(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Cf.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-xl(-e):xl(e);if(r!==e){var i=String(r),o=bu.call(t,i.length+1);return Rr.call(i,n,"$&_")+"."+Rr.call(Rr.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Rr.call(t,n,"$&_")}var Da=xd,Pl=Da.custom,Tl=Tf(Pl)?Pl:null,kd=function e(t,n,r,i){var o=n||{};if(Pr(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Pr(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Pr(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Pr(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Pr(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Af(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return a?Ol(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return a?Ol(t,l):l}var c=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=c&&c>0&&typeof t=="object")return Fa(t)?"[Array]":"[Object]";var f=ey(o,r);if(typeof i>"u")i=[];else if(Rf(i,t)>=0)return"[Circular]";function p(Z,Pt,me){if(Pt&&(i=Fd.call(i),i.push(Pt)),me){var ce={depth:o.depth};return Pr(o,"quoteStyle")&&(ce.quoteStyle=o.quoteStyle),e(Z,ce,r+1,i)}return e(Z,o,r+1,i)}if(typeof t=="function"&&!Rl(t)){var h=Xd(t),g=rs(t,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(g.length>0?" { "+$n.call(g,", ")+" }":"")}if(Tf(t)){var m=Bi?Rr.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ma.call(t);return typeof t=="object"&&!Bi?_o(m):m}if(Qd(t)){for(var v="<"+Ll.call(String(t.nodeName)),E=t.attributes||[],I=0;I<E.length;I++)v+=" "+E[I].name+"="+Pf(Bd(E[I].value),"double",o);return v+=">",t.childNodes&&t.childNodes.length&&(v+="..."),v+="</"+Ll.call(String(t.nodeName))+">",v}if(Fa(t)){if(t.length===0)return"[]";var S=rs(t,p);return f&&!ty(S)?"["+ka(S,f)+"]":"[ "+$n.call(S,", ")+" ]"}if(zd(t)){var O=rs(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!Of.call(t,"cause")?"{ ["+String(t)+"] "+$n.call(Nl.call("[cause]: "+p(t.cause),O),", ")+" }":O.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+$n.call(O,", ")+" }"}if(typeof t=="object"&&s){if(Tl&&typeof t[Tl]=="function"&&Da)return Da(t,{depth:c-r});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Yd(t)){var R=[];return Il&&Il.call(t,function(Z,Pt){R.push(p(Pt,t,!0)+" => "+p(Z,t))}),Al("Map",bs.call(t),R,f)}if(Jd(t)){var k=[];return Sl&&Sl.call(t,function(Z){k.push(p(Z,t))}),Al("Set",Es.call(t),k,f)}if(Hd(t))return da("WeakMap");if(Zd(t))return da("WeakSet");if(Kd(t))return da("WeakRef");if(Ud(t))return _o(p(Number(t)));if(jd(t))return _o(p(Aa.call(t)));if(Vd(t))return _o(Td.call(t));if(qd(t))return _o(p(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===uu)return"{ [object globalThis] }";if(!Gd(t)&&!Rl(t)){var B=rs(t,p),x=Cl?Cl(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",G=!x&&ve&&Object(t)===t&&ve in t?bu.call(ti(t),8,-1):A?"Object":"",b=x||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",T=b+(G||A?"["+$n.call(Nl.call([],G||[],A||[]),": ")+"] ":"");return B.length===0?T+"{}":f?T+"{"+ka(B,f)+"}":T+"{ "+$n.call(B,", ")+" }"}return String(t)};function Pf(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function Bd(e){return Rr.call(String(e),/"/g,"&quot;")}function Fa(e){return ti(e)==="[object Array]"&&(!ve||!(typeof e=="object"&&ve in e))}function Gd(e){return ti(e)==="[object Date]"&&(!ve||!(typeof e=="object"&&ve in e))}function Rl(e){return ti(e)==="[object RegExp]"&&(!ve||!(typeof e=="object"&&ve in e))}function zd(e){return ti(e)==="[object Error]"&&(!ve||!(typeof e=="object"&&ve in e))}function qd(e){return ti(e)==="[object String]"&&(!ve||!(typeof e=="object"&&ve in e))}function Ud(e){return ti(e)==="[object Number]"&&(!ve||!(typeof e=="object"&&ve in e))}function Vd(e){return ti(e)==="[object Boolean]"&&(!ve||!(typeof e=="object"&&ve in e))}function Tf(e){if(Bi)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Ma)return!1;try{return Ma.call(e),!0}catch{}return!1}function jd(e){if(!e||typeof e!="object"||!Aa)return!1;try{return Aa.call(e),!0}catch{}return!1}var Wd=Object.prototype.hasOwnProperty||function(e){return e in this};function Pr(e,t){return Wd.call(e,t)}function ti(e){return Rd.call(e)}function Xd(e){if(e.name)return e.name;var t=Md.call(Ad.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Rf(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Yd(e){if(!bs||!e||typeof e!="object")return!1;try{bs.call(e);try{Es.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function Hd(e){if(!Oo||!e||typeof e!="object")return!1;try{Oo.call(e,Oo);try{Po.call(e,Po)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function Kd(e){if(!wl||!e||typeof e!="object")return!1;try{return wl.call(e),!0}catch{}return!1}function Jd(e){if(!Es||!e||typeof e!="object")return!1;try{Es.call(e);try{bs.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Zd(e){if(!Po||!e||typeof e!="object")return!1;try{Po.call(e,Po);try{Oo.call(e,Oo)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function Qd(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Af(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Af(bu.call(e,0,t.maxStringLength),t)+r}var i=Rr.call(Rr.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,$d);return Pf(i,"single",t)}function $d(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+Dd.call(t.toString(16))}function _o(e){return"Object("+e+")"}function da(e){return e+" { ? }"}function Al(e,t,n,r){var i=r?ka(n,r):$n.call(n,", ");return e+" ("+t+") {"+i+"}"}function ty(e){for(var t=0;t<e.length;t++)if(Rf(e[t],`
`)>=0)return!1;return!0}function ey(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=$n.call(Array(e.indent+1)," ");else return null;return{base:n,prev:$n.call(Array(t+1),n)}}function ka(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+$n.call(e,","+n)+`
`+t.prev}function rs(e,t){var n=Fa(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=Pr(e,i)?t(e[i],e):""}var o=typeof ga=="function"?ga(e):[],s;if(Bi){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var u in e)Pr(e,u)&&(n&&String(Number(u))===u&&u<e.length||Bi&&s["$"+u]instanceof Symbol||(Cf.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if(typeof ga=="function")for(var l=0;l<o.length;l++)Of.call(e,o[l])&&r.push("["+t(o[l])+"]: "+t(e[o[l]],e));return r}var Mf=ar,uo=Sn,ny=kd,ry=$r,is=Mf("%WeakMap%",!0),os=Mf("%Map%",!0),iy=uo("WeakMap.prototype.get",!0),oy=uo("WeakMap.prototype.set",!0),sy=uo("WeakMap.prototype.has",!0),ay=uo("Map.prototype.get",!0),uy=uo("Map.prototype.set",!0),ly=uo("Map.prototype.has",!0),Eu=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},cy=function(e,t){var n=Eu(e,t);return n&&n.value},fy=function(e,t,n){var r=Eu(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},py=function(e,t){return!!Eu(e,t)},Df=function(){var t,n,r,i={assert:function(o){if(!i.has(o))throw new ry("Side channel does not contain "+ny(o))},get:function(o){if(is&&o&&(typeof o=="object"||typeof o=="function")){if(t)return iy(t,o)}else if(os){if(n)return ay(n,o)}else if(r)return cy(r,o)},has:function(o){if(is&&o&&(typeof o=="object"||typeof o=="function")){if(t)return sy(t,o)}else if(os){if(n)return ly(n,o)}else if(r)return py(r,o);return!1},set:function(o,s){is&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new is),oy(t,o,s)):os?(n||(n=new os),uy(n,o,s)):(r||(r={key:{},next:null}),fy(r,o,s))}};return i},hy=uf,vo=Df(),hr=$r,Iu={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new hr("`O` is not an object");if(typeof t!="string")throw new hr("`slot` must be a string");if(vo.assert(e),!Iu.has(e,t))throw new hr("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new hr("`O` is not an object");if(typeof t!="string")throw new hr("`slot` must be a string");var n=vo.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new hr("`O` is not an object");if(typeof t!="string")throw new hr("`slot` must be a string");var n=vo.get(e);return!!n&&hy(n,"$"+t)},set:function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new hr("`O` is not an object");if(typeof t!="string")throw new hr("`slot` must be a string");var r=vo.get(e);r||(r={},vo.set(e,r)),r["$"+t]=n}};Object.freeze&&Object.freeze(Iu);var gy=Iu,bo=gy,dy=SyntaxError,Ml=typeof StopIteration=="object"?StopIteration:null,yy=function(t){if(!Ml)throw new dy("this environment lacks StopIteration");bo.set(t,"[[Done]]",!1);var n={next:function(){var i=bo.get(this,"[[Iterator]]"),o=bo.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(s){if(bo.set(i,"[[Done]]",!0),s!==Ml)throw s;return{done:!0,value:void 0}}}};return bo.set(n,"[[Iterator]]",t),n},my={}.toString,Ff=Array.isArray||function(e){return my.call(e)=="[object Array]"},_y=String.prototype.valueOf,vy=function(t){try{return _y.call(t),!0}catch{return!1}},by=Object.prototype.toString,Ey="[object String]",Iy=wi(),kf=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:Iy?vy(t):by.call(t)===Ey},Su=typeof Map=="function"&&Map.prototype?Map:null,Sy=typeof Set=="function"&&Set.prototype?Set:null,Is;Su||(Is=function(t){return!1});var Bf=Su?Map.prototype.has:null,Dl=Sy?Set.prototype.has:null;!Is&&!Bf&&(Is=function(t){return!1});var Gf=Is||function(t){if(!t||typeof t!="object")return!1;try{if(Bf.call(t),Dl)try{Dl.call(t)}catch{return!0}return t instanceof Su}catch{}return!1},wy=typeof Map=="function"&&Map.prototype?Map:null,wu=typeof Set=="function"&&Set.prototype?Set:null,Ss;wu||(Ss=function(t){return!1});var Fl=wy?Map.prototype.has:null,zf=wu?Set.prototype.has:null;!Ss&&!zf&&(Ss=function(t){return!1});var qf=Ss||function(t){if(!t||typeof t!="object")return!1;try{if(zf.call(t),Fl)try{Fl.call(t)}catch{return!0}return t instanceof wu}catch{}return!1},kl=xf,Bl=yy;if(pu()||Us()){var ya=Symbol.iterator;fs.exports=function(t){if(t!=null&&typeof t[ya]<"u")return t[ya]();if(kl(t))return Array.prototype[ya].call(t)}}else{var Ly=Ff,Ny=kf,Gl=ar,xy=Gl("%Map%",!0),Cy=Gl("%Set%",!0),On=Sn,zl=On("Array.prototype.push"),ql=On("String.prototype.charCodeAt"),Oy=On("String.prototype.slice"),Py=function(t,n){var r=t.length;if(n+1>=r)return n+1;var i=ql(t,n);if(i<55296||i>56319)return n+1;var o=ql(t,n+1);return o<56320||o>57343?n+1:n+2},ma=function(t){var n=0;return{next:function(){var i=n>=t.length,o;return i||(o=t[n],n+=1),{done:i,value:o}}}},Ul=function(t,n){if(Ly(t)||kl(t))return ma(t);if(Ny(t)){var r=0;return{next:function(){var o=Py(t,r),s=Oy(t,r,o);return r=o,{done:o>t.length,value:s}}}}if(n&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!xy&&!Cy)fs.exports=function(t){if(t!=null)return Ul(t,!0)};else{var Ty=Gf,Ry=qf,Vl=On("Map.prototype.forEach",!0),jl=On("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var Wl=On("Map.prototype.iterator",!0),Xl=On("Set.prototype.iterator",!0);var Yl=On("Map.prototype.@@iterator",!0)||On("Map.prototype._es6-shim iterator_",!0),Hl=On("Set.prototype.@@iterator",!0)||On("Set.prototype._es6-shim iterator_",!0),Ay=function(t){if(Ty(t)){if(Wl)return Bl(Wl(t));if(Yl)return Yl(t);if(Vl){var n=[];return Vl(t,function(i,o){zl(n,[o,i])}),ma(n)}}if(Ry(t)){if(Xl)return Bl(Xl(t));if(Hl)return Hl(t);if(jl){var r=[];return jl(t,function(i){zl(r,i)}),ma(r)}}};fs.exports=function(t){return Ay(t)||Ul(t)}}}var My=fs.exports,Kl=function(e){return e!==e},Uf=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||Kl(t)&&Kl(n))},Dy=Uf,Vf=function(){return typeof Object.is=="function"?Object.is:Dy},Fy=Vf,ky=Si,By=function(){var t=Fy();return ky(Object,{is:t},{is:function(){return Object.is!==t}}),t},Gy=Si,zy=ao,qy=Uf,jf=Vf,Uy=By,Wf=zy(jf(),Object);Gy(Wf,{getPolyfill:jf,implementation:qy,shim:Uy});var Vy=Wf,jy=ao,Xf=Sn,Wy=ar,Ba=Wy("%ArrayBuffer%",!0),ps=Xf("ArrayBuffer.prototype.byteLength",!0),Xy=Xf("Object.prototype.toString"),Jl=!!Ba&&!ps&&new Ba(0).slice,Zl=!!Jl&&jy(Jl),Yf=ps||Zl?function(t){if(!t||typeof t!="object")return!1;try{return ps?ps(t):Zl(t,0),!0}catch{return!1}}:Ba?function(t){return Xy(t)==="[object ArrayBuffer]"}:function(t){return!1},Yy=Date.prototype.getDay,Hy=function(t){try{return Yy.call(t),!0}catch{return!1}},Ky=Object.prototype.toString,Jy="[object Date]",Zy=wi(),Qy=function(t){return typeof t!="object"||t===null?!1:Zy?Hy(t):Ky.call(t)===Jy},Ga=Sn,Hf=wi(),Kf,Jf,za,qa;if(Hf){Kf=Ga("Object.prototype.hasOwnProperty"),Jf=Ga("RegExp.prototype.exec"),za={};var _a=function(){throw za};qa={toString:_a,valueOf:_a},typeof Symbol.toPrimitive=="symbol"&&(qa[Symbol.toPrimitive]=_a)}var $y=Ga("Object.prototype.toString"),tm=Object.getOwnPropertyDescriptor,em="[object RegExp]",nm=Hf?function(t){if(!t||typeof t!="object")return!1;var n=tm(t,"lastIndex"),r=n&&Kf(n,"value");if(!r)return!1;try{Jf(t,qa)}catch(i){return i===za}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:$y(t)===em},rm=Sn,Ql=rm("SharedArrayBuffer.prototype.byteLength",!0),im=Ql?function(t){if(!t||typeof t!="object")return!1;try{return Ql(t),!0}catch{return!1}}:function(t){return!1},om=Number.prototype.toString,sm=function(t){try{return om.call(t),!0}catch{return!1}},am=Object.prototype.toString,um="[object Number]",lm=wi(),cm=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:lm?sm(t):am.call(t)===um},Zf=Sn,fm=Zf("Boolean.prototype.toString"),pm=Zf("Object.prototype.toString"),hm=function(t){try{return fm(t),!0}catch{return!1}},gm="[object Boolean]",dm=wi(),ym=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:dm&&Symbol.toStringTag in t?hm(t):pm(t)===gm},Ua={exports:{}},mm=Object.prototype.toString,_m=pu();if(_m){var vm=Symbol.prototype.toString,bm=/^Symbol\(.*\)$/,Em=function(t){return typeof t.valueOf()!="symbol"?!1:bm.test(vm.call(t))};Ua.exports=function(t){if(typeof t=="symbol")return!0;if(mm.call(t)!=="[object Symbol]")return!1;try{return Em(t)}catch{return!1}}}else Ua.exports=function(t){return!1};var Im=Ua.exports,Va={exports:{}},$l=typeof BigInt<"u"&&BigInt,Sm=function(){return typeof $l=="function"&&typeof BigInt=="function"&&typeof $l(42)=="bigint"&&typeof BigInt(42)=="bigint"},wm=Sm();if(wm){var Lm=BigInt.prototype.valueOf,Nm=function(t){try{return Lm.call(t),!0}catch{}return!1};Va.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:Nm(t)}}else Va.exports=function(t){return!1};var xm=Va.exports,Cm=kf,Om=cm,Pm=ym,Tm=Im,Rm=xm,Am=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(Cm(t))return"String";if(Om(t))return"Number";if(Pm(t))return"Boolean";if(Tm(t))return"Symbol";if(Rm(t))return"BigInt"},ws=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,tc=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Ls;ws||(Ls=function(t){return!1});var ja=ws?ws.prototype.has:null,va=tc?tc.prototype.has:null;!Ls&&!ja&&(Ls=function(t){return!1});var Mm=Ls||function(t){if(!t||typeof t!="object")return!1;try{if(ja.call(t,ja),va)try{va.call(t,va)}catch{return!0}return t instanceof ws}catch{}return!1},Wa={exports:{}},Dm=ar,Qf=Sn,Fm=Dm("%WeakSet%",!0),ba=Qf("WeakSet.prototype.has",!0);if(ba){var Ea=Qf("WeakMap.prototype.has",!0);Wa.exports=function(t){if(!t||typeof t!="object")return!1;try{if(ba(t,ba),Ea)try{Ea(t,Ea)}catch{return!0}return t instanceof Fm}catch{}return!1}}else Wa.exports=function(t){return!1};var km=Wa.exports,Bm=Gf,Gm=qf,zm=Mm,qm=km,Um=function(t){if(t&&typeof t=="object"){if(Bm(t))return"Map";if(Gm(t))return"Set";if(zm(t))return"WeakMap";if(qm(t))return"WeakSet"}return!1},$f=Function.prototype.toString,Ai=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Xa,hs;if(typeof Ai=="function"&&typeof Object.defineProperty=="function")try{Xa=Object.defineProperty({},"length",{get:function(){throw hs}}),hs={},Ai(function(){throw 42},null,Xa)}catch(e){e!==hs&&(Ai=null)}else Ai=null;var Vm=/^\s*class\b/,Ya=function(t){try{var n=$f.call(t);return Vm.test(n)}catch{return!1}},Ia=function(t){try{return Ya(t)?!1:($f.call(t),!0)}catch{return!1}},gs=Object.prototype.toString,jm="[object Object]",Wm="[object Function]",Xm="[object GeneratorFunction]",Ym="[object HTMLAllCollection]",Hm="[object HTML document.all class]",Km="[object HTMLCollection]",Jm=typeof Symbol=="function"&&!!Symbol.toStringTag,Zm=!(0 in[,]),Ha=function(){return!1};if(typeof document=="object"){var Qm=document.all;gs.call(Qm)===gs.call(document.all)&&(Ha=function(t){if((Zm||!t)&&(typeof t>"u"||typeof t=="object"))try{var n=gs.call(t);return(n===Ym||n===Hm||n===Km||n===jm)&&t("")==null}catch{}return!1})}var $m=Ai?function(t){if(Ha(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Ai(t,null,Xa)}catch(n){if(n!==hs)return!1}return!Ya(t)&&Ia(t)}:function(t){if(Ha(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(Jm)return Ia(t);if(Ya(t))return!1;var n=gs.call(t);return n!==Wm&&n!==Xm&&!/^\[object HTML/.test(n)?!1:Ia(t)},t_=$m,e_=Object.prototype.toString,tp=Object.prototype.hasOwnProperty,n_=function(t,n,r){for(var i=0,o=t.length;i<o;i++)tp.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},r_=function(t,n,r){for(var i=0,o=t.length;i<o;i++)r==null?n(t.charAt(i),i,t):n.call(r,t.charAt(i),i,t)},i_=function(t,n,r){for(var i in t)tp.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},o_=function(t,n,r){if(!t_(n))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),e_.call(t)==="[object Array]"?n_(t,n,i):typeof t=="string"?r_(t,n,i):i_(t,n,i)},s_=o_,a_=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Sa=a_,u_=typeof globalThis>"u"?uu:globalThis,l_=function(){for(var t=[],n=0;n<Sa.length;n++)typeof u_[Sa[n]]=="function"&&(t[t.length]=Sa[n]);return t},Ns=s_,c_=l_,ec=ao,Lu=Sn,ds=du,f_=Lu("Object.prototype.toString"),ep=wi(),nc=typeof globalThis>"u"?uu:globalThis,Ka=c_(),Nu=Lu("String.prototype.slice"),wa=Object.getPrototypeOf,p_=Lu("Array.prototype.indexOf",!0)||function(t,n){for(var r=0;r<t.length;r+=1)if(t[r]===n)return r;return-1},xs={__proto__:null};ep&&ds&&wa?Ns(Ka,function(e){var t=new nc[e];if(Symbol.toStringTag in t){var n=wa(t),r=ds(n,Symbol.toStringTag);if(!r){var i=wa(n);r=ds(i,Symbol.toStringTag)}xs["$"+e]=ec(r.get)}}):Ns(Ka,function(e){var t=new nc[e],n=t.slice||t.set;n&&(xs["$"+e]=ec(n))});var h_=function(t){var n=!1;return Ns(xs,function(r,i){if(!n)try{"$"+r(t)===i&&(n=Nu(i,1))}catch{}}),n},g_=function(t){var n=!1;return Ns(xs,function(r,i){if(!n)try{r(t),n=Nu(i,1)}catch{}}),n},d_=function(t){if(!t||typeof t!="object")return!1;if(!ep){var n=Nu(f_(t),8,-1);return p_(Ka,n)>-1?n:n!=="Object"?!1:g_(t)}return ds?h_(t):null},y_=Sn,rc=y_("ArrayBuffer.prototype.byteLength",!0),m_=Yf,__=function(t){return m_(t)?rc?rc(t):t.byteLength:NaN},np=Jg,ur=Sn,ic=bd,v_=ar,Gi=My,b_=Df,oc=Vy,sc=xf,ac=Ff,uc=Yf,lc=Qy,cc=nm,fc=im,pc=fu,hc=Am,gc=Um,dc=d_,yc=__,mc=ur("SharedArrayBuffer.prototype.byteLength",!0),_c=ur("Date.prototype.getTime"),La=Object.getPrototypeOf,vc=ur("Object.prototype.toString"),Cs=v_("%Set%",!0),Ja=ur("Map.prototype.has",!0),Os=ur("Map.prototype.get",!0),bc=ur("Map.prototype.size",!0),Ps=ur("Set.prototype.add",!0),rp=ur("Set.prototype.delete",!0),Ts=ur("Set.prototype.has",!0),ys=ur("Set.prototype.size",!0);function Ec(e,t,n,r){for(var i=Gi(e),o;(o=i.next())&&!o.done;)if(Tn(t,o.value,n,r))return rp(e,o.value),!0;return!1}function ip(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function E_(e,t,n,r,i,o){var s=ip(n);if(s!=null)return s;var a=Os(t,s),u=np({},i,{strict:!1});return typeof a>"u"&&!Ja(t,s)||!Tn(r,a,u,o)?!1:!Ja(e,s)&&Tn(r,a,u,o)}function I_(e,t,n){var r=ip(n);return r??(Ts(t,r)&&!Ts(e,r))}function Ic(e,t,n,r,i,o){for(var s=Gi(e),a,u;(a=s.next())&&!a.done;)if(u=a.value,Tn(n,u,i,o)&&Tn(r,Os(t,u),i,o))return rp(e,u),!0;return!1}function Tn(e,t,n,r){var i=n||{};if(i.strict?oc(e,t):e===t)return!0;var o=hc(e),s=hc(t);if(o!==s)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?oc(e,t):e==t;var a=r.has(e),u=r.has(t),l;if(a&&u){if(r.get(e)===r.get(t))return!0}else l={};return a||r.set(e,l),u||r.set(t,l),L_(e,t,i,r)}function Sc(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function S_(e,t,n,r){if(ys(e)!==ys(t))return!1;for(var i=Gi(e),o=Gi(t),s,a,u;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")u||(u=new Cs),Ps(u,s.value);else if(!Ts(t,s.value)){if(n.strict||!I_(e,t,s.value))return!1;u||(u=new Cs),Ps(u,s.value)}if(u){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!Ec(u,a.value,n.strict,r))return!1}else if(!n.strict&&!Ts(e,a.value)&&!Ec(u,a.value,n.strict,r))return!1;return ys(u)===0}return!0}function w_(e,t,n,r){if(bc(e)!==bc(t))return!1;for(var i=Gi(e),o=Gi(t),s,a,u,l,c,f;(s=i.next())&&!s.done;)if(l=s.value[0],c=s.value[1],l&&typeof l=="object")u||(u=new Cs),Ps(u,l);else if(f=Os(t,l),typeof f>"u"&&!Ja(t,l)||!Tn(c,f,n,r)){if(n.strict||!E_(e,t,l,c,n,r))return!1;u||(u=new Cs),Ps(u,l)}if(u){for(;(a=o.next())&&!a.done;)if(l=a.value[0],f=a.value[1],l&&typeof l=="object"){if(!Ic(u,e,l,f,n,r))return!1}else if(!n.strict&&(!e.has(l)||!Tn(Os(e,l),f,n,r))&&!Ic(u,e,l,f,np({},n,{strict:!1}),r))return!1;return ys(u)===0}return!0}function L_(e,t,n,r){var i,o;if(typeof e!=typeof t||e==null||t==null||vc(e)!==vc(t)||sc(e)!==sc(t))return!1;var s=ac(e),a=ac(t);if(s!==a)return!1;var u=e instanceof Error,l=t instanceof Error;if(u!==l||(u||l)&&(e.name!==t.name||e.message!==t.message))return!1;var c=cc(e),f=cc(t);if(c!==f||(c||f)&&(e.source!==t.source||ic(e)!==ic(t)))return!1;var p=lc(e),h=lc(t);if(p!==h||(p||h)&&_c(e)!==_c(t)||n.strict&&La&&La(e)!==La(t))return!1;var g=dc(e),m=dc(t);if(g!==m)return!1;if(g||m){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var v=Sc(e),E=Sc(t);if(v!==E)return!1;if(v||E){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var I=uc(e),S=uc(t);if(I!==S)return!1;if(I||S)return yc(e)!==yc(t)?!1:typeof Uint8Array=="function"&&Tn(new Uint8Array(e),new Uint8Array(t),n,r);var O=fc(e),R=fc(t);if(O!==R)return!1;if(O||R)return mc(e)!==mc(t)?!1:typeof Uint8Array=="function"&&Tn(new Uint8Array(e),new Uint8Array(t),n,r);if(typeof e!=typeof t)return!1;var k=pc(e),B=pc(t);if(k.length!==B.length)return!1;for(k.sort(),B.sort(),i=k.length-1;i>=0;i--)if(k[i]!=B[i])return!1;for(i=k.length-1;i>=0;i--)if(o=k[i],!Tn(e[o],t[o],n,r))return!1;var x=gc(e),A=gc(t);return x!==A?!1:x==="Set"||A==="Set"?S_(e,t,n,r):x==="Map"?w_(e,t,n,r):!0}var N_=function(t,n,r){return Tn(t,n,r,b_())};const x_=Qp(N_);var C_=Object.defineProperty,gt=(e,t)=>C_(e,"name",{value:t,configurable:!0}),O_=class{constructor(t){this.direction=!1,this.compareProperties=!0;var n,r,i;this.precision=10**-((n=t==null?void 0:t.precision)!=null?n:17),this.direction=(r=t==null?void 0:t.direction)!=null?r:!1,this.compareProperties=(i=t==null?void 0:t.compareProperties)!=null?i:!0}compare(t,n){if(t.type!==n.type||!No(t,n))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,n.coordinates);case"LineString":return this.compareLine(t.coordinates,n.coordinates);case"Polygon":return this.comparePolygon(t,n);case"GeometryCollection":return this.compareGeometryCollection(t,n);case"Feature":return this.compareFeature(t,n);case"FeatureCollection":return this.compareFeatureCollection(t,n);default:if(t.type.startsWith("Multi")){const r=Za(t),i=Za(n);return r.every(o=>i.some(s=>this.compare(o,s)))}}return!1}compareCoord(t,n){return t.length===n.length&&t.every((r,i)=>Math.abs(r-n[i])<this.precision)}compareLine(t,n,r=0,i=!1){if(!No(t,n))return!1;const o=t;let s=n;if(i&&!this.compareCoord(o[0],s[0])){const u=this.fixStartIndex(s,o);if(u)s=u;else return!1}const a=this.compareCoord(o[r],s[r]);return this.direction||a?this.comparePath(o,s):this.compareCoord(o[r],s[s.length-(1+r)])?this.comparePath(o.slice().reverse(),s):!1}fixStartIndex(t,n){let r,i=-1;for(let o=0;o<t.length;o++)if(this.compareCoord(t[o],n[0])){i=o;break}return i>=0&&(r=[].concat(t.slice(i,t.length),t.slice(1,i+1))),r}comparePath(t,n){return t.every((r,i)=>this.compareCoord(r,n[i]))}comparePolygon(t,n){if(this.compareLine(t.coordinates[0],n.coordinates[0],1,!0)){const r=t.coordinates.slice(1,t.coordinates.length),i=n.coordinates.slice(1,n.coordinates.length);return r.every(o=>i.some(s=>this.compareLine(o,s,1,!0)))}return!1}compareGeometryCollection(t,n){return No(t.geometries,n.geometries)&&this.compareBBox(t,n)&&t.geometries.every((r,i)=>this.compare(r,n.geometries[i]))}compareFeature(t,n){return t.id===n.id&&(this.compareProperties?x_(t.properties,n.properties):!0)&&this.compareBBox(t,n)&&this.compare(t.geometry,n.geometry)}compareFeatureCollection(t,n){return No(t.features,n.features)&&this.compareBBox(t,n)&&t.features.every((r,i)=>this.compare(r,n.features[i]))}compareBBox(t,n){return!t.bbox&&!n.bbox||(t.bbox&&n.bbox?this.compareCoord(t.bbox,n.bbox):!1)}};gt(O_,"GeojsonEquality");function No(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}gt(No,"sameLength");function Za(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}gt(Za,"explode");var Xe=63710088e-1,op={centimeters:Xe*100,centimetres:Xe*100,degrees:360/(2*Math.PI),feet:Xe*3.28084,inches:Xe*39.37,kilometers:Xe/1e3,kilometres:Xe/1e3,meters:Xe,metres:Xe,miles:Xe/1609.344,millimeters:Xe*1e3,millimetres:Xe*1e3,nauticalmiles:Xe/1852,radians:1,yards:Xe*1.0936},wc={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function er(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}gt(er,"feature");function P_(e,t,n={}){switch(e){case"Point":return gr(t).geometry;case"LineString":return dr(t).geometry;case"Polygon":return xu(t).geometry;case"MultiPoint":return ap(t).geometry;case"MultiLineString":return sp(t).geometry;case"MultiPolygon":return up(t).geometry;default:throw new Error(e+" is invalid")}}gt(P_,"geometry");function gr(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Rs(e[0])||!Rs(e[1]))throw new Error("coordinates must contain numbers");return er({type:"Point",coordinates:e},t,n)}gt(gr,"point");function T_(e,t,n={}){return js(e.map(r=>gr(r,t)),n)}gt(T_,"points");function xu(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return er({type:"Polygon",coordinates:e},t,n)}gt(xu,"polygon");function R_(e,t,n={}){return js(e.map(r=>xu(r,t)),n)}gt(R_,"polygons");function dr(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return er({type:"LineString",coordinates:e},t,n)}gt(dr,"lineString");function A_(e,t,n={}){return js(e.map(r=>dr(r,t)),n)}gt(A_,"lineStrings");function js(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}gt(js,"featureCollection");function sp(e,t,n={}){return er({type:"MultiLineString",coordinates:e},t,n)}gt(sp,"multiLineString");function ap(e,t,n={}){return er({type:"MultiPoint",coordinates:e},t,n)}gt(ap,"multiPoint");function up(e,t,n={}){return er({type:"MultiPolygon",coordinates:e},t,n)}gt(up,"multiPolygon");function M_(e,t,n={}){return er({type:"GeometryCollection",geometries:e},t,n)}gt(M_,"geometryCollection");function D_(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}gt(D_,"round");function lp(e,t="kilometers"){const n=op[t];if(!n)throw new Error(t+" units is invalid");return e*n}gt(lp,"radiansToLength");function Cu(e,t="kilometers"){const n=op[t];if(!n)throw new Error(t+" units is invalid");return e/n}gt(Cu,"lengthToRadians");function F_(e,t){return cp(Cu(e,t))}gt(F_,"lengthToDegrees");function k_(e){let t=e%360;return t<0&&(t+=360),t}gt(k_,"bearingToAzimuth");function cp(e){return e%(2*Math.PI)*180/Math.PI}gt(cp,"radiansToDegrees");function B_(e){return e%360*Math.PI/180}gt(B_,"degreesToRadians");function G_(e,t="kilometers",n="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return lp(Cu(e,t),n)}gt(G_,"convertLength");function z_(e,t="meters",n="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const r=wc[t];if(!r)throw new Error("invalid original units");const i=wc[n];if(!i)throw new Error("invalid final units");return e/r*i}gt(z_,"convertArea");function Rs(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}gt(Rs,"isNumber");function Ou(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}gt(Ou,"isObject");function q_(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!Rs(t))throw new Error("bbox must only contain numbers")})}gt(q_,"validateBBox");function U_(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}gt(U_,"validateId");var V_=Object.defineProperty,ye=(e,t)=>V_(e,"name",{value:t,configurable:!0});function lo(e,t,n){if(e!==null)for(var r,i,o,s,a,u,l,c=0,f=0,p,h=e.type,g=h==="FeatureCollection",m=h==="Feature",v=g?e.features.length:1,E=0;E<v;E++){l=g?e.features[E].geometry:m?e.geometry:e,p=l?l.type==="GeometryCollection":!1,a=p?l.geometries.length:1;for(var I=0;I<a;I++){var S=0,O=0;if(s=p?l.geometries[I]:l,s!==null){u=s.coordinates;var R=s.type;switch(c=n&&(R==="Polygon"||R==="MultiPolygon")?1:0,R){case null:break;case"Point":if(t(u,f,E,S,O)===!1)return!1;f++,S++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(t(u[r],f,E,S,O)===!1)return!1;f++,R==="MultiPoint"&&S++}R==="LineString"&&S++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(t(u[r][i],f,E,S,O)===!1)return!1;f++}R==="MultiLineString"&&S++,R==="Polygon"&&O++}R==="Polygon"&&S++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(O=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(t(u[r][i][o],f,E,S,O)===!1)return!1;f++}O++}S++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(lo(s.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}ye(lo,"coordEach");function j_(e,t,n,r){var i=n;return lo(e,function(o,s,a,u,l){s===0&&n===void 0?i=o:i=t(i,o,s,a,u,l)},r),i}ye(j_,"coordReduce");function fp(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}ye(fp,"propEach");function W_(e,t,n){var r=n;return fp(e,function(i,o){o===0&&n===void 0?r=i:r=t(r,i,o)}),r}ye(W_,"propReduce");function pp(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}ye(pp,"featureEach");function X_(e,t,n){var r=n;return pp(e,function(i,o){o===0&&n===void 0?r=i:r=t(r,i,o)}),r}ye(X_,"featureReduce");function Y_(e){var t=[];return lo(e,function(n){t.push(n)}),t}ye(Y_,"coordAll");function Pu(e,t){var n,r,i,o,s,a,u,l,c,f,p=0,h=e.type==="FeatureCollection",g=e.type==="Feature",m=h?e.features.length:1;for(n=0;n<m;n++){for(a=h?e.features[n].geometry:g?e.geometry:e,l=h?e.features[n].properties:g?e.properties:{},c=h?e.features[n].bbox:g?e.bbox:void 0,f=h?e.features[n].id:g?e.id:void 0,u=a?a.type==="GeometryCollection":!1,s=u?a.geometries.length:1,i=0;i<s;i++){if(o=u?a.geometries[i]:a,o===null){if(t(null,p,l,c,f)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,p,l,c,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],p,l,c,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}ye(Pu,"geomEach");function H_(e,t,n){var r=n;return Pu(e,function(i,o,s,a,u){o===0&&n===void 0?r=i:r=t(r,i,o,s,a,u)}),r}ye(H_,"geomReduce");function Ws(e,t){Pu(e,function(n,r,i,o,s){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(er(n,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var u;switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var l=0;l<n.coordinates.length;l++){var c=n.coordinates[l],f={type:u,coordinates:c};if(t(er(f,i),r,l)===!1)return!1}})}ye(Ws,"flattenEach");function K_(e,t,n){var r=n;return Ws(e,function(i,o,s){o===0&&s===0&&n===void 0?r=i:r=t(r,i,o,s)}),r}ye(K_,"flattenReduce");function hp(e,t){Ws(e,function(n,r,i){var o=0;if(n.geometry){var s=n.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,u=0,l=0,c=0;if(lo(n,function(f,p,h,g,m){if(a===void 0||r>u||g>l||m>c){a=f,u=r,l=g,c=m,o=0;return}var v=dr([a,f],n.properties);if(t(v,r,i,m,o)===!1)return!1;o++,a=f})===!1)return!1}}})}ye(hp,"segmentEach");function J_(e,t,n){var r=n,i=!1;return hp(e,function(o,s,a,u,l){i===!1&&n===void 0?r=o:r=t(r,o,s,a,u,l),i=!0}),r}ye(J_,"segmentReduce");function gp(e,t){if(!e)throw new Error("geojson is required");Ws(e,function(n,r,i){if(n.geometry!==null){var o=n.geometry.type,s=n.geometry.coordinates;switch(o){case"LineString":if(t(n,r,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(t(dr(s[a],n.properties),r,i,a)===!1)return!1;break}}})}ye(gp,"lineEach");function Z_(e,t,n){var r=n;return gp(e,function(i,o,s,a){o===0&&n===void 0?r=i:r=t(r,i,o,s,a)}),r}ye(Z_,"lineReduce");function Q_(e,t){if(t=t||{},!Ou(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,a=e.features[n].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),dr([u[o],u[o+1]],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),dr([u[i][o],u[i][o+1]],s,t);case"MultiLineString":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o-1),dr([u[r][o],u[r][o+1]],s,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),o<0&&(o=u[r][i].length-o-1),dr([u[r][i][o],u[r][i][o+1]],s,t)}throw new Error("geojson is invalid")}ye(Q_,"findSegment");function $_(e,t){if(t=t||{},!Ou(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,a=e.features[n].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":return gr(u,s,t);case"MultiPoint":return r<0&&(r=u.length+r),gr(u[r],s,t);case"LineString":return o<0&&(o=u.length+o),gr(u[o],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),gr(u[i][o],s,t);case"MultiLineString":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),gr(u[r][o],s,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),o<0&&(o=u[r][i].length-o),gr(u[r][i][o],s,t)}throw new Error("geojson is invalid")}ye($_,"findPoint");var tv=Object.defineProperty,ev=(e,t)=>tv(e,"name",{value:t,configurable:!0});function dp(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return lo(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}ev(dp,"bbox");var nv=dp;const rv="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rv);const iv=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],ov={decimalLatitude:40.123,decimalLongitude:-74.123},sv=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],av=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function uv(){const e=[];return iv.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...ov})}),[...e,...sv,...av]}const lv=uv();lv.map(e=>e.verbatimCoordinates);/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function cv(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Fr=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function fv(e,t){return e>t?1:e<t?-1:0}function Tr(e,t,n){for(var r=new Fr(null,null),i=r,o=r;;){var s=n(e,t.key);if(s<0){if(t.left===null)break;if(n(e,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(s>0){if(t.right===null)break;if(n(e,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function Na(e,t,n,r){var i=new Fr(e,t);if(n===null)return i.left=i.right=null,i;n=Tr(e,n,r);var o=r(e,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function Lc(e,t,n){var r=null,i=null;if(t){t=Tr(e,t,n);var o=n(t.key,e);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function pv(e,t,n){return t===null?e:(e===null||(t=Tr(e.key,t,n),t.left=e),t)}function Qa(e,t,n,r,i){if(e){r(""+t+(n?" ":" ")+i(e)+`
`);var o=t+(n?"    ":"   ");e.left&&Qa(e.left,o,!1,r,i),e.right&&Qa(e.right,o,!0,r,i)}}var Tu=function(){function e(t){t===void 0&&(t=fv),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=Na(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new Fr(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=Tr(t,this._root,i),s=i(t,o.key);return s===0?this._root=o:(s<0?(r.left=o.left,r.right=o,o.left=null):s>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=Tr(t,n,r);var o=r(t,n.key);return o===0?(n.left===null?i=n.right:(i=Tr(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Tr(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Tr(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):o=!0;return this},e.prototype.range=function(t,n,r,i){for(var o=[],s=this._comparator,a=this._root,u;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),u=s(a.key,n),u>0)break;if(s(a.key,t)>=0&&r.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return gv(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&eu(t,n,0,i-1,o),this._root===null)this._root=$a(t,n,0,i),this._size=i;else{var s=dv(this.toList(),hv(t,n),o);i=this._size+i,this._root=tu({head:s},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return Qa(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,o=Lc(t,this._root,i),s=o.left,a=o.right;i(t,n)<0?a=Na(n,r,a,i):s=Na(n,r,s,i),this._root=pv(s,a,i)},e.prototype.split=function(t){return Lc(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return cv(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function $a(e,t,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=e[o],a=t[o],u=new Fr(s,a);return u.left=$a(e,t,n,o),u.right=$a(e,t,o+1,r),u}return null}function hv(e,t){for(var n=new Fr(null,null),r=n,i=0;i<e.length;i++)r=r.next=new Fr(e[i],t[i]);return r.next=null,n.next}function gv(e){for(var t=e,n=[],r=!1,i=new Fr(null,null),o=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=o=o.next=n.pop(),t=t.right):r=!0;return o.next=null,i.next}function tu(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=tu(e,t,i),s=e.head;return s.left=o,e.head=e.head.next,s.right=tu(e,i+1,n),s}return null}function dv(e,t,n){for(var r=new Fr(null,null),i=r,o=e,s=t;o!==null&&s!==null;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return o!==null?i.next=o:s!==null&&(i.next=s),r.next}function eu(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],s=n-1,a=r+1;;){do s++;while(i(e[s],o)<0);do a--;while(i(e[a],o)>0);if(s>=a)break;var u=e[s];e[s]=e[a],e[a]=u,u=t[s],t[s]=t[a],t[a]=u}eu(e,t,n,a,i),eu(e,t,a+1,r,i)}}function wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return t&&Nc(e.prototype,t),n&&Nc(e,n),e}var Eo=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},nu=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},Ar=Number.EPSILON;Ar===void 0&&(Ar=Math.pow(2,-52));var yv=Ar*Ar,ru=function(e,t){if(-Ar<e&&e<Ar&&-Ar<t&&t<Ar)return 0;var n=e-t;return n*n<yv*e*t?0:e<t?-1:1},mv=function(){function e(){wn(this,e),this.reset()}return Oe(e,[{key:"reset",value:function(){this.xRounder=new xc,this.yRounder=new xc}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),xc=function(){function e(){wn(this,e),this.tree=new Tu,this.round(0)}return Oe(e,[{key:"round",value:function(t){var n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&ru(n.key,r.key)===0)return this.tree.remove(t),r.key;var i=this.tree.next(n);return i!==null&&ru(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}]),e}(),Ao=new mv,To=function(e,t){return e.x*t.y-e.y*t.x},yp=function(e,t){return e.x*t.x+e.y*t.y},Cc=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=To(r,i);return ru(o,0)},As=function(e){return Math.sqrt(yp(e,e))},_v=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return To(i,r)/As(i)/As(r)},vv=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return yp(i,r)/As(i)/As(r)},Oc=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},Pc=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},bv=function(e,t,n,r){if(t.x===0)return Pc(n,r,e.x);if(r.x===0)return Pc(e,t,n.x);if(t.y===0)return Oc(n,r,e.y);if(r.y===0)return Oc(e,t,n.y);var i=To(t,r);if(i==0)return null;var o={x:n.x-e.x,y:n.y-e.y},s=To(o,t)/i,a=To(o,r)/i,u=e.x+a*t.x,l=n.x+s*r.x,c=e.y+a*t.y,f=n.y+s*r.y,p=(u+l)/2,h=(c+f)/2;return{x:p,y:h}},Zn=function(){Oe(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:Ms.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){wn(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return Oe(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<t;i++){var o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,r=new Map,i=function(o){var s=o.otherSE;r.set(o,{sine:_v(n.point,t.point,s.point),cosine:vv(n.point,t.point,s.point)})};return function(o,s){r.has(o)||i(o),r.has(s)||i(s);var a=r.get(o),u=a.sine,l=a.cosine,c=r.get(s),f=c.sine,p=c.cosine;return u>=0&&f>=0?l<p?1:l>p?-1:0:u<0&&f<0?l<p?-1:l>p?1:0:f<u?-1:f>u?1:0}}}]),e}(),Ev=0,Ms=function(){Oe(e,null,[{key:"compare",value:function(t,n){var r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,s=n.rightSE.point.x;if(s<r)return 1;if(o<i)return-1;var a=t.leftSE.point.y,u=n.leftSE.point.y,l=t.rightSE.point.y,c=n.rightSE.point.y;if(r<i){if(u<a&&u<l)return 1;if(u>a&&u>l)return-1;var f=t.comparePoint(n.leftSE.point);if(f<0)return 1;if(f>0)return-1;var p=n.comparePoint(t.rightSE.point);return p!==0?p:-1}if(r>i){if(a<u&&a<c)return-1;if(a>u&&a>c)return 1;var h=n.comparePoint(t.leftSE.point);if(h!==0)return h;var g=t.comparePoint(n.rightSE.point);return g<0?1:g>0?-1:1}if(a<u)return-1;if(a>u)return 1;if(o<s){var m=n.comparePoint(t.rightSE.point);if(m!==0)return m}if(o>s){var v=t.comparePoint(n.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(o!==s){var E=l-a,I=o-r,S=c-u,O=s-i;if(E>I&&S<O)return 1;if(E<I&&S>O)return-1}return o>s?1:o<s||l<c?-1:l>c?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,r,i){wn(this,e),this.id=++Ev,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}return Oe(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;var o=(t.y-n.y)/i.y,s=n.x+o*i.x;if(t.x===s)return 0;var a=(t.x-n.x)/i.x,u=n.y+a*i.y;return t.y===u?0:t.y<u?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),r=t.bbox(),i=nu(n,r);if(i===null)return null;var o=this.leftSE.point,s=this.rightSE.point,a=t.leftSE.point,u=t.rightSE.point,l=Eo(n,a)&&this.comparePoint(a)===0,c=Eo(r,o)&&t.comparePoint(o)===0,f=Eo(n,u)&&this.comparePoint(u)===0,p=Eo(r,s)&&t.comparePoint(s)===0;if(c&&l)return p&&!f?s:!p&&f?u:null;if(c)return f&&o.x===u.x&&o.y===u.y?null:o;if(l)return p&&s.x===a.x&&s.y===a.y?null:a;if(p&&f)return null;if(p)return s;if(f)return u;var h=bv(o,this.vector(),a,t.vector());return h===null||!Eo(i,h)?null:Ao.round(h.x,h.y)}},{key:"split",value:function(t){var n=[],r=t.events!==void 0,i=new Zn(t,!0),o=new Zn(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,s,this.rings.slice(),this.windings.slice());return Zn.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Zn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(i!==0){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],c=r.windings[a],f=n.rings.indexOf(l);f===-1?(n.rings.push(l),n.windings.push(c)):n.windings[f]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,s=this.rings.length;o<s;o++){var a=this.rings[o],u=this.windings[o],l=n.indexOf(a);l===-1?(n.push(a),r.push(u)):r[l]+=u}for(var c=[],f=[],p=0,h=n.length;p<h;p++)if(r[p]!==0){var g=n[p],m=g.poly;if(f.indexOf(m)===-1)if(g.isExterior)c.push(m);else{f.indexOf(m)===-1&&f.push(m);var v=c.indexOf(g.poly);v!==-1&&c.splice(v,1)}}for(var E=0,I=c.length;E<I;E++){var S=c[E].multiPoly;i.indexOf(S)===-1&&i.push(S)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(ai.type){case"union":{var r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var o,s;t.length<n.length?(o=t.length,s=n.length):(o=n.length,s=t.length),this._isInResult=s===ai.numMultiPolys&&o<s;break}case"xor":{var a=Math.abs(t.length-n.length);this._isInResult=a%2===1;break}case"difference":{var u=function(l){return l.length===1&&l[0].isSubject};this._isInResult=u(t)!==u(n);break}default:throw new Error("Unrecognized operation type found ".concat(ai.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,a=Zn.comparePoints(t,n);if(a<0)i=t,o=n,s=1;else if(a>0)i=n,o=t,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var u=new Zn(i,!0),l=new Zn(o,!1);return new e(u,l,[r],[s])}}]),e}(),Tc=function(){function e(t,n,r){if(wn(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Ao.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=t.length;s<a;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Ao.round(t[s][0],t[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Ms.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(Ms.fromRing(o,i,this))}return Oe(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),Iv=function(){function e(t,n){if(wn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Tc(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new Tc(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Oe(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,s=i.length;o<s;o++)t.push(i[o]);return t}}]),e}(),Rc=function(){function e(t,n){if(wn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var o=new Iv(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Oe(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,s=i.length;o<s;o++)t.push(i[o]);return t}}]),e}(),Sv=function(){Oe(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!(!o.isInResult()||o.ringOut)){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,f=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var p=a.getAvailableLinkedEvents();if(p.length===0){var h=l[0].point,g=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(p.length===1){u=p[0].otherSE;break}for(var m=null,v=0,E=f.length;v<E;v++)if(f[v].point===a.point){m=v;break}if(m!==null){var I=f.splice(m)[0],S=l.splice(I.index);S.unshift(S[0].otherSE),n.push(new e(S.reverse()));continue}f.push({index:l.length,point:a.point});var O=a.getLeftmostComparator(s);u=p.sort(O)[0].otherSE;break}n.push(new e(l))}}return n}}]);function e(t){wn(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return Oe(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point,s=this.events[r+1].point;Cc(o,t,s)!==0&&(n.push(o),t=o)}if(n.length===1)return null;var a=n[0],u=n[1];Cc(a,t,u)===0&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:n.length-1,f=this.isExteriorRing()?n.length:-1,p=[],h=c;h!=f;h+=l)p.push([n[h].x,n[h].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];Zn.compare(t,i)>0&&(t=i)}for(var o=t.segment.prevInResult(),s=o?o.prevInResult():null;;){if(!o)return null;if(!s)return o.ringOut;if(s.ringOut!==o.ringOut)return s.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=s.prevInResult(),s=o?o.prevInResult():null}}}]),e}(),Ac=function(){function e(t){wn(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Oe(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}]),e}(),wv=function(){function e(t){wn(this,e),this.rings=t,this.polys=this._composePolys(t)}return Oe(e,[{key:"getGeom",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!o.poly)if(o.isExteriorRing())n.push(new Ac(o));else{var s=o.enclosingRing();s.poly||n.push(new Ac(s)),s.poly.addInterior(o)}}return n}}]),e}(),Lv=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ms.compare;wn(this,e),this.queue=t,this.tree=new Tu(n),this.segments=[]}return Oe(e,[{key:"process",value:function(t){var n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;var i=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,s=i,a=void 0,u=void 0;a===void 0;)o=this.tree.prev(o),o===null?a=null:o.key.consumedBy===void 0&&(a=o.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var f=this._splitSafely(a,c),p=0,h=f.length;p<h;p++)r.push(f[p])}var g=null;if(u){var m=u.getIntersection(n);if(m!==null&&(n.isAnEndpoint(m)||(g=m),!u.isAnEndpoint(m)))for(var v=this._splitSafely(u,m),E=0,I=v.length;E<I;E++)r.push(v[E])}if(l!==null||g!==null){var S=null;if(l===null)S=g;else if(g===null)S=l;else{var O=Zn.comparePoints(l,g);S=O<=0?l:g}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var R=n.split(S),k=0,B=R.length;k<B;k++)r.push(R[k])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=a)}else{if(a&&u){var x=a.getIntersection(u);if(x!==null){if(!a.isAnEndpoint(x))for(var A=this._splitSafely(a,x),G=0,b=A.length;G<b;G++)r.push(A[G]);if(!u.isAnEndpoint(x))for(var T=this._splitSafely(u,x),Z=0,Pt=T.length;Z<Pt;Z++)r.push(T[Z])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.insert(t),i}}]),e}(),Mc=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Nv=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,xv=function(){function e(){wn(this,e)}return Oe(e,[{key:"run",value:function(t,n,r){ai.type=t,Ao.reset();for(var i=[new Rc(n,!0)],o=0,s=r.length;o<s;o++)i.push(new Rc(r[o],!1));if(ai.numMultiPolys=i.length,ai.type==="difference")for(var a=i[0],u=1;u<i.length;)nu(i[u].bbox,a.bbox)!==null?u++:i.splice(u,1);if(ai.type==="intersection"){for(var l=0,c=i.length;l<c;l++)for(var f=i[l],p=l+1,h=i.length;p<h;p++)if(nu(f.bbox,i[p].bbox)===null)return[]}for(var g=new Tu(Zn.compare),m=0,v=i.length;m<v;m++)for(var E=i[m].getSweepEvents(),I=0,S=E.length;I<S;I++)if(g.insert(E[I]),g.size>Mc)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var O=new Lv(g),R=g.size,k=g.pop();k;){var B=k.key;if(g.size===R){var x=B.segment;throw new Error("Unable to pop() ".concat(B.isLeft?"left":"right"," SweepEvent ")+"[".concat(B.point.x,", ").concat(B.point.y,"] from segment #").concat(x.id," ")+"[".concat(x.leftSE.point.x,", ").concat(x.leftSE.point.y,"] -> ")+"[".concat(x.rightSE.point.x,", ").concat(x.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>Mc)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(O.segments.length>Nv)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var A=O.process(B),G=0,b=A.length;G<b;G++){var T=A[G];T.consumedBy===void 0&&g.insert(T)}R=g.size,k=g.pop()}Ao.reset();var Z=Sv.factory(O.segments),Pt=new wv(Z);return Pt.getGeom()}}]),e}(),ai=new xv;function mp(e,t,n){if(e!==null)for(var r,i,o,s,a,u,l,c=0,f=0,p,h=e.type,g=h==="FeatureCollection",m=h==="Feature",v=g?e.features.length:1,E=0;E<v;E++){l=g?e.features[E].geometry:m?e.geometry:e,p=l?l.type==="GeometryCollection":!1,a=p?l.geometries.length:1;for(var I=0;I<a;I++){var S=0,O=0;if(s=p?l.geometries[I]:l,s!==null){u=s.coordinates;var R=s.type;switch(c=n&&(R==="Polygon"||R==="MultiPolygon")?1:0,R){case null:break;case"Point":if(t(u,f,E,S,O)===!1)return!1;f++,S++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(t(u[r],f,E,S,O)===!1)return!1;f++,R==="MultiPoint"&&S++}R==="LineString"&&S++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(t(u[r][i],f,E,S,O)===!1)return!1;f++}R==="MultiLineString"&&S++,R==="Polygon"&&O++}R==="Polygon"&&S++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(O=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(t(u[r][i][o],f,E,S,O)===!1)return!1;f++}O++}S++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(mp(s.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Dc(e){var t=[1/0,1/0,-1/0,-1/0];return mp(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Dc.default=Dc;"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var fi=function(){};fi.prototype.interfaces_=function(){return[]};fi.prototype.getClass=function(){return fi};fi.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var dt=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),V=function(){},_p={MAX_VALUE:{configurable:!0}};V.isNaN=function(e){return Number.isNaN(e)};V.doubleToLongBits=function(e){return e};V.longBitsToDouble=function(e){return e};V.isInfinite=function(e){return!Number.isFinite(e)};_p.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(V,_p);var qe=function(){},Xs=function(){},zi=function(){};function Ue(){}var d=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Li={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};d.prototype.setOrdinate=function(e,t){switch(e){case d.X:this.x=t;break;case d.Y:this.y=t;break;case d.Z:this.z=t;break;default:throw new dt("Invalid ordinate index: "+e)}};d.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!fi.equalsWithTolerance(this.x,t.x,n)||!fi.equalsWithTolerance(this.y,t.y,n))}};d.prototype.getOrdinate=function(e){switch(e){case d.X:return this.x;case d.Y:return this.y;case d.Z:return this.z}throw new dt("Invalid ordinate index: "+e)};d.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||V.isNaN(this.z))&&V.isNaN(e.z)};d.prototype.equals=function(e){return e instanceof d?this.equals2D(e):!1};d.prototype.equalInZ=function(e,t){return fi.equalsWithTolerance(this.z,e.z,t)};d.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};d.prototype.clone=function(){};d.prototype.copy=function(){return new d(this)};d.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};d.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)};d.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};d.prototype.hashCode=function(){var e=17;return e=37*e+d.hashCode(this.x),e=37*e+d.hashCode(this.y),e};d.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};d.prototype.interfaces_=function(){return[qe,Xs,Ue]};d.prototype.getClass=function(){return d};d.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=V.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};Li.DimensionalComparator.get=function(){return yr};Li.serialVersionUID.get=function(){return 6683108902428367e3};Li.NULL_ORDINATE.get=function(){return V.NaN};Li.X.get=function(){return 0};Li.Y.get=function(){return 1};Li.Z.get=function(){return 2};Object.defineProperties(d,Li);var yr=function(e){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new dt("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};yr.prototype.compare=function(e,t){var n=e,r=t,i=yr.compare(n.x,r.x);if(i!==0)return i;var o=yr.compare(n.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var s=yr.compare(n.z,r.z);return s};yr.prototype.interfaces_=function(){return[zi]};yr.prototype.getClass=function(){return yr};yr.compare=function(e,t){return e<t?-1:e>t?1:V.isNaN(e)?V.isNaN(t)?0:-1:V.isNaN(t)?1:0};var qi=function(){};qi.prototype.create=function(){};qi.prototype.interfaces_=function(){return[]};qi.prototype.getClass=function(){return qi};var y=function(){},Ko={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};y.prototype.interfaces_=function(){return[]};y.prototype.getClass=function(){return y};y.toLocationSymbol=function(e){switch(e){case y.EXTERIOR:return"e";case y.BOUNDARY:return"b";case y.INTERIOR:return"i";case y.NONE:return"-"}throw new dt("Unknown location value: "+e)};Ko.INTERIOR.get=function(){return 0};Ko.BOUNDARY.get=function(){return 1};Ko.EXTERIOR.get=function(){return 2};Ko.NONE.get=function(){return-1};Object.defineProperties(y,Ko);var q=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},Pe=function(){},vp={LOG_10:{configurable:!0}};Pe.prototype.interfaces_=function(){return[]};Pe.prototype.getClass=function(){return Pe};Pe.log10=function(e){var t=Math.log(e);return V.isInfinite(t)||V.isNaN(t)?t:t/Pe.LOG_10};Pe.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i};Pe.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}};Pe.wrap=function(e,t){return e<0?t- -e%t:e%t};Pe.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return t>r&&(r=t),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}};Pe.average=function(e,t){return(e+t)/2};vp.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Pe,vp);var Ln=function(e){this.str=e};Ln.prototype.append=function(e){this.str+=e};Ln.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};Ln.prototype.toString=function(e){return this.str};var hn=function(e){this.value=e};hn.prototype.intValue=function(){return this.value};hn.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};hn.isNaN=function(e){return Number.isNaN(e)};var Mo=function(){};Mo.isWhitespace=function(e){return e<=32&&e>=0||e===127};Mo.toUpperCase=function(e){return e.toUpperCase()};var _=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},rn={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};_.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};_.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=_.magnitude(n._hi),i=_.TEN.pow(r);n=n.divide(i),n.gt(_.TEN)?(n=n.divide(_.TEN),r+=1):n.lt(_.ONE)&&(n=n.multiply(_.TEN),r-=1);for(var o=r+1,s=new Ln,a=_.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){e&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,f=0;l>9?(c=!0,f="9"):f="0"+l,s.append(f),n=n.subtract(_.valueOf(l)).multiply(_.TEN),c&&n.selfAdd(_.TEN);var p=!0,h=_.magnitude(n._hi);if(h<0&&Math.abs(h)>=a-u&&(p=!1),!p)break}return t[0]=r,s.toString()};_.prototype.sqr=function(){return this.multiply(this)};_.prototype.doubleValue=function(){return this._hi+this._lo};_.prototype.subtract=function(){if(arguments[0]instanceof _){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};_.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};_.prototype.isZero=function(){return this._hi===0&&this._lo===0};_.prototype.selfSubtract=function(){if(arguments[0]instanceof _){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};_.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};_.prototype.min=function(e){return this.le(e)?this:e};_.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof _){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,f=null;return u=this._hi/n,l=_.SPLIT*u,i=l-u,f=_.SPLIT*n,i=l-i,o=u-i,s=f-n,c=u*n,s=f-s,a=n-s,f=i*s-c+i*a+o*s+o*a,l=(this._hi-c-f+this._lo-u*r)/n,f=u+l,this._hi=f,this._lo=u-f+l,this}};_.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};_.prototype.divide=function(){if(arguments[0]instanceof _){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;o=this._hi/e._hi,s=_.SPLIT*o,t=s-o,u=_.SPLIT*e._hi,t=s-t,n=o-t,r=u-e._hi,a=o*e._hi,r=u-r,i=e._hi-r,u=t*r-a+t*i+n*r+n*i,s=(this._hi-a-u+this._lo-o*e._lo)/e._hi,u=o+s;var l=u,c=o-u+s;return new _(l,c)}else if(typeof arguments[0]=="number"){var f=arguments[0];return V.isNaN(f)?_.createNaN():_.copy(this).selfDivide(f,0)}};_.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};_.prototype.pow=function(e){if(e===0)return _.valueOf(1);var t=new _(this),n=_.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(t),r/=2,r>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};_.prototype.ceil=function(){if(this.isNaN())return _.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new _(e,t)};_.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};_.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};_.prototype.setValue=function(){if(arguments[0]instanceof _){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};_.prototype.max=function(e){return this.ge(e)?this:e};_.prototype.sqrt=function(){if(this.isZero())return _.valueOf(0);if(this.isNegative())return _.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=_.valueOf(t),r=this.subtract(n.sqr()),i=r._hi*(e*.5);return n.add(i)};_.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof _){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+t,s=i-this._hi,o=i-s,o=t-s+(this._hi-o),a=o+this._lo,n=i+a,r=a+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var u=arguments[0],l=arguments[1],c=null,f=null,p=null,h=null,g=null,m=null,v=null,E=null;g=this._hi+u,p=this._lo+l,v=g-this._hi,E=p-this._lo,m=g-v,h=p-E,m=u-v+(this._hi-m),h=l-E+(this._lo-h),v=m+p,c=g+v,f=v+(g-c),v=h+f;var I=c+v,S=v+(c-I);return this._hi=I,this._lo=S,this}};_.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof _){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;u=_.SPLIT*this._hi,i=u-this._hi,l=_.SPLIT*n,i=u-i,o=this._hi-i,s=l-n,u=this._hi*n,s=l-s,a=n-s,l=i*s-u+i*a+o*s+o*a+(this._hi*r+this._lo*n);var c=u+l;i=u-c;var f=l+i;return this._hi=c,this._lo=f,this}};_.prototype.selfSqr=function(){return this.selfMultiply(this)};_.prototype.floor=function(){if(this.isNaN())return _.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new _(e,t)};_.prototype.negate=function(){return this.isNaN()?this:new _(-this._hi,-this._lo)};_.prototype.clone=function(){};_.prototype.multiply=function(){if(arguments[0]instanceof _){var e=arguments[0];return e.isNaN()?_.createNaN():_.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return V.isNaN(t)?_.createNaN():_.copy(this).selfMultiply(t,0)}};_.prototype.isNaN=function(){return V.isNaN(this._hi)};_.prototype.intValue=function(){return Math.trunc(this._hi)};_.prototype.toString=function(){var e=_.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};_.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+_.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,s=_.stringOfChar("0",o);i=n+s+".0"}return this.isNegative()?"-"+i:i};_.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,o=null,s=null,a=null;i=1/this._hi,o=_.SPLIT*i,e=o-i,a=_.SPLIT*this._hi,e=o-e,t=i-e,n=a-this._hi,s=i*this._hi,n=a-n,r=this._hi-n,a=e*n-s+e*r+t*n+t*r,o=(1-s-a-i*this._lo)/this._hi;var u=i+o,l=i-u+o;return new _(u,l)};_.prototype.toSciNotation=function(){if(this.isZero())return _.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=_.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r};_.prototype.abs=function(){return this.isNaN()?_.NaN:this.isNegative()?this.negate():new _(this)};_.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};_.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};_.prototype.add=function(){if(arguments[0]instanceof _){var e=arguments[0];return _.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return _.copy(this).selfAdd(t)}};_.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof _){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};_.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};_.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};_.prototype.trunc=function(){return this.isNaN()?_.NaN:this.isPositive()?this.floor():this.ceil()};_.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};_.prototype.interfaces_=function(){return[Ue,qe,Xs]};_.prototype.getClass=function(){return _};_.sqr=function(e){return _.valueOf(e).selfMultiply(e)};_.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return _.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new _(t)}};_.sqrt=function(e){return _.valueOf(e).sqrt()};_.parse=function(e){for(var t=0,n=e.length;Mo.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);(i==="-"||i==="+")&&(t++,i==="-"&&(r=!0))}for(var o=new _,s=0,a=0,u=0;!(t>=n);){var l=e.charAt(t);if(t++,Mo.isDigit(l)){var c=l-"0";o.selfMultiply(_.TEN),o.selfAdd(c),s++;continue}if(l==="."){a=s;continue}if(l==="e"||l==="E"){var f=e.substring(t);try{u=hn.parseInt(f)}catch(v){throw v instanceof Error?new Error("Invalid exponent "+f+" in string "+e):v}finally{}break}throw new Error("Unexpected character '"+l+"' at position "+t+" in string "+e)}var p=o,h=s-a-u;if(h===0)p=o;else if(h>0){var g=_.TEN.pow(h);p=o.divide(g)}else if(h<0){var m=_.TEN.pow(-h);p=o.multiply(m)}return r?p.negate():p};_.createNaN=function(){return new _(V.NaN,V.NaN)};_.copy=function(e){return new _(e)};_.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=t&&(r+=1),r};_.stringOfChar=function(e,t){for(var n=new Ln,r=0;r<t;r++)n.append(e);return n.toString()};rn.PI.get=function(){return new _(3.141592653589793,12246467991473532e-32)};rn.TWO_PI.get=function(){return new _(6.283185307179586,24492935982947064e-32)};rn.PI_2.get=function(){return new _(1.5707963267948966,6123233995736766e-32)};rn.E.get=function(){return new _(2.718281828459045,14456468917292502e-32)};rn.NaN.get=function(){return new _(V.NaN,V.NaN)};rn.EPS.get=function(){return 123259516440783e-46};rn.SPLIT.get=function(){return 134217729};rn.MAX_PRINT_DIGITS.get=function(){return 32};rn.TEN.get=function(){return _.valueOf(10)};rn.ONE.get=function(){return _.valueOf(1)};rn.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};rn.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(_,rn);var pe=function(){},bp={DP_SAFE_EPSILON:{configurable:!0}};pe.prototype.interfaces_=function(){return[]};pe.prototype.getClass=function(){return pe};pe.orientationIndex=function(e,t,n){var r=pe.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=_.valueOf(t.x).selfAdd(-e.x),o=_.valueOf(t.y).selfAdd(-e.y),s=_.valueOf(n.x).selfAdd(-t.x),a=_.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()};pe.signOfDet2x2=function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()};pe.intersection=function(e,t,n,r){var i=_.valueOf(r.y).selfSubtract(n.y).selfMultiply(_.valueOf(t.x).selfSubtract(e.x)),o=_.valueOf(r.x).selfSubtract(n.x).selfMultiply(_.valueOf(t.y).selfSubtract(e.y)),s=i.subtract(o),a=_.valueOf(r.x).selfSubtract(n.x).selfMultiply(_.valueOf(e.y).selfSubtract(n.y)),u=_.valueOf(r.y).selfSubtract(n.y).selfMultiply(_.valueOf(e.x).selfSubtract(n.x)),l=a.subtract(u),c=l.selfDivide(s).doubleValue(),f=_.valueOf(e.x).selfAdd(_.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),p=_.valueOf(t.x).selfSubtract(e.x).selfMultiply(_.valueOf(e.y).selfSubtract(n.y)),h=_.valueOf(t.y).selfSubtract(e.y).selfMultiply(_.valueOf(e.x).selfSubtract(n.x)),g=p.subtract(h),m=g.selfDivide(s).doubleValue(),v=_.valueOf(n.y).selfAdd(_.valueOf(r.y).selfSubtract(n.y).selfMultiply(m)).doubleValue();return new d(f,v)};pe.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),s=i-o;if(i>0){if(o<=0)return pe.signum(s);r=i+o}else if(i<0){if(o>=0)return pe.signum(s);r=-i-o}else return pe.signum(s);var a=pe.DP_SAFE_EPSILON*r;return s>=a||-s>=a?pe.signum(s):2};pe.signum=function(e){return e>0?1:e<0?-1:0};bp.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(pe,bp);var Q=function(){},Jo={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Jo.X.get=function(){return 0};Jo.Y.get=function(){return 1};Jo.Z.get=function(){return 2};Jo.M.get=function(){return 3};Q.prototype.setOrdinate=function(e,t,n){};Q.prototype.size=function(){};Q.prototype.getOrdinate=function(e,t){};Q.prototype.getCoordinate=function(){};Q.prototype.getCoordinateCopy=function(e){};Q.prototype.getDimension=function(){};Q.prototype.getX=function(e){};Q.prototype.clone=function(){};Q.prototype.expandEnvelope=function(e){};Q.prototype.copy=function(){};Q.prototype.getY=function(e){};Q.prototype.toCoordinateArray=function(){};Q.prototype.interfaces_=function(){return[Xs]};Q.prototype.getClass=function(){return Q};Object.defineProperties(Q,Jo);var Ep=function(){},co=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ep),jt=function(){};jt.arraycopy=function(e,t,n,r,i){for(var o=0,s=t;s<t+i;s++)n[r+o]=e[s],o++};jt.getProperty=function(e){return{"line.separator":`
`}[e]};var Ye=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof d&&arguments[1]instanceof d){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(arguments.length===3){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(arguments.length===4){var f=arguments[0],p=arguments[1],h=arguments[2],g=arguments[3],m=f.y-p.y,v=p.x-f.x,E=f.x*p.y-p.x*f.y,I=h.y-g.y,S=g.x-h.x,O=h.x*g.y-g.x*h.y;this.x=v*O-S*E,this.y=I*E-m*O,this.w=m*S-I*v}};Ye.prototype.getY=function(){var e=this.y/this.w;if(V.isNaN(e)||V.isInfinite(e))throw new co;return e};Ye.prototype.getX=function(){var e=this.x/this.w;if(V.isNaN(e)||V.isInfinite(e))throw new co;return e};Ye.prototype.getCoordinate=function(){var e=new d;return e.x=this.getX(),e.y=this.getY(),e};Ye.prototype.interfaces_=function(){return[]};Ye.prototype.getClass=function(){return Ye};Ye.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,s=e.x*t.y-t.x*e.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=o*l-u*s,f=a*s-i*l,p=i*u-a*o,h=c/p,g=f/p;if(V.isNaN(h)||V.isInfinite(h)||V.isNaN(g)||V.isInfinite(g))throw new co;return new d(h,g)};var D=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof d){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ip={serialVersionUID:{configurable:!0}};D.prototype.getArea=function(){return this.getWidth()*this.getHeight()};D.prototype.equals=function(e){if(!(e instanceof D))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};D.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new D;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new D(t,r,n,i)};D.prototype.isNull=function(){return this._maxx<this._minx};D.prototype.getMaxX=function(){return this._maxx};D.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof d){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof D){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};D.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof D){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof d){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};D.prototype.getMinY=function(){return this._miny};D.prototype.getMinX=function(){return this._minx};D.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof d){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof D){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};D.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};D.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};D.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};D.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};D.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};D.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};D.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};D.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};D.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};D.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof D){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof d){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};D.prototype.centre=function(){return this.isNull()?null:new d((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};D.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof d){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof D){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}};D.prototype.getMaxY=function(){return this._maxy};D.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};D.prototype.hashCode=function(){var e=17;return e=37*e+d.hashCode(this._minx),e=37*e+d.hashCode(this._maxx),e=37*e+d.hashCode(this._miny),e=37*e+d.hashCode(this._maxy),e};D.prototype.interfaces_=function(){return[qe,Ue]};D.prototype.getClass=function(){return D};D.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u)||c<a)}};Ip.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(D,Ip);var an={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ys=function(e){this.geometryFactory=e||new K};Ys.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=an.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=an.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Mi[n]&&(t=Mi[n].apply(this,[r]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};Ys.prototype.write=function(e){return this.extractGeometry(e)};Ys.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Jn[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+Jn[t].apply(this,[e])+")",r};var Jn={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Jn.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Jn.point.apply(t,[e._geometries[r]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Jn.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(Jn.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Jn.linestring.apply(t,[e._geometries[r]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+Jn.linestring.apply(this,[e._shell])+")");for(var r=0,i=e._holes.length;r<i;++r)n.push("("+Jn.linestring.apply(t,[e._holes[r]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+Jn.polygon.apply(t,[e._geometries[r]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push(t.extractGeometry(e._geometries[r]));return n.join(",")}},Mi={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(an.spaces);return this.geometryFactory.createPoint(new d(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=e.trim().split(","),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(an.trimParens,"$1"),i.push(Mi.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(an.spaces),n.push(new d(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(an.spaces),n.push(new d(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=e.trim().split(an.parenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(an.trimParens,"$1"),i.push(Mi.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,o=e.trim().split(an.parenComma),s,a=[],u=0,l=o.length;u<l;++u)n=o[u].replace(an.trimParens,"$1"),r=Mi.linestring.apply(t,[n]),i=t.geometryFactory.createLinearRing(r._points),u===0?s=i:a.push(i);return this.geometryFactory.createPolygon(s,a)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=e.trim().split(an.doubleParenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(an.trimParens,"$1"),i.push(Mi.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(t.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},Ke=function(e){this.parser=new Ys(e)};Ke.prototype.write=function(e){return this.parser.write(e)};Ke.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var nr=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Ds=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(nr),W=function(){};W.prototype.interfaces_=function(){return[]};W.prototype.getClass=function(){return W};W.shouldNeverReachHere=function(){if(arguments.length===0)W.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new Ds("Should never reach here"+(e!==null?": "+e:""))}};W.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],W.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new Ds:new Ds(t)};W.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],W.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new Ds("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var mt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new d,this._intPt[1]=new d,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Ni={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};mt.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};mt.prototype.getTopologySummary=function(){var e=new Ln;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};mt.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)};mt.prototype.getIntersectionNum=function(){return this._result};mt.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};mt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};mt.prototype.setPrecisionModel=function(e){this._precisionModel=e};mt.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};mt.prototype.getIntersection=function(e){return this._intPt[e]};mt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};mt.prototype.hasIntersection=function(){return this._result!==mt.NO_INTERSECTION};mt.prototype.getEdgeDistance=function(e,t){var n=mt.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};mt.prototype.isCollinear=function(){return this._result===mt.COLLINEAR_INTERSECTION};mt.prototype.toString=function(){return Ke.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ke.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};mt.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};mt.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};mt.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};mt.prototype.interfaces_=function(){return[]};mt.prototype.getClass=function(){return mt};mt.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))r>i?o=r:o=i;else{var s=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);r>i?o=s:o=a,o===0&&!e.equals(t)&&(o=Math.max(s,a))}return W.isTrue(!(o===0&&!e.equals(t)),"Bad distance calculation"),o};mt.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return W.isTrue(!(o===0&&!e.equals(t)),"Invalid distance calculation"),o};Ni.DONT_INTERSECT.get=function(){return 0};Ni.DO_INTERSECT.get=function(){return 1};Ni.COLLINEAR.get=function(){return 2};Ni.NO_INTERSECTION.get=function(){return 0};Ni.POINT_INTERSECTION.get=function(){return 1};Ni.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(mt,Ni);var ei=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var r=new D(this._inputLines[0][0],this._inputLines[0][1]),i=new D(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,D.intersects(r,i,n)&&P.orientationIndex(r,i,n)===0&&P.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,r,i,o,s){s.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),s.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},t.prototype.safeHCoordinateIntersection=function(n,r,i,o){var s=null;try{s=Ye.intersection(n,r,i,o)}catch(a){if(a instanceof co)s=t.nearestEndpoint(n,r,i,o);else throw a}finally{}return s},t.prototype.intersection=function(n,r,i,o){var s=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(s)||(s=new d(t.nearestEndpoint(n,r,i,o))),this._precisionModel!==null&&this._precisionModel.makePrecise(s),s},t.prototype.smallestInAbsValue=function(n,r,i,o){var s=n,a=Math.abs(s);return Math.abs(r)<a&&(s=r,a=Math.abs(r)),Math.abs(i)<a&&(s=i,a=Math.abs(i)),Math.abs(o)<a&&(s=o),s},t.prototype.checkDD=function(n,r,i,o,s){var a=pe.intersection(n,r,i,o),u=this.isInSegmentEnvelopes(a);jt.out.println("DD in env = "+u+"  --------------------- "+a),s.distance(a)>1e-4&&jt.out.println("Distance = "+s.distance(a))},t.prototype.intersectionWithNormalization=function(n,r,i,o){var s=new d(n),a=new d(r),u=new d(i),l=new d(o),c=new d;this.normalizeToEnvCentre(s,a,u,l,c);var f=this.safeHCoordinateIntersection(s,a,u,l);return f.x+=c.x,f.y+=c.y,f},t.prototype.computeCollinearIntersection=function(n,r,i,o){var s=D.intersects(n,r,i),a=D.intersects(n,r,o),u=D.intersects(i,o,n),l=D.intersects(i,o,r);return s&&a?(this._intPt[0]=i,this._intPt[1]=o,e.COLLINEAR_INTERSECTION):u&&l?(this._intPt[0]=n,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!a&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!a&&!u?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!s&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!s&&!u?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,r,i,o,s){var a=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,c=n.y>r.y?n.y:r.y,f=i.x<o.x?i.x:o.x,p=i.y<o.y?i.y:o.y,h=i.x>o.x?i.x:o.x,g=i.y>o.y?i.y:o.y,m=a>f?a:f,v=l<h?l:h,E=u>p?u:p,I=c<g?c:g,S=(m+v)/2,O=(E+I)/2;s.x=S,s.y=O,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},t.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!D.intersects(n,r,i,o))return e.NO_INTERSECTION;var s=P.orientationIndex(n,r,i),a=P.orientationIndex(n,r,o);if(s>0&&a>0||s<0&&a<0)return e.NO_INTERSECTION;var u=P.orientationIndex(i,o,n),l=P.orientationIndex(i,o,r);if(u>0&&l>0||u<0&&l<0)return e.NO_INTERSECTION;var c=s===0&&a===0&&u===0&&l===0;return c?this.computeCollinearIntersection(n,r,i,o):(s===0||a===0||u===0||l===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:s===0?this._intPt[0]=new d(i):a===0?this._intPt[0]=new d(o):u===0?this._intPt[0]=new d(n):l===0&&(this._intPt[0]=new d(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,r,i,o){var s=n,a=P.distancePointLine(n,i,o),u=P.distancePointLine(r,i,o);return u<a&&(a=u,s=r),u=P.distancePointLine(i,n,r),u<a&&(a=u,s=i),u=P.distancePointLine(o,n,r),u<a&&(a=u,s=o),s},t}(mt),pi=function(){};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};pi.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,s=n.y-t.y;return pi.signOfDet2x2(r,i,o,s)};pi.signOfDet2x2=function(e,t,n,r){var i=null,o=null,s=null;if(i=1,e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):t<=-r?(i=-i,n=-n,r=-r):(o=e,e=-n,n=o,o=t,t=-r,r=o):r>0?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,r=o),e>0)if(n>0){if(!(e<=n))return i}else return i;else{if(n>0)return-i;if(e>=n)i=-i,e=-e,n=-n;else return-i}for(;;){if(s=Math.floor(n/e),n=n-s*e,r=r-s*t,r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(s=Math.floor(e/n),e=e-s*n,t=t-s*r,t<0))return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}};var fn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};fn.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,s=t.x-this._p.x,a=t.y-this._p.y,u=pi.signOfDet2x2(i,o,s,a);if(u===0)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}};fn.prototype.isPointInPolygon=function(){return this.getLocation()!==y.EXTERIOR};fn.prototype.getLocation=function(){return this._isPointOnSegment?y.BOUNDARY:this._crossingCount%2===1?y.INTERIOR:y.EXTERIOR};fn.prototype.isOnSegment=function(){return this._isPointOnSegment};fn.prototype.interfaces_=function(){return[]};fn.prototype.getClass=function(){return fn};fn.locatePointInRing=function(){if(arguments[0]instanceof d&&q(arguments[1],Q)){for(var e=arguments[0],t=arguments[1],n=new fn(e),r=new d,i=new d,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof d&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new fn(s),l=1;l<a.length;l++){var c=a[l],f=a[l-1];if(u.countSegment(c,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var P=function(){},xi={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};P.prototype.interfaces_=function(){return[]};P.prototype.getClass=function(){return P};P.orientationIndex=function(e,t,n){return pe.orientationIndex(e,t,n)};P.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y,s=e[r-1].y;t+=i*(s-o)}return t/2}else if(q(arguments[0],Q)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new d,c=new d,f=new d;a.getCoordinate(0,c),a.getCoordinate(1,f);var p=c.x;f.x-=p;for(var h=0,g=1;g<u-1;g++)l.y=c.y,c.x=f.x,c.y=f.y,a.getCoordinate(g+1,f),f.x-=p,h+=c.x*(l.y-f.y);return h/2}};P.distanceLineLine=function(e,t,n,r){if(e.equals(t))return P.distancePointLine(e,n,r);if(n.equals(r))return P.distancePointLine(r,e,t);var i=!1;if(!D.intersects(e,t,n,r))i=!0;else{var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)i=!0;else{var s=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),a=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),u=a/o,l=s/o;(l<0||l>1||u<0||u>1)&&(i=!0)}}return i?Pe.min(P.distancePointLine(e,n,r),P.distancePointLine(t,n,r),P.distancePointLine(n,e,t),P.distancePointLine(r,e,t)):0};P.isPointInRing=function(e,t){return P.locatePointInRing(e,t)!==y.EXTERIOR};P.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new d;e.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<t;s++){e.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n};P.isCCW=function(e){var t=e.length-1;if(t<3)throw new dt("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var s=r;do s=s-1,s<0&&(s=t);while(e[s].equals2D(n)&&s!==r);var a=r;do a=(a+1)%t;while(e[a].equals2D(n)&&a!==r);var u=e[s],l=e[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=P.computeOrientation(u,n,l),f=!1;return c===0?f=u.x>l.x:f=c>0,f};P.locatePointInRing=function(e,t){return fn.locatePointInRing(e,t)};P.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)};P.computeOrientation=function(e,t,n){return P.orientationIndex(e,t,n)};P.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new dt("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=P.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}};P.isOnLine=function(e,t){for(var n=new ei,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1};xi.CLOCKWISE.get=function(){return-1};xi.RIGHT.get=function(){return P.CLOCKWISE};xi.COUNTERCLOCKWISE.get=function(){return 1};xi.LEFT.get=function(){return P.COUNTERCLOCKWISE};xi.COLLINEAR.get=function(){return 0};xi.STRAIGHT.get=function(){return P.COLLINEAR};Object.defineProperties(P,xi);var rr=function(){};rr.prototype.filter=function(e){};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};var z=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},Wn={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};z.prototype.isGeometryCollection=function(){return this.getSortIndex()===z.SORTINDEX_GEOMETRYCOLLECTION};z.prototype.getFactory=function(){return this._factory};z.prototype.getGeometryN=function(e){return this};z.prototype.getArea=function(){return 0};z.prototype.isRectangle=function(){return!1};z.prototype.equals=function(){if(arguments[0]instanceof z){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof z))return!1;var n=t;return this.equalsExact(n)}};z.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};z.prototype.geometryChanged=function(){this.apply(z.geometryChangedFilter)};z.prototype.geometryChangedAction=function(){this._envelope=null};z.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};z.prototype.getLength=function(){return 0};z.prototype.getNumGeometries=function(){return 1};z.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};z.prototype.getUserData=function(){return this._userData};z.prototype.getSRID=function(){return this._SRID};z.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};z.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===z.SORTINDEX_GEOMETRYCOLLECTION)throw new dt("This method does not support GeometryCollection arguments")};z.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};z.prototype.norm=function(){var e=this.copy();return e.normalize(),e};z.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};z.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new D(this._envelope)};z.prototype.setSRID=function(e){this._SRID=e};z.prototype.setUserData=function(e){this._userData=e};z.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(s!==0)return s}return n.hasNext()?1:r.hasNext()?-1:0};z.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};z.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===z.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===z.SORTINDEX_MULTIPOINT||this.getSortIndex()===z.SORTINDEX_MULTILINESTRING||this.getSortIndex()===z.SORTINDEX_MULTIPOLYGON};z.prototype.interfaces_=function(){return[Xs,qe,Ue]};z.prototype.getClass=function(){return z};z.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};z.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};Wn.serialVersionUID.get=function(){return 8763622679187377e3};Wn.SORTINDEX_POINT.get=function(){return 0};Wn.SORTINDEX_MULTIPOINT.get=function(){return 1};Wn.SORTINDEX_LINESTRING.get=function(){return 2};Wn.SORTINDEX_LINEARRING.get=function(){return 3};Wn.SORTINDEX_MULTILINESTRING.get=function(){return 4};Wn.SORTINDEX_POLYGON.get=function(){return 5};Wn.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Wn.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Wn.geometryChangedFilter.get=function(){return Ru};Object.defineProperties(z,Wn);var Ru=function(){};Ru.interfaces_=function(){return[rr]};Ru.filter=function(e){e.geometryChangedAction()};var Mn=function(){};Mn.prototype.filter=function(e){};Mn.prototype.interfaces_=function(){return[]};Mn.prototype.getClass=function(){return Mn};var Be=function(){},lr={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Be.prototype.isInBoundary=function(e){};Be.prototype.interfaces_=function(){return[]};Be.prototype.getClass=function(){return Be};lr.Mod2BoundaryNodeRule.get=function(){return Ui};lr.EndPointBoundaryNodeRule.get=function(){return Vi};lr.MultiValentEndPointBoundaryNodeRule.get=function(){return ji};lr.MonoValentEndPointBoundaryNodeRule.get=function(){return Wi};lr.MOD2_BOUNDARY_RULE.get=function(){return new Ui};lr.ENDPOINT_BOUNDARY_RULE.get=function(){return new Vi};lr.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ji};lr.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Wi};lr.OGC_SFS_BOUNDARY_RULE.get=function(){return Be.MOD2_BOUNDARY_RULE};Object.defineProperties(Be,lr);var Ui=function(){};Ui.prototype.isInBoundary=function(e){return e%2===1};Ui.prototype.interfaces_=function(){return[Be]};Ui.prototype.getClass=function(){return Ui};var Vi=function(){};Vi.prototype.isInBoundary=function(e){return e>0};Vi.prototype.interfaces_=function(){return[Be]};Vi.prototype.getClass=function(){return Vi};var ji=function(){};ji.prototype.isInBoundary=function(e){return e>1};ji.prototype.interfaces_=function(){return[Be]};ji.prototype.getClass=function(){return ji};var Wi=function(){};Wi.prototype.isInBoundary=function(e){return e===1};Wi.prototype.interfaces_=function(){return[Be]};Wi.prototype.getClass=function(){return Wi};var Tt=function(){};Tt.prototype.add=function(){};Tt.prototype.addAll=function(){};Tt.prototype.isEmpty=function(){};Tt.prototype.iterator=function(){};Tt.prototype.size=function(){};Tt.prototype.toArray=function(){};Tt.prototype.remove=function(){};function Au(e){this.message=e||""}Au.prototype=new Error;Au.prototype.name="IndexOutOfBoundsException";var fo=function(){};fo.prototype.hasNext=function(){};fo.prototype.next=function(){};fo.prototype.remove=function(){};var He=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(Tt);function po(e){this.message=e||""}po.prototype=new Error;po.prototype.name="NoSuchElementException";var N=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Tt&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,Tt]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},t.prototype.iterator=function(){return new Cv(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new Au;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.remove=function(n){for(var r=this,i=!1,o=0,s=this.array_.length;o<s;o++)if(r.array_[o]===n){r.array_.splice(o,1),i=!0;break}return i},t}(He),Cv=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new po;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(fo),Zo=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(r){return this.get(r)},t.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=!1,a=i.iterator();a.hasNext();)r.add(a.next(),o),s=!0;return s}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=e.prototype.clone.call(this),o=0;o<this.size();o++)i.add(o,r.get(o).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];e.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1];return this.add(o,s,!0),!0}else if(arguments[0]instanceof d&&typeof arguments[1]=="boolean"){var a=arguments[0],u=arguments[1];if(!u&&this.size()>=1){var l=this.get(this.size()-1);if(l.equals2D(a))return null}e.prototype.add.call(this,a)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],f=arguments[1];return this.add(c,f),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var p=arguments[0],h=arguments[1],g=arguments[2];if(g)for(var m=0;m<p.length;m++)r.add(p[m],h);else for(var v=p.length-1;v>=0;v--)r.add(p[v],h);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof d){var E=arguments[0],I=arguments[1],S=arguments[2];if(!S){var O=this.size();if(O>0){if(E>0){var R=this.get(E-1);if(R.equals2D(I))return null}if(E<O){var k=this.get(E);if(k.equals2D(I))return null}}}e.prototype.add.call(this,E,I)}}else if(arguments.length===4){var B=arguments[0],x=arguments[1],A=arguments[2],G=arguments[3],b=1;A>G&&(b=-1);for(var T=A;T!==G;T+=b)r.add(B[T],x);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new d(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(N),Y=function(){},Hs={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Hs.ForwardComparator.get=function(){return Do};Hs.BidirectionalComparator.get=function(){return Xi};Hs.coordArrayType.get=function(){return new Array(0).fill(null)};Y.prototype.interfaces_=function(){return[]};Y.prototype.getClass=function(){return Y};Y.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};Y.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(Y.indexOf(r,t)<0)return r}return null};Y.scroll=function(e,t){var n=Y.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);jt.arraycopy(e,n,r,0,e.length-n),jt.arraycopy(e,0,r,e.length-n,n),jt.arraycopy(r,0,e,0,e.length)};Y.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(o.compare(r[s],i[s])!==0)return!1;return!0}};Y.intersection=function(e,t){for(var n=new Zo,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()};Y.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};Y.removeRepeatedPoints=function(e){if(!Y.hasRepeatedPoints(e))return e;var t=new Zo(e,!1);return t.toCoordinateArray()};Y.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}};Y.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var i=0,o=0;o<e.length;o++)e[o]!==null&&(r[i++]=e[o]);return r};Y.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new d(e[n]);return t}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new d(r[i+u])};Y.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};Y.envelope=function(e){for(var t=new D,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};Y.toCoordinateArray=function(e){return e.toArray(Y.coordArrayType)};Y.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};Y.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};Y.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1};Y.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0};Y.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};Y.extract=function(e,t,n){t=Pe.clamp(t,0,e.length),n=Pe.clamp(n,-1,e.length);var r=n-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,s=t;s<=n;s++)i[o++]=e[s];return i};Object.defineProperties(Y,Hs);var Do=function(){};Do.prototype.compare=function(e,t){var n=e,r=t;return Y.compare(n,r)};Do.prototype.interfaces_=function(){return[zi]};Do.prototype.getClass=function(){return Do};var Xi=function(){};Xi.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=Y.compare(n,r),o=Y.isEqualReversed(n,r);return o?0:i};Xi.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=Y.increasingDirection(n),o=Y.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(l!==0)return l;s+=i,a+=o}return 0};Xi.prototype.interfaces_=function(){return[zi]};Xi.prototype.getClass=function(){return Xi};var Ci=function(){};Ci.prototype.get=function(){};Ci.prototype.put=function(){};Ci.prototype.size=function(){};Ci.prototype.values=function(){};Ci.prototype.entrySet=function(){};var Ov=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ci);function Qo(e){this.message=e||""}Qo.prototype=new Error;Qo.prototype.name="OperationNotSupported";function Ks(){}Ks.prototype=new Tt;Ks.prototype.contains=function(){};var Mu=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Tt&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var r=this,i=0,o=this.array_.length;i<o;i++){var s=r.array_[i];if(s===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.iterator=function(){return new Pv(this)},t}(Ks),Pv=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new po;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new Qo},t}(fo),Qn=0,Or=1;function Fc(e){return e===null?Qn:e.color}function lt(e){return e===null?null:e.parent}function Kn(e,t){e!==null&&(e.color=t)}function xa(e){return e===null?null:e.left}function kc(e){return e===null?null:e.right}function Zt(){this.root_=null,this.size_=0}Zt.prototype=new Ov;Zt.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};Zt.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Qn,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var s={key:e,left:null,right:null,value:t,parent:r,color:Qn,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null};Zt.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=Or;e!=null&&e!==this.root_&&e.parent.color===Or;)if(lt(e)===xa(lt(lt(e)))){var n=kc(lt(lt(e)));Fc(n)===Or?(Kn(lt(e),Qn),Kn(n,Qn),Kn(lt(lt(e)),Or),e=lt(lt(e))):(e===kc(lt(e))&&(e=lt(e),t.rotateLeft(e)),Kn(lt(e),Qn),Kn(lt(lt(e)),Or),t.rotateRight(lt(lt(e))))}else{var r=xa(lt(lt(e)));Fc(r)===Or?(Kn(lt(e),Qn),Kn(r,Qn),Kn(lt(lt(e)),Or),e=lt(lt(e))):(e===xa(lt(e))&&(e=lt(e),t.rotateRight(e)),Kn(lt(e),Qn),Kn(lt(lt(e)),Or),t.rotateLeft(lt(lt(e))))}this.root_.color=Qn};Zt.prototype.values=function(){var e=new N,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=Zt.successor(t))!==null;)e.add(t.value);return e};Zt.prototype.entrySet=function(){var e=new Mu,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=Zt.successor(t))!==null;)e.add(t);return e};Zt.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};Zt.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};Zt.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};Zt.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};Zt.prototype.size=function(){return this.size_};var Fo=function(){};Fo.prototype.interfaces_=function(){return[]};Fo.prototype.getClass=function(){return Fo};function Sp(){}Sp.prototype=new Ks;function gn(){this.array_=[],arguments[0]instanceof Tt&&this.addAll(arguments[0])}gn.prototype=new Sp;gn.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};gn.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};gn.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};gn.prototype.remove=function(e){throw new Qo};gn.prototype.size=function(){return this.array_.length};gn.prototype.isEmpty=function(){return this.array_.length===0};gn.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};gn.prototype.iterator=function(){return new Js(this)};var Js=function(e){this.treeSet_=e,this.position_=0};Js.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new po;return this.treeSet_.array_[this.position_++]};Js.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Js.prototype.remove=function(){throw new Qo};var Mr=function(){};Mr.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1)i=function(s,a){return s.compareTo(a)},e.sort(i);else if(arguments.length===2)r=arguments[1],i=function(s,a){return r.compare(s,a)},e.sort(i);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(s,a){return r.compare(s,a)},n.sort(i),o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])};Mr.asList=function(e){for(var t=new N,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var $=function(){},on={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};on.P.get=function(){return 0};on.L.get=function(){return 1};on.A.get=function(){return 2};on.FALSE.get=function(){return-1};on.TRUE.get=function(){return-2};on.DONTCARE.get=function(){return-3};on.SYM_FALSE.get=function(){return"F"};on.SYM_TRUE.get=function(){return"T"};on.SYM_DONTCARE.get=function(){return"*"};on.SYM_P.get=function(){return"0"};on.SYM_L.get=function(){return"1"};on.SYM_A.get=function(){return"2"};$.prototype.interfaces_=function(){return[]};$.prototype.getClass=function(){return $};$.toDimensionSymbol=function(e){switch(e){case $.FALSE:return $.SYM_FALSE;case $.TRUE:return $.SYM_TRUE;case $.DONTCARE:return $.SYM_DONTCARE;case $.P:return $.SYM_P;case $.L:return $.SYM_L;case $.A:return $.SYM_A}throw new dt("Unknown dimension value: "+e)};$.toDimensionValue=function(e){switch(Mo.toUpperCase(e)){case $.SYM_FALSE:return $.FALSE;case $.SYM_TRUE:return $.TRUE;case $.SYM_DONTCARE:return $.DONTCARE;case $.SYM_P:return $.P;case $.SYM_L:return $.L;case $.SYM_A:return $.A}throw new dt("Unknown dimension symbol: "+e)};Object.defineProperties($,on);var dn=function(){};dn.prototype.filter=function(e){};dn.prototype.interfaces_=function(){return[]};dn.prototype.getClass=function(){return dn};var Je=function(){};Je.prototype.filter=function(e,t){};Je.prototype.isDone=function(){};Je.prototype.isGeometryChanged=function(){};Je.prototype.interfaces_=function(){return[]};Je.prototype.getClass=function(){return Je};var se=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new dt("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new D,o=0;o<this._geometries.length;o++)i.expandToInclude(r._geometries[o].getEnvelopeInternal());return i},t.prototype.getGeometryN=function(r){return this._geometries[r]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),o=-1,s=0;s<this._geometries.length;s++)for(var a=r._geometries[s].getCoordinates(),u=0;u<a.length;u++)o++,i[o]=a[u];return i},t.prototype.getArea=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getArea();return i},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._geometries.length!==s._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!r._geometries[a].equalsExact(s._geometries[a],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();Mr.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var r=this,i=$.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getBoundaryDimension());return i},t.prototype.getDimension=function(){for(var r=this,i=$.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getDimension());return i},t.prototype.getLength=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getNumPoints();return i},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createGeometryCollection(o)},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=new gn(Mr.asList(this._geometries)),s=new gn(Mr.asList(i._geometries));return this.compare(o,s)}else if(arguments.length===2){for(var a=arguments[0],u=arguments[1],l=a,c=this.getNumGeometries(),f=l.getNumGeometries(),p=0;p<c&&p<f;){var h=r.getGeometryN(p),g=l.getGeometryN(p),m=h.compareToSameClass(g,u);if(m!==0)return m;p++}return p<c?1:p<f?-1:0}},t.prototype.apply=function(){var r=this;if(q(arguments[0],Mn))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(q(arguments[0],Je)){var s=arguments[0];if(this._geometries.length===0)return null;for(var a=0;a<this._geometries.length&&(r._geometries[a].apply(s),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(q(arguments[0],dn)){var u=arguments[0];u.filter(this);for(var l=0;l<this._geometries.length;l++)r._geometries[l].apply(u)}else if(q(arguments[0],rr)){var c=arguments[0];c.filter(this);for(var f=0;f<this._geometries.length;f++)r._geometries[f].apply(c)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),W.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var o=0;o<this._geometries.length;o++)i._geometries[o]=r._geometries[o].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(z),kr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return z.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?$.FALSE:0},t.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[i-1-s]=r._geometries[s].reverse();return this.getFactory().createMultiLineString(o)},t.prototype.getBoundary=function(){return new De(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Fo]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(se),De=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=Be.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};De.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};De.prototype.getBoundary=function(){return this._geom instanceof vt?this.boundaryLineString(this._geom):this._geom instanceof kr?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};De.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};De.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};De.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new N;this._endpointMap=new Zt;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getNumPoints()!==0&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue(),u=a.count;t._bnRule.isInBoundary(u)&&n.add(s.getKey())}return Y.toCoordinateArray(n)};De.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new Fs,this._endpointMap.put(e,t)),t.count++};De.prototype.interfaces_=function(){return[]};De.prototype.getClass=function(){return De};De.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new De(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new De(n,r);return i.getBoundary()}};var Fs=function(){this.count=null};Fs.prototype.interfaces_=function(){return[]};Fs.prototype.getClass=function(){return Fs};function Tv(){}function Rv(){}var Av=function(){};function Mv(){}function Dv(){}function Fv(){}var Fe=function(){},Du={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Fe.prototype.interfaces_=function(){return[]};Fe.prototype.getClass=function(){return Fe};Fe.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)};Fe.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new Mv,n=new Tv;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o="";new Rv(Fe.getStackTrace(r));for(var s=new Fv,a=0;a<i;a++)try{o+=s.readLine()+Fe.NEWLINE}catch(u){if(u instanceof Dv)W.shouldNeverReachHere();else throw u}finally{}return o}};Fe.split=function(e,t){for(var n=t.length,r=new N,i=""+e,o=i.indexOf(t);o>=0;){var s=i.substring(0,o);r.add(s),i=i.substring(o+n),o=i.indexOf(t)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a};Fe.toString=function(){if(arguments.length===1){var e=arguments[0];return Fe.SIMPLE_ORDINATE_FORMAT.format(e)}};Fe.spaces=function(e){return Fe.chars(" ",e)};Du.NEWLINE.get=function(){return jt.getProperty("line.separator")};Du.SIMPLE_ORDINATE_FORMAT.get=function(){return new Av};Object.defineProperties(Fe,Du);var wt=function(){};wt.prototype.interfaces_=function(){return[]};wt.prototype.getClass=function(){return wt};wt.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))};wt.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,Q.X)===e.getOrdinate(t-1,Q.X)&&e.getOrdinate(0,Q.Y)===e.getOrdinate(t-1,Q.Y)};wt.isEqual=function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),o=0;o<n;o++)for(var s=0;s<i;s++){var a=e.getOrdinate(o,s),u=t.getOrdinate(o,s);if(e.getOrdinate(o,s)!==t.getOrdinate(o,s)&&!(V.isNaN(a)&&V.isNaN(u)))return!1}return!0};wt.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(wt.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)wt.copy(t,i-1,r,o,1);return r};wt.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)wt.swap(e,r,t-r)};wt.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}};wt.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)wt.copyCoord(e,t+o,n,r+o)};wt.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),r=new Ln;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Fe.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}};wt.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return wt.createClosedRing(e,t,4);var r=t.getOrdinate(0,Q.X)===t.getOrdinate(n-1,Q.X)&&t.getOrdinate(0,Q.Y)===t.getOrdinate(n-1,Q.Y);return r?t:wt.createClosedRing(e,t,n+1)};wt.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();wt.copy(t,0,r,0,i);for(var o=i;o<n;o++)wt.copy(t,0,r,o,1);return r};var vt=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new D:this._points.expandEnvelope(new D)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._points.size()!==s._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!r.equal(r._points.getCoordinate(a),s._points.getCoordinate(a),o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&wt.reverse(r._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?$.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return P.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var r=this._points.copy();wt.reverse(r);var i=this.getFactory().createLineString(r);return i},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],o=i,s=0,a=0;s<this._points.size()&&a<o._points.size();){var u=r._points.getCoordinate(s).compareTo(o._points.getCoordinate(a));if(u!==0)return u;s++,a++}return s<this._points.size()?1:a<o._points.size()?-1:0}else if(arguments.length===2){var l=arguments[0],c=arguments[1],f=l;return c.compare(this._points,f._points)}},t.prototype.apply=function(){var r=this;if(q(arguments[0],Mn))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(r._points.getCoordinate(o));else if(q(arguments[0],Je)){var s=arguments[0];if(this._points.size()===0)return null;for(var a=0;a<this._points.size()&&(s.filter(r._points,a),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(q(arguments[0],dn)){var u=arguments[0];u.filter(this)}else if(q(arguments[0],rr)){var l=arguments[0];l.filter(this)}},t.prototype.getBoundary=function(){return new De(this).getBoundary()},t.prototype.isEquivalentClass=function(r){return r instanceof t},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._points=this._points.clone(),r},t.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new dt("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},t.prototype.isCoordinate=function(r){for(var i=this,o=0;o<this._points.size();o++)if(i._points.getCoordinate(o).equals(r))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},t.prototype.interfaces_=function(){return[Fo]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(z),ko=function(){};ko.prototype.interfaces_=function(){return[]};ko.prototype.getClass=function(){return ko};var be=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new D;var r=new D;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return $.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var o=arguments[0],s=arguments[1],a=o;return s.compare(this._coordinates,a._coordinates)}},t.prototype.apply=function(){if(q(arguments[0],Mn)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(q(arguments[0],Je)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(q(arguments[0],dn)){var o=arguments[0];o.filter(this)}else if(q(arguments[0],rr)){var s=arguments[0];s.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),W.isTrue(r.size()<=1),this._coordinates=r},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[ko]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(z),vr=function(){};vr.prototype.interfaces_=function(){return[]};vr.prototype.getClass=function(){return vr};var Ft=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new dt("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new dt("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),o=-1,s=this._shell.getCoordinates(),a=0;a<s.length;a++)o++,i[o]=s[a];for(var u=0;u<this._holes.length;u++)for(var l=r._holes[u].getCoordinates(),c=0;c<l.length;c++)o++,i[o]=l[c];return i},t.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(P.signedArea(this._shell.getCoordinateSequence()));for(var o=0;o<this._holes.length;o++)i-=Math.abs(P.signedArea(r._holes[o].getCoordinateSequence()));return i},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var s=r.getX(o);if(!(s===i.getMinX()||s===i.getMaxX()))return!1;var a=r.getY(o);if(!(a===i.getMinY()||a===i.getMaxY()))return!1}for(var u=r.getX(0),l=r.getY(0),c=1;c<=4;c++){var f=r.getX(c),p=r.getY(c),h=f!==u,g=p!==l;if(h===g)return!1;u=f,l=p}return!0},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i,a=this._shell,u=s._shell;if(!a.equalsExact(u,o)||this._holes.length!==s._holes.length)return!1;for(var l=0;l<this._holes.length;l++)if(!r._holes[l].equalsExact(s._holes[l],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);Mr.sort(this._holes)}else if(arguments.length===2){var o=arguments[0],s=arguments[1];if(o.isEmpty())return null;var a=new Array(o.getCoordinates().length-1).fill(null);jt.arraycopy(o.getCoordinates(),0,a,0,a.length);var u=Y.minCoordinate(o.getCoordinates());Y.scroll(a,u),jt.arraycopy(a,0,o.getCoordinates(),0,a.length),o.getCoordinates()[a.length]=a[0],P.isCCW(o.getCoordinates())===s&&Y.reverse(o.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var o=0;o<this._holes.length;o++)i+=r._holes[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),o=0;o<this._holes.length;o++)i+=r._holes[o].getNumPoints();return i},t.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].copy().reverse();return i},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this._shell,s=i._shell;return o.compareToSameClass(s)}else if(arguments.length===2){var a=arguments[0],u=arguments[1],l=a,c=this._shell,f=l._shell,p=c.compareToSameClass(f,u);if(p!==0)return p;for(var h=this.getNumInteriorRing(),g=l.getNumInteriorRing(),m=0;m<h&&m<g;){var v=r.getInteriorRingN(m),E=l.getInteriorRingN(m),I=v.compareToSameClass(E,u);if(I!==0)return I;m++}return m<h?1:m<g?-1:0}},t.prototype.apply=function(r){var i=this;if(q(r,Mn)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(q(r,Je)){if(this._shell.apply(r),!r.isDone())for(var s=0;s<this._holes.length&&(i._holes[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(q(r,dn))r.filter(this);else if(q(r,rr)){r.filter(this),this._shell.apply(r);for(var a=0;a<this._holes.length;a++)i._holes[a].apply(r)}},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var o=0;o<this._holes.length;o++)i[o+1]=r._holes[o];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,i=this._shell.copy(),o=new Array(this._holes.length).fill(null),s=0;s<o.length;s++)o[s]=r._holes[s].copy();return new t(i,o,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(r){return this._holes[r]},t.prototype.interfaces_=function(){return[vr]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(z),Yi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return z.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return $.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[ko]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(se),Dn=function(e){function t(r,i){r instanceof d&&i instanceof K&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return z.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return $.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var r=this._points.copy();wt.reverse(r);var i=this.getFactory().createLinearRing(r);return i},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new dt("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new dt("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(vt),Rn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return z.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createMultiPolygon(o)},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new N,o=0;o<this._geometries.length;o++)for(var s=r._geometries[o],a=s.getBoundary(),u=0;u<a.getNumGeometries();u++)i.add(a.getGeometryN(u));var l=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(l))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[vr]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(se),Ge=function(e){this._factory=e||null,this._isUserDataCopied=!1},Zs={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ge.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};Ge.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};Ge.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof se?this.editGeometryCollection(e,t):e instanceof Ft?this.editPolygon(e,t):e instanceof be?t.edit(e,this._factory):e instanceof vt?t.edit(e,this._factory):(W.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};Ge.prototype.editGeometryCollection=function(e,t){for(var n=this,r=t.edit(e,this._factory),i=new N,o=0;o<r.getNumGeometries();o++){var s=n.edit(r.getGeometryN(o),t);s===null||s.isEmpty()||i.add(s)}return r.getClass()===Yi?this._factory.createMultiPoint(i.toArray([])):r.getClass()===kr?this._factory.createMultiLineString(i.toArray([])):r.getClass()===Rn?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};Ge.prototype.editPolygon=function(e,t){var n=this,r=t.edit(e,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var o=new N,s=0;s<r.getNumInteriorRing();s++){var a=n.edit(r.getInteriorRingN(s),t);a===null||a.isEmpty()||o.add(a)}return this._factory.createPolygon(i,o.toArray([]))};Ge.prototype.interfaces_=function(){return[]};Ge.prototype.getClass=function(){return Ge};Ge.GeometryEditorOperation=function(){};Zs.NoOpGeometryOperation.get=function(){return Bo};Zs.CoordinateOperation.get=function(){return Go};Zs.CoordinateSequenceOperation.get=function(){return zo};Object.defineProperties(Ge,Zs);var Bo=function(){};Bo.prototype.edit=function(e,t){return e};Bo.prototype.interfaces_=function(){return[Ge.GeometryEditorOperation]};Bo.prototype.getClass=function(){return Bo};var Go=function(){};Go.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof Dn?t.createLinearRing(n):e instanceof vt?t.createLineString(n):e instanceof be?n.length>0?t.createPoint(n[0]):t.createPoint():e};Go.prototype.interfaces_=function(){return[Ge.GeometryEditorOperation]};Go.prototype.getClass=function(){return Go};var zo=function(){};zo.prototype.edit=function(e,t){return e instanceof Dn?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof vt?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof be?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};zo.prototype.interfaces_=function(){return[Ge.GeometryEditorOperation]};zo.prototype.getClass=function(){return zo};var It=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new d}else if(q(arguments[0],Q)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,o===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)e._coordinates[l]=new d}}},wp={serialVersionUID:{configurable:!0}};It.prototype.setOrdinate=function(e,t,n){switch(t){case Q.X:this._coordinates[e].x=n;break;case Q.Y:this._coordinates[e].y=n;break;case Q.Z:this._coordinates[e].z=n;break;default:throw new dt("invalid ordinateIndex")}};It.prototype.size=function(){return this._coordinates.length};It.prototype.getOrdinate=function(e,t){switch(t){case Q.X:return this._coordinates[e].x;case Q.Y:return this._coordinates[e].y;case Q.Z:return this._coordinates[e].z}return V.NaN};It.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};It.prototype.getCoordinateCopy=function(e){return new d(this._coordinates[e])};It.prototype.getDimension=function(){return this._dimension};It.prototype.getX=function(e){return this._coordinates[e].x};It.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new It(t,this._dimension)};It.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};It.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new It(t,this._dimension)};It.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new Ln(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};It.prototype.getY=function(e){return this._coordinates[e].y};It.prototype.toCoordinateArray=function(){return this._coordinates};It.prototype.interfaces_=function(){return[Q,Ue]};It.prototype.getClass=function(){return It};wp.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(It,wp);var Fn=function(){},Fu={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Fn.prototype.readResolve=function(){return Fn.instance()};Fn.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new It(e)}else if(q(arguments[0],Q)){var t=arguments[0];return new It(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new It(n):new It(n,r)}};Fn.prototype.interfaces_=function(){return[qi,Ue]};Fn.prototype.getClass=function(){return Fn};Fn.instance=function(){return Fn.instanceObject};Fu.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};Fu.instanceObject.get=function(){return new Fn};Object.defineProperties(Fn,Fu);var Lp=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,r){return this.map_.set(n,r),r},t.prototype.values=function(){for(var n=new N,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},t.prototype.entrySet=function(){var n=new Mu;return this.map_.entries().forEach(function(r){return n.add(r)}),n},t.prototype.size=function(){return this.map_.size()},t}(Ci),ot=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof yn){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},ku={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ot.prototype.equals=function(e){if(!(e instanceof ot))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};ot.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new hn(n).compareTo(new hn(r))};ot.prototype.getScale=function(){return this._scale};ot.prototype.isFloating=function(){return this._modelType===ot.FLOATING||this._modelType===ot.FLOATING_SINGLE};ot.prototype.getType=function(){return this._modelType};ot.prototype.toString=function(){var e="UNKNOWN";return this._modelType===ot.FLOATING?e="Floating":this._modelType===ot.FLOATING_SINGLE?e="Floating-Single":this._modelType===ot.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};ot.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(V.isNaN(e))return e;if(this._modelType===ot.FLOATING_SINGLE){var t=e;return t}return this._modelType===ot.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof d){var n=arguments[0];if(this._modelType===ot.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};ot.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===ot.FLOATING?e=16:this._modelType===ot.FLOATING_SINGLE?e=6:this._modelType===ot.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};ot.prototype.setScale=function(e){this._scale=Math.abs(e)};ot.prototype.interfaces_=function(){return[Ue,qe]};ot.prototype.getClass=function(){return ot};ot.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};ku.serialVersionUID.get=function(){return 7777263578777804e3};ku.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(ot,ku);var yn=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},Bu={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};yn.prototype.readResolve=function(){return yn.nameToTypeMap.get(this._name)};yn.prototype.toString=function(){return this._name};yn.prototype.interfaces_=function(){return[Ue]};yn.prototype.getClass=function(){return yn};Bu.serialVersionUID.get=function(){return-552860263173159e4};Bu.nameToTypeMap.get=function(){return new Lp};Object.defineProperties(yn,Bu);ot.Type=yn;ot.FIXED=new yn("FIXED");ot.FLOATING=new yn("FLOATING");ot.FLOATING_SINGLE=new yn("FLOATING SINGLE");var K=function e(){this._precisionModel=new ot,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?q(arguments[0],qi)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ot&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Np={serialVersionUID:{configurable:!0}};K.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new d(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new d(e.getMinX(),e.getMinY()),new d(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new d(e.getMinX(),e.getMinY()),new d(e.getMinX(),e.getMaxY()),new d(e.getMaxX(),e.getMaxY()),new d(e.getMaxX(),e.getMinY()),new d(e.getMinX(),e.getMinY())]),null)};K.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new vt(this.getCoordinateSequenceFactory().create(e),this);if(q(e,Q))return new vt(e,this)}else return new vt(this.getCoordinateSequenceFactory().create([]),this)};K.prototype.createMultiLineString=function(){if(arguments.length===0)return new kr(null,this);if(arguments.length===1){var e=arguments[0];return new kr(e,this)}};K.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),s=o.getClass();t===null&&(t=s),s!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(K.toGeometryArray(e));var a=e.iterator().next(),u=e.size()>1;if(u){if(a instanceof Ft)return this.createMultiPolygon(K.toPolygonArray(e));if(a instanceof vt)return this.createMultiLineString(K.toLineStringArray(e));if(a instanceof be)return this.createMultiPoint(K.toPointArray(e));W.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a};K.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};K.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof d){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(q(arguments[0],Q)){var t=arguments[0];return new be(t,this)}}};K.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};K.prototype.createPolygon=function(){if(arguments.length===0)return new Ft(null,null,this);if(arguments.length===1){if(q(arguments[0],Q)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Dn){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new Ft(r,i,this)}};K.prototype.getSRID=function(){return this._SRID};K.prototype.createGeometryCollection=function(){if(arguments.length===0)return new se(null,this);if(arguments.length===1){var e=arguments[0];return new se(e,this)}};K.prototype.createGeometry=function(e){var t=new Ge(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};K.prototype.getPrecisionModel=function(){return this._precisionModel};K.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(q(arguments[0],Q)){var t=arguments[0];return new Dn(t,this)}}};K.prototype.createMultiPolygon=function(){if(arguments.length===0)return new Rn(null,this);if(arguments.length===1){var e=arguments[0];return new Rn(e,this)}};K.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new Yi(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Yi(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(q(arguments[0],Q)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=e.getCoordinateSequenceFactory().create(1,r.getDimension());wt.copy(r,o,s,0,1),i[o]=e.createPoint(s)}return this.createMultiPoint(i)}}};K.prototype.interfaces_=function(){return[Ue]};K.prototype.getClass=function(){return K};K.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};K.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};K.getDefaultCoordinateSequenceFactory=function(){return Fn.instance()};K.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};K.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};K.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};K.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};K.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};K.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};K.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};Np.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(K,Np);var L=function(){},Qs={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};L.prototype.interfaces_=function(){return[]};L.prototype.getClass=function(){return L};L.opposite=function(e){return e===L.LEFT?L.RIGHT:e===L.RIGHT?L.LEFT:e};Qs.ON.get=function(){return 0};Qs.LEFT.get=function(){return 1};Qs.RIGHT.get=function(){return 2};Object.defineProperties(L,Qs);function $s(e){this.message=e||""}$s.prototype=new Error;$s.prototype.name="EmptyStackException";function Nn(){this.array_=[]}Nn.prototype=new He;Nn.prototype.add=function(e){return this.array_.push(e),!0};Nn.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};Nn.prototype.push=function(e){return this.array_.push(e),e};Nn.prototype.pop=function(e){if(this.array_.length===0)throw new $s;return this.array_.pop()};Nn.prototype.peek=function(){if(this.array_.length===0)throw new $s;return this.array_[this.array_.length-1]};Nn.prototype.empty=function(){return this.array_.length===0};Nn.prototype.isEmpty=function(){return this.empty()};Nn.prototype.search=function(e){return this.array_.indexOf(e)};Nn.prototype.size=function(){return this.array_.length};Nn.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var mn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};mn.prototype.getCoordinate=function(){return this._minCoord};mn.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};mn.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();W.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=P.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===P.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===P.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};mn.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length||r[t].y===r[t+1].y)return-1;var i=L.LEFT;return r[t].y<r[t+1].y&&(i=L.RIGHT),i};mn.prototype.getEdge=function(){return this._orientedDe};mn.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(t._minCoord===null||n[r].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=r,t._minCoord=n[r])};mn.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};mn.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&t.checkForRightmostCoordinate(r)}W.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===L.LEFT&&(this._orientedDe=this._minDe.getSym())};mn.prototype.interfaces_=function(){return[]};mn.prototype.getClass=function(){return mn};var ir=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new d(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},t}(nr),ta=function(){this.array_=[]};ta.prototype.addLast=function(e){this.array_.push(e)};ta.prototype.removeFirst=function(){return this.array_.shift()};ta.prototype.isEmpty=function(){return this.array_.length===0};var ae=function(){this._finder=null,this._dirEdgeList=new N,this._nodes=new N,this._rightMostCoord=null,this._env=null,this._finder=new mn};ae.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};ae.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};ae.prototype.computeNodeDepth=function(e){for(var t=this,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new ir("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var o=e.getEdges().iterator();o.hasNext();){var s=o.next();s.setVisited(!0),t.copySymDepths(s)}};ae.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(L.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};ae.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};ae.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(L.RIGHT)>=1&&t.getDepth(L.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};ae.prototype.computeDepths=function(e){var t=this,n=new Mu,r=new ta,i=e.getNode();for(r.addLast(i),n.add(i),e.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),t.computeNodeDepth(o);for(var s=o.getEdges().iterator();s.hasNext();){var a=s.next(),u=a.getSym();if(!u.isVisited()){var l=u.getNode();n.contains(l)||(r.addLast(l),n.add(l))}}}};ae.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};ae.prototype.getEnvelope=function(){if(this._env===null){for(var e=new D,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this._env=e}return this._env};ae.prototype.addReachable=function(e){var t=this,n=new Nn;for(n.add(e);!n.empty();){var r=n.pop();t.add(r,n)}};ae.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(L.LEFT,e.getDepth(L.RIGHT)),t.setDepth(L.RIGHT,e.getDepth(L.LEFT))};ae.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),s=o.getNode();s.isVisited()||t.push(s)}};ae.prototype.getNodes=function(){return this._nodes};ae.prototype.getDirectedEdges=function(){return this._dirEdgeList};ae.prototype.interfaces_=function(){return[qe]};ae.prototype.getClass=function(){return ae};var ct=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[L.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[L.ON]=s,this.location[L.LEFT]=a,this.location[L.RIGHT]=u}};ct.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};ct.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==y.NONE)return!1;return!0};ct.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===y.NONE&&(t.location[n]=e)};ct.prototype.isLine=function(){return this.location.length===1};ct.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[L.ON]=this.location[L.ON],n[L.LEFT]=y.NONE,n[L.RIGHT]=y.NONE,this.location=n}for(var r=0;r<this.location.length;r++)t.location[r]===y.NONE&&r<e.location.length&&(t.location[r]=e.location[r])};ct.prototype.getLocations=function(){return this.location};ct.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[L.LEFT];this.location[L.LEFT]=this.location[L.RIGHT],this.location[L.RIGHT]=e};ct.prototype.toString=function(){var e=new Ln;return this.location.length>1&&e.append(y.toLocationSymbol(this.location[L.LEFT])),e.append(y.toLocationSymbol(this.location[L.ON])),this.location.length>1&&e.append(y.toLocationSymbol(this.location[L.RIGHT])),e.toString()};ct.prototype.setLocations=function(e,t,n){this.location[L.ON]=e,this.location[L.LEFT]=t,this.location[L.RIGHT]=n};ct.prototype.get=function(e){return e<this.location.length?this.location[e]:y.NONE};ct.prototype.isArea=function(){return this.location.length>1};ct.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===y.NONE)return!0;return!1};ct.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(L.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};ct.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(y.NONE)};ct.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};ct.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};ct.prototype.interfaces_=function(){return[]};ct.prototype.getClass=function(){return ct};var st=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new ct(t),this.elt[1]=new ct(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new ct(n.elt[0]),this.elt[1]=new ct(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new ct(y.NONE),this.elt[1]=new ct(y.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new ct(o,s,a),this.elt[1]=new ct(o,s,a)}else if(arguments.length===4){var u=arguments[0],l=arguments[1],c=arguments[2],f=arguments[3];this.elt[0]=new ct(y.NONE,y.NONE,y.NONE),this.elt[1]=new ct(y.NONE,y.NONE,y.NONE),this.elt[u].setLocations(l,c,f)}};st.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};st.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};st.prototype.isNull=function(e){return this.elt[e].isNull()};st.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};st.prototype.isLine=function(e){return this.elt[e].isLine()};st.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new ct(e.elt[n]):t.elt[n].merge(e.elt[n])};st.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};st.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(L.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};st.prototype.toString=function(){var e=new Ln;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};st.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};st.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};st.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(L.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};st.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};st.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};st.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new ct(this.elt[e].location[0]))};st.prototype.interfaces_=function(){return[]};st.prototype.getClass=function(){return st};st.toLineLabel=function(e){for(var t=new st(y.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Ot=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new N,this._pts=new N,this._label=new st(y.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new N,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Ot.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=P.isCCW(this._ring.getCoordinates())};Ot.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Ot.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,r=!0;do{if(n===null)throw new ir("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new ir("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var i=n.getLabel();W.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(n.getEdge(),n.isForward(),r),r=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};Ot.prototype.getLinearRing=function(){return this._ring};Ot.prototype.getCoordinate=function(e){return this._pts.get(e)};Ot.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),r=n.getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};Ot.prototype.addPoints=function(e,t,n){var r=this,i=e.getCoordinates();if(t){var o=1;n&&(o=0);for(var s=o;s<i.length;s++)r._pts.add(i[s])}else{var a=i.length-2;n&&(a=i.length-1);for(var u=a;u>=0;u--)r._pts.add(i[u])}};Ot.prototype.isHole=function(){return this._isHole};Ot.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};Ot.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!P.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0};Ot.prototype.addHole=function(e){this._holes.add(e)};Ot.prototype.isShell=function(){return this._shell===null};Ot.prototype.getLabel=function(){return this._label};Ot.prototype.getEdges=function(){return this._edges};Ot.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Ot.prototype.getShell=function(){return this._shell};Ot.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=t.getLocation(n,L.RIGHT);if(r===y.NONE)return null;if(this._label.getLocation(n)===y.NONE)return this._label.setLocation(n,r),null}};Ot.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};Ot.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=t._holes.get(r).getLinearRing();var i=e.createPolygon(this.getLinearRing(),n);return i};Ot.prototype.interfaces_=function(){return[]};Ot.prototype.getClass=function(){return Ot};var kv=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ot),Bv=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,r=new N,i=this._startDe;do{if(i.getMinEdgeRing()===null){var o=new kv(i,n._geometryFactory);r.add(o)}i=i.getNext()}while(i!==this._startDe);return r},t.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ot),Te=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._label=e}};Te.prototype.setVisited=function(e){this._isVisited=e};Te.prototype.setInResult=function(e){this._isInResult=e};Te.prototype.isCovered=function(){return this._isCovered};Te.prototype.isCoveredSet=function(){return this._isCoveredSet};Te.prototype.setLabel=function(e){this._label=e};Te.prototype.getLabel=function(){return this._label};Te.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};Te.prototype.updateIM=function(e){W.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};Te.prototype.isInResult=function(){return this._isInResult};Te.prototype.isVisited=function(){return this._isVisited};Te.prototype.interfaces_=function(){return[]};Te.prototype.getClass=function(){return Te};var ea=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new st(0,y.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,r){var i=y.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==y.BOUNDARY&&(i=o)}return i},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new st(n,r):this._label.setLocation(n,r)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof st)for(var i=arguments[0],o=0;o<2;o++){var s=n.computeMergedLocation(i,o),a=n._label.getLocation(o);a===y.NONE&&n._label.setLocation(o,s)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=y.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case y.BOUNDARY:i=y.INTERIOR;break;case y.INTERIOR:i=y.BOUNDARY;break;default:i=y.BOUNDARY;break}this._label.setLocation(n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Te),_n=function(){this.nodeMap=new Zt,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};_n.prototype.find=function(e){return this.nodeMap.get(e)};_n.prototype.addNode=function(){if(arguments[0]instanceof d){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof ea){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};_n.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};_n.prototype.iterator=function(){return this.nodeMap.values().iterator()};_n.prototype.values=function(){return this.nodeMap.values()};_n.prototype.getBoundaryNodes=function(e){for(var t=new N,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===y.BOUNDARY&&t.add(r)}return t};_n.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};_n.prototype.interfaces_=function(){return[]};_n.prototype.getClass=function(){return _n};var at=function(){},$o={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};at.prototype.interfaces_=function(){return[]};at.prototype.getClass=function(){return at};at.isNorthern=function(e){return e===at.NE||e===at.NW};at.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};at.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r};at.isInHalfPlane=function(e,t){return t===at.SE?e===at.SE||e===at.SW:e===t||e===t+1};at.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new dt("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?at.NE:at.SE:t>=0?at.NW:at.SW}else if(arguments[0]instanceof d&&arguments[1]instanceof d){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new dt("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?at.NE:at.SE:r.y>=n.y?at.NW:at.SW}};$o.NE.get=function(){return 0};$o.NW.get=function(){return 1};$o.SW.get=function(){return 2};$o.SE.get=function(){return 3};Object.defineProperties(at,$o);var Qt=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=t,this.init(n,r),this._label=i}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Qt.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:P.computeOrientation(e._p0,e._p1,this._p1)};Qt.prototype.getDy=function(){return this._dy};Qt.prototype.getCoordinate=function(){return this._p0};Qt.prototype.setNode=function(e){this._node=e};Qt.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};Qt.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};Qt.prototype.getDirectedCoordinate=function(){return this._p1};Qt.prototype.getDx=function(){return this._dx};Qt.prototype.getLabel=function(){return this._label};Qt.prototype.getEdge=function(){return this._edge};Qt.prototype.getQuadrant=function(){return this._quadrant};Qt.prototype.getNode=function(){return this._node};Qt.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};Qt.prototype.computeLabel=function(e){};Qt.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=at.quadrant(this._dx,this._dy),W.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Qt.prototype.interfaces_=function(){return[qe]};Qt.prototype.getClass=function(){return Qt};var iu=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new st(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new ir("assigned depths do not match",this.getCoordinate());this._depth[n]=r},t.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,L.LEFT)===y.INTERIOR&&n._label.getLocation(i,L.RIGHT)===y.INTERIOR||(r=!1);return r},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[L.LEFT]+"/"+this._depth[L.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,y.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,y.EXTERIOR);return n&&r&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===L.LEFT&&(o=-1);var s=L.opposite(n),a=i*o,u=r+a;this.setDepth(n,r),this.setDepth(s,u)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,r){return n===y.EXTERIOR&&r===y.INTERIOR?1:n===y.INTERIOR&&r===y.EXTERIOR?-1:0},t}(Qt),Hi=function(){};Hi.prototype.createNode=function(e){return new ea(e,null)};Hi.prototype.interfaces_=function(){return[]};Hi.prototype.getClass=function(){return Hi};var _t=function(){if(this._edges=new N,this._nodes=null,this._edgeEndList=new N,arguments.length===0)this._nodes=new _n(new Hi);else if(arguments.length===1){var e=arguments[0];this._nodes=new _n(e)}};_t.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var r=t._edges.get(n);r.print(e),r.eiList.print(e)}};_t.prototype.find=function(e){return this._nodes.find(e)};_t.prototype.addNode=function(){if(arguments[0]instanceof ea){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof d){var t=arguments[0];return this._nodes.addNode(t)}};_t.prototype.getNodeIterator=function(){return this._nodes.iterator()};_t.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};_t.prototype.debugPrintln=function(e){jt.out.println(e)};_t.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===y.BOUNDARY};_t.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};_t.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?P.computeOrientation(e,t,r)===P.COLLINEAR&&at.quadrant(e,t)===at.quadrant(n,r):!1};_t.prototype.getEdgeEnds=function(){return this._edgeEndList};_t.prototype.debugPrint=function(e){jt.out.print(e)};_t.prototype.getEdgeIterator=function(){return this._edges.iterator()};_t.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(e,t,o[0],o[1])||n.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return i}return null};_t.prototype.insertEdge=function(e){this._edges.add(e)};_t.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};_t.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();t._edges.add(r);var i=new iu(r,!0),o=new iu(r,!1);i.setSym(o),o.setSym(i),t.add(i),t.add(o)}};_t.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};_t.prototype.getNodes=function(){return this._nodes.values()};_t.prototype.findEdge=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(e.equals(o[0])&&t.equals(o[1]))return i}return null};_t.prototype.interfaces_=function(){return[]};_t.prototype.getClass=function(){return _t};_t.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var Ee=function(){this._geometryFactory=null,this._shellList=new N;var e=arguments[0];this._geometryFactory=e};Ee.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}};Ee.prototype.computePolygons=function(e){for(var t=this,n=new N,r=e.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(t._geometryFactory);n.add(o)}return n};Ee.prototype.placeFreeHoles=function(e,t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var o=n.findEdgeRingContaining(i,e);if(o===null)throw new ir("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}};Ee.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=this,i=new N,o=e.iterator();o.hasNext();){var s=o.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings(),u=r.findShell(a);u!==null?(r.placePolygonHoles(u,a),t.add(u)):n.addAll(a)}else i.add(s)}return i};Ee.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};Ee.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new N,r=e.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var o=new Bv(i,t._geometryFactory);n.add(o),o.setInResult()}}return n};Ee.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}};Ee.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};Ee.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=t.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();o!==null&&(s=o.getLinearRing().getEnvelopeInternal());var f=!1;c.contains(r)&&P.isPointInRing(i,l.getCoordinates())&&(f=!0),f&&(o===null||s.contains(c))&&(o=u)}return o};Ee.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return W.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};Ee.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];_t.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new N,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};Ee.prototype.interfaces_=function(){return[]};Ee.prototype.getClass=function(){return Ee};var Ki=function(){};Ki.prototype.getBounds=function(){};Ki.prototype.interfaces_=function(){return[]};Ki.prototype.getClass=function(){return Ki};var Ze=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Ze.prototype.getItem=function(){return this._item};Ze.prototype.getBounds=function(){return this._bounds};Ze.prototype.interfaces_=function(){return[Ki,Ue]};Ze.prototype.getClass=function(){return Ze};var or=function(){this._size=null,this._items=null,this._size=0,this._items=new N,this._items.add(null)};or.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};or.prototype.size=function(){return this._size};or.prototype.reorder=function(e){for(var t=this,n=null,r=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(r)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,r)};or.prototype.clear=function(){this._size=0,this._items.clear()};or.prototype.isEmpty=function(){return this._size===0};or.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};or.prototype.interfaces_=function(){return[]};or.prototype.getClass=function(){return or};var br=function(){};br.prototype.visitItem=function(e){};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};var hi=function(){};hi.prototype.insert=function(e,t){};hi.prototype.remove=function(e,t){};hi.prototype.query=function(){};hi.prototype.interfaces_=function(){return[]};hi.prototype.getClass=function(){return hi};var Dt=function(){if(this._childBoundables=new N,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._level=e}},xp={serialVersionUID:{configurable:!0}};Dt.prototype.getLevel=function(){return this._level};Dt.prototype.size=function(){return this._childBoundables.size()};Dt.prototype.getChildBoundables=function(){return this._childBoundables};Dt.prototype.addChildBoundable=function(e){W.isTrue(this._bounds===null),this._childBoundables.add(e)};Dt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Dt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Dt.prototype.interfaces_=function(){return[Ki,Ue]};Dt.prototype.getClass=function(){return Dt};xp.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Dt,xp);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}};Qe.min=function(e){return Qe.sort(e),e.get(0)};Qe.sort=function(e,t){var n=e.toArray();t?Mr.sort(n,t):Mr.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])};Qe.singletonList=function(e){var t=new N;return t.add(e),t};var xt=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};xt.prototype.expandToQueue=function(e,t){var n=xt.isComposite(this._boundable1),r=xt.isComposite(this._boundable2);if(n&&r)return xt.area(this._boundable1)>xt.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new dt("neither boundable is composite")};xt.prototype.isLeaves=function(){return!(xt.isComposite(this._boundable1)||xt.isComposite(this._boundable2))};xt.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};xt.prototype.expand=function(e,t,n,r){for(var i=this,o=e.getChildBoundables(),s=o.iterator();s.hasNext();){var a=s.next(),u=new xt(a,t,i._itemDistance);u.getDistance()<r&&n.add(u)}};xt.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};xt.prototype.getDistance=function(){return this._distance};xt.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};xt.prototype.interfaces_=function(){return[qe]};xt.prototype.getClass=function(){return xt};xt.area=function(e){return e.getBounds().getArea()};xt.isComposite=function(e){return e instanceof Dt};var Gt=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new N,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];W.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},na={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Gt.prototype.getNodeCapacity=function(){return this._nodeCapacity};Gt.prototype.lastNode=function(e){return e.get(e.size()-1)};Gt.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Dt?n+=e.size(i):i instanceof Ze&&(n+=1)}return n}};Gt.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ze&&i.getItem()===t&&(n=i)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};Gt.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new N:t}else if(arguments.length===1){for(var n=arguments[0],r=new N,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Dt){var s=e.itemsTree(o);s!==null&&r.add(s)}else o instanceof Ze?r.add(o.getItem()):W.shouldNeverReachHere()}return r.size()<=0?null:r}};Gt.prototype.insert=function(e,t){W.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ze(e,t))};Gt.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new N;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(W.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Dt?e.boundablesAtLevel(r,a,o):(W.isTrue(a instanceof Ze),r===-1&&o.add(a))}return null}};Gt.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new N;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(q(arguments[2],br)&&arguments[0]instanceof Object&&arguments[1]instanceof Dt)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);e.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof Dt?e.query(o,c,a):c instanceof Ze?a.visitItem(c.getItem()):W.shouldNeverReachHere())}else if(q(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Dt)for(var f=arguments[0],p=arguments[1],h=arguments[2],g=p.getChildBoundables(),m=0;m<g.size();m++){var v=g.get(m);e.getIntersectsOp().intersects(v.getBounds(),f)&&(v instanceof Dt?e.query(f,v,h):v instanceof Ze?h.add(v.getItem()):W.shouldNeverReachHere())}}};Gt.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Gt.prototype.getRoot=function(){return this.build(),this._root};Gt.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(e.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof Dt&&(s=e.remove(r,l,o),s)){a=l;break}}return a!==null&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}};Gt.prototype.createHigherLevels=function(e,t){W.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};Gt.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Dt){var o=e.depth(i);o>n&&(n=o)}}return n+1}};Gt.prototype.createParentBoundables=function(e,t){var n=this;W.isTrue(!e.isEmpty());var r=new N;r.add(this.createNode(t));var i=new N(e);Qe.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(t)),n.lastNode(r).addChildBoundable(s)}return r};Gt.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Gt.prototype.interfaces_=function(){return[Ue]};Gt.prototype.getClass=function(){return Gt};Gt.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};na.IntersectsOp.get=function(){return Gv};na.serialVersionUID.get=function(){return-3886435814360241e3};na.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Gt,na);var Gv=function(){},Ji=function(){};Ji.prototype.distance=function(e,t){};Ji.prototype.interfaces_=function(){return[]};Ji.prototype.getClass=function(){return Ji};var Cp=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var o=this;W.isTrue(r.length>0);for(var s=new N,a=0;a<r.length;a++)s.addAll(o.createParentBoundablesFromVerticalSlice(r[a],i));return s},t.prototype.createNode=function(r){return new Bc(r)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;e.prototype.insert.call(this,r,i)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),s=new Array(i).fill(null),a=r.iterator(),u=0;u<i;u++){s[u]=new N;for(var l=0;a.hasNext()&&l<o;){var c=a.next();s[u].add(c),l++}}return s},t.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return e.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];e.prototype.query.call(this,i,o)}else if(arguments.length===3){if(q(arguments[2],br)&&arguments[0]instanceof Object&&arguments[1]instanceof Dt){var s=arguments[0],a=arguments[1],u=arguments[2];e.prototype.query.call(this,s,a,u)}else if(q(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Dt){var l=arguments[0],c=arguments[1],f=arguments[2];e.prototype.query.call(this,l,c,f)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return e.prototype.createParentBoundables.call(this,r,i)},t.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return e.prototype.remove.call(this,r,i)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(r,i){W.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),s=new N(r);Qe.sort(s,t.xComparator);var a=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(a,i)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(q(arguments[0],Ji)){var r=arguments[0],i=new xt(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof xt){var o=arguments[0];return this.nearestNeighbour(o,V.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&q(arguments[1],Ji)){var s=arguments[0],a=arguments[1],u=new xt(this.getRoot(),s.getRoot(),a);return this.nearestNeighbour(u)}else if(arguments[0]instanceof xt&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],f=c,p=null,h=new or;for(h.add(l);!h.isEmpty()&&f>0;){var g=h.poll(),m=g.getDistance();if(m>=f)break;g.isLeaves()?(f=m,p=g):g.expandToQueue(h,f)}return[p.getBoundable(0).getItem(),p.getBoundable(1).getItem()]}}else if(arguments.length===3){var v=arguments[0],E=arguments[1],I=arguments[2],S=new Ze(v,E),O=new xt(this.getRoot(),S,I);return this.nearestNeighbour(O)[0]}},t.prototype.interfaces_=function(){return[hi,Ue]},t.prototype.getClass=function(){return t},t.centreX=function(r){return t.avg(r.getMinX(),r.getMaxX())},t.avg=function(r,i){return(r+i)/2},t.centreY=function(r){return t.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return Bc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[zi]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[zi]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(Gt),Bc=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new D(i.getBounds()):n.expandToInclude(i.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Dt),fe=function(){};fe.prototype.interfaces_=function(){return[]};fe.prototype.getClass=function(){return fe};fe.relativeSign=function(e,t){return e<t?-1:e>t?1:0};fe.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=fe.relativeSign(t.x,n.x),i=fe.relativeSign(t.y,n.y);switch(e){case 0:return fe.compareValue(r,i);case 1:return fe.compareValue(i,r);case 2:return fe.compareValue(i,-r);case 3:return fe.compareValue(-r,i);case 4:return fe.compareValue(-r,-i);case 5:return fe.compareValue(-i,-r);case 6:return fe.compareValue(-i,r);case 7:return fe.compareValue(r,-i)}return W.shouldNeverReachHere("invalid octant value"),0};fe.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var Er=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new d(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};Er.prototype.getCoordinate=function(){return this.coord};Er.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};Er.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:fe.compare(this._segmentOctant,this.coord,t.coord)};Er.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};Er.prototype.isInterior=function(){return this._isInterior};Er.prototype.interfaces_=function(){return[qe]};Er.prototype.getClass=function(){return Er};var ue=function(){this._nodeMap=new Zt,this._edge=null;var e=arguments[0];this._edge=e};ue.prototype.getSplitCoordinates=function(){var e=this,t=new Zo;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();e.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()};ue.prototype.addCollapsedNodes=function(){var e=this,t=new N;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var r=n.next().intValue();e.add(e._edge.getCoordinate(r),r)}};ue.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};ue.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var r=t._edge.getCoordinate(n),i=t._edge.getCoordinate(n+2);r.equals2D(i)&&e.add(new hn(n+1))}};ue.prototype.addEdgeCoordinates=function(e,t,n){var r=this,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);n.add(new d(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(r._edge.getCoordinate(s));o&&n.add(new d(t.coord))};ue.prototype.iterator=function(){return this._nodeMap.values().iterator()};ue.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};ue.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1};ue.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),s=t.findCollapseIndex(i,o,n);s&&e.add(new hn(n[0])),i=o}};ue.prototype.getEdge=function(){return this._edge};ue.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};ue.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new d(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=n._edge.getCoordinate(u);return o&&(s[a]=new d(t.coord)),new Lt(s,this._edge.getData())};ue.prototype.add=function(e,t){var n=new Er(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return r!==null?(W.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};ue.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new nr("bad split edge start point at "+r);var i=e.get(e.size()-1),o=i.getCoordinates(),s=o[o.length-1];if(!s.equals2D(t[t.length-1]))throw new nr("bad split edge end point at "+s)};ue.prototype.interfaces_=function(){return[]};ue.prototype.getClass=function(){return ue};var gi=function(){};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};gi.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new dt("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof d&&arguments[1]instanceof d){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(s===0&&a===0)throw new dt("Cannot compute the octant for two identical points "+i);return gi.octant(s,a)}};var kn=function(){};kn.prototype.getCoordinates=function(){};kn.prototype.size=function(){};kn.prototype.getCoordinate=function(e){};kn.prototype.isClosed=function(){};kn.prototype.setData=function(e){};kn.prototype.getData=function(){};kn.prototype.interfaces_=function(){return[]};kn.prototype.getClass=function(){return kn};var qo=function(){};qo.prototype.addIntersection=function(e,t){};qo.prototype.interfaces_=function(){return[kn]};qo.prototype.getClass=function(){return qo};var Lt=function(){this._nodeList=new ue(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Lt.prototype.getCoordinates=function(){return this._pts};Lt.prototype.size=function(){return this._pts.length};Lt.prototype.getCoordinate=function(e){return this._pts[e]};Lt.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Lt.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};Lt.prototype.setData=function(e){this._data=e};Lt.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:gi.octant(e,t)};Lt.prototype.getData=function(){return this._data};Lt.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],o=new d(n.getIntersection(i));this.addIntersection(o,r)}};Lt.prototype.toString=function(){return Ke.toLineString(new It(this._pts))};Lt.prototype.getNodeList=function(){return this._nodeList};Lt.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}var o=this._nodeList.add(e,n);return o};Lt.prototype.addIntersections=function(e,t,n){for(var r=this,i=0;i<e.getIntersectionNum();i++)r.addIntersection(e,t,n,i)};Lt.prototype.interfaces_=function(){return[qo]};Lt.prototype.getClass=function(){return Lt};Lt.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new N;return Lt.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var F=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new d,this.p1=new d;else if(arguments.length===1){var e=arguments[0];this.p0=new d(e.p0),this.p1=new d(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new d(t,n),this.p1=new d(r,i)}},Op={serialVersionUID:{configurable:!0}};F.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};F.prototype.orientationIndex=function(){if(arguments[0]instanceof F){var e=arguments[0],t=P.orientationIndex(this.p0,this.p1,e.p0),n=P.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof d){var r=arguments[0];return P.orientationIndex(this.p0,this.p1,r)}};F.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};F.prototype.isVertical=function(){return this.p0.x===this.p1.x};F.prototype.equals=function(e){if(!(e instanceof F))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};F.prototype.intersection=function(e){var t=new ei;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};F.prototype.project=function(){if(arguments[0]instanceof d){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new d(e);var t=this.projectionFactor(e),n=new d;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof F){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new F(s,a)}};F.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};F.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};F.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};F.prototype.distancePerpendicular=function(e){return P.distancePointLinePerpendicular(e,this.p0,this.p1)};F.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};F.prototype.midPoint=function(){return F.midPoint(this.p0,this.p1)};F.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(r<=0)return V.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i};F.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=V.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var s=this.closestPoint(e.p1);i=s.distance(e.p1),i<r&&(r=i,n[0]=s,n[1]=e.p1);var a=e.closestPoint(this.p0);i=a.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=a);var u=e.closestPoint(this.p1);return i=u.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=u),n};F.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1};F.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};F.prototype.getLength=function(){return this.p0.distance(this.p1)};F.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};F.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};F.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};F.prototype.lineIntersection=function(e){try{var t=Ye.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof co))throw n}finally{}return null};F.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};F.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(t!==0){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=t*i/s,u=t*o/s}var l=n-u,c=r+a,f=new d(l,c);return f};F.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};F.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||V.isNaN(t))&&(t=1),t};F.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};F.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};F.prototype.distance=function(){if(arguments[0]instanceof F){var e=arguments[0];return P.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof d){var t=arguments[0];return P.distancePointLine(t,this.p0,this.p1)}};F.prototype.pointAlong=function(e){var t=new d;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};F.prototype.hashCode=function(){var e=V.doubleToLongBits(this.p0.x);e^=V.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=V.doubleToLongBits(this.p1.x);n^=V.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return t^r};F.prototype.interfaces_=function(){return[qe,Ue]};F.prototype.getClass=function(){return F};F.midPoint=function(e,t){return new d((e.x+t.x)/2,(e.y+t.y)/2)};Op.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(F,Op);var Uo=function(){this.tempEnv1=new D,this.tempEnv2=new D,this._overlapSeg1=new F,this._overlapSeg2=new F};Uo.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};Uo.prototype.interfaces_=function(){return[]};Uo.prototype.getClass=function(){return Uo};var Ie=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};Ie.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};Ie.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var s=Math.trunc((t+n)/2);t<s&&this.computeSelect(e,t,s,r),s<n&&this.computeSelect(e,s,n,r)};Ie.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)t[n++]=e._pts[r];return t};Ie.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};Ie.prototype.setId=function(e){this._id=e};Ie.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};Ie.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new D(e,t)}return this._env};Ie.prototype.getEndIndex=function(){return this._end};Ie.prototype.getStartIndex=function(){return this._start};Ie.prototype.getContext=function(){return this._context};Ie.prototype.getId=function(){return this._id};Ie.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var s=this._pts[e],a=this._pts[t],u=n._pts[r],l=n._pts[i];if(t-e===1&&i-r===1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((e+t)/2),f=Math.trunc((r+i)/2);e<c&&(r<f&&this.computeOverlapsInternal(e,c,n,r,f,o),f<i&&this.computeOverlapsInternal(e,c,n,f,i,o)),c<t&&(r<f&&this.computeOverlapsInternal(c,t,n,r,f,o),f<i&&this.computeOverlapsInternal(c,t,n,f,i,o))};Ie.prototype.interfaces_=function(){return[]};Ie.prototype.getClass=function(){return Ie};var pn=function(){};pn.prototype.interfaces_=function(){return[]};pn.prototype.getClass=function(){return pn};pn.getChainStartIndices=function(e){var t=0,n=new N;n.add(new hn(t));do{var r=pn.findChainEnd(e,t);n.add(new hn(r)),t=r}while(t<e.length-1);var i=pn.toIntArray(n);return i};pn.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=at.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var o=at.quadrant(e[i-1],e[i]);if(o!==r)break}i++}return i-1};pn.getChains=function(){if(arguments.length===1){var e=arguments[0];return pn.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],r=new N,i=pn.getChainStartIndices(t),o=0;o<i.length-1;o++){var s=new Ie(t,i[o],i[o+1],n);r.add(s)}return r}};pn.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Br=function(){};Br.prototype.computeNodes=function(e){};Br.prototype.getNodedSubstrings=function(){};Br.prototype.interfaces_=function(){return[]};Br.prototype.getClass=function(){return Br};var Vo=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}};Vo.prototype.setSegmentIntersector=function(e){this._segInt=e};Vo.prototype.interfaces_=function(){return[Br]};Vo.prototype.getClass=function(){return Vo};var Gu=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new N,this._index=new Cp,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Lt.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(r){for(var i=this,o=pn.getChains(r.getCoordinates(),r),s=o.iterator();s.hasNext();){var a=s.next();a.setId(i._idCounter++),i._index.insert(a.getEnvelope(),a),i._monoChains.add(a)}},t.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var o=r.iterator();o.hasNext();)i.add(o.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var r=this,i=new Gc(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var s=o.next(),a=r._index.query(s.getEnvelope()),u=a.iterator();u.hasNext();){var l=u.next();if(l.getId()>s.getId()&&(s.computeOverlaps(l,i),r._nOverlaps++),r._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return Gc},Object.defineProperties(t,n),t}(Vo),Gc=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=n.getContext(),a=i.getContext();this._si.processIntersections(s,r,a,o)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Uo),nt=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},cr={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};nt.prototype.getEndCapStyle=function(){return this._endCapStyle};nt.prototype.isSingleSided=function(){return this._isSingleSided};nt.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=nt.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=nt.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==nt.JOIN_ROUND&&(this._quadrantSegments=nt.DEFAULT_QUADRANT_SEGMENTS)};nt.prototype.getJoinStyle=function(){return this._joinStyle};nt.prototype.setJoinStyle=function(e){this._joinStyle=e};nt.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};nt.prototype.getSimplifyFactor=function(){return this._simplifyFactor};nt.prototype.getQuadrantSegments=function(){return this._quadrantSegments};nt.prototype.setEndCapStyle=function(e){this._endCapStyle=e};nt.prototype.getMitreLimit=function(){return this._mitreLimit};nt.prototype.setMitreLimit=function(e){this._mitreLimit=e};nt.prototype.setSingleSided=function(e){this._isSingleSided=e};nt.prototype.interfaces_=function(){return[]};nt.prototype.getClass=function(){return nt};nt.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};cr.CAP_ROUND.get=function(){return 1};cr.CAP_FLAT.get=function(){return 2};cr.CAP_SQUARE.get=function(){return 3};cr.JOIN_ROUND.get=function(){return 1};cr.JOIN_MITRE.get=function(){return 2};cr.JOIN_BEVEL.get=function(){return 3};cr.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};cr.DEFAULT_MITRE_LIMIT.get=function(){return 5};cr.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(nt,cr);var bt=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=P.COUNTERCLOCKWISE,this._inputLine=e||null},ts={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};bt.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],s=this._inputLine[n];return!this.isConcave(i,o,s)||!this.isShallow(i,o,s,r)?!1:this.isShallowSampled(i,o,e,n,r)};bt.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;e.isDeletable(t,n,r,e._distanceTol)&&(e._isDeleted[n]=bt.DELETE,o=!0,i=!0),o?t=r:t=n,n=e.findNextNonDeletedIndex(t),r=e.findNextNonDeletedIndex(n)}return i};bt.prototype.isShallowConcavity=function(e,t,n,r){var i=P.computeOrientation(e,t,n),o=i===this._angleOrientation;if(!o)return!1;var s=P.distancePointLine(t,e,n);return s<r};bt.prototype.isShallowSampled=function(e,t,n,r,i){var o=this,s=Math.trunc((r-n)/bt.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=n;a<r;a+=s)if(!o.isShallow(e,t,o._inputLine[a],i))return!1;return!0};bt.prototype.isConcave=function(e,t,n){var r=P.computeOrientation(e,t,n),i=r===this._angleOrientation;return i};bt.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=P.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};bt.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===bt.DELETE;)t++;return t};bt.prototype.isShallow=function(e,t,n,r){var i=P.distancePointLine(t,e,n);return i<r};bt.prototype.collapseLine=function(){for(var e=this,t=new Zo,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==bt.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};bt.prototype.interfaces_=function(){return[]};bt.prototype.getClass=function(){return bt};bt.simplify=function(e,t){var n=new bt(e);return n.simplify(t)};ts.INIT.get=function(){return 0};ts.DELETE.get=function(){return 1};ts.KEEP.get=function(){return 1};ts.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(bt,ts);var Re=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new N},Pp={COORDINATE_ARRAY_TYPE:{configurable:!0}};Re.prototype.getCoordinates=function(){var e=this._ptList.toArray(Re.COORDINATE_ARRAY_TYPE);return e};Re.prototype.setPrecisionModel=function(e){this._precisionModel=e};Re.prototype.addPt=function(e){var t=new d(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};Re.prototype.revere=function(){};Re.prototype.addPts=function(e,t){var n=this;if(t)for(var r=0;r<e.length;r++)n.addPt(e[r]);else for(var i=e.length-1;i>=0;i--)n.addPt(e[i])};Re.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};Re.prototype.toString=function(){var e=new K,t=e.createLineString(this.getCoordinates());return t.toString()};Re.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new d(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};Re.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};Re.prototype.interfaces_=function(){return[]};Re.prototype.getClass=function(){return Re};Pp.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(Re,Pp);var J=function(){},Oi={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};J.prototype.interfaces_=function(){return[]};J.prototype.getClass=function(){return J};J.toDegrees=function(e){return e*180/Math.PI};J.normalize=function(e){for(;e>Math.PI;)e-=J.PI_TIMES_2;for(;e<=-Math.PI;)e+=J.PI_TIMES_2;return e};J.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}};J.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=r*o+i*s;return a>0};J.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=r*o+i*s;return a<0};J.interiorAngle=function(e,t,n){var r=J.angle(t,e),i=J.angle(t,n);return Math.abs(i-r)};J.normalizePositive=function(e){if(e<0){for(;e<0;)e+=J.PI_TIMES_2;e>=J.PI_TIMES_2&&(e=0)}else{for(;e>=J.PI_TIMES_2;)e-=J.PI_TIMES_2;e<0&&(e=0)}return e};J.angleBetween=function(e,t,n){var r=J.angle(t,e),i=J.angle(t,n);return J.diff(r,i)};J.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};J.toRadians=function(e){return e*Math.PI/180};J.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?J.COUNTERCLOCKWISE:n<0?J.CLOCKWISE:J.NONE};J.angleBetweenOriented=function(e,t,n){var r=J.angle(t,e),i=J.angle(t,n),o=i-r;return o<=-Math.PI?o+J.PI_TIMES_2:o>Math.PI?o-J.PI_TIMES_2:o};Oi.PI_TIMES_2.get=function(){return 2*Math.PI};Oi.PI_OVER_2.get=function(){return Math.PI/2};Oi.PI_OVER_4.get=function(){return Math.PI/4};Oi.COUNTERCLOCKWISE.get=function(){return P.COUNTERCLOCKWISE};Oi.CLOCKWISE.get=function(){return P.CLOCKWISE};Oi.NONE.get=function(){return P.COLLINEAR};Object.defineProperties(J,Oi);var ht=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new F,this._seg1=new F,this._offset0=new F,this._offset1=new F,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new ei,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===nt.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},es={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ht.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=P.computeOrientation(this._s0,this._s1,this._s2),r=n===P.CLOCKWISE&&this._side===L.LEFT||n===P.COUNTERCLOCKWISE&&this._side===L.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};ht.prototype.addLineEndCap=function(e,t){var n=new F(e,t),r=new F;this.computeOffsetSegment(n,L.LEFT,this._distance,r);var i=new F;this.computeOffsetSegment(n,L.RIGHT,this._distance,i);var o=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case nt.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,a+Math.PI/2,a-Math.PI/2,P.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case nt.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case nt.CAP_SQUARE:var u=new d;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new d(r.p1.x+u.x,r.p1.y+u.y),c=new d(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c);break}};ht.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};ht.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=Ye.intersection(t.p0,t.p1,n.p0,n.p1);var s=r<=0?1:o.distance(e)/Math.abs(r);s>this._bufParams.getMitreLimit()&&(i=!1)}catch(a){if(a instanceof co)o=new d(0,0),i=!1;else throw a}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())};ht.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,o),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===P.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,a,c,r,i),this._segList.addPt(n)};ht.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===nt.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===nt.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};ht.prototype.createSquare=function(e){this._segList.addPt(new d(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new d(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new d(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new d(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};ht.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};ht.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};ht.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};ht.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};ht.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=J.angle(i,this._seg0.p0),s=J.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),a=s/2,u=J.normalize(o+a),l=J.normalize(u+Math.PI),c=r*n,f=c*Math.abs(Math.sin(a)),p=n-f,h=i.x+c*Math.cos(l),g=i.y+c*Math.sin(l),m=new d(h,g),v=new F(i,m),E=v.pointAlongOffset(1,p),I=v.pointAlongOffset(1,-p);this._side===L.LEFT?(this._segList.addPt(E),this._segList.addPt(I)):(this._segList.addPt(I),this._segList.addPt(E))};ht.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===L.LEFT?1:-1,o=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u};ht.prototype.addFilletArc=function(e,t,n,r,i){var o=this,s=r===P.CLOCKWISE?-1:1,a=Math.abs(t-n),u=Math.trunc(a/this._filletAngleQuantum+.5);if(u<1)return null;for(var l=0,c=a/u,f=l,p=new d;f<a;){var h=t+s*f;p.x=e.x+i*Math.cos(h),p.y=e.y+i*Math.sin(h),o._segList.addPt(p),f+=c}};ht.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new d((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new d((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};ht.prototype.createCircle=function(e){var t=new d(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};ht.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};ht.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Re,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*ht.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};ht.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===nt.JOIN_BEVEL||this._bufParams.getJoinStyle()===nt.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,P.CLOCKWISE,this._distance))};ht.prototype.closeRing=function(){this._segList.closeRing()};ht.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};ht.prototype.interfaces_=function(){return[]};ht.prototype.getClass=function(){return ht};es.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};es.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};es.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};es.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(ht,es);var he=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};he.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&Y.reverse(o),o};he.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=bt.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],L.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(e,!1);var a=bt.simplify(e,r),u=a.length-1;n.initSideSegments(a[0],a[1],L.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()};he.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===L.RIGHT&&(r=-r);var i=bt.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var s=1;s<=o;s++){var a=s!==1;n.addNextSegment(i[s],a)}n.closeRing()};he.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=bt.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],L.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var s=bt.simplify(e,-n),a=s.length-1;t.initSideSegments(s[a],s[a-1],L.LEFT);for(var u=a-2;u>=0;u--)t.addNextSegment(s[u],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()};he.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case nt.CAP_ROUND:t.createCircle(e);break;case nt.CAP_SQUARE:t.createSquare(e);break}};he.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var o=r.getCoordinates();return o};he.prototype.getBufferParameters=function(){return this._bufParams};he.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};he.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return he.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()};he.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=bt.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],L.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=bt.simplify(e,r),u=a.length-1;n.initSideSegments(a[0],a[1],L.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()};he.prototype.getSegGen=function(e){return new ht(this._precisionModel,this._bufParams,e)};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new d(e[n]);return t};var di=function(){this._subgraphs=null,this._seg=new F,this._cga=new P;var e=arguments[0];this._subgraphs=e},Tp={DepthSegment:{configurable:!0}};di.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new N,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(q(arguments[2],He)&&arguments[0]instanceof d&&arguments[1]instanceof iu)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){e._seg.p0=l[c],e._seg.p1=l[c+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var f=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(f<s.x)&&!e._seg.isHorizontal()&&!(s.y<e._seg.p0.y||s.y>e._seg.p1.y)&&P.computeOrientation(e._seg.p0,e._seg.p1,s)!==P.RIGHT){var p=a.getDepth(L.LEFT);e._seg.p0.equals(l[c])||(p=a.getDepth(L.RIGHT));var h=new Gr(e._seg,p);u.add(h)}}else if(q(arguments[2],He)&&arguments[0]instanceof d&&q(arguments[1],He))for(var g=arguments[0],m=arguments[1],v=arguments[2],E=m.iterator();E.hasNext();){var I=E.next();I.isForward()&&e.findStabbedSegments(g,I,v)}}};di.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=Qe.min(t);return n._leftDepth};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};Tp.DepthSegment.get=function(){return Gr};Object.defineProperties(di,Tp);var Gr=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new F(e),this._leftDepth=t};Gr.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};Gr.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};Gr.prototype.toString=function(){return this._upwardSeg.toString()};Gr.prototype.interfaces_=function(){return[qe]};Gr.prototype.getClass=function(){return Gr};var rt=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};rt.prototype.area=function(){return rt.area(this.p0,this.p1,this.p2)};rt.prototype.signedArea=function(){return rt.signedArea(this.p0,this.p1,this.p2)};rt.prototype.interpolateZ=function(e){if(e===null)throw new dt("Supplied point is null.");return rt.interpolateZ(e,this.p0,this.p1,this.p2)};rt.prototype.longestSideLength=function(){return rt.longestSideLength(this.p0,this.p1,this.p2)};rt.prototype.isAcute=function(){return rt.isAcute(this.p0,this.p1,this.p2)};rt.prototype.circumcentre=function(){return rt.circumcentre(this.p0,this.p1,this.p2)};rt.prototype.area3D=function(){return rt.area3D(this.p0,this.p1,this.p2)};rt.prototype.centroid=function(){return rt.centroid(this.p0,this.p1,this.p2)};rt.prototype.inCentre=function(){return rt.inCentre(this.p0,this.p1,this.p2)};rt.prototype.interfaces_=function(){return[]};rt.prototype.getClass=function(){return rt};rt.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};rt.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};rt.det=function(e,t,n,r){return e*r-t*n};rt.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,f=e.x-i,p=e.y-o,h=(l*f-a*p)/c,g=(-u*f+s*p)/c,m=t.z+h*(n.z-t.z)+g*(r.z-t.z);return m};rt.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),s=r;return i>s&&(s=i),o>s&&(s=o),s};rt.isAcute=function(e,t,n){return!(!J.isAcute(e,t,n)||!J.isAcute(t,n,e)||!J.isAcute(n,e,t))};rt.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,s=e.y-i,a=t.x-r,u=t.y-i,l=2*rt.det(o,s,a,u),c=rt.det(s,o*o+s*s,u,a*a+u*u),f=rt.det(o,o*o+s*s,a,a*a+u*u),p=r-c/l,h=i+f/l;return new d(p,h)};rt.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new Ye(e.x+n/2,e.y+r/2,1),o=new Ye(e.x-r+n/2,e.y+n+r/2,1);return new Ye(i,o)};rt.angleBisector=function(e,t,n){var r=t.distance(e),i=t.distance(n),o=r/(r+i),s=n.x-e.x,a=n.y-e.y,u=new d(e.x+o*s,e.y+o*a);return u};rt.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,s=n.x-e.x,a=n.y-e.y,u=n.z-e.z,l=i*u-o*a,c=o*s-r*u,f=r*a-i*s,p=l*l+c*c+f*f,h=Math.sqrt(p)/2;return h};rt.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new d(r,i)};rt.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),s=r+i+o,a=(r*e.x+i*t.x+o*n.x)/s,u=(r*e.y+i*t.y+o*n.y)/s;return new d(a,u)};var ze=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new N;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};ze.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,y.EXTERIOR,y.INTERIOR)};ze.prototype.addPolygon=function(e){var t=this,n=this._distance,r=L.LEFT;this._distance<0&&(n=-this._distance,r=L.RIGHT);var i=e.getExteriorRing(),o=Y.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,y.EXTERIOR,y.INTERIOR);for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),u=Y.removeRepeatedPoints(a.getCoordinates());t._distance>0&&t.isErodedCompletely(a,-t._distance)||t.addPolygonRing(u,n,L.opposite(r),y.INTERIOR,y.EXTERIOR)}};ze.prototype.isTriangleErodedCompletely=function(e,t){var n=new rt(e[0],e[1],e[2]),r=n.inCentre(),i=P.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)};ze.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=Y.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,y.EXTERIOR,y.INTERIOR)};ze.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var r=new Lt(e,new st(0,y.BOUNDARY,t,n));this._curveList.add(r)};ze.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};ze.prototype.addPolygonRing=function(e,t,n,r,i){if(t===0&&e.length<Dn.MINIMUM_VALID_SIZE)return null;var o=r,s=i;e.length>=Dn.MINIMUM_VALID_SIZE&&P.isCCW(e)&&(o=i,s=r,n=L.opposite(n));var a=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(a,o,s)};ze.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Ft?this.addPolygon(e):e instanceof vt?this.addLineString(e):e instanceof be?this.addPoint(e):e instanceof Yi?this.addCollection(e):e instanceof kr?this.addCollection(e):e instanceof Rn?this.addCollection(e):e instanceof se&&this.addCollection(e)};ze.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i};ze.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);t.add(r)}};ze.prototype.interfaces_=function(){return[]};ze.prototype.getClass=function(){return ze};var Zi=function(){};Zi.prototype.locate=function(e){};Zi.prototype.interfaces_=function(){return[]};Zi.prototype.getClass=function(){return Zi};var An=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};An.prototype.next=function(){if(this._atStart)return this._atStart=!1,An.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new po;var e=this._parent.getGeometryN(this._index++);return e instanceof se?(this._subcollectionIterator=new An(e),this._subcollectionIterator.next()):e};An.prototype.remove=function(){throw new Error(this.getClass().getName())};An.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};An.prototype.interfaces_=function(){return[fo]};An.prototype.getClass=function(){return An};An.isAtomic=function(e){return!(e instanceof se)};var Ce=function(){this._geom=null;var e=arguments[0];this._geom=e};Ce.prototype.locate=function(e){return Ce.locate(e,this._geom)};Ce.prototype.interfaces_=function(){return[Zi]};Ce.prototype.getClass=function(){return Ce};Ce.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?P.isPointInRing(e,t.getCoordinates()):!1};Ce.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Ce.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(Ce.isPointInRing(e,i))return!1}return!0};Ce.containsPoint=function(e,t){if(t instanceof Ft)return Ce.containsPointInPolygon(e,t);if(t instanceof se)for(var n=new An(t);n.hasNext();){var r=n.next();if(r!==t&&Ce.containsPoint(e,r))return!0}return!1};Ce.locate=function(e,t){return t.isEmpty()?y.EXTERIOR:Ce.containsPoint(e,t)?y.INTERIOR:y.EXTERIOR};var $t=function(){this._edgeMap=new Zt,this._edgeList=null,this._ptInAreaLocation=[y.NONE,y.NONE]};$t.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};$t.prototype.propagateSideLabels=function(e){for(var t=y.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,L.LEFT)!==y.NONE&&(t=i.getLocation(e,L.LEFT))}if(t===y.NONE)return null;for(var o=t,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();if(u.getLocation(e,L.ON)===y.NONE&&u.setLocation(e,L.ON,o),u.isArea(e)){var l=u.getLocation(e,L.LEFT),c=u.getLocation(e,L.RIGHT);if(c!==y.NONE){if(c!==o)throw new ir("side location conflict",a.getCoordinate());l===y.NONE&&W.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),o=l}else W.isTrue(u.getLocation(e,L.LEFT)===y.NONE,"found single null side"),u.setLocation(e,L.RIGHT,o),u.setLocation(e,L.LEFT,o)}}};$t.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};$t.prototype.print=function(e){jt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};$t.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};$t.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,L.LEFT);W.isTrue(i!==y.NONE,"Found unlabelled area edge");for(var o=i,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();W.isTrue(u.isArea(e),"Found non-area edge");var l=u.getLocation(e,L.LEFT),c=u.getLocation(e,L.RIGHT);if(l===c||c!==o)return!1;o=l}return!0};$t.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=t._edgeList.get(n);if(r===e)return n}return-1};$t.prototype.iterator=function(){return this.getEdges().iterator()};$t.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new N(this._edgeMap.values())),this._edgeList};$t.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===y.NONE&&(this._ptInAreaLocation[e]=Ce.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};$t.prototype.toString=function(){var e=new Ln;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};$t.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};$t.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),s=0;s<2;s++)o.isLine(s)&&o.getLocation(s)===y.BOUNDARY&&(n[s]=!0);for(var a=this.iterator();a.hasNext();)for(var u=a.next(),l=u.getLabel(),c=0;c<2;c++)if(l.isAnyNull(c)){var f=y.NONE;if(n[c])f=y.EXTERIOR;else{var p=u.getCoordinate();f=t.getLocation(c,p,e)}l.setAllLocationsIfNull(c,f)}};$t.prototype.getDegree=function(){return this._edgeMap.size()};$t.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};$t.prototype.interfaces_=function(){return[]};$t.prototype.getClass=function(){return $t};var zv=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var a=n._resultAreaEdgeList.get(s),u=a.getSym();if(a.getLabel().isArea())switch(r===null&&a.isInResult()&&(r=a),o){case n._SCANNING_FOR_INCOMING:if(!u.isInResult())continue;i=u,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!a.isInResult())continue;i.setNext(a),o=n._SCANNING_FOR_INCOMING;break}}if(o===this._LINKING_TO_OUTGOING){if(r===null)throw new ir("no outgoing dirEdge found",this.getCoordinate());W.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},t.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var o=n.get(r-1),s=i.getQuadrant(),a=o.getQuadrant();return at.isNorthern(s)&&at.isNorthern(a)?i:!at.isNorthern(s)&&!at.isNorthern(a)?o:i.getDy()!==0?i:o.getDy()!==0?o:(W.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){jt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new N;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.setAllLocationsIfNull(0,n.getLocation(0)),o.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,o=this._edgeList.size()-1;o>=0;o--){var s=n._edgeList.get(o),a=s.getSym();i===null&&(i=a),r!==null&&a.setNext(r),r=s}i.setNext(r)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(L.LEFT),s=r.getDepth(L.RIGHT),a=this.computeDepths(i+1,this._edgeList.size(),o),u=this.computeDepths(0,i,a);if(u!==s)throw new ir("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var l=arguments[0],c=arguments[1],f=arguments[2],p=f,h=l;h<c;h++){var g=n._edgeList.get(h);g.setEdgeDepths(L.RIGHT,p),p=g.getDepth(L.LEFT)}return p}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,s=this._SCANNING_FOR_INCOMING,a=this._resultAreaEdgeList.size()-1;a>=0;a--){var u=r._resultAreaEdgeList.get(a),l=u.getSym();switch(i===null&&u.getEdgeRing()===n&&(i=u),s){case r._SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==n)continue;o=l,s=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(u.getEdgeRing()!==n)continue;o.setNextMin(u),s=r._SCANNING_FOR_INCOMING;break}}s===this._LINKING_TO_OUTGOING&&(W.isTrue(i!==null,"found null for first outgoing dirEdge"),W.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var o=arguments[0],s=0,a=this.iterator();a.hasNext();){var u=a.next();u.getEdgeRing()===o&&s++}return s}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=y.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=y.INTERIOR;break}if(o.isInResult()){n=y.EXTERIOR;break}}}if(n===y.NONE)return null;for(var s=n,a=this.iterator();a.hasNext();){var u=a.next(),l=u.getSym();u.isLineEdge()?u.getEdge().setCovered(s===y.INTERIOR):(u.isInResult()&&(s=y.EXTERIOR),l.isInResult()&&(s=y.INTERIOR))}},t.prototype.computeLabelling=function(n){var r=this;e.prototype.computeLabelling.call(this,n),this._label=new st(y.NONE);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),s=o.getEdge(),a=s.getLabel(),u=0;u<2;u++){var l=a.getLocation(u);(l===y.INTERIOR||l===y.BOUNDARY)&&r._label.setLocation(u,y.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}($t),Rp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new ea(n,new zv)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Hi),Ir=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Ir.prototype.compareTo=function(e){var t=e,n=Ir.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};Ir.prototype.interfaces_=function(){return[qe]};Ir.prototype.getClass=function(){return Ir};Ir.orientation=function(e){return Y.increasingDirection(e)===1};Ir.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,s=t?e.length:-1,a=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(c!==0)return c;u+=i,l+=o;var f=u===s,p=l===a;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var $e=function(){this._edges=new N,this._ocaMap=new Zt};$e.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&e.print(","),e.print(i[o].x+" "+i[o].y);e.println(")")}e.print(")  ")};$e.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};$e.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};$e.prototype.iterator=function(){return this._edges.iterator()};$e.prototype.getEdges=function(){return this._edges};$e.prototype.get=function(e){return this._edges.get(e)};$e.prototype.findEqualEdge=function(e){var t=new Ir(e.getCoordinates()),n=this._ocaMap.get(t);return n};$e.prototype.add=function(e){this._edges.add(e);var t=new Ir(e.getCoordinates());this._ocaMap.put(t,e)};$e.prototype.interfaces_=function(){return[]};$e.prototype.getClass=function(){return $e};var zr=function(){};zr.prototype.processIntersections=function(e,t,n,r){};zr.prototype.isDone=function(){};zr.prototype.interfaces_=function(){return[]};zr.prototype.getClass=function(){return zr};var Ae=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Ae.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(Ae.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};Ae.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Ae.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Ae.prototype.getLineIntersector=function(){return this._li};Ae.prototype.hasProperIntersection=function(){return this._hasProper};Ae.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Ae.prototype.hasIntersection=function(){return this._hasIntersection};Ae.prototype.isDone=function(){return!1};Ae.prototype.hasInteriorIntersection=function(){return this._hasInterior};Ae.prototype.interfaces_=function(){return[zr]};Ae.prototype.getClass=function(){return Ae};Ae.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var vn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new d(e),this.segmentIndex=t,this.dist=n};vn.prototype.getSegmentIndex=function(){return this.segmentIndex};vn.prototype.getCoordinate=function(){return this.coord};vn.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};vn.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};vn.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};vn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};vn.prototype.getDistance=function(){return this.dist};vn.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};vn.prototype.interfaces_=function(){return[qe]};vn.prototype.getClass=function(){return vn};var Bn=function(){this._nodeMap=new Zt,this.edge=null;var e=arguments[0];this.edge=e};Bn.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Bn.prototype.iterator=function(){return this._nodeMap.values().iterator()};Bn.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};Bn.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};Bn.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new d(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=n.edge.pts[u];return o&&(s[a]=t.coord),new ks(s,new st(this.edge._label))};Bn.prototype.add=function(e,t,n){var r=new vn(e,t,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};Bn.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};Bn.prototype.interfaces_=function(){return[]};Bn.prototype.getClass=function(){return Bn};var qr=function(){};qr.prototype.getChainStartIndices=function(e){var t=this,n=0,r=new N;r.add(new hn(n));do{var i=t.findChainEnd(e,n);r.add(new hn(i)),n=i}while(n<e.length-1);var o=qr.toIntArray(r);return o};qr.prototype.findChainEnd=function(e,t){for(var n=at.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=at.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};qr.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var sr=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new D,this.env2=new D;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new qr;this.startIndex=t.getChainStartIndices(this.pts)};sr.prototype.getCoordinates=function(){return this.pts};sr.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};sr.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};sr.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],f=this.pts[o],p=s.pts[a],h=s.pts[u];if(o-i===1&&u-a===1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,f),this.env2.init(p,h),!this.env1.intersects(this.env2))return null;var g=Math.trunc((i+o)/2),m=Math.trunc((a+u)/2);i<g&&(a<m&&this.computeIntersectsForChain(i,g,s,a,m,l),m<u&&this.computeIntersectsForChain(i,g,s,m,u,l)),g<o&&(a<m&&this.computeIntersectsForChain(g,o,s,a,m,l),m<u&&this.computeIntersectsForChain(g,o,s,m,u,l))}};sr.prototype.getStartIndexes=function(){return this.startIndex};sr.prototype.computeIntersects=function(e,t){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<e.startIndex.length-1;i++)n.computeIntersectsForChain(r,e,i,t)};sr.prototype.interfaces_=function(){return[]};sr.prototype.getClass=function(){return sr};var Vt=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},Ap={NULL_VALUE:{configurable:!0}};Vt.prototype.getDepth=function(e,t){return this._depth[e][t]};Vt.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};Vt.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==Vt.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===Vt.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._depth[i][o]===Vt.NULL_VALUE}};Vt.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;e._depth[t][r]>n&&(i=1),e._depth[t][r]=i}}};Vt.prototype.getDelta=function(e){return this._depth[e][L.RIGHT]-this._depth[e][L.LEFT]};Vt.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?y.EXTERIOR:y.INTERIOR};Vt.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Vt.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);(i===y.EXTERIOR||i===y.INTERIOR)&&(e.isNull(n,r)?e._depth[n][r]=Vt.depthAtLocation(i):e._depth[n][r]+=Vt.depthAtLocation(i))}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];a===y.INTERIOR&&this._depth[o][s]++}};Vt.prototype.interfaces_=function(){return[]};Vt.prototype.getClass=function(){return Vt};Vt.depthAtLocation=function(e){return e===y.EXTERIOR?0:e===y.INTERIOR?1:Vt.NULL_VALUE};Ap.NULL_VALUE.get=function(){return-1};Object.defineProperties(Vt,Ap);var ks=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Bn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Vt,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new t(n,st.toLineLabel(this._label));return r},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r=this;if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var o=!0,s=!0,a=this.pts.length,u=0;u<this.pts.length;u++)if(r.pts[u].equals2D(i.pts[u])||(o=!1),r.pts[u].equals2D(i.pts[--a])||(s=!1),!o&&!s)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new sr(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new D;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},t.prototype.addIntersection=function(n,r,i,o){var s=new d(n.getIntersection(o)),a=r,u=n.getEdgeDistance(i,o),l=a+1;if(l<this.pts.length){var c=this.pts[l];s.equals2D(c)&&(a=l,u=0)}this.eiList.add(s,a,u)},t.prototype.toString=function(){var n=this,r=new Ln;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},t.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,r,i){for(var o=this,s=0;s<n.getIntersectionNum();s++)o.addIntersection(n,r,i,s)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,L.ON),n.getLocation(1,L.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,L.LEFT),n.getLocation(1,L.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,L.RIGHT),n.getLocation(1,L.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(Te),oe=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new $e,this._bufParams=e||null};oe.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};oe.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new st(e.getLabel()),r.flip()),n.merge(r);var i=oe.depthDelta(r),o=t.getDepthDelta(),s=o+i;t.setDepthDelta(s)}else this._edgeList.add(e),e.setDepthDelta(oe.depthDelta(e.getLabel()))};oe.prototype.buildSubgraphs=function(e,t){for(var n=new N,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new di(n),a=s.getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}};oe.prototype.createSubgraphs=function(e){for(var t=new N,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new ae;i.create(r),t.add(i)}}return Qe.sort(t,Qe.reverseOrder()),t};oe.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};oe.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new Gu,n=new ei;return n.setPrecisionModel(e),t.setSegmentIntersector(new Ae(n)),t};oe.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new he(n,this._bufParams),i=new ze(e,t,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new _t(new Rp),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),a=new Ee(this._geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this._geomFact.buildGeometry(u);return l};oe.prototype.computeNodedEdges=function(e,t){var n=this,r=this.getNoder(t);r.computeNodes(e);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var s=o.next(),a=s.getCoordinates();if(!(a.length===2&&a[0].equals2D(a[1]))){var u=s.getData(),l=new ks(s.getCoordinates(),new st(u));n.insertUniqueEdge(l)}}};oe.prototype.setNoder=function(e){this._workingNoder=e};oe.prototype.interfaces_=function(){return[]};oe.prototype.getClass=function(){return oe};oe.depthDelta=function(e){var t=e.getLocation(0,L.LEFT),n=e.getLocation(0,L.RIGHT);return t===y.INTERIOR&&n===y.EXTERIOR?1:t===y.EXTERIOR&&n===y.INTERIOR?-1:0};oe.convertSegStrings=function(e){for(var t=new K,n=new N;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var Sr=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Sr.prototype.rescale=function(){var e=this;if(q(arguments[0],Tt))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/e._scaleFactor+e._offsetX,i[o].y=i[o].y/e._scaleFactor+e._offsetY;i.length===2&&i[0].equals2D(i[1])&&jt.out.println(i)}};Sr.prototype.scale=function(){var e=this;if(q(arguments[0],Tt)){for(var t=arguments[0],n=new N,r=t.iterator();r.hasNext();){var i=r.next();n.add(new Lt(e.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new d(Math.round((o[a].x-e._offsetX)*e._scaleFactor),Math.round((o[a].y-e._offsetY)*e._scaleFactor),o[a].z);var u=Y.removeRepeatedPoints(s);return u}};Sr.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};Sr.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};Sr.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};Sr.prototype.interfaces_=function(){return[Br]};Sr.prototype.getClass=function(){return Sr};var bn=function(){this._li=new ei,this._segStrings=null;var e=arguments[0];this._segStrings=e},Mp={fact:{configurable:!0}};bn.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),r=n.getCoordinates();e.checkEndPtVertexIntersections(r[0],e._segStrings),e.checkEndPtVertexIntersections(r[r.length-1],e._segStrings)}else if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new nr("found endpt/interior pt intersection at index "+l+" :pt "+i)}};bn.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();e.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)e.checkInteriorIntersections(o,l,s,c);else if(arguments.length===4){var f=arguments[0],p=arguments[1],h=arguments[2],g=arguments[3];if(f===h&&p===g)return null;var m=f.getCoordinates()[p],v=f.getCoordinates()[p+1],E=h.getCoordinates()[g],I=h.getCoordinates()[g+1];if(this._li.computeIntersection(m,v,E,I),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,m,v)||this.hasInteriorIntersection(this._li,E,I)))throw new nr("found non-noded intersection at "+m+"-"+v+" and "+E+"-"+I)}};bn.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};bn.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])};bn.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!(i.equals(t)||i.equals(n)))return!0}return!1};bn.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new nr("found non-noded collapse at "+bn.fact.createLineString([e,t,n]))};bn.prototype.interfaces_=function(){return[]};bn.prototype.getClass=function(){return bn};Mp.fact.get=function(){return new K};Object.defineProperties(bn,Mp);var ge=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new dt("Scale factor must be non-zero");t!==1&&(this._pt=new d(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new d,this._p1Scaled=new d),this.initCorners(this._pt)},Dp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ge.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(e,t);return W.isTrue(!(s&&a),"Found bad envelope test"),a};ge.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new d(this._maxx,this._maxy),this._corner[1]=new d(this._minx,this._maxy),this._corner[2]=new d(this._minx,this._miny),this._corner[3]=new d(this._maxx,this._miny)};ge.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};ge.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};ge.prototype.getCoordinate=function(){return this._originalPt};ge.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};ge.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=ge.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new D(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};ge.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};ge.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||e.equals(this._pt)||t.equals(this._pt))};ge.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1};ge.prototype.interfaces_=function(){return[]};ge.prototype.getClass=function(){return ge};Dp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(ge,Dp);var jo=function(){this.tempEnv1=new D,this.selectedSegment=new F};jo.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}};jo.prototype.interfaces_=function(){return[]};jo.prototype.getClass=function(){return jo};var Qi=function(){this._index=null;var e=arguments[0];this._index=e},Fp={HotPixelSnapAction:{configurable:!0}};Qi.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new kp(t,n,r);return this._index.query(i,{interfaces_:function(){return[br]},visitItem:function(s){var a=s;a.select(i,o)}}),o.isNodeAdded()}};Qi.prototype.interfaces_=function(){return[]};Qi.prototype.getClass=function(){return Qi};Fp.HotPixelSnapAction.get=function(){return kp};Object.defineProperties(Qi,Fp);var kp=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(jo),yi=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new N};yi.prototype.processIntersections=function(e,t,n,r){var i=this;if(e===n&&t===r)return null;var o=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)i._interiorIntersections.add(i._li.getIntersection(l));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}};yi.prototype.isDone=function(){return!1};yi.prototype.getInteriorIntersections=function(){return this._interiorIntersections};yi.prototype.interfaces_=function(){return[zr]};yi.prototype.getClass=function(){return yi};var Gn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new ei,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};Gn.prototype.checkCorrectness=function(e){var t=Lt.getNodedSubstrings(e),n=new bn(t);try{n.checkValid()}catch(r){if(r instanceof Ep)r.printStackTrace();else throw r}finally{}};Gn.prototype.getNodedSubstrings=function(){return Lt.getNodedSubstrings(this._nodedSegStrings)};Gn.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};Gn.prototype.findInteriorIntersections=function(e,t){var n=new yi(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};Gn.prototype.computeVertexSnaps=function(){var e=this;if(q(arguments[0],Tt))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.computeVertexSnaps(r)}else if(arguments[0]instanceof Lt)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new ge(o[s],e._scaleFactor,e._li),u=e._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}};Gn.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new Gu,this._pointSnapper=new Qi(this._noder.getIndex()),this.snapRound(e,this._li)};Gn.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=new ge(r,t._scaleFactor,t._li);t._pointSnapper.snap(i)}};Gn.prototype.interfaces_=function(){return[Br]};Gn.prototype.getClass=function(){return Gn};var Kt=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new nt,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},ho={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Kt.prototype.bufferFixedPrecision=function(e){var t=new Sr(new Gn(new ot(1)),e.getScale()),n=new oe(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Kt.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=Kt.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(o){if(o instanceof ir)e._saveException=o;else throw o}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=Kt.precisionScaleFactor(this._argGeom,this._distance,n),i=new ot(r);this.bufferFixedPrecision(i)}};Kt.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===ot.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};Kt.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};Kt.prototype.bufferOriginalPrecision=function(){try{var e=new oe(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof nr)this._saveException=t;else throw t}finally{}};Kt.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};Kt.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};Kt.prototype.interfaces_=function(){return[]};Kt.prototype.getClass=function(){return Kt};Kt.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Kt(e),r=n.getResultGeometry(t);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof z&&typeof arguments[1]=="number"){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Kt(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}else if(arguments[2]instanceof nt&&arguments[0]instanceof z&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],f=arguments[2],p=new Kt(l,f),h=p.getResultGeometry(c);return h}}else if(arguments.length===4){var g=arguments[0],m=arguments[1],v=arguments[2],E=arguments[3],I=new Kt(g);I.setQuadrantSegments(v),I.setEndCapStyle(E);var S=I.getResultGeometry(m);return S}};Kt.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Pe.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=t>0?t:0,s=i+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-a,l=Math.pow(10,u);return l};ho.CAP_ROUND.get=function(){return nt.CAP_ROUND};ho.CAP_BUTT.get=function(){return nt.CAP_FLAT};ho.CAP_FLAT.get=function(){return nt.CAP_FLAT};ho.CAP_SQUARE.get=function(){return nt.CAP_SQUARE};ho.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Kt,ho);var re=function(){this._pt=[new d,new d],this._distance=V.NaN,this._isNull=!0};re.prototype.getCoordinates=function(){return this._pt};re.prototype.getCoordinate=function(e){return this._pt[e]};re.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};re.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};re.prototype.getDistance=function(){return this._distance};re.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};re.prototype.interfaces_=function(){return[]};re.prototype.getClass=function(){return re};var Pn=function(){};Pn.prototype.interfaces_=function(){return[]};Pn.prototype.getClass=function(){return Pn};Pn.computeDistance=function(){if(arguments[2]instanceof re&&arguments[0]instanceof vt&&arguments[1]instanceof d)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new F,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof re&&arguments[0]instanceof Ft&&arguments[1]instanceof d){var a=arguments[0],u=arguments[1],l=arguments[2];Pn.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Pn.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof re&&arguments[0]instanceof z&&arguments[1]instanceof d){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof vt)Pn.computeDistance(f,p,h);else if(f instanceof Ft)Pn.computeDistance(f,p,h);else if(f instanceof se)for(var g=f,m=0;m<g.getNumGeometries();m++){var v=g.getGeometryN(m);Pn.computeDistance(v,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof re&&arguments[0]instanceof F&&arguments[1]instanceof d){var E=arguments[0],I=arguments[1],S=arguments[2],O=E.closestPoint(I);S.setMinimum(O,I)}};var Ur=function(e){this._maxPtDist=new re,this._inputGeom=e||null},zu={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ur.prototype.computeMaxMidpointDistance=function(e){var t=new wr(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Ur.prototype.computeMaxVertexDistance=function(e){var t=new mi(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Ur.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Ur.prototype.getDistancePoints=function(){return this._maxPtDist};Ur.prototype.interfaces_=function(){return[]};Ur.prototype.getClass=function(){return Ur};zu.MaxPointDistanceFilter.get=function(){return mi};zu.MaxMidpointDistanceFilter.get=function(){return wr};Object.defineProperties(Ur,zu);var mi=function(e){this._maxPtDist=new re,this._minPtDist=new re,this._geom=e||null};mi.prototype.filter=function(e){this._minPtDist.initialize(),Pn.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};mi.prototype.getMaxPointDistance=function(){return this._maxPtDist};mi.prototype.interfaces_=function(){return[Mn]};mi.prototype.getClass=function(){return mi};var wr=function(e){this._maxPtDist=new re,this._minPtDist=new re,this._geom=e||null};wr.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new d((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Pn.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};wr.prototype.isDone=function(){return!1};wr.prototype.isGeometryChanged=function(){return!1};wr.prototype.getMaxPointDistance=function(){return this._maxPtDist};wr.prototype.interfaces_=function(){return[Je]};wr.prototype.getClass=function(){return wr};var tr=function(e){this._comps=e||null};tr.prototype.filter=function(e){e instanceof Ft&&this._comps.add(e)};tr.prototype.interfaces_=function(){return[dn]};tr.prototype.getClass=function(){return tr};tr.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return tr.getPolygons(e,new N)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Ft?n.add(t):t instanceof se&&t.apply(new tr(n)),n}};var Ut=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};Ut.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof Dn){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof vt&&this._lines.add(e)};Ut.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};Ut.prototype.interfaces_=function(){return[rr]};Ut.prototype.getClass=function(){return Ut};Ut.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(Ut.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(Ut.getLines(t,n))}};Ut.getLines=function(){if(arguments.length===1){var e=arguments[0];return Ut.getLines(e,!1)}else if(arguments.length===2){if(q(arguments[0],Tt)&&q(arguments[1],Tt)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();Ut.getLines(i,n)}return n}else if(arguments[0]instanceof z&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1],a=new N;return o.apply(new Ut(a,s)),a}else if(arguments[0]instanceof z&&q(arguments[1],Tt)){var u=arguments[0],l=arguments[1];return u instanceof vt?l.add(u):u.apply(new Ut(l)),l}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&q(arguments[0],Tt)&&q(arguments[1],Tt)){for(var c=arguments[0],f=arguments[1],p=arguments[2],h=c.iterator();h.hasNext();){var g=h.next();Ut.getLines(g,f,p)}return f}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof z&&q(arguments[1],Tt)){var m=arguments[0],v=arguments[1],E=arguments[2];return m.apply(new Ut(v,E)),v}}};var tn=function(){if(this._boundaryRule=Be.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e===null)throw new dt("Rule must be non-null");this._boundaryRule=e}};tn.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof d&&arguments[1]instanceof Ft){var t=arguments[0],n=arguments[1];if(n.isEmpty())return y.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===y.EXTERIOR)return y.EXTERIOR;if(i===y.BOUNDARY)return y.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=e.locateInPolygonRing(t,s);if(a===y.INTERIOR)return y.EXTERIOR;if(a===y.BOUNDARY)return y.BOUNDARY}return y.INTERIOR}else if(arguments[0]instanceof d&&arguments[1]instanceof vt){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return y.EXTERIOR;var c=l.getCoordinates();return!l.isClosed()&&(u.equals(c[0])||u.equals(c[c.length-1]))?y.BOUNDARY:P.isOnLine(u,c)?y.INTERIOR:y.EXTERIOR}else if(arguments[0]instanceof d&&arguments[1]instanceof be){var f=arguments[0],p=arguments[1],h=p.getCoordinate();return h.equals2D(f)?y.INTERIOR:y.EXTERIOR}};tn.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?P.locatePointInRing(e,t.getCoordinates()):y.EXTERIOR};tn.prototype.intersects=function(e,t){return this.locate(e,t)!==y.EXTERIOR};tn.prototype.updateLocationInfo=function(e){e===y.INTERIOR&&(this._isIn=!0),e===y.BOUNDARY&&this._numBoundaries++};tn.prototype.computeLocation=function(e,t){var n=this;if(t instanceof be&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof vt)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Ft)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof kr)for(var r=t,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(e,o))}else if(t instanceof Rn)for(var s=t,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(e,u))}else if(t instanceof se)for(var l=new An(t);l.hasNext();){var c=l.next();c!==t&&n.computeLocation(e,c)}};tn.prototype.locate=function(e,t){return t.isEmpty()?y.EXTERIOR:t instanceof vt?this.locateInternal(e,t):t instanceof Ft?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?y.BOUNDARY:this._numBoundaries>0||this._isIn?y.INTERIOR:y.EXTERIOR)};tn.prototype.interfaces_=function(){return[]};tn.prototype.getClass=function(){return tn};var ie=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Bp={INSIDE_AREA:{configurable:!0}};ie.prototype.isInsideArea=function(){return this._segIndex===ie.INSIDE_AREA};ie.prototype.getCoordinate=function(){return this._pt};ie.prototype.getGeometryComponent=function(){return this._component};ie.prototype.getSegmentIndex=function(){return this._segIndex};ie.prototype.interfaces_=function(){return[]};ie.prototype.getClass=function(){return ie};Bp.INSIDE_AREA.get=function(){return-1};Object.defineProperties(ie,Bp);var mr=function(e){this._pts=e||null};mr.prototype.filter=function(e){e instanceof be&&this._pts.add(e)};mr.prototype.interfaces_=function(){return[dn]};mr.prototype.getClass=function(){return mr};mr.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof be?Qe.singletonList(e):mr.getPoints(e,new N)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof be?n.add(t):t instanceof se&&t.apply(new mr(n)),n}};var _i=function(){this._locations=null;var e=arguments[0];this._locations=e};_i.prototype.filter=function(e){(e instanceof be||e instanceof vt||e instanceof Ft)&&this._locations.add(new ie(e,0,e.getCoordinate()))};_i.prototype.interfaces_=function(){return[dn]};_i.prototype.getClass=function(){return _i};_i.getLocations=function(e){var t=new N;return e.apply(new _i(t)),t};var Wt=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new tn,this._minDistanceLocation=null,this._minDistance=V.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Wt.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,o=tr.getPolygons(this._geom[n]);if(o.size()>0){var s=_i.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&q(arguments[0],He)&&q(arguments[1],He)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var f=a.get(c),p=0;p<u.size();p++)if(e.computeContainmentDistance(f,u.get(p),l),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ie&&arguments[1]instanceof Ft){var h=arguments[0],g=arguments[1],m=arguments[2],v=h.getCoordinate();if(y.EXTERIOR!==this._ptLocator.locate(v,g))return this._minDistance=0,m[0]=h,m[1]=new ie(g,v),null}}};Wt.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};Wt.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Ut.getLines(this._geom[0]),n=Ut.getLines(this._geom[1]),r=mr.getPoints(this._geom[0]),i=mr.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)};Wt.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};Wt.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};Wt.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};Wt.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof vt&&arguments[1]instanceof be){var t=arguments[0],n=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=P.distancePointLine(o,i[s],i[s+1]);if(a<e._minDistance){e._minDistance=a;var u=new F(i[s],i[s+1]),l=u.closestPoint(o);r[0]=new ie(t,s,l),r[1]=new ie(n,0,o)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof vt&&arguments[1]instanceof vt){var c=arguments[0],f=arguments[1],p=arguments[2];if(c.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var h=c.getCoordinates(),g=f.getCoordinates(),m=0;m<h.length-1;m++)for(var v=0;v<g.length-1;v++){var E=P.distanceLineLine(h[m],h[m+1],g[v],g[v+1]);if(E<e._minDistance){e._minDistance=E;var I=new F(h[m],h[m+1]),S=new F(g[v],g[v+1]),O=I.closestPoints(S);p[0]=new ie(c,m,O[0]),p[1]=new ie(f,v,O[1])}if(e._minDistance<=e._terminateDistance)return null}}}};Wt.prototype.computeMinDistancePoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new ie(o,0,o.getCoordinate()),n[1]=new ie(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};Wt.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new dt("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};Wt.prototype.computeMinDistanceLines=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};Wt.prototype.interfaces_=function(){return[]};Wt.prototype.getClass=function(){return Wt};Wt.distance=function(e,t){var n=new Wt(e,t);return n.distance()};Wt.isWithinDistance=function(e,t,n){var r=new Wt(e,t,n);return r.distance()<=n};Wt.nearestPoints=function(e,t){var n=new Wt(e,t);return n.nearestPoints()};var Jt=function(){this._pt=[new d,new d],this._distance=V.NaN,this._isNull=!0};Jt.prototype.getCoordinates=function(){return this._pt};Jt.prototype.getCoordinate=function(e){return this._pt[e]};Jt.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};Jt.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};Jt.prototype.toString=function(){return Ke.toLineString(this._pt[0],this._pt[1])};Jt.prototype.getDistance=function(){return this._distance};Jt.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};Jt.prototype.interfaces_=function(){return[]};Jt.prototype.getClass=function(){return Jt};var cn=function(){};cn.prototype.interfaces_=function(){return[]};cn.prototype.getClass=function(){return cn};cn.computeDistance=function(){if(arguments[2]instanceof Jt&&arguments[0]instanceof vt&&arguments[1]instanceof d)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new F,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof Jt&&arguments[0]instanceof Ft&&arguments[1]instanceof d){var a=arguments[0],u=arguments[1],l=arguments[2];cn.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)cn.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Jt&&arguments[0]instanceof z&&arguments[1]instanceof d){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof vt)cn.computeDistance(f,p,h);else if(f instanceof Ft)cn.computeDistance(f,p,h);else if(f instanceof se)for(var g=f,m=0;m<g.getNumGeometries();m++){var v=g.getGeometryN(m);cn.computeDistance(v,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Jt&&arguments[0]instanceof F&&arguments[1]instanceof d){var E=arguments[0],I=arguments[1],S=arguments[2],O=E.closestPoint(I);S.setMinimum(O,I)}};var ke=function(){this._g0=null,this._g1=null,this._ptDist=new Jt,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},qu={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ke.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};ke.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new dt("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};ke.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};ke.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};ke.prototype.computeOrientedDistance=function(e,t,n){var r=new vi(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Lr(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}};ke.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};ke.prototype.interfaces_=function(){return[]};ke.prototype.getClass=function(){return ke};ke.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new ke(e,t);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new ke(r,i);return s.setDensifyFraction(o),s.distance()}};qu.MaxPointDistanceFilter.get=function(){return vi};qu.MaxDensifiedByFractionDistanceFilter.get=function(){return Lr};Object.defineProperties(ke,qu);var vi=function(){this._maxPtDist=new Jt,this._minPtDist=new Jt,this._euclideanDist=new cn,this._geom=null;var e=arguments[0];this._geom=e};vi.prototype.filter=function(e){this._minPtDist.initialize(),cn.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};vi.prototype.getMaxPointDistance=function(){return this._maxPtDist};vi.prototype.interfaces_=function(){return[Mn]};vi.prototype.getClass=function(){return vi};var Lr=function(){this._maxPtDist=new Jt,this._minPtDist=new Jt,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};Lr.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var r=e.getCoordinate(t-1),i=e.getCoordinate(t),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,l=r.y+a*s,c=new d(u,l);n._minPtDist.initialize(),cn.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};Lr.prototype.isDone=function(){return!1};Lr.prototype.isGeometryChanged=function(){return!1};Lr.prototype.getMaxPointDistance=function(){return this._maxPtDist};Lr.prototype.interfaces_=function(){return[Je]};Lr.prototype.getClass=function(){return Lr};var _e=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},Uu={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};_e.prototype.checkMaximumDistance=function(e,t,n){var r=new ke(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ke.toLineString(i[0],i[1])+")"}};_e.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=_e.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),_e.VERBOSE&&jt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};_e.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ft||this._input instanceof Rn||this._input instanceof se))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};_e.prototype.getErrorIndicator=function(){return this._errorIndicator};_e.prototype.checkMinimumDistance=function(e,t,n){var r=new Wt(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ke.toLineString(i[0],i[1])+" )"}};_e.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};_e.prototype.getErrorLocation=function(){return this._errorLocation};_e.prototype.getPolygonLines=function(e){for(var t=new N,n=new Ut(t),r=tr.getPolygons(e),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return e.getFactory().buildGeometry(t)};_e.prototype.getErrorMessage=function(){return this._errMsg};_e.prototype.interfaces_=function(){return[]};_e.prototype.getClass=function(){return _e};Uu.VERBOSE.get=function(){return!1};Uu.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(_e,Uu);var Xt=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},Vu={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Xt.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Xt.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Xt.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new D(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new D(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Xt.prototype.checkDistance=function(){var e=new _e(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};Xt.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Xt.prototype.checkPolygonal=function(){this._result instanceof Ft||this._result instanceof Rn||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Xt.prototype.getErrorIndicator=function(){return this._errorIndicator};Xt.prototype.getErrorLocation=function(){return this._errorLocation};Xt.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Xt.prototype.report=function(e){if(!Xt.VERBOSE)return null;jt.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};Xt.prototype.getErrorMessage=function(){return this._errorMsg};Xt.prototype.interfaces_=function(){return[]};Xt.prototype.getClass=function(){return Xt};Xt.isValidMsg=function(e,t,n){var r=new Xt(e,t,n);return r.isValid()?null:r.getErrorMessage()};Xt.isValid=function(e,t,n){var r=new Xt(e,t,n);return!!r.isValid()};Vu.VERBOSE.get=function(){return!1};Vu.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Xt,Vu);var En=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};En.prototype.getCoordinates=function(){return this._pts};En.prototype.size=function(){return this._pts.length};En.prototype.getCoordinate=function(e){return this._pts[e]};En.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};En.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:gi.octant(this.getCoordinate(e),this.getCoordinate(e+1))};En.prototype.setData=function(e){this._data=e};En.prototype.getData=function(){return this._data};En.prototype.toString=function(){return Ke.toLineString(new It(this._pts))};En.prototype.interfaces_=function(){return[kn]};En.prototype.getClass=function(){return En};var zt=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new N,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};zt.prototype.getInteriorIntersection=function(){return this._interiorIntersection};zt.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};zt.prototype.getIntersectionSegments=function(){return this._intSegments};zt.prototype.count=function(){return this._intersectionCount};zt.prototype.getIntersections=function(){return this._intersections};zt.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};zt.prototype.setKeepIntersections=function(e){this._keepIntersections=e};zt.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var o=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=s,this._intSegments[2]=a,this._intSegments[3]=u,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};zt.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};zt.prototype.hasIntersection=function(){return this._interiorIntersection!==null};zt.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};zt.prototype.interfaces_=function(){return[zr]};zt.prototype.getClass=function(){return zt};zt.createAllIntersectionsFinder=function(e){var t=new zt(e);return t.setFindAllIntersections(!0),t};zt.createAnyIntersectionFinder=function(e){return new zt(e)};zt.createIntersectionCounter=function(e){var t=new zt(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var en=function(){this._li=new ei,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};en.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};en.prototype.getIntersections=function(){return this._segInt.getIntersections()};en.prototype.isValid=function(){return this.execute(),this._isValid};en.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};en.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zt(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new Gu;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};en.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ir(this.getErrorMessage(),this._segInt.getInteriorIntersection())};en.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ke.toLineString(e[0],e[1])+" and "+Ke.toLineString(e[2],e[3])};en.prototype.interfaces_=function(){return[]};en.prototype.getClass=function(){return en};en.computeIntersections=function(e){var t=new en(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Vr=function e(){this._nv=null;var t=arguments[0];this._nv=new en(e.toSegmentStrings(t))};Vr.prototype.checkValid=function(){this._nv.checkValid()};Vr.prototype.interfaces_=function(){return[]};Vr.prototype.getClass=function(){return Vr};Vr.toSegmentStrings=function(e){for(var t=new N,n=e.iterator();n.hasNext();){var r=n.next();t.add(new En(r.getCoordinates(),r))}return t};Vr.checkValid=function(e){var t=new Vr(e);t.checkValid()};var bi=function(e){this._mapOp=e};bi.prototype.map=function(e){for(var t=this,n=new N,r=0;r<e.getNumGeometries();r++){var i=t._mapOp.map(e.getGeometryN(r));i.isEmpty()||n.add(i)}return e.getFactory().createGeometryCollection(K.toGeometryArray(n))};bi.prototype.interfaces_=function(){return[]};bi.prototype.getClass=function(){return bi};bi.map=function(e,t){var n=new bi(t);return n.map(e)};var In=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new N,this._resultLineList=new N;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};In.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();t.collectLineEdge(r,e,t._lineEdgesList),t.collectBoundaryTouchEdge(r,e,t._lineEdgesList)}};In.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};In.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};In.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&j.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))};In.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var s=e._op.isCoveredByA(i.getCoordinate());o.setCovered(s)}}};In.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?t.labelIsolatedLine(r,0):t.labelIsolatedLine(r,1))}};In.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=t._geometryFactory.createLineString(r.getCoordinates());t._resultLineList.add(i),r.setInResult(!0)}};In.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;W.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),j.isResultOfOp(r,t)&&t===j.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};In.prototype.interfaces_=function(){return[]};In.prototype.getClass=function(){return In};var Ei=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new N;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Ei.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Ei.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||e===j.INTERSECTION)){var i=r.getLabel();j.isResultOfOp(i,e)&&t.filterCoveredNodeToPoint(r)}}};Ei.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Ei.prototype.interfaces_=function(){return[]};Ei.prototype.getClass=function(){return Ei};var de=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};de.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};de.prototype.transformPolygon=function(e,t){var n=this,r=!0,i=this.transformLinearRing(e.getExteriorRing(),e);(i===null||!(i instanceof Dn)||i.isEmpty())&&(r=!1);for(var o=new N,s=0;s<e.getNumInteriorRing();s++){var a=n.transformLinearRing(e.getInteriorRingN(s),e);a===null||a.isEmpty()||(a instanceof Dn||(r=!1),o.add(a))}if(r)return this._factory.createPolygon(i,o.toArray([]));var u=new N;return i!==null&&u.add(i),u.addAll(o),this._factory.buildGeometry(u)};de.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};de.prototype.getInputGeometry=function(){return this._inputGeom};de.prototype.transformMultiLineString=function(e,t){for(var n=this,r=new N,i=0;i<e.getNumGeometries();i++){var o=n.transformLineString(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};de.prototype.transformCoordinates=function(e,t){return this.copy(e)};de.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};de.prototype.transformMultiPoint=function(e,t){for(var n=this,r=new N,i=0;i<e.getNumGeometries();i++){var o=n.transformPoint(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};de.prototype.transformMultiPolygon=function(e,t){for(var n=this,r=new N,i=0;i<e.getNumGeometries();i++){var o=n.transformPolygon(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};de.prototype.copy=function(e){return e.copy()};de.prototype.transformGeometryCollection=function(e,t){for(var n=this,r=new N,i=0;i<e.getNumGeometries();i++){var o=n.transform(e.getGeometryN(i));o!==null&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(K.toGeometryArray(r)):this._factory.buildGeometry(r)};de.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof be)return this.transformPoint(e,null);if(e instanceof Yi)return this.transformMultiPoint(e,null);if(e instanceof Dn)return this.transformLinearRing(e,null);if(e instanceof vt)return this.transformLineString(e,null);if(e instanceof kr)return this.transformMultiLineString(e,null);if(e instanceof Ft)return this.transformPolygon(e,null);if(e instanceof Rn)return this.transformMultiPolygon(e,null);if(e instanceof se)return this.transformGeometryCollection(e,null);throw new dt("Unknown Geometry subtype: "+e.getClass().getName())};de.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};de.prototype.interfaces_=function(){return[]};de.prototype.getClass=function(){return de};var zn=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new F,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof vt&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};zn.prototype.snapVertices=function(e,t){for(var n=this,r=this._isClosed?e.size()-1:e.size(),i=0;i<r;i++){var o=e.get(i),s=n.findSnapForVertex(o,t);s!==null&&(e.set(i,new d(s)),i===0&&n._isClosed&&e.set(e.size()-1,new d(s)))}};zn.prototype.findSnapForVertex=function(e,t){for(var n=this,r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<n._snapTolerance)return t[r]}return null};zn.prototype.snapTo=function(e){var t=new Zo(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};zn.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var i=0;i<r;i++){var o=t[i],s=n.findSegmentIndexToSnap(o,e);s>=0&&e.add(s+1,new d(o),!1)}};zn.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,r=V.MAX_VALUE,i=-1,o=0;o<t.size()-1;o++){if(n._seg.p0=t.get(o),n._seg.p1=t.get(o+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(e);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i};zn.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};zn.prototype.interfaces_=function(){return[]};zn.prototype.getClass=function(){return zn};zn.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var St=function(e){this._srcGeom=e||null},Gp={SNAP_PRECISION_FACTOR:{configurable:!0}};St.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),r=new zp(t,n);return r.transform(this._srcGeom)};St.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new zp(e,n,!0),i=r.transform(this._srcGeom),o=i;return t&&q(o,vr)&&(o=i.buffer(0)),o};St.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};St.prototype.extractTargetCoordinates=function(e){for(var t=new gn,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))};St.prototype.computeMinimumSegmentLength=function(e){for(var t=V.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t};St.prototype.interfaces_=function(){return[]};St.prototype.getClass=function(){return St};St.snap=function(e,t,n){var r=new Array(2).fill(null),i=new St(e);r[0]=i.snapTo(t,n);var o=new St(t);return r[1]=o.snapTo(r[0],n),r};St.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=St.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===ot.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return Math.min(St.computeOverlaySnapTolerance(i),St.computeOverlaySnapTolerance(o))}};St.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*St.SNAP_PRECISION_FACTOR;return r};St.snapToSelf=function(e,t,n){var r=new St(e);return r.snapToSelf(t,n)};Gp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(St,Gp);var zp=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,r){var i=new zn(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},t.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(de),ne=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ne.prototype.getCommon=function(){return V.longBitsToDouble(this._commonBits)};ne.prototype.add=function(e){var t=V.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=ne.signExpBits(this._commonBits),this._isFirst=!1,null;var n=ne.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=ne.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=ne.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};ne.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=V.longBitsToDouble(e),n=V.toBinaryString(e),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return o}};ne.prototype.interfaces_=function(){return[]};ne.prototype.getClass=function(){return ne};ne.getBit=function(e,t){var n=1<<t;return e&n?1:0};ne.signExpBits=function(e){return e>>52};ne.zeroLowerBits=function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i};ne.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(ne.getBit(e,r)!==ne.getBit(t,r))return n;n++}return 52};var Nr=function(){this._commonCoord=null,this._ccFilter=new Ii},ju={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Nr.prototype.addCommonBits=function(e){var t=new xr(this._commonCoord);e.apply(t),e.geometryChanged()};Nr.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new d(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new xr(t);return e.apply(n),e.geometryChanged(),e};Nr.prototype.getCommonCoordinate=function(){return this._commonCoord};Nr.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};Nr.prototype.interfaces_=function(){return[]};Nr.prototype.getClass=function(){return Nr};ju.CommonCoordinateFilter.get=function(){return Ii};ju.Translater.get=function(){return xr};Object.defineProperties(Nr,ju);var Ii=function(){this._commonBitsX=new ne,this._commonBitsY=new ne};Ii.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};Ii.prototype.getCommonCoordinate=function(){return new d(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};Ii.prototype.interfaces_=function(){return[Mn]};Ii.prototype.getClass=function(){return Ii};var xr=function(){this.trans=null;var e=arguments[0];this.trans=e};xr.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)};xr.prototype.isDone=function(){return!1};xr.prototype.isGeometryChanged=function(){return!0};xr.prototype.interfaces_=function(){return[Je]};xr.prototype.getClass=function(){return xr};var qt=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};qt.prototype.selfSnap=function(e){var t=new St(e),n=t.snapTo(e,this._snapTolerance);return n};qt.prototype.removeCommonBits=function(e){this._cbr=new Nr,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};qt.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};qt.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=j.overlayOp(t[0],t[1],e);return this.prepareResult(n)};qt.prototype.checkValid=function(e){e.isValid()||jt.out.println("Snapped geometry is invalid")};qt.prototype.computeSnapTolerance=function(){this._snapTolerance=St.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};qt.prototype.snap=function(e){var t=this.removeCommonBits(e),n=St.snap(t[0],t[1],this._snapTolerance);return n};qt.prototype.interfaces_=function(){return[]};qt.prototype.getClass=function(){return qt};qt.overlayOp=function(e,t,n){var r=new qt(e,t);return r.getResultGeometry(n)};qt.union=function(e,t){return qt.overlayOp(e,t,j.UNION)};qt.intersection=function(e,t){return qt.overlayOp(e,t,j.INTERSECTION)};qt.symDifference=function(e,t){return qt.overlayOp(e,t,j.SYMDIFFERENCE)};qt.difference=function(e,t){return qt.overlayOp(e,t,j.DIFFERENCE)};var le=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};le.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=j.overlayOp(this._geom[0],this._geom[1],e);var i=!0;i&&(n=!0)}catch(o){if(o instanceof nr)r=o;else throw o}finally{}if(!n)try{t=qt.overlayOp(this._geom[0],this._geom[1],e)}catch(o){throw o instanceof nr?r:o}finally{}return t};le.prototype.interfaces_=function(){return[]};le.prototype.getClass=function(){return le};le.overlayOp=function(e,t,n){var r=new le(e,t);return r.getResultGeometry(n)};le.union=function(e,t){return le.overlayOp(e,t,j.UNION)};le.intersection=function(e,t){return le.overlayOp(e,t,j.INTERSECTION)};le.symDifference=function(e,t){return le.overlayOp(e,t,j.SYMDIFFERENCE)};le.difference=function(e,t){return le.overlayOp(e,t,j.DIFFERENCE)};var Wo=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};Wo.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};Wo.prototype.interfaces_=function(){return[]};Wo.prototype.getClass=function(){return Wo};var Se=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},Wu={INSERT:{configurable:!0},DELETE:{configurable:!0}};Se.prototype.isDelete=function(){return this._eventType===Se.DELETE};Se.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};Se.prototype.getObject=function(){return this._obj};Se.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};Se.prototype.getInsertEvent=function(){return this._insertEvent};Se.prototype.isInsert=function(){return this._eventType===Se.INSERT};Se.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};Se.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Se.prototype.interfaces_=function(){return[qe]};Se.prototype.getClass=function(){return Se};Wu.INSERT.get=function(){return 1};Wu.DELETE.get=function(){return 2};Object.defineProperties(Se,Wu);var Bs=function(){};Bs.prototype.interfaces_=function(){return[]};Bs.prototype.getClass=function(){return Bs};var Yt=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};Yt.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(Yt.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};Yt.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Yt.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};Yt.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Yt.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1};Yt.prototype.hasProperIntersection=function(){return this._hasProper};Yt.prototype.hasIntersection=function(){return this._hasIntersection};Yt.prototype.isDone=function(){return this._isDone};Yt.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};Yt.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};Yt.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};Yt.prototype.interfaces_=function(){return[]};Yt.prototype.getClass=function(){return Yt};Yt.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var qv=function(e){function t(){e.call(this),this.events=new N,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;Qe.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=n.events.get(i);if(o.isInsert()&&n.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Yt&&q(arguments[0],He)&&q(arguments[1],He)){var s=arguments[0],a=arguments[1],u=arguments[2];this.addEdges(s,s),this.addEdges(a,a),this.computeIntersections(u)}else if(typeof arguments[2]=="boolean"&&q(arguments[0],He)&&arguments[1]instanceof Yt){var l=arguments[0],c=arguments[1],f=arguments[2];f?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(c)}}},t.prototype.addEdge=function(n,r){for(var i=this,o=n.getMonotoneChainEdge(),s=o.getStartIndexes(),a=0;a<s.length-1;a++){var u=new Wo(o,a),l=new Se(r,o.getMinX(a),u);i.events.add(l),i.events.add(new Se(o.getMaxX(a),l))}},t.prototype.processOverlaps=function(n,r,i,o){for(var s=this,a=i.getObject(),u=n;u<r;u++){var l=s.events.get(u);if(l.isInsert()){var c=l.getObject();i.isSameLabel(l)||(a.computeIntersections(c,o),s.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var o=i.next();n.addEdge(o,o)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.iterator();u.hasNext();){var l=u.next();n.addEdge(l,a)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bs),qn=function(){this._min=V.POSITIVE_INFINITY,this._max=V.NEGATIVE_INFINITY},qp={NodeComparator:{configurable:!0}};qn.prototype.getMin=function(){return this._min};qn.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};qn.prototype.getMax=function(){return this._max};qn.prototype.toString=function(){return Ke.toLineString(new d(this._min,0),new d(this._max,0))};qn.prototype.interfaces_=function(){return[]};qn.prototype.getClass=function(){return qn};qp.NodeComparator.get=function(){return Xo};Object.defineProperties(qn,qp);var Xo=function(){};Xo.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0};Xo.prototype.interfaces_=function(){return[zi]};Xo.prototype.getClass=function(){return Xo};var Uv=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(qn),Vv=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(qn),Un=function(){this._leaves=new N,this._root=null,this._level=0};Un.prototype.buildTree=function(){var e=this;Qe.sort(this._leaves,new qn.NodeComparator);for(var t=this._leaves,n=null,r=new N;;){if(e.buildLevel(t,r),r.size()===1)return r.get(0);n=t,t=r,r=n}};Un.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Uv(e,t,n))};Un.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};Un.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Un.prototype.printNode=function(e){jt.out.println(Ke.toLineString(new d(e._min,this._level),new d(e._max,this._level)))};Un.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Un.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(i===null)t.add(r);else{var o=new Vv(e.get(n),e.get(n+1));t.add(o)}}};Un.prototype.interfaces_=function(){return[]};Un.prototype.getClass=function(){return Un};var $i=function(){this._items=new N};$i.prototype.visitItem=function(e){this._items.add(e)};$i.prototype.getItems=function(){return this._items};$i.prototype.interfaces_=function(){return[br]};$i.prototype.getClass=function(){return $i};var to=function(){this._index=null;var e=arguments[0];if(!q(e,vr))throw new dt("Argument must be Polygonal");this._index=new jr(e)},Xu={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};to.prototype.locate=function(e){var t=new fn(e),n=new eo(t);return this._index.query(e.y,e.y,n),t.getLocation()};to.prototype.interfaces_=function(){return[Zi]};to.prototype.getClass=function(){return to};Xu.SegmentVisitor.get=function(){return eo};Xu.IntervalIndexedGeometry.get=function(){return jr};Object.defineProperties(to,Xu);var eo=function(){this._counter=null;var e=arguments[0];this._counter=e};eo.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};eo.prototype.interfaces_=function(){return[br]};eo.prototype.getClass=function(){return eo};var jr=function(){this._index=new Un;var e=arguments[0];this.init(e)};jr.prototype.init=function(e){for(var t=this,n=Ut.getLines(e),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();t.addLine(o)}};jr.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var r=new F(e[n-1],e[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);t._index.insert(i,o,r)}};jr.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new $i;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}};jr.prototype.interfaces_=function(){return[]};jr.prototype.getClass=function(){return jr};var Io=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new Lp,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new tn,arguments.length===2){var n=arguments[0],r=arguments[1],i=Be.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this._argIndex=o,this._parentGeom=s,this._boundaryNodeRule=a,s!==null&&this.add(s)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),o=i.getLabel(),s=1,a=y.NONE;a=o.getLocation(n,L.ON),a===y.BOUNDARY&&s++;var u=t.determineBoundary(this._boundaryNodeRule,s);o.setLocation(n,u)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Yt(i,!0,!1);a.setIsDoneIfProperInt(s);var u=this.createEdgeSetIntersector(),l=this._parentGeom instanceof Dn||this._parentGeom instanceof Ft||this._parentGeom instanceof Rn,c=o||!l;return u.computeIntersections(this._edges,a,c),this.addSelfIntersectionNodes(this._argIndex),a}},t.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,r,i){var o=new Yt(r,i,!0);o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this._edges,n._edges,o),o},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof be){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,y.INTERIOR)}else if(arguments[0]instanceof d){var i=arguments[0];this.insertPoint(this._argIndex,i,y.INTERIOR)}},t.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),y.EXTERIOR,y.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);r.addPolygonRing(o,y.INTERIOR,y.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],y.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],y.BOUNDARY)},t.prototype.addLineString=function(n){var r=Y.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new ks(r,new st(this._argIndex,y.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),W.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var s=o.next();r[i++]=s.getCoordinate().copy()}return r},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===y.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},t.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=Y.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var s=r,a=i;P.isCCW(o)&&(s=i,a=r);var u=new ks(o,new st(this._argIndex,y.BOUNDARY,s,a));this._lineEdgeMap.put(n,u),this.insertEdge(u),this.insertPoint(this._argIndex,o[0],y.BOUNDARY)},t.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),s=o.getLabel();s===null?o._label=new st(n,i):s.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new qv},t.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var o=i.next(),s=o.getLabel().getLocation(n),a=o.eiList.iterator();a.hasNext();){var u=a.next();r.addSelfIntersectionNode(n,u.coord,s)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Rn&&(this._useBoundaryDeterminationRule=!1),n instanceof Ft)this.addPolygon(n);else if(n instanceof vt)this.addLineString(n);else if(n instanceof be)this.addPoint(n);else if(n instanceof Yi)this.addCollection(n);else if(n instanceof kr)this.addCollection(n);else if(n instanceof Rn)this.addCollection(n);else if(n instanceof se)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.add(o)}},t.prototype.locate=function(n){return q(this._parentGeom,vr)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new to(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,r){return n.isInBoundary(r)?y.BOUNDARY:y.INTERIOR},t}(_t),no=function(){if(this._li=new ei,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Io(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=Be.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Io(0,t,r),this._arg[1]=new Io(1,n,r)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Io(0,i,s),this._arg[1]=new Io(1,o,s)}};no.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};no.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};no.prototype.interfaces_=function(){return[]};no.prototype.getClass=function(){return no};var Dr=function(){};Dr.prototype.interfaces_=function(){return[]};Dr.prototype.getClass=function(){return Dr};Dr.map=function(){if(arguments[0]instanceof z&&q(arguments[1],Dr.MapOp)){for(var e=arguments[0],t=arguments[1],n=new N,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));i!==null&&n.add(i)}return e.getFactory().buildGeometry(n)}else if(q(arguments[0],Tt)&&q(arguments[1],Dr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new N,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);c!==null&&a.add(c)}return a}};Dr.MapOp=function(){};var j=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new tn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new $e,this._resultPolyList=new N,this._resultLineList=new N,this._resultPointList=new N,this._graph=new _t(new Rp),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new st(n.getLabel()),o.flip());var s=r.getDepth();s.isNull()&&s.add(i),s.add(o),i.merge(o)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,r,i,o){var s=new N;return s.addAll(n),s.addAll(r),s.addAll(i),s.isEmpty()?t.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,r){for(var i=this,o=r.iterator();o.hasNext();){var s=o.next(),a=i._ptLocator.locate(n,s);if(a!==y.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new N,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();r.insertUniqueEdge(o)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new N;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new Ee(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new In(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var s=new Ei(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},t.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var o=i.next(),s=r._graph.addNode(o.getCoordinate());s.setLabel(n,o.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(o.getLocation(0,L.RIGHT),o.getLocation(1,L.RIGHT),n)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var s=0;s<2;s++)!i.isNull(s)&&i.isArea()&&!o.isNull(s)&&(o.getDelta(s)===0?i.toLine(s):(W.isTrue(!o.isNull(s,L.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(s,L.LEFT,o.getLocation(s,L.LEFT)),W.isTrue(!o.isNull(s,L.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(s,L.RIGHT,o.getLocation(s,L.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(o)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(no);j.overlayOp=function(e,t,n){var r=new j(e,t),i=r.getResultGeometry(n);return i};j.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return j.createEmptyResult(j.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return bi.map(e,{interfaces_:function(){return[Dr.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),le.overlayOp(e,t,j.INTERSECTION)};j.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return j.createEmptyResult(j.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),le.overlayOp(e,t,j.SYMDIFFERENCE)};j.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case j.INTERSECTION:o=Math.min(r,i);break;case j.UNION:o=Math.max(r,i);break;case j.DIFFERENCE:o=r;break;case j.SYMDIFFERENCE:o=Math.max(r,i);break}return o};j.createEmptyResult=function(e,t,n,r){var i=null;switch(j.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};j.difference=function(e,t){return e.isEmpty()?j.createEmptyResult(j.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),le.overlayOp(e,t,j.DIFFERENCE))};j.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return j.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===y.BOUNDARY&&(i=y.INTERIOR),o===y.BOUNDARY&&(o=y.INTERIOR),s){case j.INTERSECTION:return i===y.INTERIOR&&o===y.INTERIOR;case j.UNION:return i===y.INTERIOR||o===y.INTERIOR;case j.DIFFERENCE:return i===y.INTERIOR&&o!==y.INTERIOR;case j.SYMDIFFERENCE:return i===y.INTERIOR&&o!==y.INTERIOR||i!==y.INTERIOR&&o===y.INTERIOR}return!1}};j.INTERSECTION=1;j.UNION=2;j.DIFFERENCE=3;j.SYMDIFFERENCE=4;var _r=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new tn,this._seg=new F;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};_r.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=t._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,t._seg.p0),i.getCoordinate(o+1,t._seg.p1);var s=t._seg.distance(e);if(s<=t._boundaryDistanceTolerance)return!0}return!1};_r.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?y.BOUNDARY:this._ptLocator.locate(e,this._g)};_r.prototype.extractLinework=function(e){var t=new ro;e.apply(t);var n=t.getLinework(),r=K.toLineStringArray(n);return e.getFactory().createMultiLineString(r)};_r.prototype.interfaces_=function(){return[]};_r.prototype.getClass=function(){return _r};var ro=function(){this._linework=null,this._linework=new N};ro.prototype.getLinework=function(){return this._linework};ro.prototype.filter=function(e){var t=this;if(e instanceof Ft){var n=e;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)t._linework.add(n.getInteriorRingN(r))}};ro.prototype.interfaces_=function(){return[dn]};ro.prototype.getClass=function(){return ro};var Wr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Wr.prototype.extractPoints=function(e,t,n){for(var r=this,i=e.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],t,n)};Wr.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Wr.prototype.getPoints=function(e){for(var t=this,n=new N,r=Ut.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();t.extractPoints(o,e,n)}return n};Wr.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(t.x+e.x)/2,c=(t.y+e.y)/2;if(this._doLeft){var f=new d(l-u,c+a);r.add(f)}if(this._doRight){var p=new d(l+u,c-a);r.add(p)}};Wr.prototype.interfaces_=function(){return[]};Wr.prototype.getClass=function(){return Wr};var Me=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new N;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new _r(this._geom[0],this._boundaryDistanceTolerance),new _r(this._geom[1],this._boundaryDistanceTolerance),new _r(this._geom[2],this._boundaryDistanceTolerance)]},Up={TOLERANCE:{configurable:!0}};Me.prototype.reportResult=function(e,t,n){jt.out.println("Overlay result invalid - A:"+y.toLocationSymbol(t[0])+" B:"+y.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+y.toLocationSymbol(t[2]))};Me.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};Me.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var r=e._testCoords.get(n);if(!e.checkValid(t,r))return e._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),Me.hasLocation(this._location,y.BOUNDARY)?!0:this.isValidResult(i,this._location)}};Me.prototype.addTestPts=function(e){var t=new Wr(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};Me.prototype.isValidResult=function(e,t){var n=j.isResultOfOp(t[0],t[1],e),r=t[2]===y.INTERIOR,i=!(n^r);return i||this.reportResult(e,t,n),i};Me.prototype.getInvalidLocation=function(){return this._invalidLocation};Me.prototype.interfaces_=function(){return[]};Me.prototype.getClass=function(){return Me};Me.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};Me.computeBoundaryDistanceTolerance=function(e,t){return Math.min(St.computeSizeBasedSnapTolerance(e),St.computeSizeBasedSnapTolerance(t))};Me.isValid=function(e,t,n,r){var i=new Me(e,t,r);return i.isValid(n)};Up.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Me,Up);var Ne=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Ne.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);n._skipEmpty&&i.isEmpty()||t.add(i)}};Ne.prototype.combine=function(){for(var e=this,t=new N,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();e.extractElements(r,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Ne.combine=function(){if(arguments.length===1){var e=arguments[0],t=new Ne(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Ne(Ne.createList(n,r));return i.combine()}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Ne(Ne.createList(o,s,a));return u.combine()}};Ne.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};Ne.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new N;return n.add(e),n.add(t),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new N;return s.add(r),s.add(i),s.add(o),s}};var Ct=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new N)},Vp={STRTREE_NODE_CAPACITY:{configurable:!0}};Ct.prototype.reduceToGeometries=function(e){for(var t=this,n=new N,r=e.iterator();r.hasNext();){var i=r.next(),o=null;q(i,He)?o=t.unionTree(i):i instanceof z&&(o=i),n.add(o)}return n};Ct.prototype.extractByEnvelope=function(e,t,n){for(var r=new N,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)};Ct.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Ne.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,o)};Ct.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new Cp(Ct.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree(),i=this.unionTree(r);return i};Ct.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ct.getGeometry(t,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(Ct.getGeometry(t,n),Ct.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(t,n,o),a=this.binaryUnion(t,o,r);return this.unionSafe(s,a)}}};Ct.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t===null?t=r.copy():t=t.union(r)}return t};Ct.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};Ct.prototype.unionActual=function(e,t){return Ct.restrictToPolygons(e.union(t))};Ct.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};Ct.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new N,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),s=this.unionActual(i,o);r.add(s);var a=Ne.combine(r);return a};Ct.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}};Ct.prototype.interfaces_=function(){return[]};Ct.prototype.getClass=function(){return Ct};Ct.restrictToPolygons=function(e){if(q(e,vr))return e;var t=tr.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(K.toPolygonArray(t))};Ct.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};Ct.union=function(e){var t=new Ct(e);return t.union()};Vp.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(Ct,Vp);var Gs=function(){};Gs.prototype.interfaces_=function(){return[]};Gs.prototype.getClass=function(){return Gs};Gs.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return j.createEmptyResult(j.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),le.overlayOp(e,t,j.UNION)};function ni(){return new zs}function zs(){this.reset()}zs.prototype={constructor:zs,reset:function(){this.s=this.t=0},add:function(e){zc(ss,e,this.t),zc(this,ss.s,this.s),this.s?this.t+=ss.t:this.s=ss.t},valueOf:function(){return this.s}};var ss=new zs;function zc(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var ou=Math.PI,qc=ou*2;ni();ni();ni();function Uc(e,t){return[e>ou?e-qc:e<-ou?e+qc:e,t]}Uc.invert=Uc;function jp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jv(e){return e.length===1&&(e=Wv(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function Wv(e){return function(t,n){return jp(e(t),n)}}jv(jp);ni();ni();ni();ni();ni();function Vc(){}Vc.prototype={constructor:Vc,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function jc(e,t){return[e,t]}jc.invert=jc;const Xv=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],Yv={decimalLatitude:40.123,decimalLongitude:-74.123},Hv=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],Kv=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222}];function Jv(){const e=[];return Xv.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...Yv})}),[...e,...Hv,...Kv]}const Zv=Jv();Zv.map(e=>e.verbatimCoordinates);const Qv=Symbol.for("svelte-maplibre");function $v(){return $p(Qv)}function t0(e){return"layerType"in e&&e.layerType==="deckgl"}const e0=e=>({features:e[0]&16,data:e[0]&16,map:e[0]&4,close:e[0]&1}),Wc=e=>{var t;return{features:e[4],data:(t=e[4])==null?void 0:t[0],map:e[2],close:e[31]}};function Xc(e){let t,n,r=(e[4]||e[3]instanceof oi.Marker)&&Yc(e);return{c(){t=yt("div"),r&&r.c()},m(i,o){tt(i,t,o),r&&r.m(t,null),e[32](t),n=!0},p(i,o){i[4]||i[3]instanceof oi.Marker?r?(r.p(i,o),o[0]&24&&U(r,1)):(r=Yc(i),r.c(),U(r,1),r.m(t,null)):r&&(Xr(),X(r,1,1,()=>{r=null}),Yr())},i(i){n||(U(r),n=!0)},o(i){X(r),n=!1},d(i){i&&et(t),r&&r.d(),e[32](null)}}}function Yc(e){let t;const n=e[30].default,r=Hr(n,e,e[29],Wc);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o[0]&536870933)&&Kr(r,n,i,i[29],t?Zr(n,i[29],o,e0):Jr(i[29]),Wc)},i(i){t||(U(r,i),t=!0)},o(i){X(r,i),t=!1},d(i){r&&r.d(i)}}}function n0(e){let t,n,r=e[9].default&&Xc(e);return{c(){r&&r.c(),t=io()},m(i,o){r&&r.m(i,o),tt(i,t,o),n=!0},p(i,o){i[9].default?r?(r.p(i,o),o[0]&512&&U(r,1)):(r=Xc(i),r.c(),U(r,1),r.m(t.parentNode,t)):r&&(Xr(),X(r,1,1,()=>{r=null}),Yr())},i(i){n||(U(r),n=!0)},o(i){X(r),n=!1},d(i){i&&et(t),r&&r.d(i)}}}function r0(e,t,n){let r,i,o,s,a,u,{$$slots:l={},$$scope:c}=t;const f=th(l);let{closeButton:p=void 0}=t,{closeOnClickOutside:h=!0}=t,{closeOnClickInside:g=!1}=t,{closeOnMove:m=!1}=t,{openOn:v="click"}=t,{openIfTopMost:E=!0}=t,{focusAfterOpen:I=!0}=t,{anchor:S=void 0}=t,{offset:O=void 0}=t,{popupClass:R=void 0}=t,{maxWidth:k=void 0}=t,{lngLat:B=void 0}=t,{html:x=void 0}=t,{open:A=!1}=t;const G=su(),{map:b,popupTarget:T,layerEvent:Z,layer:Pt,eventTopMost:me}=$v();xe(e,b,w=>n(2,o=w)),xe(e,T,w=>n(3,a=w)),xe(e,Z,w=>n(28,s=w)),xe(e,Pt,w=>n(35,u=w));const ce=["click","dblclick","contextmenu"];let C,Ht=!1,ut;function Ve(){if(!C)return;let w=C.getElement();!w||w===ut||(ut=w,v==="hover"&&(ut.style.pointerEvents="none"),ut.addEventListener("mouseenter",()=>{n(24,Ht=!0)},{passive:!0}),ut.addEventListener("mouseleave",()=>{n(24,Ht=!1)},{passive:!0}),ut.addEventListener("click",()=>{g&&n(0,A=!1)},{passive:!0}))}tf(()=>{if(o)return o.on("click",ri),o.on("contextmenu",ri),typeof a=="string"&&(o.on("click",a,kt),o.on("dblclick",a,kt),o.on("contextmenu",a,kt),o.on("mousemove",a,yo),o.on("mouseleave",a,go),o.on("touchstart",a,je),o.on("touchend",a,fr)),()=>{o!=null&&o.loaded()&&(C==null||C.remove(),o.off("click",ri),o.off("contextmenu",ri),a instanceof oi.Marker?a.getPopup()===C&&a.setPopup(void 0):typeof a=="string"&&(o.off("click",a,kt),o.off("dblclick",a,kt),o.off("contextmenu",a,kt),o.off("mousemove",a,yo),o.off("mouseleave",a,go),o.off("touchstart",a,je),o.off("touchend",a,fr)))}});function xn(w){return E?!("marker"in w)&&!t0(w)&&me(w)!==u:!1}let Nt=null,ft="normal";function kt(w){w.type===v&&(xn(w)||("layerType"in w?w.layerType==="deckgl"?(n(10,B=w.coordinate),n(4,Nt=w.object?[w.object]:null)):(n(10,B=w.lngLat),n(4,Nt=w.features??[])):(n(10,B=w.lngLat),n(4,Nt=w.features??[])),setTimeout(()=>n(0,A=!0))))}let Xn=null;function je(w){Xn=w.point}function fr(w){if(!Xn||v!=="hover")return;let Cn=Xn.dist(w.point);Xn=null,Cn<3&&(n(10,B=w.lngLat),n(4,Nt=w.features??[]),C.isOpen()?n(25,ft="justOpened"):(n(25,ft="opening"),n(0,A=!0)))}function go(w){v!=="hover"||Xn||ft!=="normal"||(n(0,A=!1),n(4,Nt=null))}function yo(w){if(!(v!=="hover"||Xn||ft!=="normal")){if(xn(w)){n(0,A=!1),n(4,Nt=null);return}n(0,A=!0),n(4,Nt=w.features??[]),n(10,B=w.lngLat)}}function ri(w){if(ft==="justOpened"){n(25,ft="normal");return}if(!h)return;let Cn=[ut,a instanceof oi.Marker?a==null?void 0:a.getElement():null];A&&C.isOpen()&&!Cn.some(We=>We==null?void 0:We.contains(w.originalEvent.target))&&(w.type==="contextmenu"&&v==="contextmenu"||w.type!=="contextmenu")&&n(0,A=!1)}ms(()=>{o&&(C!=null&&C.isOpen())&&C.remove()});let Yn;const ns=()=>n(0,A=!1);function M(w){Qr[w?"unshift":"push"](()=>{Yn=w,n(1,Yn)})}return e.$$set=w=>{"closeButton"in w&&n(11,p=w.closeButton),"closeOnClickOutside"in w&&n(12,h=w.closeOnClickOutside),"closeOnClickInside"in w&&n(13,g=w.closeOnClickInside),"closeOnMove"in w&&n(14,m=w.closeOnMove),"openOn"in w&&n(15,v=w.openOn),"openIfTopMost"in w&&n(16,E=w.openIfTopMost),"focusAfterOpen"in w&&n(17,I=w.focusAfterOpen),"anchor"in w&&n(18,S=w.anchor),"offset"in w&&n(19,O=w.offset),"popupClass"in w&&n(20,R=w.popupClass),"maxWidth"in w&&n(21,k=w.maxWidth),"lngLat"in w&&n(10,B=w.lngLat),"html"in w&&n(22,x=w.html),"open"in w&&n(0,A=w.open),"$$scope"in w&&n(29,c=w.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&14336&&n(27,r=p??(!h&&!g)),e.$$.dirty[0]&146685952&&(C||(n(23,C=new oi.Popup({closeButton:r,closeOnClick:!1,closeOnMove:m,focusAfterOpen:I,maxWidth:k,className:R,anchor:S,offset:O})),ut=C.getElement(),C.on("open",()=>{n(0,A=!0),Ve(),G("open",C)}),C.on("close",()=>{n(0,A=!1),G("close",C)}),C.on("hover",()=>{G("hover",C)}))),e.$$.dirty[0]&8421384&&C&&a instanceof oi.Marker&&(v==="click"?a.setPopup(C):a.getPopup()===C&&a.setPopup(void 0)),e.$$.dirty[0]&268468224&&ce.includes(v)&&(s==null?void 0:s.type)===v&&(kt(s),ui(Z,s=null,s)),e.$$.dirty[0]&268468224&&n(26,i=v==="hover"&&((s==null?void 0:s.type)==="mousemove"||(s==null?void 0:s.type)==="mouseenter")),e.$$.dirty[0]&352354304&&v==="hover"&&Z&&(i&&s&&(s.layerType==="deckgl"?(n(10,B=s.coordinate),n(4,Nt=s.object?[s.object]:null)):(n(10,B=s.lngLat),n(4,Nt=s.features??[]))),n(0,A=(i||Ht)??!1)),e.$$.dirty[0]&12582914&&(Yn?C.setDOMContent(Yn):x&&C.setHTML(x)),e.$$.dirty[0]&8389632&&B&&C.setLngLat(B),e.$$.dirty[0]&41943045&&o){let w=C.isOpen();A&&!w?(C.addTo(o),ft==="opening"&&n(25,ft="justOpened")):!A&&w&&C.remove()}},[A,Yn,o,a,Nt,b,T,Z,Pt,f,B,p,h,g,m,v,E,I,S,O,R,k,x,C,Ht,ft,i,r,s,c,l,ns,M]}class i0 extends Vn{constructor(t){super(),jn(this,t,r0,n0,nn,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}const o0=e=>({props:e&8}),Hc=e=>({props:u0(e[3])});function s0(e){let t;const n=e[1].default,r=Hr(n,e,e[2],Hc);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&12)&&Kr(r,n,i,i[2],t?Zr(n,i[2],o,o0):Jr(i[2]),Hc)},i(i){t||(U(r,i),t=!0)},o(i){X(r,i),t=!1},d(i){r&&r.d(i)}}}function a0(e){let t,n;return t=new i0({props:{openOn:e[0],$$slots:{default:[s0,({features:r})=>({3:r}),({features:r})=>r?8:0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,[i]){const o={};i&1&&(o.openOn=r[0]),i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function u0(e){return e?e[0].properties??{}:(console.log("A Popup with null features should be impossible"),{})}function l0(e,t,n){let{$$slots:r={},$$scope:i}=t,{openOn:o="hover"}=t;return e.$$set=s=>{"openOn"in s&&n(0,o=s.openOn),"$$scope"in s&&n(2,i=s.$$scope)},[o,r,i]}class ra extends Vn{constructor(t){super(),jn(this,t,l0,a0,nn,{openOn:0})}}function Di(){return{type:"FeatureCollection",features:[]}}function Ca(){return{length:0,ruc:Di(),pop_density:Di(),os_nodes:Di(),os_links:Di()}}function c0(e,t){e.fitBounds(nv(t),{animate:!1,padding:10})}function Kc(e,t,n){const r=e.slice();return r[2]=t[n],r[3]=t,r[4]=n,r}function f0(e){let t,n;return{c(){t=yt("span"),n=Bt(),un(t,"class","dot svelte-1jnewjk")},m(r,i){tt(r,t,i),tt(r,n,i)},p:qs,d(r){r&&(et(t),et(n))}}}function Jc(e){let t,n,r;function i(s){e[1](s,e[2],e[3],e[4])}let o={draggable:!0,$$slots:{default:[f0]},$$scope:{ctx:e}};return e[2]!==void 0&&(o.lngLat=e[2]),t=new Bh({props:o}),Qr.push(()=>oo(t,"lngLat",i)),{c(){Rt(t.$$.fragment)},m(s,a){At(t,s,a),r=!0},p(s,a){e=s;const u={};a&32&&(u.$$scope={dirty:a,ctx:e}),!n&&a&1&&(n=!0,u.lngLat=e[2],so(()=>n=!1)),t.$set(u)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){X(t.$$.fragment,s),r=!1},d(s){Mt(t,s)}}}function p0(e){let t,n,r=Ku(e[0].geometry.coordinates),i=[];for(let s=0;s<r.length;s+=1)i[s]=Jc(Kc(e,r,s));const o=s=>X(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=io()},m(s,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(s,a);tt(s,t,a),n=!0},p(s,[a]){if(a&1){r=Ku(s[0].geometry.coordinates);let u;for(u=0;u<r.length;u+=1){const l=Kc(s,r,u);i[u]?(i[u].p(l,a),U(i[u],1)):(i[u]=Jc(l),i[u].c(),U(i[u],1),i[u].m(t.parentNode,t))}for(Xr(),u=r.length;u<i.length;u+=1)o(u);Yr()}},i(s){if(!n){for(let a=0;a<r.length;a+=1)U(i[a]);n=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)X(i[a]);n=!1},d(s){s&&et(t),eh(i,s)}}}function h0(e,t,n){let{f:r}=t;function i(o,s,a,u){a[u]=o,n(0,r)}return e.$$set=o=>{"f"in o&&n(0,r=o.f)},[r,i]}class g0 extends Vn{constructor(t){super(),jn(this,t,h0,p0,nn,{f:0})}}let d0={type:"FeatureCollection",features:[{geometry:{coordinates:[[.478565,51.73336],[.478498,51.733405],[.478425,51.733453],[.478651,51.733573],[.478809,51.73365],[.479056,51.733785],[.479263,51.733919],[.479302,51.733944],[.479226,51.73399],[.479209,51.734006],[.479211,51.734026],[.479234,51.734045],[.47932,51.734099],[.47935,51.734109],[.479389,51.734104],[.479474,51.734055],[.47956,51.73411],[.479775,51.734254],[.479955,51.734368],[.480088,51.734452],[.480197,51.734522],[.480595,51.734767],[.480841,51.734929],[.481007,51.735066],[.481037,51.735091],[.481156,51.735179],[.481317,51.735279],[.481481,51.735376],[.481683,51.735503],[.481898,51.735633],[.481942,51.735663],[.482001,51.735705],[.482029,51.735722],[.482521,51.736039],[.482744,51.736182],[.483052,51.736362],[.483361,51.736529],[.483455,51.736583],[.483983,51.736886],[.484567,51.737215],[.484809,51.737351],[.484911,51.737406],[.485008,51.737461],[.48511,51.737519],[.485192,51.737561],[.485822,51.737882],[.485922,51.737936],[.486386,51.738187],[.48648,51.738238],[.486635,51.738321],[.486696,51.738355],[.487031,51.738539],[.487561,51.738844],[.488015,51.739107],[.48841,51.739289],[.488586,51.73937],[.488747,51.739444],[.489667,51.739958],[.489855,51.740063],[.490036,51.740164],[.490426,51.740364],[.491118,51.7407],[.491254,51.740766],[.491455,51.740863],[.491963,51.741105],[.492088,51.741162],[.49258,51.741391],[.493183,51.741707],[.493659,51.741943],[.493891,51.742057],[.494049,51.742131],[.494995,51.742574],[.495073,51.742616],[.495176,51.742666],[.495541,51.742843],[.495829,51.742974],[.495982,51.743042],[.496217,51.743161],[.496896,51.743545],[.49704,51.743616],[.497294,51.743741],[.497449,51.743817],[.497883,51.744029],[.498148,51.744149],[.498612,51.744359],[.498682,51.74439],[.499155,51.744602],[.499591,51.744798],[.500039,51.744984],[.500213,51.745104],[.500285,51.745168],[.500276,51.745218],[.500287,51.745247],[.500316,51.745285],[.500353,51.745305],[.500406,51.745324],[.500474,51.745332],[.500574,51.745393],[.500674,51.745455],[.500922,51.745627],[.501165,51.745815],[.501355,51.746007],[.50162,51.746343],[.501753,51.746529],[.501839,51.746629],[.501871,51.74667],[.501893,51.746693],[.501993,51.746835],[.502177,51.747],[.502222,51.74706],[.502212,51.747094],[.502166,51.747142],[.502144,51.747153],[.502125,51.747163],[.50174,51.747332],[.501496,51.747421],[.500837,51.747675],[.50057,51.747773],[.500066,51.747943],[.499498,51.748136],[.499337,51.748192],[.499201,51.74825],[.498687,51.748445],[.498292,51.748616],[.498011,51.748756],[.497805,51.748856],[.497764,51.74883],[.497652,51.748898],[.497556,51.748951],[.497465,51.749011],[.497268,51.749142],[.496528,51.749724],[.496409,51.749813],[.496306,51.749899],[.496263,51.749924],[.496186,51.749983],[.49596,51.750174],[.495849,51.750263],[.495776,51.750322],[.495555,51.750528],[.495427,51.750643],[.495256,51.750822],[.4951,51.751005],[.495037,51.751088],[.495007,51.751138],[.494993,51.751202],[.494965,51.751266],[.494936,51.751297],[.494839,51.75132],[.494793,51.751327],[.49479,51.751356],[.494789,51.751408],[.494828,51.751428],[.494856,51.75146],[.494857,51.751497],[.49485,51.75153],[.494808,51.751706],[.494741,51.751979],[.49465,51.752214],[.49454,51.752417],[.49443,51.752565],[.494261,51.752736],[.493924,51.752979],[.493746,51.753115],[.49335,51.753407],[.493261,51.753475],[.492975,51.753707],[.492879,51.753802],[.492769,51.753921],[.492735,51.753915],[.492375,51.75386],[.4923,51.753843],[.492261,51.753834],[.4922,51.753904],[.492139,51.753895],[.492177,51.753834],[.492214,51.753797],[.492236,51.75377],[.492237,51.753743],[.49222,51.75371],[.492195,51.753686],[.492145,51.753668],[.492043,51.753643],[.49193,51.753622],[.491649,51.753577],[.491403,51.753541],[.491063,51.753498],[.490961,51.753745]],type:"LineString"},properties:{},type:"Feature"},{type:"Feature",properties:{},geometry:{coordinates:[[-.8876338067753693,52.23771961572791],[-.8722240821606704,52.239055374398475],[-.8741210869435747,52.24282954959838],[-.8684328688797791,52.248692578424254],[-.8698547643610652,52.25223365618476],[-.8661103062913185,52.25310368912446]],type:"LineString"}}]};function y0(e){let t=e[2].ruc11+"",n;return{c(){n=Et(t)},m(r,i){tt(r,n,i)},p(r,i){i&4&&t!==(t=r[2].ruc11+"")&&ln(n,t)},d(r){r&&et(n)}}}function m0(e){let t,n;return t=new ra({props:{openOn:"hover",$$slots:{default:[y0,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function _0(e){let t,n;return t=new rf({props:{manageHoverState:!0,layout:{visibility:e[1]=="ruc"?"visible":"none"},paint:{"fill-color":["case",["in","Urban",["get","ruc11"]],"orange","green"],"fill-opacity":lu(.3,.5)},$$slots:{default:[m0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="ruc"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function v0(e){let t=e[2].pop_density+"",n,r;return{c(){n=Et(t),r=Et(" people / square km")},m(i,o){tt(i,n,o),tt(i,r,o)},p(i,o){o&4&&t!==(t=i[2].pop_density+"")&&ln(n,t)},d(i){i&&(et(n),et(r))}}}function b0(e){let t,n;return t=new ra({props:{openOn:"hover",$$slots:{default:[v0,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function E0(e){let t,n;return t=new rf({props:{manageHoverState:!0,layout:{visibility:e[1]=="pop_density"?"visible":"none"},paint:{"fill-color":"blue","fill-opacity":lu(.3,.5)},$$slots:{default:[b0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="pop_density"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function I0(e){let t=e[2].road_classification+"",n;return{c(){n=Et(t)},m(r,i){tt(r,n,i)},p(r,i){i&4&&t!==(t=r[2].road_classification+"")&&ln(n,t)},d(r){r&&et(n)}}}function S0(e){let t,n;return t=new ra({props:{openOn:"hover",$$slots:{default:[I0,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function w0(e){let t,n;return t=new of({props:{layout:{visibility:e[1]=="os_network"?"visible":"none"},paint:{"line-width":3,"line-color":"black"},$$slots:{default:[S0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="os_network"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function L0(e){let t=e[2].id+"",n;return{c(){n=Et(t)},m(r,i){tt(r,n,i)},p(r,i){i&4&&t!==(t=r[2].id+"")&&ln(n,t)},d(r){r&&et(n)}}}function N0(e){let t,n;return t=new ra({props:{openOn:"hover",$$slots:{default:[L0,({props:r})=>({2:r}),({props:r})=>r?4:0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&12&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function x0(e){let t,n;return t=new Sh({props:{manageHoverState:!0,layout:{visibility:e[1]=="os_network"?"visible":"none"},paint:{"circle-color":"green","circle-radius":lu(5,8)},$$slots:{default:[N0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&2&&(o.layout={visibility:r[1]=="os_network"?"visible":"none"}),i&8&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function C0(e){let t,n,r,i,o,s,a,u;return t=new Lo({props:{data:e[0].ruc,$$slots:{default:[_0]},$$scope:{ctx:e}}}),r=new Lo({props:{data:e[0].pop_density,$$slots:{default:[E0]},$$scope:{ctx:e}}}),o=new Lo({props:{data:e[0].os_links,$$slots:{default:[w0]},$$scope:{ctx:e}}}),a=new Lo({props:{data:e[0].os_nodes,$$slots:{default:[x0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment),n=Bt(),Rt(r.$$.fragment),i=Bt(),Rt(o.$$.fragment),s=Bt(),Rt(a.$$.fragment)},m(l,c){At(t,l,c),tt(l,n,c),At(r,l,c),tt(l,i,c),At(o,l,c),tt(l,s,c),At(a,l,c),u=!0},p(l,[c]){const f={};c&1&&(f.data=l[0].ruc),c&10&&(f.$$scope={dirty:c,ctx:l}),t.$set(f);const p={};c&1&&(p.data=l[0].pop_density),c&10&&(p.$$scope={dirty:c,ctx:l}),r.$set(p);const h={};c&1&&(h.data=l[0].os_links),c&10&&(h.$$scope={dirty:c,ctx:l}),o.$set(h);const g={};c&1&&(g.data=l[0].os_nodes),c&10&&(g.$$scope={dirty:c,ctx:l}),a.$set(g)},i(l){u||(U(t.$$.fragment,l),U(r.$$.fragment,l),U(o.$$.fragment,l),U(a.$$.fragment,l),u=!0)},o(l){X(t.$$.fragment,l),X(r.$$.fragment,l),X(o.$$.fragment,l),X(a.$$.fragment,l),u=!1},d(l){l&&(et(n),et(i),et(s)),Mt(t,l),Mt(r,l),Mt(o,l),Mt(a,l)}}}function O0(e,t,n){let{output:r}=t,{show:i}=t;return e.$$set=o=>{"output"in o&&n(0,r=o.output),"show"in o&&n(1,i=o.show)},[r,i]}class P0 extends Vn{constructor(t){super(),jn(this,t,O0,C0,nn,{output:0,show:1})}}function Zc(e){let t,n,r=e[0]+1+"",i,o,s=e[5].features.length+"",a,u,l,c,f;return{c(){t=yt("button"),t.textContent="Prev",n=Bt(),i=Et(r),o=Et(" / "),a=Et(s),u=Bt(),l=yt("button"),l.textContent="Next"},m(p,h){tt(p,t,h),tt(p,n,h),tt(p,i,h),tt(p,o,h),tt(p,a,h),tt(p,u,h),tt(p,l,h),c||(f=[Le(t,"click",e[15]),Le(l,"click",e[16])],c=!0)},p(p,h){h&1&&r!==(r=p[0]+1+"")&&ln(i,r),h&32&&s!==(s=p[5].features.length+"")&&ln(a,s)},d(p){p&&(et(t),et(n),et(i),et(o),et(a),et(u),et(l)),c=!1,au(f)}}}function T0(e){let t,n,r=Math.round(e[1].length)+"",i,o,s,a,u,l,c=e[1].ruc.features.length-e[8]+"",f,p,h,g,m=e[1].os_links.features.length+"",v,E,I=e[1].os_nodes.features.length+"",S,O,R,k,B=$c(e[1])+"",x;return{c(){t=yt("p"),n=Et("Length: "),i=Et(r),o=Et(" m"),s=Bt(),a=yt("p"),u=Et(e[8]),l=Et(" urban OAs, "),f=Et(c),p=Et(" rural"),h=Bt(),g=yt("p"),v=Et(m),E=Et(" links, "),S=Et(I),O=Et(`
        nodes`),R=Bt(),k=yt("p"),x=Et(B)},m(A,G){tt(A,t,G),H(t,n),H(t,i),H(t,o),tt(A,s,G),tt(A,a,G),H(a,u),H(a,l),H(a,f),H(a,p),tt(A,h,G),tt(A,g,G),H(g,v),H(g,E),H(g,S),H(g,O),tt(A,R,G),tt(A,k,G),H(k,x)},p(A,G){G&2&&r!==(r=Math.round(A[1].length)+"")&&ln(i,r),G&256&&ln(u,A[8]),G&258&&c!==(c=A[1].ruc.features.length-A[8]+"")&&ln(f,c),G&2&&m!==(m=A[1].os_links.features.length+"")&&ln(v,m),G&2&&I!==(I=A[1].os_nodes.features.length+"")&&ln(S,I),G&2&&B!==(B=$c(A[1])+"")&&ln(x,B)},d(A){A&&(et(t),et(s),et(a),et(h),et(g),et(R),et(k))}}}function R0(e){let t;return{c(){t=yt("p"),t.textContent="Loading..."},m(n,r){tt(n,t,r)},p:qs,d(n){n&&et(t)}}}function A0(e){let t,n,r,i,o,s,a,u,l,c,f,p,h,g,m,v,E,I,S,O,R,k,B,x,A,G,b,T,Z,Pt,me,ce,C,Ht,ut=e[0]!=null&&Zc(e);function Ve(ft,kt){return ft[1].length==0?R0:T0}let xn=Ve(e),Nt=xn(e);return ce=rh(e[19][0]),{c(){t=yt("div"),n=yt("p"),n.textContent="Input:",r=Bt(),i=yt("label"),o=Et(`Load a GeoJSON file
      `),s=yt("input"),a=Bt(),ut&&ut.c(),u=Bt(),l=yt("p"),l.textContent="Output:",c=Bt(),f=yt("button"),f.textContent="Recalculate",p=Bt(),h=yt("label"),g=yt("input"),m=Et(`
      Show input route`),v=Bt(),E=yt("br"),I=Bt(),S=yt("fieldset"),O=yt("label"),R=yt("input"),k=Et(`
        RUC`),B=Bt(),x=yt("label"),A=yt("input"),G=Et(`
        Pop density`),b=Bt(),T=yt("label"),Z=yt("input"),Pt=Et(`
        OS links and nodes`),me=Bt(),Nt.c(),un(s,"type","file"),un(g,"type","checkbox"),un(R,"type","radio"),R.__value="ruc",oa(R,R.__value),un(A,"type","radio"),A.__value="pop_density",oa(A,A.__value),un(Z,"type","radio"),Z.__value="os_network",oa(Z,Z.__value),un(t,"slot","left"),ce.p(R,A,Z)},m(ft,kt){tt(ft,t,kt),H(t,n),H(t,r),H(t,i),H(i,o),H(i,s),e[14](s),H(t,a),ut&&ut.m(t,null),H(t,u),H(t,l),H(t,c),H(t,f),H(t,p),H(t,h),H(h,g),g.checked=e[3],H(h,m),H(t,v),H(t,E),H(t,I),H(t,S),H(S,O),H(O,R),R.checked=R.__value===e[4],H(O,k),H(S,B),H(S,x),H(x,A),A.checked=A.__value===e[4],H(x,G),H(S,b),H(S,T),H(T,Z),Z.checked=Z.__value===e[4],H(T,Pt),H(t,me),Nt.m(t,null),C||(Ht=[Le(s,"change",e[10]),Le(f,"click",e[9]),Le(g,"change",e[17]),Le(R,"change",e[18]),Le(A,"change",e[20]),Le(Z,"change",e[21])],C=!0)},p(ft,kt){ft[0]!=null?ut?ut.p(ft,kt):(ut=Zc(ft),ut.c(),ut.m(t,u)):ut&&(ut.d(1),ut=null),kt&8&&(g.checked=ft[3]),kt&16&&(R.checked=R.__value===ft[4]),kt&16&&(A.checked=A.__value===ft[4]),kt&16&&(Z.checked=Z.__value===ft[4]),xn===(xn=Ve(ft))&&Nt?Nt.p(ft,kt):(Nt.d(1),Nt=xn(ft),Nt&&(Nt.c(),Nt.m(t,null)))},d(ft){ft&&et(t),e[14](null),ut&&ut.d(),Nt.d(),ce.r(),C=!1,au(Ht)}}}function Qc(e){let t,n,r,i,o;function s(u){e[12](u)}let a={};return e[6]!==void 0&&(a.f=e[6]),t=new g0({props:a}),Qr.push(()=>oo(t,"f",s)),i=new Lo({props:{data:e[6],$$slots:{default:[M0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment),r=Bt(),Rt(i.$$.fragment)},m(u,l){At(t,u,l),tt(u,r,l),At(i,u,l),o=!0},p(u,l){const c={};!n&&l&64&&(n=!0,c.f=u[6],so(()=>n=!1)),t.$set(c);const f={};l&64&&(f.data=u[6]),l&16777224&&(f.$$scope={dirty:l,ctx:u}),i.$set(f)},i(u){o||(U(t.$$.fragment,u),U(i.$$.fragment,u),o=!0)},o(u){X(t.$$.fragment,u),X(i.$$.fragment,u),o=!1},d(u){u&&et(r),Mt(t,u),Mt(i,u)}}}function M0(e){let t,n;return t=new of({props:{layout:{visibility:e[3]?"visible":"none"},paint:{"line-width":5,"line-color":"red"}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,i){const o={};i&8&&(o.layout={visibility:r[3]?"visible":"none"}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}function D0(e){let t,n,r,i=e[6]&&e[3]&&Qc(e);return n=new P0({props:{output:e[1],show:e[4]}}),{c(){i&&i.c(),t=Bt(),Rt(n.$$.fragment)},m(o,s){i&&i.m(o,s),tt(o,t,s),At(n,o,s),r=!0},p(o,s){o[6]&&o[3]?i?(i.p(o,s),s&72&&U(i,1)):(i=Qc(o),i.c(),U(i,1),i.m(t.parentNode,t)):i&&(Xr(),X(i,1,1,()=>{i=null}),Yr());const a={};s&2&&(a.output=o[1]),s&16&&(a.show=o[4]),n.$set(a)},i(o){r||(U(i),U(n.$$.fragment,o),r=!0)},o(o){X(i),X(n.$$.fragment,o),r=!1},d(o){o&&et(t),i&&i.d(o),Mt(n,o)}}}function F0(e){let t,n,r,i;function o(a){e[13](a)}let s={style:`https://api.maptiler.com/maps/dataviz/style.json?key=${B0}`,standardControls:!0,$$slots:{default:[D0]},$$scope:{ctx:e}};return e[2]!==void 0&&(s.map=e[2]),n=new ih({props:s}),Qr.push(()=>oo(n,"map",o)),{c(){t=yt("div"),Rt(n.$$.fragment),un(t,"slot","main"),xo(t,"position","relative"),xo(t,"width","100%"),xo(t,"height","100vh")},m(a,u){tt(a,t,u),At(n,t,null),i=!0},p(a,u){const l={};u&16777306&&(l.$$scope={dirty:u,ctx:a}),!r&&u&4&&(r=!0,l.map=a[2],so(()=>r=!1)),n.$set(l)},i(a){i||(U(n.$$.fragment,a),i=!0)},o(a){X(n.$$.fragment,a),i=!1},d(a){a&&et(t),Mt(n)}}}function k0(e){let t,n;return t=new nh({props:{$$slots:{main:[F0],left:[A0]},$$scope:{ctx:e}}}),{c(){Rt(t.$$.fragment)},m(r,i){At(t,r,i),n=!0},p(r,[i]){const o={};i&16777727&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){X(t.$$.fragment,r),n=!1},d(r){Mt(t,r)}}}let B0="MZEJTanw3WpxRvt7qDfo";function $c(e){return e.os_links.features.map(t=>t.properties.road_classification).join(", ")}function G0(e,t,n){let r,i="https://assets.od2net.org/route-element",o,s=!1,a=!0,u="ruc";tf(async()=>{await nf(),n(11,s=!0),h(JSON.stringify(d0))});let l=Di(),c=null,f=null,p=Ca();function h(b){n(5,l=Di()),n(0,c=null);try{let T=JSON.parse(b);if(T.features=T.features.filter(Z=>Z.geometry.type=="LineString"),T.features.length==0)throw new Error("No LineStrings");n(5,l=T),n(0,c=0),n(1,p=Ca())}catch(T){window.alert(T)}}async function g(){if(s&&c!=null){n(1,p=Ca()),n(6,f=l.features[c]),o&&c0(o,f);try{let b=JSON.parse(await uh(f,i));n(1,p={length:b.length,ruc:JSON.parse(b.ruc),pop_density:JSON.parse(b.pop_density),os_nodes:JSON.parse(b.os_nodes),os_links:JSON.parse(b.os_links)})}catch(b){window.alert(b)}}}let m;async function v(b){h(await m.files[0].text())}const E=[[]];function I(b){f=b,n(6,f)}function S(b){o=b,n(2,o)}function O(b){Qr[b?"unshift":"push"](()=>{m=b,n(7,m)})}const R=()=>{n(0,c--,c),g()},k=()=>{n(0,c++,c),g()};function B(){a=this.checked,n(3,a)}function x(){u=this.__value,n(4,u)}function A(){u=this.__value,n(4,u)}function G(){u=this.__value,n(4,u)}return e.$$.update=()=>{e.$$.dirty&2051&&s&&c!=null&&p.length==0&&g(),e.$$.dirty&2&&n(8,r=p.ruc.features.filter(b=>b.properties.ruc11.startsWith("Urban")).length)},[c,p,o,a,u,l,f,m,r,g,v,s,I,S,O,R,k,B,x,E,A,G]}class z0 extends Vn{constructor(t){super(),jn(this,t,G0,k0,nn,{})}}new z0({target:document.getElementById("app")});
