import{S as x,i as ee,s as te,L as Ie,b as X,a as ne,c as I,m as O,d as le,t as $,e as w,f as C,g as Oe,h as Ce,u as ze,j as Te,k as Ne,l as Q,n as V,o as Me,p as ge,q as Je,r as g,v as ye,w as ke,x as d,y as He,M as Fe,z as y,A as S,B as D,C as we,G as Z,D as fe,E as Le,F as Ee,P as oe,H as k,I as G,J as Ge,K as Re,N as Ue,O as ie,Q as c,R as K,T as Se,U as Ae,V as ae,_ as qe,W as Be}from"./Layout-47b04193.js";function Pe(o){let e;const n=o[15].default,t=Ce(n,o,o[23],null);return{c(){t&&t.c()},m(l,s){t&&t.m(l,s),e=!0},p(l,s){t&&t.p&&(!e||s&8388608)&&ze(t,n,l,l[23],e?Ne(n,l[23],s,null):Te(l[23]),null)},i(l){e||($(t,l),e=!0)},o(l){w(t,l),e=!1},d(l){t&&t.d(l)}}}function We(o){let e,n,t;function l(r){o[16](r)}let s={id:o[1],type:"fill",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[Pe]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.hovered=o[0]),e=new Ie({props:s}),X.push(()=>ne(e,"hovered",l)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){I(e.$$.fragment)},m(r,a){O(e,r,a),t=!0},p(r,[a]){const i={};a&2&&(i.id=r[1]),a&4&&(i.source=r[2]),a&8&&(i.sourceLayer=r[3]),a&16&&(i.beforeId=r[4]),a&32&&(i.beforeLayerType=r[5]),a&64&&(i.paint=r[6]),a&128&&(i.layout=r[7]),a&256&&(i.filter=r[8]),a&512&&(i.minzoom=r[9]),a&1024&&(i.maxzoom=r[10]),a&2048&&(i.hoverCursor=r[11]),a&4096&&(i.manageHoverState=r[12]),a&8192&&(i.eventsIfTopMost=r[13]),a&16384&&(i.interactive=r[14]),a&8388608&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.hovered=r[0],le(()=>n=!1)),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){C(e,r)}}}function De(o,e,n){let{$$slots:t={},$$scope:l}=e,{id:s=Oe("fill")}=e,{source:r=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:_}=e,{layout:h=void 0}=e,{filter:m=void 0}=e,{minzoom:b=void 0}=e,{maxzoom:v=void 0}=e,{hoverCursor:N=void 0}=e,{manageHoverState:R=!1}=e,{hovered:H=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:z=!0}=e;function U(f){H=f,n(0,H)}function j(f){Q.call(this,o,f)}function A(f){Q.call(this,o,f)}function q(f){Q.call(this,o,f)}function E(f){Q.call(this,o,f)}function p(f){Q.call(this,o,f)}function L(f){Q.call(this,o,f)}return o.$$set=f=>{"id"in f&&n(1,s=f.id),"source"in f&&n(2,r=f.source),"sourceLayer"in f&&n(3,a=f.sourceLayer),"beforeId"in f&&n(4,i=f.beforeId),"beforeLayerType"in f&&n(5,u=f.beforeLayerType),"paint"in f&&n(6,_=f.paint),"layout"in f&&n(7,h=f.layout),"filter"in f&&n(8,m=f.filter),"minzoom"in f&&n(9,b=f.minzoom),"maxzoom"in f&&n(10,v=f.maxzoom),"hoverCursor"in f&&n(11,N=f.hoverCursor),"manageHoverState"in f&&n(12,R=f.manageHoverState),"hovered"in f&&n(0,H=f.hovered),"eventsIfTopMost"in f&&n(13,F=f.eventsIfTopMost),"interactive"in f&&n(14,z=f.interactive),"$$scope"in f&&n(23,l=f.$$scope)},[H,s,r,a,i,u,_,h,m,b,v,N,R,F,z,t,U,j,A,q,E,p,L,l]}class je extends x{constructor(e){super(),ee(this,e,De,We,te,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function ue(){return{length:0,ruc:V(),pop_density:V(),os_nodes:V(),os_links:V()}}function Ke(o,e){o.fitBounds(Me(e),{animate:!1,padding:10})}function de(o,e,n){const t=o.slice();return t[2]=e[n],t[3]=e,t[4]=n,t}function Qe(o){let e,n;return{c(){e=y("span"),n=S(),D(e,"class","dot svelte-1jnewjk")},m(t,l){g(t,e,l),g(t,n,l)},p:we,d(t){t&&(d(e),d(n))}}}function he(o){let e,n,t;function l(r){o[1](r,o[2],o[3],o[4])}let s={draggable:!0,$$slots:{default:[Qe]},$$scope:{ctx:o}};return o[2]!==void 0&&(s.lngLat=o[2]),e=new Fe({props:s}),X.push(()=>ne(e,"lngLat",l)),{c(){I(e.$$.fragment)},m(r,a){O(e,r,a),t=!0},p(r,a){o=r;const i={};a&32&&(i.$$scope={dirty:a,ctx:o}),!n&&a&1&&(n=!0,i.lngLat=o[2],le(()=>n=!1)),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){C(e,r)}}}function Ve(o){let e,n,t=ge(o[0].geometry.coordinates),l=[];for(let r=0;r<t.length;r+=1)l[r]=he(de(o,t,r));const s=r=>w(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=Je()},m(r,a){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(r,a);g(r,e,a),n=!0},p(r,[a]){if(a&1){t=ge(r[0].geometry.coordinates);let i;for(i=0;i<t.length;i+=1){const u=de(r,t,i);l[i]?(l[i].p(u,a),$(l[i],1)):(l[i]=he(u),l[i].c(),$(l[i],1),l[i].m(e.parentNode,e))}for(ye(),i=t.length;i<l.length;i+=1)s(i);ke()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)$(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)w(l[a]);n=!1},d(r){r&&d(e),He(l,r)}}}function Ze(o,e,n){let{f:t}=e;function l(s,r,a,i){a[i]=s,n(0,t)}return o.$$set=s=>{"f"in s&&n(0,t=s.f)},[t,l]}class Xe extends x{constructor(e){super(),ee(this,e,Ze,Ve,te,{f:0})}}let Ye={type:"FeatureCollection",features:[{geometry:{coordinates:[[.478565,51.73336],[.478498,51.733405],[.478425,51.733453],[.478651,51.733573],[.478809,51.73365],[.479056,51.733785],[.479263,51.733919],[.479302,51.733944],[.479226,51.73399],[.479209,51.734006],[.479211,51.734026],[.479234,51.734045],[.47932,51.734099],[.47935,51.734109],[.479389,51.734104],[.479474,51.734055],[.47956,51.73411],[.479775,51.734254],[.479955,51.734368],[.480088,51.734452],[.480197,51.734522],[.480595,51.734767],[.480841,51.734929],[.481007,51.735066],[.481037,51.735091],[.481156,51.735179],[.481317,51.735279],[.481481,51.735376],[.481683,51.735503],[.481898,51.735633],[.481942,51.735663],[.482001,51.735705],[.482029,51.735722],[.482521,51.736039],[.482744,51.736182],[.483052,51.736362],[.483361,51.736529],[.483455,51.736583],[.483983,51.736886],[.484567,51.737215],[.484809,51.737351],[.484911,51.737406],[.485008,51.737461],[.48511,51.737519],[.485192,51.737561],[.485822,51.737882],[.485922,51.737936],[.486386,51.738187],[.48648,51.738238],[.486635,51.738321],[.486696,51.738355],[.487031,51.738539],[.487561,51.738844],[.488015,51.739107],[.48841,51.739289],[.488586,51.73937],[.488747,51.739444],[.489667,51.739958],[.489855,51.740063],[.490036,51.740164],[.490426,51.740364],[.491118,51.7407],[.491254,51.740766],[.491455,51.740863],[.491963,51.741105],[.492088,51.741162],[.49258,51.741391],[.493183,51.741707],[.493659,51.741943],[.493891,51.742057],[.494049,51.742131],[.494995,51.742574],[.495073,51.742616],[.495176,51.742666],[.495541,51.742843],[.495829,51.742974],[.495982,51.743042],[.496217,51.743161],[.496896,51.743545],[.49704,51.743616],[.497294,51.743741],[.497449,51.743817],[.497883,51.744029],[.498148,51.744149],[.498612,51.744359],[.498682,51.74439],[.499155,51.744602],[.499591,51.744798],[.500039,51.744984],[.500213,51.745104],[.500285,51.745168],[.500276,51.745218],[.500287,51.745247],[.500316,51.745285],[.500353,51.745305],[.500406,51.745324],[.500474,51.745332],[.500574,51.745393],[.500674,51.745455],[.500922,51.745627],[.501165,51.745815],[.501355,51.746007],[.50162,51.746343],[.501753,51.746529],[.501839,51.746629],[.501871,51.74667],[.501893,51.746693],[.501993,51.746835],[.502177,51.747],[.502222,51.74706],[.502212,51.747094],[.502166,51.747142],[.502144,51.747153],[.502125,51.747163],[.50174,51.747332],[.501496,51.747421],[.500837,51.747675],[.50057,51.747773],[.500066,51.747943],[.499498,51.748136],[.499337,51.748192],[.499201,51.74825],[.498687,51.748445],[.498292,51.748616],[.498011,51.748756],[.497805,51.748856],[.497764,51.74883],[.497652,51.748898],[.497556,51.748951],[.497465,51.749011],[.497268,51.749142],[.496528,51.749724],[.496409,51.749813],[.496306,51.749899],[.496263,51.749924],[.496186,51.749983],[.49596,51.750174],[.495849,51.750263],[.495776,51.750322],[.495555,51.750528],[.495427,51.750643],[.495256,51.750822],[.4951,51.751005],[.495037,51.751088],[.495007,51.751138],[.494993,51.751202],[.494965,51.751266],[.494936,51.751297],[.494839,51.75132],[.494793,51.751327],[.49479,51.751356],[.494789,51.751408],[.494828,51.751428],[.494856,51.75146],[.494857,51.751497],[.49485,51.75153],[.494808,51.751706],[.494741,51.751979],[.49465,51.752214],[.49454,51.752417],[.49443,51.752565],[.494261,51.752736],[.493924,51.752979],[.493746,51.753115],[.49335,51.753407],[.493261,51.753475],[.492975,51.753707],[.492879,51.753802],[.492769,51.753921],[.492735,51.753915],[.492375,51.75386],[.4923,51.753843],[.492261,51.753834],[.4922,51.753904],[.492139,51.753895],[.492177,51.753834],[.492214,51.753797],[.492236,51.75377],[.492237,51.753743],[.49222,51.75371],[.492195,51.753686],[.492145,51.753668],[.492043,51.753643],[.49193,51.753622],[.491649,51.753577],[.491403,51.753541],[.491063,51.753498],[.490961,51.753745]],type:"LineString"},properties:{},type:"Feature"},{type:"Feature",properties:{},geometry:{coordinates:[[-.8876338067753693,52.23771961572791],[-.8722240821606704,52.239055374398475],[-.8741210869435747,52.24282954959838],[-.8684328688797791,52.248692578424254],[-.8698547643610652,52.25223365618476],[-.8661103062913185,52.25310368912446]],type:"LineString"}}]};function xe(o){let e=o[2].ruc11+"",n;return{c(){n=k(e)},m(t,l){g(t,n,l)},p(t,l){l&4&&e!==(e=t[2].ruc11+"")&&G(n,e)},d(t){t&&d(n)}}}function et(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[xe,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function tt(o){let e,n;return e=new je({props:{manageHoverState:!0,layout:{visibility:o[1]=="ruc"?"visible":"none"},paint:{"fill-color":["case",["in","Urban",["get","ruc11"]],"orange","green"],"fill-opacity":fe(.3,.5)},$$slots:{default:[et]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="ruc"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function nt(o){let e=o[2].pop_density+"",n,t;return{c(){n=k(e),t=k(" people / square km")},m(l,s){g(l,n,s),g(l,t,s)},p(l,s){s&4&&e!==(e=l[2].pop_density+"")&&G(n,e)},d(l){l&&(d(n),d(t))}}}function lt(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[nt,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function ot(o){let e,n;return e=new je({props:{manageHoverState:!0,layout:{visibility:o[1]=="pop_density"?"visible":"none"},paint:{"fill-color":"blue","fill-opacity":fe(.3,.5)},$$slots:{default:[lt]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="pop_density"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function st(o){let e=o[2].road_classification+"",n;return{c(){n=k(e)},m(t,l){g(t,n,l)},p(t,l){l&4&&e!==(e=t[2].road_classification+"")&&G(n,e)},d(t){t&&d(n)}}}function rt(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[st,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function it(o){let e,n;return e=new Le({props:{layout:{visibility:o[1]=="os_network"?"visible":"none"},paint:{"line-width":3,"line-color":"black"},$$slots:{default:[rt]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="os_network"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function at(o){let e=o[2].id+"",n;return{c(){n=k(e)},m(t,l){g(t,n,l)},p(t,l){l&4&&e!==(e=t[2].id+"")&&G(n,e)},d(t){t&&d(n)}}}function ut(o){let e,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[at,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&12&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function ft(o){let e,n;return e=new Ee({props:{manageHoverState:!0,layout:{visibility:o[1]=="os_network"?"visible":"none"},paint:{"circle-color":"green","circle-radius":fe(5,8)},$$slots:{default:[ut]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.layout={visibility:t[1]=="os_network"?"visible":"none"}),l&8&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function _t(o){let e,n,t,l,s,r,a,i;return e=new Z({props:{data:o[0].ruc,$$slots:{default:[tt]},$$scope:{ctx:o}}}),t=new Z({props:{data:o[0].pop_density,$$slots:{default:[ot]},$$scope:{ctx:o}}}),s=new Z({props:{data:o[0].os_links,$$slots:{default:[it]},$$scope:{ctx:o}}}),a=new Z({props:{data:o[0].os_nodes,$$slots:{default:[ft]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment),n=S(),I(t.$$.fragment),l=S(),I(s.$$.fragment),r=S(),I(a.$$.fragment)},m(u,_){O(e,u,_),g(u,n,_),O(t,u,_),g(u,l,_),O(s,u,_),g(u,r,_),O(a,u,_),i=!0},p(u,[_]){const h={};_&1&&(h.data=u[0].ruc),_&10&&(h.$$scope={dirty:_,ctx:u}),e.$set(h);const m={};_&1&&(m.data=u[0].pop_density),_&10&&(m.$$scope={dirty:_,ctx:u}),t.$set(m);const b={};_&1&&(b.data=u[0].os_links),_&10&&(b.$$scope={dirty:_,ctx:u}),s.$set(b);const v={};_&1&&(v.data=u[0].os_nodes),_&10&&(v.$$scope={dirty:_,ctx:u}),a.$set(v)},i(u){i||($(e.$$.fragment,u),$(t.$$.fragment,u),$(s.$$.fragment,u),$(a.$$.fragment,u),i=!0)},o(u){w(e.$$.fragment,u),w(t.$$.fragment,u),w(s.$$.fragment,u),w(a.$$.fragment,u),i=!1},d(u){u&&(d(n),d(l),d(r)),C(e,u),C(t,u),C(s,u),C(a,u)}}}function ct(o,e,n){let{output:t}=e,{show:l}=e;return o.$$set=s=>{"output"in s&&n(0,t=s.output),"show"in s&&n(1,l=s.show)},[t,l]}class pt extends x{constructor(e){super(),ee(this,e,ct,_t,te,{output:0,show:1})}}function be(o){let e,n,t=o[0]+1+"",l,s,r=o[5].features.length+"",a,i,u,_,h;return{c(){e=y("button"),e.textContent="Prev",n=S(),l=k(t),s=k(" / "),a=k(r),i=S(),u=y("button"),u.textContent="Next"},m(m,b){g(m,e,b),g(m,n,b),g(m,l,b),g(m,s,b),g(m,a,b),g(m,i,b),g(m,u,b),_||(h=[K(e,"click",o[15]),K(u,"click",o[16])],_=!0)},p(m,b){b&1&&t!==(t=m[0]+1+"")&&G(l,t),b&32&&r!==(r=m[5].features.length+"")&&G(a,r)},d(m){m&&(d(e),d(n),d(l),d(s),d(a),d(i),d(u)),_=!1,Se(h)}}}function mt(o){let e,n,t=Math.round(o[1].length)+"",l,s,r,a,i,u,_=o[1].ruc.features.length-o[8]+"",h,m,b,v,N=o[1].os_links.features.length+"",R,H,F=o[1].os_nodes.features.length+"",z,U,j,A,q=ve(o[1])+"",E;return{c(){e=y("p"),n=k("Length: "),l=k(t),s=k(" m"),r=S(),a=y("p"),i=k(o[8]),u=k(" urban OAs, "),h=k(_),m=k(" rural"),b=S(),v=y("p"),R=k(N),H=k(" links, "),z=k(F),U=k(`
        nodes`),j=S(),A=y("p"),E=k(q)},m(p,L){g(p,e,L),c(e,n),c(e,l),c(e,s),g(p,r,L),g(p,a,L),c(a,i),c(a,u),c(a,h),c(a,m),g(p,b,L),g(p,v,L),c(v,R),c(v,H),c(v,z),c(v,U),g(p,j,L),g(p,A,L),c(A,E)},p(p,L){L&2&&t!==(t=Math.round(p[1].length)+"")&&G(l,t),L&256&&G(i,p[8]),L&258&&_!==(_=p[1].ruc.features.length-p[8]+"")&&G(h,_),L&2&&N!==(N=p[1].os_links.features.length+"")&&G(R,N),L&2&&F!==(F=p[1].os_nodes.features.length+"")&&G(z,F),L&2&&q!==(q=ve(p[1])+"")&&G(E,q)},d(p){p&&(d(e),d(r),d(a),d(b),d(v),d(j),d(A))}}}function gt(o){let e;return{c(){e=y("p"),e.textContent="Loading..."},m(n,t){g(n,e,t)},p:we,d(n){n&&d(e)}}}function dt(o){let e,n,t,l,s,r,a,i,u,_,h,m,b,v,N,R,H,F,z,U,j,A,q,E,p,L,f,B,M,_e,ce,se,re,pe,J=o[0]!=null&&be(o);function me(T,W){return T[1].length==0?gt:mt}let Y=me(o),P=Y(o);return se=Ue(o[19][0]),{c(){e=y("div"),n=y("p"),n.textContent="Input:",t=S(),l=y("label"),s=k(`Load a GeoJSON file
      `),r=y("input"),a=S(),J&&J.c(),i=S(),u=y("p"),u.textContent="Output:",_=S(),h=y("button"),h.textContent="Recalculate",m=S(),b=y("label"),v=y("input"),N=k(`
      Show input route`),R=S(),H=y("br"),F=S(),z=y("fieldset"),U=y("label"),j=y("input"),A=k(`
        RUC`),q=S(),E=y("label"),p=y("input"),L=k(`
        Pop density`),f=S(),B=y("label"),M=y("input"),_e=k(`
        OS links and nodes`),ce=S(),P.c(),D(r,"type","file"),D(v,"type","checkbox"),D(j,"type","radio"),j.__value="ruc",ie(j,j.__value),D(p,"type","radio"),p.__value="pop_density",ie(p,p.__value),D(M,"type","radio"),M.__value="os_network",ie(M,M.__value),D(e,"slot","left"),se.p(j,p,M)},m(T,W){g(T,e,W),c(e,n),c(e,t),c(e,l),c(l,s),c(l,r),o[14](r),c(e,a),J&&J.m(e,null),c(e,i),c(e,u),c(e,_),c(e,h),c(e,m),c(e,b),c(b,v),v.checked=o[3],c(b,N),c(e,R),c(e,H),c(e,F),c(e,z),c(z,U),c(U,j),j.checked=j.__value===o[4],c(U,A),c(z,q),c(z,E),c(E,p),p.checked=p.__value===o[4],c(E,L),c(z,f),c(z,B),c(B,M),M.checked=M.__value===o[4],c(B,_e),c(e,ce),P.m(e,null),re||(pe=[K(r,"change",o[10]),K(h,"click",o[9]),K(v,"change",o[17]),K(j,"change",o[18]),K(p,"change",o[20]),K(M,"change",o[21])],re=!0)},p(T,W){T[0]!=null?J?J.p(T,W):(J=be(T),J.c(),J.m(e,i)):J&&(J.d(1),J=null),W&8&&(v.checked=T[3]),W&16&&(j.checked=j.__value===T[4]),W&16&&(p.checked=p.__value===T[4]),W&16&&(M.checked=M.__value===T[4]),Y===(Y=me(T))&&P?P.p(T,W):(P.d(1),P=Y(T),P&&(P.c(),P.m(e,null)))},d(T){T&&d(e),o[14](null),J&&J.d(),P.d(),se.r(),re=!1,Se(pe)}}}function $e(o){let e,n,t,l,s;function r(i){o[12](i)}let a={};return o[6]!==void 0&&(a.f=o[6]),e=new Xe({props:a}),X.push(()=>ne(e,"f",r)),l=new Z({props:{data:o[6],$$slots:{default:[ht]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment),t=S(),I(l.$$.fragment)},m(i,u){O(e,i,u),g(i,t,u),O(l,i,u),s=!0},p(i,u){const _={};!n&&u&64&&(n=!0,_.f=i[6],le(()=>n=!1)),e.$set(_);const h={};u&64&&(h.data=i[6]),u&16777224&&(h.$$scope={dirty:u,ctx:i}),l.$set(h)},i(i){s||($(e.$$.fragment,i),$(l.$$.fragment,i),s=!0)},o(i){w(e.$$.fragment,i),w(l.$$.fragment,i),s=!1},d(i){i&&d(t),C(e,i),C(l,i)}}}function ht(o){let e,n;return e=new Le({props:{layout:{visibility:o[3]?"visible":"none"},paint:{"line-width":5,"line-color":"red"}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,l){const s={};l&8&&(s.layout={visibility:t[3]?"visible":"none"}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function bt(o){let e,n,t,l=o[6]&&o[3]&&$e(o);return n=new pt({props:{output:o[1],show:o[4]}}),{c(){l&&l.c(),e=S(),I(n.$$.fragment)},m(s,r){l&&l.m(s,r),g(s,e,r),O(n,s,r),t=!0},p(s,r){s[6]&&s[3]?l?(l.p(s,r),r&72&&$(l,1)):(l=$e(s),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(ye(),w(l,1,1,()=>{l=null}),ke());const a={};r&2&&(a.output=s[1]),r&16&&(a.show=s[4]),n.$set(a)},i(s){t||($(l),$(n.$$.fragment,s),t=!0)},o(s){w(l),w(n.$$.fragment,s),t=!1},d(s){s&&d(e),l&&l.d(s),C(n,s)}}}function $t(o){let e,n,t,l;function s(a){o[13](a)}let r={style:`https://api.maptiler.com/maps/dataviz/style.json?key=${yt}`,standardControls:!0,$$slots:{default:[bt]},$$scope:{ctx:o}};return o[2]!==void 0&&(r.map=o[2]),n=new Ae({props:r}),X.push(()=>ne(n,"map",s)),{c(){e=y("div"),I(n.$$.fragment),D(e,"slot","main"),ae(e,"position","relative"),ae(e,"width","100%"),ae(e,"height","100vh")},m(a,i){g(a,e,i),O(n,e,null),l=!0},p(a,i){const u={};i&16777306&&(u.$$scope={dirty:i,ctx:a}),!t&&i&4&&(t=!0,u.map=a[2],le(()=>t=!1)),n.$set(u)},i(a){l||($(n.$$.fragment,a),l=!0)},o(a){w(n.$$.fragment,a),l=!1},d(a){a&&d(e),C(n)}}}function vt(o){let e,n;return e=new Ge({props:{$$slots:{main:[$t],left:[dt]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},m(t,l){O(e,t,l),n=!0},p(t,[l]){const s={};l&16777727&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}let yt="MZEJTanw3WpxRvt7qDfo";function ve(o){return o.os_links.features.map(e=>e.properties.road_classification).join(", ")}function kt(o,e,n){let t,l="https://assets.od2net.org/route-element",s,r=!1,a=!0,i="ruc";Re(async()=>{await qe(),n(11,r=!0),b(JSON.stringify(Ye))});let u=V(),_=null,h=null,m=ue();function b(f){n(5,u=V()),n(0,_=null);try{let B=JSON.parse(f);if(B.features=B.features.filter(M=>M.geometry.type=="LineString"),B.features.length==0)throw new Error("No LineStrings");n(5,u=B),n(0,_=0),n(1,m=ue())}catch(B){window.alert(B)}}async function v(){if(r&&_!=null){n(1,m=ue()),n(6,h=u.features[_]),s&&Ke(s,h);try{let f=JSON.parse(await Be(h,l));n(1,m={length:f.length,ruc:JSON.parse(f.ruc),pop_density:JSON.parse(f.pop_density),os_nodes:JSON.parse(f.os_nodes),os_links:JSON.parse(f.os_links)})}catch(f){window.alert(f)}}}let N;async function R(f){b(await N.files[0].text())}const H=[[]];function F(f){h=f,n(6,h)}function z(f){s=f,n(2,s)}function U(f){X[f?"unshift":"push"](()=>{N=f,n(7,N)})}const j=()=>{n(0,_--,_),v()},A=()=>{n(0,_++,_),v()};function q(){a=this.checked,n(3,a)}function E(){i=this.__value,n(4,i)}function p(){i=this.__value,n(4,i)}function L(){i=this.__value,n(4,i)}return o.$$.update=()=>{o.$$.dirty&2051&&r&&_!=null&&m.length==0&&v(),o.$$.dirty&2&&n(8,t=m.ruc.features.filter(f=>f.properties.ruc11.startsWith("Urban")).length)},[_,m,s,a,i,u,h,N,t,v,R,r,F,z,U,j,A,q,E,H,p,L]}class wt extends x{constructor(e){super(),ee(this,e,kt,vt,te,{})}}new wt({target:document.getElementById("app")});
