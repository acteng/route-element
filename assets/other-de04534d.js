import{a0 as Xe,a1 as Ye,a2 as le,w as x,e as y,x as ee,t as v,a3 as Ve,S as Q,i as Z,s as X,A as xe,a4 as et,B as F,E as tt,h as oe,G as k,J as E,v as S,u as re,j as se,k as ie,y as L,b as Y,a5 as ce,H as M,c as B,r as He,m as D,f as q,I as W,M as nt,a as _e,d as de,K as J,N as I,a6 as lt,Y as G,a7 as ot,R as T,X as g,W as ne,Z as me,O as he,F as K,a8 as rt,a9 as Re,aa as Ue,ab as ae,Q as ge,T as V,$ as U,P as We,l as $e,ac as st,U as it,_ as at}from"./Layout-877336a0.js";function ct(n,e){const l=e.token={};function t(o,r,s,c){if(e.token!==l)return;e.resolved=c;let a=e.ctx;s!==void 0&&(a=a.slice(),a[s]=c);const i=o&&(e.current=o)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==r&&f&&(x(),y(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),ee())}):e.block.d(1),i.c(),v(i,1),i.m(e.mount(),e.anchor),u=!0),e.block=i,e.blocks&&(e.blocks[r]=i),u&&Ve()}if(Xe(n)){const o=Ye();if(n.then(r=>{le(o),t(e.then,1,e.value,r),le(null)},r=>{if(le(o),t(e.catch,2,e.error,r),le(null),!e.hasCatch)throw r}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,n),!0;e.resolved=n}}function ut(n,e,l){const t=e.slice(),{resolved:o}=n;n.current===n.then&&(t[n.value]=o),n.current===n.catch&&(t[n.error]=o),n.block.p(t,l)}function ft(n,e,l){let t;const o=xe();let{layer:r=void 0}=e;const{map:s}=et();F(n,s,u=>l(2,t=u));function c(u){o(u.type,{...u,map:s})}const a=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],i=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return tt(()=>{if(t)if(r)for(const u of a)t.off(u,r,c);else for(const u of i)t.off(u,c)}),n.$$set=u=>{"layer"in u&&l(1,r=u.layer)},n.$$.update=()=>{if(n.$$.dirty&6&&t)if(r)for(const u of a)t.on(u,r,c);else for(const u of i)t.on(u,c)},[s,r,t]}class pt extends Q{constructor(e){super(),Z(this,e,ft,null,X,{layer:1})}}const _t=n=>({}),be=n=>({}),dt=n=>({}),ve=n=>({});function mt(n){let e,l,t,o;const r=n[3].sidebar,s=oe(r,n,n[2],ve),c=n[3].map,a=oe(c,n,n[2],be);return{c(){e=k("div"),s&&s.c(),l=E(),t=k("div"),a&&a.c()},m(i,u){S(i,e,u),s&&s.m(e,null),n[4](e),S(i,l,u),S(i,t,u),a&&a.m(t,null),n[5](t),o=!0},p(i,[u]){s&&s.p&&(!o||u&4)&&re(s,r,i,i[2],o?ie(r,i[2],u,dt):se(i[2]),ve),a&&a.p&&(!o||u&4)&&re(a,c,i,i[2],o?ie(c,i[2],u,_t):se(i[2]),be)},i(i){o||(v(s,i),v(a,i),o=!0)},o(i){y(s,i),y(a,i),o=!1},d(i){i&&(L(e),L(l),L(t)),s&&s.d(i),n[4](null),a&&a.d(i),n[5](null)}}}function ht(n,e,l){let t,o;F(n,fe,i=>l(0,t=i)),F(n,pe,i=>l(1,o=i));let{$$slots:r={},$$scope:s}=e;function c(i){Y[i?"unshift":"push"](()=>{t=i,fe.set(t)})}function a(i){Y[i?"unshift":"push"](()=>{o=i,pe.set(o)})}return n.$$set=i=>{"$$scope"in i&&l(2,s=i.$$scope)},[t,o,s,r,c,a]}class ke extends Q{constructor(e){super(),Z(this,e,ht,mt,X,{})}}let fe=ce(null),pe=ce(null);function we(n,e,l){const t=n.slice();return t[3]=e[l],t[4]=e,t[5]=l,t}function gt(n){let e,l;return{c(){e=k("span"),l=E(),J(e,"class","dot svelte-jgyhla")},m(t,o){S(t,e,o),S(t,l,o)},p:I,d(t){t&&(L(e),L(l))}}}function ye(n){let e,l,t;function o(s){n[2](s,n[3],n[4],n[5])}let r={draggable:!0,$$slots:{default:[gt]},$$scope:{ctx:n}};return n[3]!==void 0&&(r.lngLat=n[3]),e=new nt({props:r}),Y.push(()=>_e(e,"lngLat",o)),{c(){B(e.$$.fragment)},m(s,c){D(e,s,c),t=!0},p(s,c){n=s;const a={};c&64&&(a.$$scope={dirty:c,ctx:n}),!l&&c&1&&(l=!0,a.lngLat=n[3],de(()=>l=!1)),e.$set(a)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function $t(n){let e,l,t,o;e=new pt({}),e.$on("click",n[1]);let r=M(n[0].geometry.coordinates),s=[];for(let a=0;a<r.length;a+=1)s[a]=ye(we(n,r,a));const c=a=>y(s[a],1,1,()=>{s[a]=null});return{c(){B(e.$$.fragment),l=E();for(let a=0;a<s.length;a+=1)s[a].c();t=He()},m(a,i){D(e,a,i),S(a,l,i);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,i);S(a,t,i),o=!0},p(a,[i]){if(i&1){r=M(a[0].geometry.coordinates);let u;for(u=0;u<r.length;u+=1){const f=we(a,r,u);s[u]?(s[u].p(f,i),v(s[u],1)):(s[u]=ye(f),s[u].c(),v(s[u],1),s[u].m(t.parentNode,t))}for(x(),u=r.length;u<s.length;u+=1)c(u);ee()}},i(a){if(!o){v(e.$$.fragment,a);for(let i=0;i<r.length;i+=1)v(s[i]);o=!0}},o(a){y(e.$$.fragment,a),s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)y(s[i]);o=!1},d(a){a&&(L(l),L(t)),q(e,a),W(s,a)}}}function kt(n,e,l){let{f:t}=e;function o(s){t.geometry.coordinates.push(s.detail.lngLat.toArray()),l(0,t)}function r(s,c,a,i){a[i]=s,l(0,t)}return n.$$set=s=>{"f"in s&&l(0,t=s.f)},[t,o,r]}class bt extends Q{constructor(e){super(),Z(this,e,kt,$t,X,{f:0})}}let P=ce(wt()),ue=lt(P,n=>({type:"FeatureCollection",features:n})),z=ce({kind:"neutral"});function R(){return["","2","1","0","Critical"]}let O=[{name:"Street or path check",description:"Is this on-carriageway or a traffic-free path?",choices:["","Street check","Path check"]},{name:"SA03",description:"lane widths",choices:R()},{name:"SA04",description:"trip hazards",choices:R()},{name:"SA05",description:"kerbside activity",choices:R()},{name:"SA08",description:"motor traffic speed",choices:R()},{name:"SA09",description:"motor traffic volume",choices:R()},{name:"SA11",description:"footway widths",choices:R()},{name:"SA12",description:"effective width next to tram lines",choices:R()},{name:"SA13",description:"crossing angle of tram/train rails",choices:R()},{name:"SA14",description:"cycling surface and maintenance defects",choices:R()},{name:"SA15",description:"WW surface and maintenance defects",choices:R()},{name:"SA16",description:"guard railing",choices:R()}];function vt(n){let e=["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"];return{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{name:"Untitled link",color:e[n%e.length],answers:Array(O.length).fill("")}}}function wt(){try{let n=JSON.parse(window.localStorage.getItem("tmp-rcv2")||"");if("features"in n&&"answers"in n.features[0].properties)return n.features}catch{}return[]}const{window:yt}=ot;function Ce(n,e,l){const t=n.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Ct(n,e,l){const t=n.slice();return t[14]=e[l],t}function Se(n){let e;return{c(){e=k("p"),e.textContent="A link needs at least two points"},m(l,t){S(l,e,t)},d(l){l&&L(e)}}}function St(n){let e;return{c(){e=k("option"),e.textContent=`${n[14]}`,e.__value=n[14],ne(e,e.__value)},m(l,t){S(l,e,t)},p:I,d(l){l&&L(e)}}}function Le(n){let e,l=n[11].name+"",t,o,r=n[11].description+"",s,c,a,i,u,f,d=M(n[11].choices),m=[];for(let _=0;_<d.length;_+=1)m[_]=St(Ct(n,d,_));function p(){n[10].call(a,n[13])}return{c(){e=k("label"),t=T(l),o=T(": "),s=T(r),c=E(),a=k("select");for(let _=0;_<m.length;_+=1)m[_].c();i=E(),n[1][n[0]].properties.answers[n[13]]===void 0&&Ue(p)},m(_,$){S(_,e,$),g(e,t),g(e,o),g(e,s),g(e,c),g(e,a);for(let w=0;w<m.length;w+=1)m[w]&&m[w].m(a,null);ae(a,n[1][n[0]].properties.answers[n[13]],!0),g(e,i),u||(f=G(a,"change",p),u=!0)},p(_,$){n=_,$&3&&ae(a,n[1][n[0]].properties.answers[n[13]])},d(_){_&&L(e),W(m,_),u=!1,f()}}}function Lt(n){let e,l,t,o,r,s,c,a,i,u,f,d,m,p,_=!n[2]&&Se(),$=M(O),w=[];for(let h=0;h<$.length;h+=1)w[h]=Le(Ce(n,$,h));return{c(){e=k("div"),l=k("button"),t=T("Done"),r=E(),s=k("button"),s.textContent="Delete link",c=E(),_&&_.c(),a=E(),i=k("label"),u=T(`Name:
      `),f=k("input"),d=E();for(let h=0;h<w.length;h+=1)w[h].c();l.disabled=o=!n[2],J(f,"type","text"),J(e,"slot","sidebar")},m(h,H){S(h,e,H),g(e,l),g(l,t),g(e,r),g(e,s),g(e,c),_&&_.m(e,null),g(e,a),g(e,i),g(i,u),g(i,f),ne(f,n[1][n[0]].properties.name),g(e,d);for(let j=0;j<w.length;j+=1)w[j]&&w[j].m(e,null);m||(p=[G(l,"click",n[8]),G(s,"click",n[6]),G(f,"input",n[9])],m=!0)},p(h,H){if(H&4&&o!==(o=!h[2])&&(l.disabled=o),h[2]?_&&(_.d(1),_=null):_||(_=Se(),_.c(),_.m(e,a)),H&3&&f.value!==h[1][h[0]].properties.name&&ne(f,h[1][h[0]].properties.name),H&3){$=M(O);let j;for(j=0;j<$.length;j+=1){const A=Ce(h,$,j);w[j]?w[j].p(A,H):(w[j]=Le(A),w[j].c(),w[j].m(e,null))}for(;j<w.length;j+=1)w[j].d(1);w.length=$.length}},d(h){h&&L(e),_&&_.d(),W(w,h),m=!1,me(p)}}}function Et(n){let e,l;return e=new ge({props:{paint:{"line-color":["case",["==",["id"],n[0]],["get","color"],"black"],"line-opacity":["case",["==",["id"],n[0]],1,.5],"line-width":6}}}),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p(t,o){const r={};o&1&&(r.paint={"line-color":["case",["==",["id"],t[0]],["get","color"],"black"],"line-opacity":["case",["==",["id"],t[0]],1,.5],"line-width":6}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function jt(n){let e,l,t,o,r,s;l=new he({props:{data:n[4],generateId:!0,$$slots:{default:[Et]},$$scope:{ctx:n}}});function c(i){n[7](i)}let a={};return n[1][n[0]]!==void 0&&(a.f=n[1][n[0]]),o=new bt({props:a}),Y.push(()=>_e(o,"f",c)),{c(){e=k("div"),B(l.$$.fragment),t=E(),B(o.$$.fragment),J(e,"slot","map")},m(i,u){S(i,e,u),D(l,e,null),g(e,t),D(o,e,null),s=!0},p(i,u){const f={};u&16&&(f.data=i[4]),u&131073&&(f.$$scope={dirty:u,ctx:i}),l.$set(f);const d={};!r&&u&3&&(r=!0,d.f=i[1][i[0]],de(()=>r=!1)),o.$set(d)},i(i){s||(v(l.$$.fragment,i),v(o.$$.fragment,i),s=!0)},o(i){y(l.$$.fragment,i),y(o.$$.fragment,i),s=!1},d(i){i&&L(e),q(l),q(o)}}}function At(n){let e,l,t,o;return e=new ke({props:{$$slots:{map:[jt],sidebar:[Lt]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(r,s){D(e,r,s),l=!0,t||(o=G(yt,"keydown",n[5]),t=!0)},p(r,[s]){const c={};s&131103&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){l||(v(e.$$.fragment,r),l=!0)},o(r){y(e.$$.fragment,r),l=!1},d(r){q(e,r),t=!1,o()}}}function Nt(n,e,l){let t,o,r,s;F(n,P,p=>l(1,o=p)),F(n,z,p=>l(3,r=p)),F(n,ue,p=>l(4,s=p));let{idx:c}=e;function a(p){p.key=="Escape"&&t&&K(z,r={kind:"neutral"},r)}async function i(){window.confirm("Really delete this link?")&&(K(z,r={kind:"neutral"},r),await rt(),o.splice(c,1),P.set(o))}function u(p){n.$$.not_equal(o[c],p)&&(o[c]=p,P.set(o))}const f=()=>K(z,r={kind:"neutral"},r);function d(){o[c].properties.name=this.value,P.set(o)}function m(p){o[c].properties.answers[p]=Re(this),P.set(o)}return n.$$set=p=>{"idx"in p&&l(0,c=p.idx)},n.$$.update=()=>{n.$$.dirty&3&&l(2,t=o[c].geometry.coordinates.length>=2)},[c,o,t,r,s,a,i,u,f,d,m]}class Bt extends Q{constructor(e){super(),Z(this,e,Nt,At,X,{idx:0})}}function Ee(n,e,l){const t=n.slice();return t[8]=e[l],t[9]=e,t[10]=l,t}function je(n,e,l){const t=n.slice();return t[11]=e[l],t}function Ae(n){let e,l=n[11]+"",t,o;return{c(){e=k("option"),t=T(l),e.__value=o=n[11],ne(e,e.__value)},m(r,s){S(r,e,s),g(e,t)},p(r,s){s&1&&l!==(l=r[11]+"")&&V(t,l),s&1&&o!==(o=r[11])&&(e.__value=o,ne(e,e.__value))},d(r){r&&L(e)}}}function Ne(n){let e,l,t=n[8].properties.name+"",o,r,s,c,a,i,u=M(O[n[0]].choices),f=[];for(let m=0;m<u.length;m+=1)f[m]=Ae(je(n,u,m));function d(){n[7].call(s,n[9],n[10])}return{c(){e=k("li"),l=k("span"),o=T(t),r=E(),s=k("select");for(let m=0;m<f.length;m+=1)f[m].c();c=E(),U(l,"color",n[8].properties.color),n[8].properties.answers[n[0]]===void 0&&Ue(d)},m(m,p){S(m,e,p),g(e,l),g(l,o),g(e,r),g(e,s);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(s,null);ae(s,n[8].properties.answers[n[0]],!0),g(e,c),a||(i=G(s,"change",d),a=!0)},p(m,p){if(n=m,p&8&&t!==(t=n[8].properties.name+"")&&V(o,t),p&8&&U(l,"color",n[8].properties.color),p&1){u=M(O[n[0]].choices);let _;for(_=0;_<u.length;_+=1){const $=je(n,u,_);f[_]?f[_].p($,p):(f[_]=Ae($),f[_].c(),f[_].m(s,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}p&9&&ae(s,n[8].properties.answers[n[0]])},d(m){m&&L(e),W(f,m),a=!1,i()}}}function Dt(n){let e,l,t,o,r=O[n[0]].name+"",s,c,a=O[n[0]].description+"",i,u,f,d,m,p=M(n[3]),_=[];for(let $=0;$<p.length;$+=1)_[$]=Ne(Ee(n,p,$));return{c(){e=k("div"),l=k("button"),l.textContent="Done",t=E(),o=k("h2"),s=T(r),c=T(": "),i=T(a),u=E(),f=k("ol");for(let $=0;$<_.length;$+=1)_[$].c();J(e,"slot","sidebar")},m($,w){S($,e,w),g(e,l),g(e,t),g(e,o),g(o,s),g(o,c),g(o,i),g(e,u),g(e,f);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(f,null);d||(m=G(l,"click",n[6]),d=!0)},p($,w){if(w&1&&r!==(r=O[$[0]].name+"")&&V(s,r),w&1&&a!==(a=O[$[0]].description+"")&&V(i,a),w&9){p=M($[3]);let h;for(h=0;h<p.length;h+=1){const H=Ee($,p,h);_[h]?_[h].p(H,w):(_[h]=Ne(H),_[h].c(),_[h].m(f,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=p.length}},d($){$&&L(e),W(_,$),d=!1,m()}}}function qt(n){let e,l;return e=new ge({props:{manageHoverState:!0,paint:{"line-color":["get","color"],"line-width":We(6,9)},hoverCursor:"pointer"}}),e.$on("click",n[5]),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p:I,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function It(n){let e,l,t;return l=new he({props:{data:n[2],generateId:!0,$$slots:{default:[qt]},$$scope:{ctx:n}}}),{c(){e=k("div"),B(l.$$.fragment),J(e,"slot","map")},m(o,r){S(o,e,r),D(l,e,null),t=!0},p(o,r){const s={};r&4&&(s.data=o[2]),r&16386&&(s.$$scope={dirty:r,ctx:o}),l.$set(s)},i(o){t||(v(l.$$.fragment,o),t=!0)},o(o){y(l.$$.fragment,o),t=!1},d(o){o&&L(e),q(l)}}}function Mt(n){let e,l,t,o;return e=new ke({props:{$$slots:{map:[It],sidebar:[Dt]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(r,s){D(e,r,s),l=!0,t||(o=G(window,"keydown",n[4]),t=!0)},p(r,[s]){const c={};s&16399&&(c.$$scope={dirty:s,ctx:r}),e.$set(c)},i(r){l||(v(e.$$.fragment,r),l=!0)},o(r){y(e.$$.fragment,r),l=!1},d(r){q(e,r),t=!1,o()}}}function Ft(n,e,l){let t,o,r;F(n,z,f=>l(1,t=f)),F(n,ue,f=>l(2,o=f)),F(n,P,f=>l(3,r=f));let{qIdx:s}=e;function c(f){f.key=="Escape"&&K(z,t={kind:"neutral"},t)}const a=f=>K(z,t={kind:"edit-link",idx:f.detail.features[0].id},t),i=()=>K(z,t={kind:"neutral"},t);function u(f,d){f[d].properties.answers[s]=Re(this),P.set(r),l(0,s)}return n.$$set=f=>{"qIdx"in f&&l(0,s=f.qIdx)},[s,t,o,r,c,a,i,u]}class Tt extends Q{constructor(e){super(),Z(this,e,Ft,Mt,X,{qIdx:0})}}let Be="MZEJTanw3WpxRvt7qDfo";async function Gt(n){return n?{version:8,sources:{"raster-tiles":{type:"raster",tiles:[`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${await zt(n)}&key=${n}`],tileSize:256,attribution:"Google (detailed attributions not wired up)"}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:`https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=${Be}`}:`https://api.maptiler.com/maps/dataviz/style.json?key=${Be}`}async function zt(n){try{let l=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${n}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in l?l.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(l)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}const Jt=n=>({dialog:n&1}),De=n=>({dialog:n[0]});function Ot(n){let e,l,t,o,r;const s=n[4].default,c=oe(s,n,n[3],De);return{c(){e=k("dialog"),l=k("article"),c&&c.c(),e.open=!0},m(a,i){S(a,e,i),g(e,l),c&&c.m(l,null),n[6](e),t=!0,o||(r=[G(window,"click",n[1]),G(window,"keydown",n[2]),G(e,"close",n[5])],o=!0)},p(a,[i]){c&&c.p&&(!t||i&9)&&re(c,s,a,a[3],t?ie(s,a[3],i,Jt):se(a[3]),De)},i(a){t||(v(c,a),t=!0)},o(a){y(c,a),t=!1},d(a){a&&L(e),c&&c.d(a),n[6](null),o=!1,me(r)}}}function Kt(n,e,l){let{$$slots:t={},$$scope:o}=e,r;function s(u){r.open&&u.target==r&&r.close()}function c(u){(u.key=="Escape"||u.key=="Enter")&&(u.stopPropagation(),r.close())}function a(u){$e.call(this,n,u)}function i(u){Y[u?"unshift":"push"](()=>{r=u,l(0,r)})}return n.$$set=u=>{"$$scope"in u&&l(3,o=u.$$scope)},[r,s,c,o,t,a,i]}class Pt extends Q{constructor(e){super(),Z(this,e,Kt,Ot,X,{})}}function Ht(n,e){let l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",n),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function Rt(n){let e,l,t,o;const r=n[2].default,s=oe(r,n,n[1],null);return{c(){e=k("a"),s&&s.c(),J(e,"href","#"),U(e,"color",n[0])},m(c,a){S(c,e,a),s&&s.m(e,null),l=!0,t||(o=G(e,"click",st(n[3])),t=!0)},p(c,[a]){s&&s.p&&(!l||a&2)&&re(s,r,c,c[1],l?ie(r,c[1],a,null):se(c[1]),null),a&1&&U(e,"color",c[0])},i(c){l||(v(s,c),l=!0)},o(c){y(s,c),l=!1},d(c){c&&L(e),s&&s.d(c),t=!1,o()}}}function Ut(n,e,l){let{$$slots:t={},$$scope:o}=e,{color:r}=e;function s(c){$e.call(this,n,c)}return n.$$set=c=>{"color"in c&&l(0,r=c.color),"$$scope"in c&&l(1,o=c.$$scope)},[r,o,t,s]}class Qe extends Q{constructor(e){super(),Z(this,e,Ut,Rt,X,{color:0})}}function qe(n,e,l){const t=n.slice();return t[2]=e[l],t[4]=l,t}function Ie(n,e,l){const t=n.slice();t[5]=e[l];const o=t[5].properties.answers[t[4]];return t[6]=o,t}function Me(n,e,l){const t=n.slice();return t[5]=e[l],t}function Fe(n){let e,l=n[5].properties.name+"",t;return{c(){e=k("th"),t=T(l),U(e,"color",n[5].properties.color)},m(o,r){S(o,e,r),g(e,t)},p(o,r){r&1&&l!==(l=o[5].properties.name+"")&&V(t,l),r&1&&U(e,"color",o[5].properties.color)},d(o){o&&L(e)}}}function Te(n){let e,l=n[6]+"",t;return{c(){e=k("td"),t=T(l),U(e,"background",n[6]==""?"red":"green")},m(o,r){S(o,e,r),g(e,t)},p(o,r){r&1&&l!==(l=o[6]+"")&&V(t,l),r&1&&U(e,"background",o[6]==""?"red":"green")},d(o){o&&L(e)}}}function Ge(n){let e,l,t,o,r=M(n[0]),s=[];for(let c=0;c<r.length;c+=1)s[c]=Te(Ie(n,r,c));return{c(){e=k("tr"),l=k("th"),l.textContent=`${n[2].name}`,t=E();for(let c=0;c<s.length;c+=1)s[c].c();o=E()},m(c,a){S(c,e,a),g(e,l),g(e,t);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);g(e,o)},p(c,a){if(a&1){r=M(c[0]);let i;for(i=0;i<r.length;i+=1){const u=Ie(c,r,i);s[i]?s[i].p(u,a):(s[i]=Te(u),s[i].c(),s[i].m(e,o))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(c){c&&L(e),W(s,c)}}}function Wt(n){let e,l,t,o,r,s,c,a=M(n[0]),i=[];for(let d=0;d<a.length;d+=1)i[d]=Fe(Me(n,a,d));let u=M(O),f=[];for(let d=0;d<u.length;d+=1)f[d]=Ge(qe(n,u,d));return{c(){e=k("table"),l=k("thead"),t=k("tr"),o=k("th"),r=E();for(let d=0;d<i.length;d+=1)i[d].c();s=E(),c=k("tbody");for(let d=0;d<f.length;d+=1)f[d].c()},m(d,m){S(d,e,m),g(e,l),g(l,t),g(t,o),g(t,r);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(t,null);g(e,s),g(e,c);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(c,null)},p(d,m){if(m&1){a=M(d[0]);let p;for(p=0;p<a.length;p+=1){const _=Me(d,a,p);i[p]?i[p].p(_,m):(i[p]=Fe(_),i[p].c(),i[p].m(t,null))}for(;p<i.length;p+=1)i[p].d(1);i.length=a.length}if(m&1){u=M(O);let p;for(p=0;p<u.length;p+=1){const _=qe(d,u,p);f[p]?f[p].p(_,m):(f[p]=Ge(_),f[p].c(),f[p].m(c,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=u.length}},d(d){d&&L(e),W(i,d),W(f,d)}}}function Qt(n){let e,l;return e=new Pt({props:{$$slots:{default:[Wt]},$$scope:{ctx:n}}}),e.$on("close",n[1]),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p(t,[o]){const r={};o&2049&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Zt(n,e,l){let t;F(n,P,r=>l(0,t=r));function o(r){$e.call(this,n,r)}return[t,o]}class Xt extends Q{constructor(e){super(),Z(this,e,Zt,Qt,X,{})}}function ze(n,e,l){const t=n.slice();return t[13]=e[l],t[15]=l,t}function Je(n,e,l){const t=n.slice();return t[16]=e[l],t[15]=l,t}function Oe(n){let e,l;return e=new Xt({}),e.$on("close",n[6]),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p:I,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Yt(n){let e=n[16].properties.name+"",l;return{c(){l=T(e)},m(t,o){S(t,l,o)},p(t,o){o&2&&e!==(e=t[16].properties.name+"")&&V(l,e)},d(t){t&&L(l)}}}function Ke(n){let e,l,t,o;function r(){return n[10](n[15])}return l=new Qe({props:{color:n[16].properties.color,$$slots:{default:[Yt]},$$scope:{ctx:n}}}),l.$on("click",r),{c(){e=k("li"),B(l.$$.fragment),t=E()},m(s,c){S(s,e,c),D(l,e,null),g(e,t),o=!0},p(s,c){n=s;const a={};c&2&&(a.color=n[16].properties.color),c&262146&&(a.$$scope={dirty:c,ctx:n}),l.$set(a)},i(s){o||(v(l.$$.fragment,s),o=!0)},o(s){y(l.$$.fragment,s),o=!1},d(s){s&&L(e),q(l)}}}function Vt(n){let e=n[13].name+"",l,t;return{c(){l=T(e),t=E()},m(o,r){S(o,l,r),S(o,t,r)},p:I,d(o){o&&(L(l),L(t))}}}function Pe(n){let e,l,t,o,r,s,c,a;function i(){return n[11](n[15])}l=new Qe({props:{$$slots:{default:[Vt]},$$scope:{ctx:n}}}),l.$on("click",i);function u(...f){return n[12](n[15],...f)}return{c(){e=k("li"),B(l.$$.fragment),t=T(`:
          `),o=k("progress"),c=E(),o.value=r=n[1].filter(u).length,J(o,"max",s=n[1].length),J(o,"class","svelte-zadug4")},m(f,d){S(f,e,d),D(l,e,null),g(e,t),g(e,o),g(e,c),a=!0},p(f,d){n=f;const m={};d&262144&&(m.$$scope={dirty:d,ctx:n}),l.$set(m),(!a||d&2&&r!==(r=n[1].filter(u).length))&&(o.value=r),(!a||d&2&&s!==(s=n[1].length))&&J(o,"max",s)},i(f){a||(v(l.$$.fragment,f),a=!0)},o(f){y(l.$$.fragment,f),a=!1},d(f){f&&L(e),q(l)}}}function xt(n){let e,l,t,o,r,s,c,a,i,u,f,d,m,p,_,$,w=M(n[1]),h=[];for(let C=0;C<w.length;C+=1)h[C]=Ke(Je(n,w,C));const H=C=>y(h[C],1,1,()=>{h[C]=null});let j=M(O),A=[];for(let C=0;C<j.length;C+=1)A[C]=Pe(ze(n,j,C));const Ze=C=>y(A[C],1,1,()=>{A[C]=null});return{c(){e=k("div"),l=k("div"),t=k("button"),t.textContent="New link",o=E(),r=k("button"),r.textContent="Clear",s=E(),c=k("button"),c.textContent="Table of questions",a=E(),i=k("button"),i.textContent="Download",u=T(`

    Links:
    `),f=k("ol");for(let C=0;C<h.length;C+=1)h[C].c();d=T(`

    Questions:
    `),m=k("ol");for(let C=0;C<A.length;C+=1)A[C].c();J(e,"slot","sidebar")},m(C,N){S(C,e,N),g(e,l),g(l,t),g(l,o),g(l,r),g(l,s),g(l,c),g(l,a),g(l,i),g(e,u),g(e,f);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(f,null);g(e,d),g(e,m);for(let b=0;b<A.length;b+=1)A[b]&&A[b].m(m,null);p=!0,_||($=[G(t,"click",n[5]),G(r,"click",n[4]),G(c,"click",n[8]),G(i,"click",n[9])],_=!0)},p(C,N){if(N&6){w=M(C[1]);let b;for(b=0;b<w.length;b+=1){const te=Je(C,w,b);h[b]?(h[b].p(te,N),v(h[b],1)):(h[b]=Ke(te),h[b].c(),v(h[b],1),h[b].m(f,null))}for(x(),b=w.length;b<h.length;b+=1)H(b);ee()}if(N&6){j=M(O);let b;for(b=0;b<j.length;b+=1){const te=ze(C,j,b);A[b]?(A[b].p(te,N),v(A[b],1)):(A[b]=Pe(te),A[b].c(),v(A[b],1),A[b].m(m,null))}for(x(),b=j.length;b<A.length;b+=1)Ze(b);ee()}},i(C){if(!p){for(let N=0;N<w.length;N+=1)v(h[N]);for(let N=0;N<j.length;N+=1)v(A[N]);p=!0}},o(C){h=h.filter(Boolean);for(let N=0;N<h.length;N+=1)y(h[N]);A=A.filter(Boolean);for(let N=0;N<A.length;N+=1)y(A[N]);p=!1},d(C){C&&L(e),W(h,C),W(A,C),_=!1,me($)}}}function en(n){let e,l;return e=new ge({props:{manageHoverState:!0,paint:{"line-color":["get","color"],"line-width":We(6,9)},hoverCursor:"pointer"}}),e.$on("click",n[7]),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p:I,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function tn(n){let e,l,t;return l=new he({props:{data:n[3],generateId:!0,$$slots:{default:[en]},$$scope:{ctx:n}}}),{c(){e=k("div"),B(l.$$.fragment),J(e,"slot","map")},m(o,r){S(o,e,r),D(l,e,null),t=!0},p(o,r){const s={};r&8&&(s.data=o[3]),r&262148&&(s.$$scope={dirty:r,ctx:o}),l.$set(s)},i(o){t||(v(l.$$.fragment,o),t=!0)},o(o){y(l.$$.fragment,o),t=!1},d(o){o&&L(e),q(l)}}}function nn(n){let e,l,t,o=n[0]&&Oe(n);return l=new ke({props:{$$slots:{map:[tn],sidebar:[xt]},$$scope:{ctx:n}}}),{c(){o&&o.c(),e=E(),B(l.$$.fragment)},m(r,s){o&&o.m(r,s),S(r,e,s),D(l,r,s),t=!0},p(r,[s]){r[0]?o?(o.p(r,s),s&1&&v(o,1)):(o=Oe(r),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(x(),y(o,1,1,()=>{o=null}),ee());const c={};s&262159&&(c.$$scope={dirty:s,ctx:r}),l.$set(c)},i(r){t||(v(o),v(l.$$.fragment,r),t=!0)},o(r){y(o),y(l.$$.fragment,r),t=!1},d(r){r&&L(e),o&&o.d(r),q(l,r)}}}function ln(n,e,l){let t,o,r;F(n,P,$=>l(1,t=$)),F(n,z,$=>l(2,o=$)),F(n,ue,$=>l(3,r=$));let s=!1;function c(){K(P,t=[],t)}function a(){let $=vt(t.length);K(P,t=[...t,$],t),K(z,o={kind:"edit-link",idx:t.length-1},o)}return[s,t,o,r,c,a,()=>l(0,s=!1),$=>K(z,o={kind:"edit-link",idx:$.detail.features[0].id},o),()=>l(0,s=!0),()=>Ht("rcv2.geojson",JSON.stringify(r)),$=>K(z,o={kind:"edit-link",idx:$},o),$=>K(z,o={kind:"edit-question",idx:$},o),($,w)=>w.properties.answers[$]!=""]}class on extends Q{constructor(e){super(),Z(this,e,ln,nn,X,{})}}function rn(n){let e,l;return{c(){e=k("div"),l=k("div"),J(e,"slot","left")},m(t,o){S(t,e,o),g(e,l),n[9](l)},p:I,d(t){t&&L(e),n[9](null)}}}function sn(n){return{c:I,m:I,p:I,i:I,o:I,d:I}}function an(n){let e,l,t;function o(s){n[8](s)}let r={style:n[10],standardControls:!0,hash:!0,$$slots:{default:[pn]},$$scope:{ctx:n}};return n[2]!==void 0&&(r.map=n[2]),e=new at({props:r}),Y.push(()=>_e(e,"map",o)),{c(){B(e.$$.fragment)},m(s,c){D(e,s,c),t=!0},p(s,c){const a={};c&2058&&(a.$$scope={dirty:c,ctx:s}),!l&&c&4&&(l=!0,a.map=s[2],de(()=>l=!1)),e.$set(a)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function cn(n){let e,l;return e=new Tt({props:{qIdx:n[3].idx}}),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p(t,o){const r={};o&8&&(r.qIdx=t[3].idx),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function un(n){let e,l;return e=new Bt({props:{idx:n[3].idx}}),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p(t,o){const r={};o&8&&(r.idx=t[3].idx),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function fn(n){let e,l;return e=new on({}),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p:I,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function pn(n){let e,l,t,o,r,s;const c=[fn,un,cn],a=[];function i(u,f){return u[3].kind=="neutral"?0:u[3].kind=="edit-link"?1:u[3].kind=="edit-question"?2:-1}return~(t=i(n))&&(o=a[t]=c[t](n)),{c(){e=k("div"),l=E(),o&&o.c(),r=He()},m(u,f){S(u,e,f),n[7](e),S(u,l,f),~t&&a[t].m(u,f),S(u,r,f),s=!0},p(u,f){let d=t;t=i(u),t===d?~t&&a[t].p(u,f):(o&&(x(),y(a[d],1,1,()=>{a[d]=null}),ee()),~t?(o=a[t],o?o.p(u,f):(o=a[t]=c[t](u),o.c()),v(o,1),o.m(r.parentNode,r)):o=null)},i(u){s||(v(o),s=!0)},o(u){y(o),s=!1},d(u){u&&(L(e),L(l),L(r)),n[7](null),~t&&a[t].d(u)}}}function _n(n){return{c:I,m:I,p:I,i:I,o:I,d:I}}function dn(n){let e,l,t={ctx:n,current:null,token:null,hasCatch:!1,pending:_n,then:an,catch:sn,value:10,blocks:[,,,]};return ct(Gt(new URLSearchParams(window.location.search).get("google")||""),t),{c(){e=k("div"),t.block.c(),J(e,"slot","main"),U(e,"position","relative"),U(e,"width","100%"),U(e,"height","100vh")},m(o,r){S(o,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,l=!0},p(o,r){n=o,ut(t,n,r)},i(o){l||(v(t.block),l=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];y(s)}l=!1},d(o){o&&L(e),t.block.d(),t.token=null,t=null}}}function mn(n){let e,l;return e=new it({props:{$$slots:{main:[dn],left:[rn]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,o){D(e,t,o),l=!0},p(t,[o]){const r={};o&2063&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function hn(n,e,l){let t,o,r,s;F(n,pe,m=>l(4,t=m)),F(n,fe,m=>l(5,o=m)),F(n,ue,m=>l(6,r=m)),F(n,z,m=>l(3,s=m));let c,a,i;function u(m){Y[m?"unshift":"push"](()=>{i=m,l(1,i),l(4,t)})}function f(m){c=m,l(2,c)}function d(m){Y[m?"unshift":"push"](()=>{a=m,l(0,a),l(5,o)})}return n.$$.update=()=>{n.$$.dirty&64&&window.localStorage.setItem("tmp-rcv2",JSON.stringify(r)),n.$$.dirty&33&&a&&o&&(l(0,a.innerHTML="",a),a.appendChild(o)),n.$$.dirty&18&&i&&t&&(l(1,i.innerHTML="",i),i.appendChild(t))},[a,i,c,s,t,o,r,u,f,d]}class gn extends Q{constructor(e){super(),Z(this,e,hn,mn,X,{})}}new gn({target:document.getElementById("app")});
